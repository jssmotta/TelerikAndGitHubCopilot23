/**
 * Kendo UI v2023.3.1114 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.autocomplete.js"),require("kendo.datepicker.js"),require("kendo.numerictextbox.js"),require("kendo.combobox.js"),require("kendo.dropdownlist.js"),require("kendo.icons.js")):"function"==typeof define&&define.amd?define(["kendo.autocomplete.min","kendo.datepicker.min","kendo.numerictextbox.min","kendo.combobox.min","kendo.dropdownlist.min","kendo.icons.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendofiltercell=e.kendofiltercell||{},e.kendofiltercell.js=t())}(this,(function(){return function(e,t){var r=window.kendo,o=r.ui,a=r.data.DataSource,i=o.Widget,l="change",n="boolean",s="enums",u="string",d="Is equal to",p="Is not equal to",c=["isnull","isnotnull","isempty","isnotempty","isnullorempty","isnotnullorempty"];function f(t){var r="string"==typeof t?t:t.operator;return e.inArray(r,c)>-1}function g(t,r){var o=[];if(e.isPlainObject(t))if(t.hasOwnProperty("filters"))o=t.filters;else if(t.field==r)return t;Array.isArray(t)&&(o=t);for(var a=0;a<o.length;a++){var i=g(o[a],r);if(i)return i}}function m(t,r){t.filters&&(t.filters=e.grep(t.filters,(function(e){return m(e,r),e.filters?e.filters.length:e.field!=r})))}var h=i.extend({init:function(o,a){o=e(o).addClass("k-filtercell");var d,p,c,g,m=this.wrapper=e("<span/>").appendTo(o),h=this,v=a,b=h.operators=a.operators||{},y=h.input=e("<input/>").attr(r.attr("bind"),"value: value").appendTo(m),w=a?a.suggestDataSource:null;w&&(a=e.extend({},a,{suggestDataSource:{}})),i.fn.init.call(h,o[0],a),w&&(h.options.suggestDataSource=w),a=h.options,d=h.dataSource=a.dataSource,h.model=d.reader.model,g=a.type=u;var k=(r.getter("reader.model.fields",!0)(d)||{})[a.field];if(k&&k.type&&(g=a.type=k.type),a.values&&(a.type=g=s),b=b[g]||a.operators[g],!v.operator)for(c in b){a.operator=c;break}if(h._parse=function(e){return null!=e?e+"":e},h.model&&h.model.fields){var _=h.model.fields[a.field];_&&_.parse&&(h._parse=_.parse.bind(_))}h.defaultOperator=a.operator,h.viewModel=p=r.observable({operator:a.operator,value:null,operatorVisible:function(){var e=this.get("value");return null!==e&&e!==t&&"undefined"!=e||f(this.get("operator"))&&h.dataSource.filter()&&!h._clearInProgress}}),h._prevOperator=a.operator,p.bind(l,h.updateDsFilter.bind(h)),g==u&&h.initSuggestDataSource(a),null!==a.inputWidth&&(y.addClass("k-sized-input"),y.width(a.inputWidth)),y.attr("aria-label",h._getColumnTitle()),y.attr("title",h._getColumnTitle()),y.attr(r.attr("size"),h.options.size||"medium"),h._setInputType(a,g),g!=n&&!1!==a.showOperators?h._createOperatorDropDown(b):(e('<div unselectable="on" />').css("display","none").text("eq").appendTo(m),m.addClass("k-operator-hidden")),h._createClearIcon(),r.bind(this.wrapper,p),g==u&&(a.template||h.setAutoCompleteSource()),g==s&&h.setComboBoxSource(h.options.values),h._refreshUI(),h._refreshHandler=h._refreshUI.bind(h),h.dataSource.bind(l,h._refreshHandler)},_setInputType:function(t,o){var a=this,i=a.input;if("function"==typeof t.template)t.template.call(a.viewModel,{element:a.input,dataSource:a.suggestDataSource});else if(o==u)i.attr(r.attr("role"),"autocomplete").attr(r.attr("text-field"),t.dataTextField||t.field).attr(r.attr("filter"),t.suggestionOperator).attr(r.attr("delay"),t.delay).attr(r.attr("min-length"),t.minLength).attr(r.attr("value-primitive"),!0);else if("date"==o)i.attr(r.attr("role"),"datepicker").attr("id",r.guid());else if(o==n){i.remove();var l=e("<input type='radio'/>"),d=a.wrapper,p=r.guid(),c=e("<label/>").text(r.htmlEncode(t.messages.isTrue)).append(l);l.attr(r.attr("bind"),"checked:value").attr("name",p).val("true");var f=c.clone().text(r.htmlEncode(t.messages.isFalse));l.clone().val("false").appendTo(f),d.append([c,f])}else"number"==o?i.attr(r.attr("role"),"numerictextbox").attr("title",a._getColumnTitle()):o==s&&i.attr(r.attr("role"),"combobox").attr(r.attr("text-field"),"text").attr(r.attr("suggest"),!0).attr(r.attr("filter"),"contains").attr(r.attr("value-field"),"value").attr(r.attr("value-primitive"),!0)},_getColumnTitle:function(){var e=this.options.column;return e?e.title||e.field:""},_createOperatorDropDown:function(t){var o,a=[],i=this.viewModel;for(var l in t)a.push({text:t[l],value:l});var n=e('<input class="k-dropdown-operator" '+r.attr("bind")+'="value: operator"/>').appendTo(this.wrapper);n.attr("aria-label",this._getColumnTitle()),this.operatorDropDown=n.kendoDropDownList({dataSource:a,size:this.options.size||"medium",dataTextField:"text",dataValueField:"value",open:function(){this.popup.element.width(150)},valuePrimitive:!0}).data("kendoDropDownList"),i.bind("change",(function(){var e=t[i.operator];n.attr("aria-label",e)})),o=this.operatorDropDown.wrapper.attr("aria-label",this._getColumnTitle()).find('span[class*="i-caret-alt-down"]'),r.ui.icon(o,{icon:"filter"})},initSuggestDataSource:function(e){var o,i,l,n=e.suggestDataSource;n instanceof a||(!e.customDataSource&&n&&(n.group=t,n.filter=t),n=this.suggestDataSource=a.create(n)),e.customDataSource||(n._pageSize=t,n.reader.data=(o=n.reader.data,i=this.options.field,l=r.getter(i,!0),function(e){for(var t=o(e),r=[],a=0,i={};a<t.length;){var n=t[a++],s=l(n);i.hasOwnProperty(s)||(r.push(n),i[s]=!0)}return r})),this.suggestDataSource=n},setAutoCompleteSource:function(){var e=this.input.data("kendoAutoComplete");e&&e.setDataSource(this.suggestDataSource)},setComboBoxSource:function(e){var t=a.create({data:e}),r=this.input.data("kendoComboBox");r&&!this.options.template&&r.setDataSource(t)},_refreshUI:function(){var t=this,r=g(t.dataSource.filter(),this.options.field)||{},o=t.viewModel;t.manuallyUpdatingVM=!0,r=e.extend(!0,{},r),t.options.type==n&&o.value!==r.value&&t.wrapper.find(":radio").prop("checked",!1),r.operator&&o.set("operator",r.operator),o.set("value",r.value),e.isEmptyObject(r)&&o.trigger(l,{field:"operatorVisible"}),t.manuallyUpdatingVM=!1},_applyFilter:function(e){e.filters.length?this.dataSource.filter(e):this.dataSource.filter({})},updateDsFilter:function(r){var o,a=this,i=a.viewModel;if("operator"==r.field&&i.value===t&&!f(i)&&f(a._prevOperator))return m(o=a.dataSource.filter()||{filters:[],logic:"and"},a.options.field),a._prevOperator=i.operator,void a._applyFilter(o);if(!(a.manuallyUpdatingVM||"operator"==r.field&&i.value===t&&!f(i)||"operator"==r.field&&a._clearInProgress&&null!==i.value)){var n=e.extend({},a.viewModel.toJSON(),{field:a.options.field});a._prevOperator=n.operator;var s={logic:"and",filters:[]},u=!1;if((n.value!==t&&null!==n.value||f(n)&&!this._clearInProgress)&&(s.filters.push(n),u=a.trigger(l,{filter:s,field:a.options.field})),(a._clearInProgress||null===n.value)&&(u=a.trigger(l,{filter:null,field:a.options.field})),!u){var d=a._merge(s);a._applyFilter(d)}}},_merge:function(t){var r,o,a,i=this,l=t.logic||"and",n=t.filters,s=i.dataSource.filter()||{filters:[],logic:"and"};for(m(s,i.options.field),o=0,a=n.length;o<a;o++)(r=n[o]).value=i._parse(r.value);return n=e.grep(n,(function(e){return""!==e.value&&null!==e.value||f(e)})),n.length&&(s.filters.length?(t.filters=n,"and"!==s.logic&&(s.filters=[{logic:s.logic,filters:s.filters}],s.logic="and"),n.length>1?s.filters.push(t):s.filters.push(n[0])):(s.filters=n,s.logic=l)),s},_createClearIcon:function(){var t=this,o=r.getValidCssClass("k-button-","size",this.options.size||"medium"),a=r.htmlEncode(t.options.messages.clear);e("<button type='button' class='k-button "+o+" k-rounded-md k-button-solid k-button-solid-base k-icon-button' title = '"+a+"'/>").attr("aria-label",a).attr(r.attr("bind"),"visible:operatorVisible").html(r.ui.icon({icon:"filter-clear",iconClass:"k-button-icon"})).on("click",t.clearFilter.bind(t)).appendTo(t.wrapper)},clearFilter:function(){this._clearInProgress=!0,f(this.viewModel.operator)&&this.viewModel.set("operator",this.defaultOperator),this.viewModel.set("value",null),this._clearInProgress=!1},destroy:function(){var e=this;e.filterModel=null,e.operatorDropDown=null,e._refreshHandler&&(e.dataSource.bind(l,e._refreshHandler),e._refreshHandler=null),r.unbind(e.element),i.fn.destroy.call(e),r.destroy(e.element)},events:[l],options:{name:"FilterCell",delay:200,minLength:1,inputWidth:null,values:t,customDataSource:!1,field:"",dataTextField:"",type:"string",suggestDataSource:null,suggestionOperator:"startswith",operator:"eq",showOperators:!0,template:null,messages:{isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",operator:"Operator"},operators:{string:{eq:d,neq:p,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty",isnullorempty:"Has no value",isnotnullorempty:"Has value"},number:{eq:d,neq:p,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:d,neq:p,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},enums:{eq:d,neq:p,isnull:"Is null",isnotnull:"Is not null"}}}});o.plugin(h)}(window.kendo.jQuery),kendo}));
//# sourceMappingURL=kendo.filtercell.min.js.map
