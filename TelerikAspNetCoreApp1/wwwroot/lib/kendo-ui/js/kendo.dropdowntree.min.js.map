{"version":3,"file":"kendo.dropdowntree.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendodropdowntree","js","this","$","undefined$1","subGroup","filter","kendo","window","ui","keys","DISABLED","SELECT","CHECKED","INDETERMINATE","TreeView","node","result","children","length","Tree","extend","init","element","options","dropdowntree","that","fn","call","_isMultipleSelection","wrapper","on","CLICK","_clickSelectedItem","bind","_checkOnSelect","e","isDefaultPrevented","dataItem","set","checked","_setCheckedValue","value","_click","one","currentTarget","_trigger","defaultrefresh","i","action","items","parentNode","loadOnDemand","checkChildren","checkboxes","_skip","field","level","_updateNodes","findByUid","uid","_progress","bubble","_appendItems","index","_remove","_refreshChildren","_refreshRoot","expanded","load","find","attr","trigger","_treeViewDataBound","sender","updateIndeterminate","_previousVisible","lastChild","prev","root","last","_expanded","parent","checkAll","is","filterInput","_keydown","target","key","keyCode","focused","current","checkbox","first","rtl","support","isRtl","RIGHT","LEFT","_nextVisible","hasClass","expand","collapse","_enabled","DOWN","UP","altKey","HOME","END","ENTER","SPACEBAR","prop","data","_checkboxChange","ESC","_closePopup","TAB","preventDefault","select","close","refresh","skipUpdateOnBind","_checkValue","selected","_selectValue","_dropdowntree","jQuery","html","encode","htmlEncode","mediaQuery","Widget","ObservableArray","ObservableObject","activeElement","_activeElement","ns","HIDDENCLASS","WIDTH","browser","outerWidth","_outerWidth","DOT","READONLY","STATEDISABLED","ARIA_DISABLED","FOCUSED","HOVEREVENTS","TABINDEX","OPEN","CLOSE","CHANGE","quotRegExp","CHIP","DropDownTree","_selection","_getSelection","_focusInputHandler","_focusInput","_initial","val","_values","_noInitialValue","_isNullorUndefined","_valueMethodCalled","Array","isArray","slice","bigScreenMQL","smallScreenMQL","adaptiveMode","onChange","popup","isFunction","fullscreen","mediaQueryList","matches","_inputTemplate","_accessors","_setTreeViewOptions","_dataSource","_initWrapper","_applyCssClasses","_placeholder","_tabindex","tree","tabIndex","list","append","_header","_noData","_footer","_reset","_popup","destroy","remove","treeview","_filterHeader","_treeview","_renderFooter","_checkAll","_enable","_toggleCloseVisibility","_aria","_clearButton","autoBind","text","_textAccessor","placeholder","_preselect","parents","enable","label","_label","notify","labelOptions","isPlainObject","content","Label","widget","floatCheck","_floatCheck","_inputLabel","visible","_refreshFloatingLabel","floatingLabel","treeviewOptions","dataImageUrlField","dataSpriteCssClassField","dataTextField","dataUrlField","size","template","rootDataSource","dataSource","HierarchicalDataSource","create","_popupOpen","wrap","_altname","MultipleSelection","SingleSelection","setDataSource","_isDataSourceSet","_tags","setValue","empty","span","show","_multipleTags","name","animation","autoClose","autoWidth","clearButton","dataValueField","delay","enabled","enforceMinLength","height","ignoreCase","messages","singleTag","clear","deleteTag","noData","minLength","noDataTemplate","checkAllTemplate","tagMode","valuePrimitive","footerTemplate","headerTemplate","valueTemplate","filterLabel","fillMode","rounded","events","focus","readonly","_editable","disable","toggle","open","_toggle","_isFilterEnabled","_search","fetch","_allowOpening","_hovered","search","word","clearTimeout","_typingTimeout","_getFilter","_filtering","operator","flatView","_renderNoData","setOptions","console","warn","css","_unwrapFloating","off","_clear","tagList","unbind","_form","_resetHandler","_filter","_setValue","loweredText","toLowerCase","_selectItemByText","role","_activeId","guid","_ariaLabel","id","header","prepend","hide","appendTo","instance","footer","disabled","_adjustListWidth","computedStyle","computedWidth","width","style","getComputedStyle","parseFloat","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontFamily","minWidth","whiteSpace","formId","form","closest","setTimeout","_hasActionSheet","this$1$1","addClass","Popup","anchor","_openHandler","_closeHandler","autosize","deactivate","activate","document","body","ActionSheet","adaptive","hideOverflowContent","closeButton","renderButton","icon","focusOnActivate","toggleClass","_currentValue","currentValue","_value","indexOfValue","isMultiple","_level","indexOf","grep","item","_tagUid","itemToAdd","toJSON","push","itemToRemove","idx","_treeViewCheckAllCheck","splice","_preventChangeTrigger","position","_updateSelectedOptions","tagName","selectedItems","_option","_text","dataValue","dataText","option","replace","_accessor","_clearClick","stopPropagation","_clearTextAndValue","shouldTrigger","_clearValue","_clearInput","_clearText","_assignInstance","assign","split","removeClass","getter","textField","valueField","getterFunction","count","levels","map","x","d","Math","min","_accessorInput","clearTitle","insertAfter","isReadOnly","hasValue","valueDoesNotEqualPlaceHolder","_hideClear","_showClear","_prev","_deselectItem","rootItem","subItems","_checkLoadedItems","rootItems","_valueComparer","_checkLoadedItem","_getAllChecked","_checkCheckAll","_uncheckCheckAll","checkAllCheckbox","_allItemsAreChecked","_allItemsAreUnchecked","filterTemplate","iconClass","_disableCheckChildren","title","_filterChange","insertBefore","renderCheckBox","_changeCheckAll","_keydownCheckAll","_disabledCheckedItems","_disabledUnCheckedItems","isChecked","_updateCheckAll","_toggleCheckAllItems","edge","_clickCheckAll","_dfs","_traverceChildren","_uncheckItemByUid","_uncheckItemEqualsUid","_itemEqualsText","_selectItemByValue","_itemEqualsValue","_checkItemByValue","dataItems","_checkItemEqualsValue","itemText","itemValue","newValue","_allCheckedItems","_getAllCheckedItems","_childrenOptions","schema","_checkAllCheckItem","add","dropDownWrapper","removeAttr","_focusinHandler","_focusoutHandler","_toggleHover","_wrapperClick","_removeTagClick","_prevent","_focused","type","preventScroll","_ie11PreventScrollOnFocus","version","_toggleResize","isFilterInputActive","isWrapperActive","tagItem","isPopupVisible","_focusPrevTag","_focusNextTag","_focusFirstTag","_focusLastTag","DELETE","_removeTag","BACKSPACE","_clearFilter","activedescendant","next","_clearDisabledTag","firstTag","lastTag","fields","lastIndex","plugin","cssProperties","registerPrefix","registerValues","values","roundedValues","concat","Class","view","_wrapper","_span","DOMelement","cssText","className","accesskey","unselectable","SELECTOR","shape","_arrow","_arrowIcon","selectedNode","dropdowntreeHasValue","triggerChange","tempItem","_tagTemplate","_tagList","valueToSelect","tagTemplate","renderChip","themeColor","removable","removeIcon","removableAttr","tagCollection","renderChipList","selectable","viewModel","observable","multipleTag","tags","_refreshTagListAria","oldValues","_removeValues","removedValues","_getNewValues","j","tagsArray","_findTag","tempItemValue"],"sources":["kendo.dropdowntree.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.treeview.js'), require('kendo.popup.js'), require('kendo.actionsheet.js'), require('kendo.binder.js'), require('kendo.html.chip.js'), require('kendo.html.chiplist.js'), require('kendo.html.button.js'), require('kendo.html.input.js'), require('kendo.label.js'), require('kendo.icons.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.treeview', 'kendo.popup', 'kendo.actionsheet', 'kendo.binder', 'kendo.html.chip', 'kendo.html.chiplist', 'kendo.html.button', 'kendo.html.input', 'kendo.label', 'kendo.icons'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendodropdowntree = global.kendodropdowntree || {}, global.kendodropdowntree.js = factory()));\n})(this, (function () {\n    (function($, undefined$1) {\n\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            keys = kendo.keys,\n            DISABLED = \"k-disabled\",\n            SELECT = \"select\",\n            CHECKED = \"checked\",\n            DATABOUND = \"dataBound\",\n            CLICK = \"click\",\n            NS = \".kendoTreeView\",\n            INDETERMINATE = \"indeterminate\",\n            NAVIGATE = \"navigate\",\n            subGroup,\n            TreeView = ui.TreeView;\n\n            function contentChild(filter) {\n                return function(node) {\n                    var result = node.children(\".k-animation-container\");\n\n                    if (!result.length) {\n                        result = node;\n                    }\n\n                    return result.children(filter);\n                };\n            }\n\n            subGroup = contentChild(\".k-group\");\n\n        var Tree = TreeView.extend({\n            init: function(element, options, dropdowntree) {\n                var that = this;\n\n                that.dropdowntree = dropdowntree;\n\n                TreeView.fn.init.call(that, element, options);\n                if (that.dropdowntree._isMultipleSelection()) {\n                    that.wrapper.on(CLICK + NS, '.k-in.k-selected', that._clickSelectedItem.bind(that));\n                }\n            },\n\n            _checkOnSelect: function(e) {\n                if (!e.isDefaultPrevented()) {\n                    var dataItem = this.dataItem(e.node);\n\n                    dataItem.set(\"checked\", !dataItem.checked);\n                }\n            },\n\n            _setCheckedValue: function(node, value) {\n                node.set(CHECKED, value);\n            },\n\n            _click: function(e) {\n                var that = this;\n\n                if (that.dropdowntree._isMultipleSelection()) {\n                    that.one(\"select\", that._checkOnSelect);\n                }\n                TreeView.fn._click.call(that, e);\n            },\n\n            _clickSelectedItem: function(e) {\n                var that = this,\n                node = $(e.currentTarget);\n\n                that.one(\"select\", that._checkOnSelect);\n                if (!that._trigger(SELECT, node)) {\n                    that.dataItem(node).set(\"selected\", false);\n                }\n            },\n\n            defaultrefresh: function(e) {\n                var that = this;\n                var node = e.node;\n                var action = e.action;\n                var items = e.items;\n                var parentNode = this.wrapper;\n                var options = this.options;\n                var loadOnDemand = options.loadOnDemand;\n                var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n                var i;\n\n                if (this._skip) {\n                    return;\n                }\n\n                if (e.field) {\n                    if (!items[0] || !items[0].level) {\n                        return;\n                    }\n\n                    return this._updateNodes(items, e.field);\n                }\n\n                if (node) {\n                    parentNode = this.findByUid(node.uid);\n                    this._progress(parentNode, false);\n                }\n\n                if (checkChildren && action != \"remove\") {\n                    var bubble = false;\n\n                    for (i = 0; i < items.length; i++) {\n                        if (\"checked\" in items[i]) {\n                            bubble = true;\n                            break;\n                        }\n                    }\n\n                    if (!bubble && node && node.checked) {\n                        for (i = 0; i < items.length; i++) {\n                            items[i].checked = true;\n                        }\n                    }\n                }\n\n                if (action == \"add\") {\n                    this._appendItems(e.index, items, parentNode);\n                } else if (action == \"remove\") {\n                    this._remove(this.findByUid(items[0].uid), false);\n                } else if (action == \"itemchange\") {\n                    this._updateNodes(items);\n                } else if (action == \"itemloaded\") {\n                    this._refreshChildren(parentNode, items, e.index);\n                } else {\n                    this._refreshRoot(items);\n                }\n\n                if (action != \"remove\") {\n                    for (i = 0; i < items.length; i++) {\n                        if (!loadOnDemand || items[i].expanded) {\n                            items[i].load();\n                        }\n                    }\n                }\n\n                that.wrapper.find(\">ul\").attr(\"role\", \"tree\");\n\n                this.trigger(DATABOUND, { node: node ? parentNode : undefined$1 });\n                this.dropdowntree._treeViewDataBound({ node: node ? parentNode : undefined$1, sender: this });\n                if (this.options.checkboxes.checkChildren) {\n                    this.updateIndeterminate();\n                }\n            },\n\n            _previousVisible: function(node) {\n                var that = this,\n                    lastChild,\n                    result;\n\n                if (!node.length || node.prev().length) {\n                    if (node.length) {\n                        result = node.prev();\n                    } else {\n                        result = that.root.children().last();\n                    }\n\n                    while (that._expanded(result)) {\n                        lastChild = subGroup(result).children().last();\n\n                        if (!lastChild.length) {\n                            break;\n                        }\n\n                        result = lastChild;\n                    }\n                } else {\n                    result = that.parent(node) || node;\n\n                    if (!result.length) {\n                        if (that.dropdowntree.checkAll && that.dropdowntree.checkAll.is(\":visible\")) {\n                            that.dropdowntree.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n                        } else if (that.dropdowntree.filterInput) {\n                            that.dropdowntree.filterInput.trigger(\"focus\");\n                        } else {\n                            that.dropdowntree.wrapper.trigger(\"focus\");\n                        }\n                    }\n                }\n\n                return result;\n            },\n\n            _keydown: function(e) {\n                var that = this,\n                    key = e.keyCode,\n                    target,\n                    focused = that.current(),\n                    expanded = that._expanded(focused),\n                    checkbox = focused.find(\".k-checkbox-wrapper\").first().find(\":checkbox\"),\n                    rtl = kendo.support.isRtl(that.element);\n\n                if (e.target != e.currentTarget) {\n                    return;\n                }\n\n                if ((!rtl && key == keys.RIGHT) || (rtl && key == keys.LEFT)) {\n                    if (expanded) {\n                        target = that._nextVisible(focused);\n                    } else if (!focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                        that.expand(focused);\n                    }\n                } else if ((!rtl && key == keys.LEFT) || (rtl && key == keys.RIGHT)) {\n                    if (expanded && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                        that.collapse(focused);\n                    } else {\n                        target = that.parent(focused);\n\n                        if (!that._enabled(target)) {\n                            target = undefined$1;\n                        }\n                    }\n                } else if (key == keys.DOWN) {\n                    target = that._nextVisible(focused);\n                } else if (key == keys.UP && !e.altKey) {\n                    target = that._previousVisible(focused);\n                } else if (key == keys.HOME) {\n                    target = that._nextVisible($());\n                } else if (key == keys.END) {\n                    target = that._previousVisible($());\n                } else if (key == keys.ENTER && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    if (!focused.find(\".k-in\").first().hasClass(\"k-selected\")) {\n                        if (!that._trigger(SELECT, focused)) {\n                            that.select(focused);\n                        }\n                    }\n                } else if (key == keys.SPACEBAR && checkbox.length && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    checkbox.prop(CHECKED, !checkbox.prop(CHECKED))\n                        .data(INDETERMINATE, false)\n                        .prop(INDETERMINATE, false);\n\n                    that._checkboxChange({ target: checkbox });\n\n                    target = focused;\n                } else if ((e.altKey && key === keys.UP) || key === keys.ESC) {\n                    that._closePopup();\n                } else if ( key === keys.TAB) {\n                    e.preventDefault();\n                    that._closePopup();\n                }\n\n                if (target) {\n                    e.preventDefault();\n\n                    if (focused[0] != target[0]) {\n                        that._trigger(NAVIGATE, target);\n                        that.current(target);\n                    }\n                }\n            },\n\n            _closePopup: function() {\n                this.dropdowntree.close();\n                this.dropdowntree.wrapper.trigger(\"focus\");\n            },\n\n            refresh: function(e) {\n                this.defaultrefresh(e);\n\n                if (this.dropdowntree.options.skipUpdateOnBind) {\n                    return;\n                }\n\n                if (e.action === \"itemchange\") {\n                    if (this.dropdowntree._isMultipleSelection()) {\n                        if (e.field === \"checked\") {\n                            this.dropdowntree._checkValue(e.items[0]);\n                        }\n                    } else {\n                        if (e.field !== \"checked\" && e.field !== \"expanded\" && e.items[0].selected) {\n                            this.dropdowntree._selectValue(e.items[0]);\n                        }\n                    }\n                } else {\n                    this.dropdowntree.refresh(e);\n                }\n            }\n\n        });\n\n        kendo.ui._dropdowntree = Tree;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"dropdowntree\",\n        name: \"DropDownTree\",\n        category: \"web\",\n        description: \"The DropDownTree widget displays a hierarchy of items and allows the selection of single or multiple items.\",\n        depends: [ \"treeview\", \"popup\", \"binder\", \"html.chip\", \"html.chiplist\", \"html.button\", \"html.input\", \"label\", \"icons\", \"actionsheet\" ]\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            ui = kendo.ui,\n            html = kendo.html,\n            encode = kendo.htmlEncode,\n            mediaQuery = kendo.mediaQuery,\n            Widget = ui.Widget,\n            TreeView = ui._dropdowntree,\n            ObservableArray = kendo.data.ObservableArray,\n            ObservableObject = kendo.data.ObservableObject,\n            extend = $.extend,\n            activeElement = kendo._activeElement,\n            ns = \".kendoDropDownTree\",\n            keys = kendo.keys,\n            support = kendo.support,\n            HIDDENCLASS = \"k-hidden\",\n            WIDTH = \"width\",\n            browser = support.browser,\n            outerWidth = kendo._outerWidth,\n            DOT = \".\",\n            DISABLED = \"disabled\",\n            READONLY = \"readonly\",\n            STATEDISABLED = \"k-disabled\",\n            ARIA_DISABLED = \"aria-disabled\",\n            HOVER = \"k-hover\",\n            FOCUSED = \"k-focus\",\n            HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n            TABINDEX = \"tabindex\",\n            CLICK = \"click\",\n            OPEN = \"open\",\n            CLOSE = \"close\",\n            CHANGE = \"change\",\n            quotRegExp = /\"/g,\n\n            CHIP = \".k-chip\";\n\n        var DropDownTree = kendo.ui.Widget.extend( {\n            init: function(element, options) {\n                var that = this;\n                this.ns = ns;\n\n                kendo.ui.Widget.fn.init.call(this, element, options);\n                this._selection = this._getSelection();\n                this._focusInputHandler = this._focusInput.bind(this);\n                this._initial = this.element.val();\n\n                this._values = [];\n\n                var value = this.options.value;\n\n                if (value === null || !value.length) {\n                    this._noInitialValue = true;\n                }\n\n                if (!this._isNullorUndefined(value)) {\n                    this._valueMethodCalled = true;\n                    this._values = Array.isArray(value) ? value.slice(0) : [value];\n                }\n\n                that.bigScreenMQL = mediaQuery(\"large\");\n                that.smallScreenMQL = mediaQuery(\"small\");\n                if (that.options.adaptiveMode == \"auto\") {\n                    that.smallScreenMQL.onChange(function() {\n                        if (that.popup && kendo.isFunction(that.popup.fullscreen)) {\n                            that.popup.fullscreen(that.smallScreenMQL.mediaQueryList.matches);\n                        }\n                    });\n                }\n\n                this._inputTemplate();\n\n                this._accessors();\n                this._setTreeViewOptions(this.options);\n                this._dataSource();\n                this._selection._initWrapper();\n                this._applyCssClasses();\n                this._placeholder(true);\n                this._tabindex();\n                this.wrapper.data(TABINDEX, this.wrapper.attr(TABINDEX));\n\n                this.tree = $('<div/>')\n                .attr({\n                    tabIndex: -1,\n                    \"aria-hidden\": true\n                });\n\n                this.list = $(\"<div/>\")\n                    .append(this.tree);\n\n                this._header();\n                this._noData();\n                this._footer();\n                this._reset();\n                this._popup();\n\n                if (that.options.adaptiveMode == \"auto\") {\n                    that.bigScreenMQL.onChange(function () {\n                        that.list = $(\"<div class='k-list-container'/>\")\n                            .append(that.tree);\n                        that._header.bind(that)();\n                        that._noData.bind(that)();\n                        that._footer.bind(that)();\n                        that._reset.bind(that)();\n\n                        if (that.popup) {\n                            that.popup.destroy();\n                            that.popup.element.remove();\n                            that.popup = null;\n                        }\n                        if (that.treeview) {\n                            that.treeview.destroy();\n                        }\n\n                        that._popup.bind(that)();\n                        that._filterHeader.bind(that)();\n                        that._treeview.bind(that)();\n\n                        that._renderFooter.bind(that)();\n\n                        that._checkAll.bind(that)();\n                        that._enable.bind(that)();\n                        that._toggleCloseVisibility.bind(that)();\n\n                        that._aria.bind(that)();\n                    });\n                }\n\n                this._clearButton();\n                this._filterHeader();\n                this._treeview();\n\n                this._renderFooter();\n\n                this._checkAll();\n                this._enable();\n                this._toggleCloseVisibility();\n\n                if (!this.options.autoBind) {\n                    var text = options.text || \"\";\n                    if (!this._isNullorUndefined(options.value)) {\n                        this._preselect(options.value);\n                    } else if (text) {\n                        this._textAccessor(text);\n                    } else if (options.placeholder) {\n                        this._placeholder(true);\n                    }\n                }\n\n                var disabled = $(this.element).parents(\"fieldset\").is(':disabled');\n\n                if (disabled) {\n                    this.enable(false);\n                }\n                this._valueMethodCalled = false;\n\n                if (this.options.label) {\n                    this._label();\n                }\n\n                this._aria();\n\n                kendo.notify(this);\n            },\n\n            _label: function() {\n                var that = this;\n                var options = that.options;\n                var labelOptions = $.isPlainObject(options.label) ? options.label : {\n                    content: options.label\n                };\n\n                that.label = new kendo.ui.Label(null, $.extend({}, labelOptions, {\n                    widget: that,\n                    floatCheck: that._floatCheck.bind(that)\n                }));\n\n                that._inputLabel = that.label.element;\n            },\n\n            _floatCheck: function() {\n                var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length || this.text();\n                return !hasValue && !this.popup.visible();\n            },\n\n            _refreshFloatingLabel: function() {\n                var that = this;\n\n                if (that.label && that.label.floatingLabel) {\n                    that.label.floatingLabel.refresh();\n                }\n            },\n\n            _preselect: function(data, value) {\n                this._selection._preselect(data, value);\n            },\n\n            _setTreeViewOptions: function(options) {\n                var treeviewOptions = {\n                    autoBind: options.autoBind,\n                    checkboxes: options.checkboxes,\n                    dataImageUrlField: options.dataImageUrlField,\n                    dataSpriteCssClassField: options.dataSpriteCssClassField,\n                    dataTextField: options.dataTextField,\n                    dataUrlField: options.dataUrlField,\n                    loadOnDemand: options.loadOnDemand,\n                    size: options.size\n                };\n\n                this.options.treeview = $.extend({}, treeviewOptions, this.options.treeview);\n\n                if (options.template) {\n                    this.options.treeview.template = options.template;\n                }\n\n                if (options.size) {\n                    this.options.treeview.size = options.size;\n                }\n            },\n\n            _dataSource: function() {\n                var rootDataSource = this.options.dataSource;\n\n                this.dataSource = kendo.data.HierarchicalDataSource.create(rootDataSource);\n                if (rootDataSource) {\n                    $.extend(this.options.treeview,{\n                        dataSource: this.dataSource\n                    });\n                }\n            },\n\n            _popupOpen: function() {\n                var popup = this.popup;\n                popup.wrapper = kendo.wrap(popup.element);\n            },\n\n            _getSelection: function() {\n                if (this._isMultipleSelection()) {\n                    this.options._altname = \"MultiSelectTree\";\n                    return new ui.DropDownTree.MultipleSelection(this);\n                } else {\n                    return new ui.DropDownTree.SingleSelection(this);\n                }\n            },\n\n            setDataSource: function(dataSource) {\n                this._isDataSourceSet = true;\n                if (this._tags) {\n                    this._noInitialValue = true;\n                    this.setValue([]);\n                    this._tags.empty();\n                    this.span.show();\n                    this._multipleTags.empty();\n                }\n                this.dataSource = dataSource;\n                this.treeview.setDataSource(dataSource);\n                this._isDataSourceSet = false;\n            },\n\n            _isMultipleSelection: function() {\n                return this.options && (this.options.treeview.checkboxes || this.options.checkboxes);\n            },\n\n            options: {\n                name: \"DropDownTree\",\n                adaptiveMode: \"none\",\n                animation: {},\n                autoBind: true,\n                autoClose: true,\n                autoWidth: false,\n                clearButton: true,\n                dataTextField: \"\",\n                dataValueField: \"\",\n                dataImageUrlField: \"\",\n                dataSpriteCssClassField: \"\",\n                dataUrlField: \"\",\n                delay: 500,\n                enabled: true,\n                enforceMinLength: false,\n                filter: \"none\",\n                height: 200,\n                ignoreCase: true,\n                index: 0,\n                loadOnDemand: false,\n                messages: {\n                    \"singleTag\": \"item(s) selected\",\n                    \"clear\": \"clear\",\n                    \"deleteTag\": \"delete\",\n                    \"noData\": \"No data found.\"\n                },\n                minLength: 1,\n                checkboxes: false,\n                noDataTemplate: true,\n                placeholder: \"\",\n                checkAll: false,\n                checkAllTemplate: function () { return \"Check all\"; },\n                tagMode: \"multiple\",\n                template: null,\n                text: null,\n                treeview: {},\n                valuePrimitive: false,\n                footerTemplate: function () { return \"\"; },\n                headerTemplate: function () { return \"\"; },\n                value: null,\n                valueTemplate: null,\n                popup: null,\n                filterLabel: null,\n                size: \"medium\",\n                fillMode: \"solid\",\n                rounded: \"medium\",\n                label: null\n            },\n\n            events: [\n                \"open\",\n                \"close\",\n                \"dataBound\",\n                CHANGE,\n                \"select\",\n                \"filtering\"\n            ],\n\n            focus: function() {\n                this.wrapper.trigger(\"focus\");\n            },\n\n            dataItem: function(node) {\n                return this.treeview.dataItem(node);\n            },\n\n            readonly: function(readonly) {\n                this._editable({\n                    readonly: readonly === undefined$1 ? true : readonly,\n                    disable: false\n                });\n                this._toggleCloseVisibility();\n\n                if (this.label && this.label.floatingLabel) {\n                    this.label.floatingLabel.readonly(readonly === undefined$1 ? true : readonly);\n                }\n            },\n\n            enable: function(enable) {\n                this._editable({\n                    readonly: false,\n                    disable: !(enable = enable === undefined$1 ? true : enable)\n                });\n                this._toggleCloseVisibility();\n\n                if (this.label && this.label.floatingLabel) {\n                    this.label.floatingLabel.enable(enable = enable === undefined$1 ? true : enable);\n                }\n            },\n\n            toggle: function(open) {\n                this._toggle(open);\n            },\n\n            open: function() {\n                var popup = this.popup;\n\n                if (!this.options.autoBind && !this.dataSource.data().length) {\n                    this.treeview._progress(true);\n                    if (this._isFilterEnabled()) {\n                        this._search();\n                    } else {\n                        this.dataSource.fetch();\n                    }\n                }\n\n                if (popup.visible() || !this._allowOpening()) {\n                    return;\n                }\n\n                popup.one(\"activate\", this._focusInputHandler);\n                popup._hovered = true;\n                popup.open();\n            },\n\n            close: function() {\n                this.popup.close();\n            },\n\n            search: function(word) {\n                var options = this.options;\n                var filter;\n                clearTimeout(this._typingTimeout);\n\n                if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                    filter = this._getFilter(word);\n                    if (this.trigger(\"filtering\", { filter: filter }) ||\n                     Array.isArray(this.options.dataTextField)) {\n                        return;\n                    }\n\n                    this._filtering = true;\n                    this.treeview.dataSource.filter(filter);\n                }\n            },\n\n            _getFilter: function(word) {\n                return {\n                    field: this.options.dataTextField,\n                    operator: this.options.filter,\n                    value: word,\n                    ignoreCase: this.options.ignoreCase\n                  };\n            },\n\n            refresh: function() {\n                var data = this.treeview.dataSource.flatView();\n                this._renderFooter();\n                this._renderNoData();\n                if (this.filterInput && this.checkAll) {\n                    this.checkAll.toggle(!this.filterInput.val().length);\n                }\n\n                this.tree.toggle(!!data.length);\n                $(this.noData).toggle(!data.length);\n            },\n\n            setOptions: function(options) {\n                if (this.options.checkboxes != options.checkboxes) {\n                    delete options.checkboxes;\n                    window.console.warn('setOptions method can not be used to set the checkboxes option in DropDownTree');\n                }\n\n                Widget.fn.setOptions.call(this, options);\n\n                this._setTreeViewOptions(options);\n                this._dataSource();\n                if (this.options.treeview || options.size) {\n                    this.treeview.setOptions(this.options.treeview);\n                }\n\n                if (options.height && this.tree) {\n                    this.tree.css('max-height', options.height);\n                }\n\n                this._header();\n                this._noData();\n                this._footer();\n\n                this._renderFooter();\n                this._renderNoData();\n                if (this.span && (this._isMultipleSelection() || this.span.hasClass(\"k-readonly\"))) {\n                    this._placeholder(true);\n                }\n                this._inputTemplate();\n                this._accessors();\n                this._filterHeader();\n                this._checkAll();\n                this._enable();\n                if (options && (options.enable || options.enabled)) {\n                    this.enable(true);\n                }\n                this._clearButton();\n\n                if (options === undefined$1 || options === null) {\n                    options = {};\n                }\n\n                if (options.label && this._inputLabel) {\n                    this.label.setOptions(options.label);\n                } else if (options.label === false) {\n                    this.label._unwrapFloating();\n                    this._inputLabel.remove();\n                    delete this._inputLabel;\n                } else if (options.label) {\n                    this._label();\n                }\n            },\n\n            destroy: function() {\n                kendo.ui.Widget.fn.destroy.call(this);\n                if (this.treeview) {\n                    this.treeview.destroy();\n                }\n                this.popup.destroy();\n\n                this.wrapper.off(ns);\n                this._clear.off(ns);\n                if (this.filterInput) {\n                    this.filterInput.off(ns);\n                }\n\n                if (this.tagList) {\n                    this.tagList.off(ns);\n                }\n\n                if (this.bigScreenMQL) {\n                    this.bigScreenMQL.destroy();\n                }\n\n                if (this.smallScreenMQL) {\n                    this.smallScreenMQL.destroy();\n                }\n\n                kendo.unbind(this.tagList);\n                if (this.options.checkAll && this.checkAll) {\n                    this.checkAll.off(ns);\n                }\n\n                if (this._form) {\n                    this._form.off(\"reset\", this._resetHandler);\n                }\n\n                if (this.label) {\n                    this.label.destroy();\n                }\n            },\n\n            setValue: function(value) {\n                value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n                this._values = value;\n            },\n\n            items: function() {\n                return this.treeview.items();\n            },\n\n            value: function(value) {\n                var that = this;\n\n                if (value) {\n                    if (that.filterInput && that.dataSource._filter) {\n                        that._filtering = true;\n                        that.dataSource.filter({});\n                    } else if (!that.dataSource.data().length || !that.treeview.dataSource.data().length) {\n                        if (!that.options.loadOnDemand) {\n                            that.treeview.one('loadCompleted', function() {\n                                that._selection._setValue(value);\n                            });\n\n                            if (!that.options.autoBind && that.options.valuePrimitive) {\n                                that.dataSource.fetch();\n                            }\n                        } else {\n                            that.dataSource.fetch(function() {\n                                that._selection._setValue(value);\n                            });\n                        }\n\n                        return;\n                    }\n                }\n\n                return that._selection._setValue(value);\n            },\n\n            text: function(text) {\n                var loweredText;\n                var ignoreCase = this.options.ignoreCase;\n\n                text = text === null ? \"\" : text;\n\n                if (text !== undefined$1 && !this._isMultipleSelection()) {\n                    if (typeof text !== \"string\") {\n                        this._textAccessor(text);\n                        return;\n                    }\n\n                    loweredText = ignoreCase ? text : text.toLowerCase();\n\n                    this._selectItemByText(loweredText);\n\n                    this._textAccessor(loweredText);\n                    this._refreshFloatingLabel();\n                } else {\n                    return this._textAccessor();\n                }\n\n            },\n\n            _aria: function() {\n                var input = this.wrapper.find(\"span.k-input-inner\");\n\n                this.wrapper.attr({\n                    \"aria-haspopup\": \"tree\",\n                    \"aria-expanded\": false,\n                    \"aria-controls\": this.treeview.element.attr(\"id\"),\n                    \"role\": \"combobox\"\n                });\n\n                this._activeId = kendo.guid();\n                this._ariaLabel(this.wrapper);\n\n                if (this.filterInput && this.options.filterLabel) {\n                    this.filterInput.attr(\"aria-label\", this.options.filterLabel);\n                }\n\n                if (this.options.checkboxes) {\n                    this.wrapper.attr({\n                        \"aria-describedby\": this.tagList[0].id\n                    });\n                    this.tagList.attr({\n                        \"role\": \"listbox\",\n                        \"aria-orientation\": \"horizontal\",\n                        \"aria-multiselectable\": true\n                    });\n                    this._ariaLabel(this.tagList);\n                }\n            },\n\n            _header: function() {\n                var list = this;\n                var header = $(list.header);\n                var template = list.options.headerTemplate;\n\n                kendo.destroy(header);\n                header.remove();\n\n                if (!template) {\n                    list.header = null;\n                    return;\n                }\n\n                var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n                header = $(headerTemplate({}));\n\n                list.header = header[0] ? header : null;\n                list.list.prepend(header);\n            },\n\n            _noData: function() {\n                var list = this;\n                var noData = $(list.noData);\n                var template = list.options.noDataTemplate === true ? encode(list.options.messages.noData) : list.options.noDataTemplate;\n\n                kendo.destroy(noData);\n                noData.remove();\n\n                if (!template) {\n                    list.noData = null;\n                    return;\n                }\n\n                list.noData = $('<div class=\"k-no-data\"></div>').hide().appendTo(list.list);\n                list.noDataTemplate = typeof template !== \"function\" ? kendo.template(function () { return template; }) : template;\n            },\n\n            _renderNoData: function() {\n                var list = this;\n                var noData = list.noData;\n\n                if (!noData) {\n                    return;\n                }\n\n                noData.html(list.noDataTemplate({ instance: list }));\n            },\n\n            _footer: function() {\n                var list = this;\n                var footer = $(list.footer);\n                var template = list.options.footerTemplate;\n\n                kendo.destroy(footer);\n                footer.remove();\n\n                if (!template) {\n                    list.footer = null;\n                    return;\n                }\n\n                list.footer = $('<div class=\"k-footer\"></div>').appendTo(list.list);\n                list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            },\n\n            _renderFooter: function() {\n                var list = this;\n                var footer = list.footer;\n\n                if (!footer) {\n                    return;\n                }\n\n                footer.html(list.footerTemplate({ instance: list }));\n            },\n\n            _enable: function() {\n                var that = this,\n                    options = that.options,\n                    disabled = that.element.is(\"[disabled]\");\n\n                if (options.enable !== undefined$1) {\n                    options.enabled = options.enable;\n                }\n\n                if (!options.enabled || disabled) {\n                    that.enable(false);\n                } else {\n                    that.readonly(that.element.is(\"[readonly]\"));\n                }\n            },\n\n            _adjustListWidth: function() {\n                var that = this,\n                    list = that.list,\n                    width = list[0].style.width,\n                    wrapper = that.wrapper,\n                    computedStyle, computedWidth;\n\n                if (!list.data(WIDTH) && width) {\n                    return;\n                }\n\n                computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n                computedWidth = parseFloat(computedStyle && computedStyle.width) || outerWidth(wrapper);\n\n                if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                    computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n                }\n\n                if (list.css(\"box-sizing\") !== \"border-box\") {\n                    width = computedWidth - (outerWidth(list) - list.width());\n                } else {\n                    width = computedWidth;\n                }\n\n                list.css({\n                    fontFamily: wrapper.css(\"font-family\"),\n                    width: that.options.autoWidth ? \"auto\" : width,\n                    minWidth: width,\n                    whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n                })\n                .data(WIDTH, width);\n\n                return true;\n            },\n\n            _reset: function() {\n                var that = this,\n                    element = that.element,\n                    formId = element.attr(\"form\"),\n                    form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n                if (form[0]) {\n                    that._resetHandler = function() {\n                        setTimeout(function() {\n                            that.value(that._initial);\n                        });\n                    };\n\n                    that._form = form.on(\"reset\", that._resetHandler);\n                }\n            },\n\n            _hasActionSheet: function() {\n                return this.options.adaptiveMode === \"auto\" && !this.bigScreenMQL.mediaQueryList.matches;\n            },\n\n            _popup: function() {\n                var this$1$1 = this;\n\n                var that = this;\n                var list = this;\n\n                if (that.options.checkboxes) {\n                    if (that.options.checkAll) {\n                        that.list.attr(\"role\", \"application\");\n                    }\n\n                    that.list.addClass(\"k-multiselecttree-popup\");\n                } else {\n                    that.list.addClass(\"k-dropdowntree-popup\");\n                }\n\n                if (list.options.adaptiveMode == \"auto\" && !list.bigScreenMQL.mediaQueryList.matches) {\n                    $(document.body).append(list.list);\n                    list.popup = new ui.ActionSheet(list.list, {\n                        adaptive: true,\n                        hideOverflowContent: true,\n                        headerTemplate: function (options) { return \"<div class=\\\"k-text-center k-actionsheet-titlebar\\\" >\" +\n                                '<div class=\"k-actionsheet-titlebar-group k-hbox\">' +\n                                    \"<div  class=\\\"k-actionsheet-title\\\">\" +\n                                        \"<div class=\\\"k-text-center\\\">\" + (list.label ? list.label.element.text() : list.options.label || list.options.placeholder || \"Select\") + \"</div>\" +\n                                        (list.options.placeholder && (list.label || list.options.label) ? (\"<div class=\\\"k-actionsheet-subtitle k-text-center\\\">\" + (list.options.placeholder || \"\") + \"</div>\") : \"\") +\n                                    '</div>' +\n                                    (options.closeButton ?\n                                    '<div class=\"k-actionsheet-actions\">' +\n                                        kendo.html.renderButton((\"<button tabindex=\\\"-1\\\" \" + (kendo.attr(\"ref-actionsheet-close-button\")) + \"></button>\"), { icon: \"x\", fillMode: \"flat\", size: \"large\" }) +\n                                    '</div>'\n                                    : \"\") +\n                                    '</div>' +\n                                (this$1$1._isFilterEnabled() ? \"<div class=\\\"k-actionsheet-titlebar-group k-actionsheet-filter\\\"></div>\" : '') +\n                            '</div>'; },\n                        closeButton: true,\n                        focusOnActivate: false,\n                        fullscreen: list.smallScreenMQL.mediaQueryList.matches,\n                        popup: extend({}, list.options.popup, {\n                            anchor: list.wrapper,\n                            open: list._openHandler.bind(list),\n                            close: list._closeHandler.bind(list),\n                            animation: list.options.animation,\n                            isRtl: support.isRtl(list.wrapper),\n                            autosize: list.options.autoWidth,\n                        }),\n                        deactivate: function () {\n                            this$1$1._refreshFloatingLabel();\n                        },\n                        activate: function () {\n                            this$1$1._refreshFloatingLabel();\n                        }\n                    });\n                } else {\n                    list.popup = new ui.Popup(list.list, extend({}, list.options.popup, {\n                        anchor: list.wrapper,\n                        open: list._openHandler.bind(list),\n                        close: list._closeHandler.bind(list),\n                        animation: list.options.animation,\n                        isRtl: support.isRtl(list.wrapper),\n                        autosize: list.options.autoWidth,\n                        deactivate: function () {\n                            this$1$1._refreshFloatingLabel();\n                        },\n                        activate: function () {\n                            this$1$1._refreshFloatingLabel();\n                        }\n                    }));\n\n                    list.popup.one(\"open\", list._popupOpen.bind(list));\n                }\n            },\n\n            _allowOpening: function() {\n                return this.options.noDataTemplate || this.treeview.dataSource.flatView().length;\n            },\n\n            _placeholder: function(show) {\n                if (this.span) {\n                    this.span.toggleClass(\"k-readonly\", show).text(show ? this.options.placeholder : \"\");\n                }\n            },\n\n            _currentValue: function(dataItem) {\n                var currentValue = this._value(dataItem);\n                if (!currentValue && currentValue !== 0) {\n                    currentValue = dataItem;\n                }\n\n                return currentValue;\n            },\n\n            _checkValue: function(dataItem) {\n                var value = \"\";\n                var indexOfValue = -1;\n                var currentValue = this.value();\n                var isMultiple = this.options.tagMode === \"multiple\";\n\n                if (dataItem || dataItem === 0) {\n                    if (dataItem.level) {\n                        dataItem._level = dataItem.level();\n                    }\n\n                    value = this._currentValue(dataItem);\n\n                    indexOfValue = currentValue.indexOf(value);\n                }\n\n                if (dataItem.checked) {\n                    var alreadyAddedTag = $.grep(this._tags, function( item ) {\n                        return item.uid === dataItem._tagUid;\n                    });\n\n                    if (alreadyAddedTag.length) {\n                        return;\n                    }\n\n                    var itemToAdd = new ObservableObject(dataItem.toJSON());\n                    dataItem._tagUid = itemToAdd.uid;\n                    this._tags.push(itemToAdd);\n\n                    if (this._tags.length === 1) {\n                        this.span.hide();\n\n                        if (!isMultiple) {\n                            this._multipleTags.push(itemToAdd);\n                        }\n                    }\n\n                    if (indexOfValue === -1) {\n                        currentValue.push(value);\n                        this.setValue(currentValue);\n                    }\n                } else {\n                    var itemToRemove = this._tags.find(function(item) {\n                        return item.uid === dataItem._tagUid;\n                    });\n\n                    var idx = this._tags.indexOf(itemToRemove);\n\n                    if (idx !== -1) {\n                        this._tags.splice(idx, 1);\n                    } else {\n                        this._treeViewCheckAllCheck(dataItem);\n                        return;\n                    }\n\n                    if (this._tags.length === 0) {\n                        this.span.show();\n                        if (!isMultiple) {\n                            this._multipleTags.splice(0, 1);\n                        }\n                    }\n                    if (indexOfValue !== -1) {\n                        currentValue.splice(indexOfValue, 1);\n                        this.setValue(currentValue);\n                    }\n                }\n\n                this._treeViewCheckAllCheck(dataItem);\n                if (!this._preventChangeTrigger && !this._valueMethodCalled && !this._noInitialValue) {\n                    this.trigger(CHANGE);\n                }\n\n                if (this.options.autoClose && this.popup.visible()) {\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                }\n\n                this.popup.position();\n                this._toggleCloseVisibility();\n                this._updateSelectedOptions();\n            },\n\n            _updateSelectedOptions: function() {\n                if (this.element[0].tagName.toLowerCase() !== 'select') {\n                    return;\n                }\n\n                var selectedItems = this._tags;\n                var options = '';\n                var dataItem = null;\n                var value = null;\n\n                if (selectedItems.length) {\n                    for (var idx = 0; idx < selectedItems.length; idx++) {\n                        dataItem = selectedItems[idx];\n\n                        value = this._value(dataItem);\n                        options += this._option(value, this._text(dataItem), true);\n                    }\n                }\n\n                this.element.html(options);\n            },\n\n            _option: function(dataValue, dataText, selected) {\n                var option = \"<option\";\n\n                if (dataValue !== undefined$1) {\n                    dataValue += \"\";\n\n                    if (dataValue.indexOf('\"') !== -1) {\n                        dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                    }\n\n                    option += ' value=\"' + dataValue + '\"';\n                }\n\n                if (selected) {\n                    option += ' selected';\n                }\n\n                option += \">\";\n\n                if (dataText !== undefined$1) {\n                    option += kendo.htmlEncode(dataText);\n                }\n\n                return option += \"</option>\";\n            },\n\n            _selectValue: function(dataItem) {\n                var value = \"\";\n                var text = \"\";\n\n                if (dataItem || dataItem === 0) {\n                    if (dataItem.level) {\n                        dataItem._level = dataItem.level();\n                    }\n                    text = this._text(dataItem) || dataItem;\n                    value = this._currentValue(dataItem);\n                }\n\n                if (value === null) {\n                    value = \"\";\n                }\n                this.setValue(value);\n                this._textAccessor(text, dataItem);\n                this._accessor(value);\n\n                if (!this._preventChangeTrigger && !this._valueMethodCalled) {\n                    this.trigger(CHANGE);\n                }\n                this._valueMethodCalled = false;\n\n                if (this.options.autoClose && this.popup.visible()) {\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                }\n\n                this.popup.position();\n                this._toggleCloseVisibility();\n            },\n\n            _clearClick: function(e) {\n                e.stopPropagation();\n                this.wrapper.trigger(\"focus\");\n                this._clearTextAndValue();\n            },\n\n            _clearTextAndValue: function() {\n                var shouldTrigger = this._selection._clearValue();\n\n                this.setValue([]);\n                this._clearInput();\n                this._clearText();\n                this.popup.position();\n                this._toggleCloseVisibility();\n                this._refreshFloatingLabel();\n\n                if (shouldTrigger) {\n                    this.trigger(CHANGE);\n                }\n            },\n\n            _clearText: function() {\n                if (this.options.placeholder) {\n                    this._placeholder(true);\n                } else {\n                    if (this.span) {\n                        this.span.html(\"\");\n                    }\n                }\n            },\n\n            _inputTemplate: function() {\n                var this$1$1 = this;\n\n                var template = this.options.valueTemplate;\n\n                if (!template) {\n                    template = function (data) { return encode(this$1$1._text(data)); };\n                } else {\n                    template = kendo.template(template);\n                }\n\n                this.valueTemplate = template;\n            },\n\n            _assignInstance: function(text, value) {\n                var dataTextField = this.options.dataTextField;\n                var dataItem = {};\n\n                if (dataTextField) {\n                    assign(dataItem, dataTextField.split(DOT), text);\n                    assign(dataItem, this.options.dataValueField.split(DOT), value);\n                    dataItem = new ObservableObject(dataItem);\n                } else {\n                    dataItem = text;\n                }\n\n                return dataItem;\n            },\n\n            _textAccessor: function(text, dataItem) {\n                var valueTemplate = this.valueTemplate;\n                var span = this.span;\n\n                if (text === undefined$1) {\n                    return span.text();\n                }\n\n                span.removeClass(\"k-readonly\");\n\n                if (!dataItem && ($.isPlainObject(text) || text instanceof ObservableObject)) {\n                    dataItem = text;\n                }\n\n                if (!dataItem) {\n                    dataItem = this._assignInstance(text, this._accessor());\n                }\n\n                var getElements = function() {\n                    return {\n                        elements: span.get(),\n                        data: [ { dataItem: dataItem } ]\n                    };\n                };\n\n                try {\n                    span.html(valueTemplate(dataItem));\n                } catch (e) {\n                    //dataItem has missing fields required in custom template\n                    if (span) {\n                        span.html(\"\");\n                    }\n                }\n            },\n\n            _accessors: function() {\n                var element = this.element;\n                var options = this.options;\n                var getter = kendo.getter;\n                var textField = element.attr(kendo.attr(\"text-field\"));\n                var valueField = element.attr(kendo.attr(\"value-field\"));\n\n                var getterFunction = function(field) {\n                    if (Array.isArray(field)) {\n                        var count = field.length;\n                        var levels = $.map(field, function(x) {\n                            return function(d) { return d[x];};\n                        });\n\n                        return function(dataItem) {\n                            var level = dataItem._level;\n\n                            if (!level && level !== 0) {\n                                return;\n                            }\n\n                            return levels[Math.min(level, count - 1)](dataItem);\n                        };\n                    } else {\n                        return getter(field);\n                    }\n                };\n\n                if (!options.dataTextField && textField) {\n                    options.dataTextField = textField;\n                }\n\n                if (!options.dataValueField && valueField) {\n                    options.dataValueField = valueField;\n                }\n\n                options.dataTextField = options.dataTextField || \"text\";\n                options.dataValueField = options.dataValueField || \"value\";\n\n                this._text = getterFunction(options.dataTextField);\n                this._value = getterFunction(options.dataValueField);\n            },\n\n            _accessor: function(value, idx) {\n                return this._accessorInput(value, idx);\n            },\n\n            _accessorInput: function(value) {\n                var element = this.element[0];\n\n                if (value === undefined$1) {\n                    return element.value;\n                } else {\n                    if (value === null) {\n                        value = \"\";\n                    }\n                    element.value = value;\n                }\n            },\n\n            _clearInput: function() {\n                var element = this.element[0];\n                element.value = \"\";\n            },\n\n            _clearButton: function() {\n                var clearTitle = encode(this.options.messages.clear);\n\n                if (!this._clear) {\n                    this._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\">' + kendo.ui.icon(\"x\") + '</span>').attr({\n                        \"tabIndex\": -1\n                    });\n                }\n\n                if (this.options.clearButton) {\n                    this._clear.insertAfter(this.span.parent());\n                } else {\n                    if (!this.options.clearButton) {\n                        this._clear.remove();\n                    }\n                }\n            },\n\n            _toggleCloseVisibility: function() {\n                var isReadOnly = this.element.attr(READONLY);\n                var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length;\n                var valueDoesNotEqualPlaceHolder = this.element.val() && this.element.val() !== this.options.placeholder;\n\n                if ((!isReadOnly && (hasValue || valueDoesNotEqualPlaceHolder))) {\n                    this._showClear();\n                } else {\n                    this._hideClear();\n                }\n            },\n\n            _showClear: function() {\n                if (this._clear) {\n                    this._clear.removeClass(HIDDENCLASS);\n                }\n            },\n\n            _hideClear: function() {\n                if (this._clear) {\n                    this._clear.addClass(HIDDENCLASS);\n                }\n            },\n\n            _openHandler: function(e) {\n                this._adjustListWidth();\n\n                if (this.trigger(OPEN)) {\n                    e.preventDefault();\n                } else {\n                     this.wrapper.attr(\"aria-expanded\", true);\n                     this.tree.attr(\"aria-hidden\", false);\n                }\n            },\n\n            _closeHandler: function(e) {\n                if (this.trigger(CLOSE)) {\n                    e.preventDefault();\n                } else {\n                     this.wrapper.attr(\"aria-expanded\", false);\n                     this.tree.attr(\"aria-hidden\", true);\n                }\n            },\n\n            _treeview: function() {\n                var that = this;\n\n                if (that.options.adaptiveMode != \"auto\" && that.options.height) {\n                    that.tree.css('max-height',that.options.height);\n                }\n                that.tree.attr('id', kendo.guid());\n                that.treeview = new TreeView(that.tree, extend({ size: that.options.size }, that.options.treeview), that);\n                that.dataSource = that.treeview.dataSource;\n\n                that.treeview.bind(\"select\",function(e) {\n                    that.trigger(\"select\", e);\n                });\n            },\n\n            _treeViewDataBound: function(e) {\n                if (e.node && this._prev && this._prev.length) {\n                    e.sender.expand(e.node);\n                }\n\n                if (this._filtering) {\n                    if (!e.node) {\n                        this._filtering = false;\n                    }\n\n                    if (!this._isMultipleSelection()) {\n                        this._deselectItem(e);\n                    }\n                    return;\n                }\n\n                if (!this.treeview) {\n                    this.treeview = e.sender;\n                }\n\n                if (!e.node) {\n                    var rootItems = e.sender.dataSource.data();\n\n                    this._checkLoadedItems(rootItems);\n                    if (this._noInitialValue) {\n                        this._noInitialValue = false;\n                    }\n                } else {\n                    var rootItem = e.sender.dataItem(e.node);\n                    if (rootItem) {\n                        var subItems = rootItem.children.data();\n                        this._checkLoadedItems(subItems);\n                    }\n                }\n                this.trigger(\"dataBound\", e);\n            },\n\n            _deselectItem: function(e) {\n                var items = [];\n                if (!e.node) {\n                    items = e.sender.dataSource.data();\n                } else {\n                    var rootItem = e.sender.dataItem(e.node);\n                    if (rootItem) {\n                        items = rootItem.children.data();\n                    }\n                }\n\n                for (var i = 0; i < items.length; i++) {\n                    if (items[i].selected &&\n                        !this._valueComparer(items[i], this.value())) {\n                        items[i].set(\"selected\", false);\n                    }\n                }\n            },\n\n            _checkLoadedItems: function(items) {\n                var value = this.value();\n\n                if (!items) {\n                    return;\n                }\n\n                for (var idx = 0; idx < items.length; idx++) {\n                    this._selection._checkLoadedItem(items[idx], value);\n                }\n            },\n\n            _treeViewCheckAllCheck: function(dataItem) {\n                if (this.options.checkAll && this.checkAll) {\n                    this._getAllChecked();\n\n                    if (dataItem.checked) {\n                        this._checkCheckAll();\n                    } else {\n                        this._uncheckCheckAll();\n                    }\n                }\n            },\n\n            _checkCheckAll: function() {\n                var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n                if (this._allItemsAreChecked) {\n                    checkAllCheckbox.prop('checked', true)\n                                    .prop('indeterminate', false);\n                } else {\n                    checkAllCheckbox.prop('indeterminate', true);\n                }\n            },\n\n            _uncheckCheckAll: function() {\n                var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n                if (this._allItemsAreUnchecked) {\n                    checkAllCheckbox.prop('checked', false)\n                                    .prop('indeterminate', false);\n                } else {\n                    checkAllCheckbox.prop('indeterminate', true);\n                }\n            },\n\n            _filterHeader: function() {\n                var filterTemplate = '<div class=\"k-list-filter\">' +\n                    '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\" type=\"text\" autocomplete=\"off\">' +\n                        kendo.ui.icon({ icon: \"search\", iconClass: \"k-input-icon\" }) +\n                    '</span>' +\n                '</div>';\n\n                if (this.filterInput) {\n                    this.filterInput\n                        .off(ns)\n                        .parent()\n                        .remove();\n\n                    this.filterInput = null;\n                }\n\n                if (this._isFilterEnabled()) {\n                    this._disableCheckChildren();\n\n                    this.filterInput = $('<input class=\"k-input-inner\" type=\"text\" />')\n                        .attr({\n                            placeholder: this.element.attr(\"placeholder\"),\n                            title: this.element.attr(\"title\"),\n                            role: \"searchbox\",\n                            \"aria-haspopup\": \"tree\",\n                            \"aria-autocomplete\": \"list\"\n                        });\n\n                    this.filterInput.on(\"input\" , this._filterChange.bind(this));\n\n                    if (this._hasActionSheet()) {\n                        $(filterTemplate)\n                        .appendTo(this.popup.wrapper.find(\".k-actionsheet-filter\"))\n                        .find(\".k-textbox\")\n                        .append(this.filterInput);\n                    } else {\n                        $(filterTemplate)\n                        .insertBefore(this.tree)\n                        .find(\".k-textbox\")\n                        .append(this.filterInput);\n                    }\n                }\n            },\n\n            _filterChange: function() {\n                if (this.filterInput) {\n                    this._search();\n                }\n            },\n\n            _disableCheckChildren: function() {\n                if (this._isMultipleSelection() && this.options.treeview.checkboxes && this.options.treeview.checkboxes.checkChildren) {\n                    this.options.treeview.checkboxes.checkChildren = false;\n                }\n            },\n\n            _checkAll: function() {\n                if (this.checkAll) {\n                    this.checkAll.find(\".k-checkbox-label, .k-checkbox\")\n                        .off(ns);\n                    this.checkAll.remove();\n\n                    this.checkAll = null;\n                }\n\n                if (this._isMultipleSelection() && this.options.checkAll) {\n                    var checkAllCheckbox = html.renderCheckBox(extend({}, this.options, {\n                        label: \"Check All\",\n                        rounded: \"medium\"\n                    }));\n                    this.checkAll = $('<div class=\"k-check-all\">' + checkAllCheckbox + '</div>').insertBefore(this.tree);\n                    this.checkAll.find(\".k-checkbox-label\").html(kendo.template(this.options.checkAllTemplate)({ instance: this }));\n                    this.checkAll.find(\".k-checkbox\")\n                                    .on(\"change\" + ns, this._changeCheckAll.bind(this))\n                                    .on(\"keydown\" + ns, this._keydownCheckAll.bind(this));\n                    this._disabledCheckedItems = [];\n                    this._disabledUnCheckedItems = [];\n\n                    this._getAllChecked();\n\n                    if (!this._allItemsAreUnchecked) {\n                        this._checkCheckAll();\n                    }\n                }\n            },\n\n            _changeCheckAll: function() {\n                var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n                var isChecked = checkAllCheckbox.prop('checked');\n\n                this._updateCheckAll(isChecked);\n            },\n\n            _updateCheckAll: function(isChecked) {\n                var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n                this._toggleCheckAllItems(isChecked);\n                checkAllCheckbox.prop('checked', isChecked);\n                if (this._disabledCheckedItems.length && this._disabledUnCheckedItems.length) {\n                    checkAllCheckbox.prop('indeterminate', true);\n                } else if (this._disabledCheckedItems.length) {\n                    checkAllCheckbox.prop('indeterminate', !isChecked);\n                } else if (this._disabledUnCheckedItems.length) {\n                    checkAllCheckbox.prop('indeterminate', isChecked);\n                } else {\n                    checkAllCheckbox.prop('indeterminate', false);\n                }\n                this._disabledCheckedItems = [];\n                this._disabledUnCheckedItems = [];\n            },\n\n            _keydownCheckAll: function(e) {\n                var key = e.keyCode;\n                var altKey = e.altKey;\n\n                if ((altKey && key === keys.UP) || key === keys.ESC || key === keys.TAB) {\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                    return;\n                }\n\n                if (key === keys.UP) {\n                    if (this.filterInput) {\n                        this.filterInput.trigger(\"focus\");\n                    } else {\n                        this.wrapper.trigger(\"focus\");\n                    }\n\n                    e.preventDefault();\n                }\n\n                if (key === keys.DOWN) {\n                    if (this.tree && this.tree.is(\":visible\")) {\n                        this.tree.focus();\n                    }\n\n                    e.preventDefault();\n                }\n\n                if (key === keys.SPACEBAR && (browser.msie || browser.edge)) {\n                    this._clickCheckAll();\n                    e.preventDefault();\n                }\n            },\n\n            _clickCheckAll: function() {\n                var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n                var isChecked = checkAllCheckbox.prop('checked');\n\n                this._updateCheckAll(!isChecked);\n\n                checkAllCheckbox.trigger(\"focus\");\n\n            },\n            //treeview\n            _dfs: function(items, action, prop) {\n                for (var idx = 0; idx < items.length; idx++) {\n                    if (!this[action](items[idx], prop)) {\n                        break;\n                    }\n                    this._traverceChildren(items[idx], action, prop);\n                }\n            },\n\n            _uncheckItemByUid: function(uid) {\n                this._dfs(this.dataSource.data(), '_uncheckItemEqualsUid', uid);\n            },\n\n            _uncheckItemEqualsUid: function(item, uid) {\n                if (item.enabled !== false && item._tagUid == uid) {\n                    item.set(\"checked\", false);\n                    return false;\n                }\n                return true;\n            },\n\n            _selectItemByText: function(text) {\n                this._dfs(this.dataSource.data(), '_itemEqualsText', text);\n            },\n\n            _itemEqualsText: function(item, text) {\n                if (item.enabled !== false && this._text(item) === text) {\n                    this.treeview.select(this.treeview.findByUid(item.uid));\n                    this._selectValue(item);\n                    return false;\n                }\n                return true;\n            },\n\n            _selectItemByValue: function(value) {\n                this._dfs(this.dataSource.data(), '_itemEqualsValue', value);\n            },\n\n            _itemEqualsValue: function(item, value) {\n                if (item.enabled !== false && this._valueComparer(item, value)) {\n\n                    this.treeview.select(this.treeview.findByUid(item.uid));\n\n                    return false;\n                }\n                return true;\n            },\n\n            _checkItemByValue: function(value) {\n                var items = this.treeview.dataItems();\n                for (var idx = 0; idx < value.length; idx++) {\n                    this._dfs(items, '_checkItemEqualsValue', value[idx]);\n                }\n            },\n\n            _checkItemEqualsValue: function(item, value) {\n                if (item.enabled !== false && this._valueComparer(item, value)) {\n                        item.set(\"checked\", true);\n                    return false;\n                }\n                return true;\n            },\n\n            _valueComparer: function(item, value) {\n                var itemValue = this._value(item);\n                var itemText;\n\n                if (!this._isNullorUndefined(itemValue)) {\n                    if (this._isNullorUndefined(value)) {\n                        return false;\n                    }\n\n                    var newValue = this._value(value);\n\n                    if (newValue) {\n                        return itemValue == newValue;\n                    } else {\n                        return itemValue == value;\n                    }\n                }\n\n                itemText = this._text(item);\n                if (itemText) {\n                    if (this._text(value)) {\n                        return itemText == this._text(value);\n                    } else {\n                        return itemText == value;\n                    }\n                }\n\n                return false;\n            },\n\n            _isNullorUndefined: function(value) {\n                return value === undefined$1 || value === null;\n            },\n\n            _getAllChecked: function() {\n                this._allCheckedItems = [];\n                this._allItemsAreChecked = true;\n                this._allItemsAreUnchecked = true;\n\n                this._dfs(this.dataSource.data(), '_getAllCheckedItems');\n\n                return this._allCheckedItems;\n            },\n\n            _getAllCheckedItems: function(item) {\n                if (this._allItemsAreChecked) {\n                    this._allItemsAreChecked = item.checked;\n                }\n\n                if (this._allItemsAreUnchecked) {\n                    this._allItemsAreUnchecked = !item.checked;\n                }\n\n                if (item.checked) {\n                    this._allCheckedItems.push(item);\n                }\n                return true;\n            },\n\n            _traverceChildren: function(item, action, prop) {\n                var childrenField = (item._childrenOptions && item._childrenOptions.schema) ? item._childrenOptions.schema.data : null;\n                var subItems = item[childrenField] || item.items || item.children;\n\n                if (!subItems) {\n                    return;\n                }\n\n                this._dfs(subItems, action, prop);\n            },\n\n            _toggleCheckAllItems: function(checked) {\n                this._dfs(this.dataSource.data(), '_checkAllCheckItem', checked);\n            },\n\n            _checkAllCheckItem: function(item, checked) {\n                if (item.enabled === false) {\n                    if (item.checked) {\n                        this._disabledCheckedItems.push(item);\n                    } else {\n                        this._disabledUnCheckedItems.push(item);\n                    }\n                } else {\n                    item.set(\"checked\", checked);\n                }\n                return true;\n            },\n\n            _isFilterEnabled: function() {\n                var filter = this.options.filter;\n                return filter && filter !== \"none\";\n            },\n\n            _editable: function(options) {\n                var that = this;\n                var element = that.element;\n                var disable = options.disable;\n                var readonly = options.readonly;\n                var wrapper = that.wrapper.add(that.filterInput).off(ns);\n                var dropDownWrapper = that.wrapper.off(HOVEREVENTS);\n                if (that._isMultipleSelection()) {\n                    that.tagList.off(CLICK + ns);\n                }\n                if (!readonly && !disable) {\n                    element.prop(DISABLED, false).prop(READONLY, false);\n\n                    dropDownWrapper\n                        .removeClass(STATEDISABLED)\n                        .on(HOVEREVENTS, that._toggleHover);\n\n                    that._clear.on(\"click\" + ns, that._clearClick.bind(that));\n                    wrapper\n                        .attr(TABINDEX, wrapper.data(TABINDEX))\n                        .attr(ARIA_DISABLED, false)\n                        .on(\"keydown\" + ns, that._keydown.bind(that))\n                        .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                        .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n\n                    that.wrapper.on(CLICK + ns, that._wrapperClick.bind(that));\n\n                    if (this._isMultipleSelection()) {\n                        that.tagList.on(CLICK + ns, \"div.k-chip\", function(e) {\n                            $(e.currentTarget).addClass(FOCUSED);\n                        });\n\n                        that.tagList.on(CLICK + ns, \".k-chip-remove-action .k-chip-icon\", function(e) {\n                            that._removeTagClick(e);\n                        });\n                    }\n                } else if (disable) {\n                    wrapper.removeAttr(TABINDEX);\n                    dropDownWrapper\n                        .addClass(STATEDISABLED);\n                } else {\n                    wrapper\n                        .attr(TABINDEX, wrapper.data(TABINDEX));\n\n                    dropDownWrapper\n                        .removeClass(STATEDISABLED);\n\n                    wrapper\n                        .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                        .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n                }\n\n                element.attr(DISABLED, disable)\n                       .attr(READONLY, readonly);\n\n                wrapper.attr(ARIA_DISABLED, disable);\n            },\n\n            _focusinHandler: function() {\n                this.wrapper.addClass(FOCUSED);\n                this._prevent = false;\n            },\n\n            _focusoutHandler: function() {\n                var that = this;\n\n                if (this._isMultipleSelection()) {\n                    this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED);\n                }\n                if (!that._prevent) {\n                    this.wrapper.removeClass(FOCUSED);\n                    that._prevent = true;\n                    that.element.trigger(\"blur\");\n                }\n            },\n\n            _toggle: function(open) {\n                open = open !== undefined$1 ? open : !this.popup.visible();\n\n                this[open ? OPEN : CLOSE]();\n            },\n\n            _wrapperClick: function(e) {\n                e.preventDefault();\n\n                this.popup.unbind(\"activate\", this._focusInputHandler);\n                this._focused = this.wrapper;\n                this._prevent = false;\n                this._toggle();\n            },\n\n            _toggleHover: function(e) {\n                $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n            },\n\n            _focusInput: function() {\n                if (this.filterInput) {\n                    this.filterInput.trigger(\"focus\");\n                } else if (this.checkAll) {\n                    this.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n                } else if (this.tree.is(\":visible\")) {\n                    this.tree[0].focus({ preventScroll: true });\n                    this._ie11PreventScrollOnFocus();\n                }\n            },\n\n            _ie11PreventScrollOnFocus: function() {\n                if (browser.msie && browser.version == 11) {\n                    var popup = this.popup;\n                    popup._toggleResize(false);\n                    setTimeout(function() {\n                        popup._toggleResize(true);\n                    },50);\n                }\n            },\n\n            _keydown: function(e) {\n                var key = e.keyCode;\n                var altKey = e.altKey;\n                var isFilterInputActive;\n                var isWrapperActive;\n                var focused, tagItem;\n\n                var isPopupVisible = this.popup.visible();\n\n                if (this.filterInput) {\n                    isFilterInputActive = this.filterInput[0] === activeElement();\n                }\n\n                if (this.wrapper) {\n                    isWrapperActive = this.wrapper[0] === activeElement();\n                }\n\n                if (isWrapperActive) {\n                    if (key === keys.ESC) {\n                        this._clearTextAndValue();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (this._isMultipleSelection()) {\n                        if (key === keys.LEFT) {\n                            this._focusPrevTag();\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (key === keys.RIGHT) {\n                            this._focusNextTag();\n                              e.preventDefault();\n                            return;\n                        }\n\n                        if (key === keys.HOME) {\n                            this._focusFirstTag();\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (key === keys.END) {\n                            this._focusLastTag();\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (key === keys.DELETE) {\n                            focused = this.tagList.find(DOT + FOCUSED).first();\n                            if (focused.length) {\n                                tagItem = this._tags[focused.index()];\n                                this._removeTag(tagItem);\n                            }\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (key === keys.BACKSPACE) {\n                            focused = this.tagList.find(DOT + FOCUSED).first();\n                            if (focused.length) {\n                                tagItem = this._tags[focused.index()];\n                                this._removeTag(tagItem);\n                            } else {\n                                focused = this._focusLastTag();\n                                if (focused.length) {\n                                    tagItem = this._tags[focused.index()];\n                                    this._removeTag(tagItem);\n                                }\n                            }\n                            e.preventDefault();\n                            return;\n                        }\n                    }\n                }\n\n\n                if (isFilterInputActive) {\n                    if (key === keys.ESC) {\n                        this._clearFilter();\n                    }\n\n                    if ((key === keys.UP) && !altKey) {\n                        this.wrapper.trigger(\"focus\");\n                        e.preventDefault();\n                    }\n\n                    if (browser.msie && browser.version < 10) {\n                        if (key === keys.BACKSPACE || key === keys.DELETE) {\n                            this._search();\n                        }\n                    }\n\n                    if (key === keys.TAB) {\n                        this.close();\n                        this.wrapper.trigger(\"focus\");\n                        e.preventDefault();\n                        return;\n                    }\n                }\n\n                if ((altKey && key === keys.UP) || key === keys.ESC) {\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                    return;\n                }\n\n                if (key === keys.ENTER && this._typingTimeout && this.filterInput && isPopupVisible) {\n                    e.preventDefault();\n                    return;\n                }\n\n                if (key === keys.SPACEBAR && !isFilterInputActive) {\n                    this._toggle(!isPopupVisible);\n                    e.preventDefault();\n                }\n\n                if ((altKey && key === keys.DOWN) && !isPopupVisible) {\n                    this.open();\n                    e.preventDefault();\n                }\n\n                if ((key === keys.DOWN) && isPopupVisible) {\n                    if (this.filterInput && !isFilterInputActive) {\n                        this.filterInput.trigger(\"focus\");\n                    } else if (this.checkAll && this.checkAll.is(\":visible\")) {\n                        this.checkAll.find('input').trigger(\"focus\");\n                    } else if (this.tree.is(\":visible\")) {\n                        this.tree[0].focus({ preventScroll: true });\n                        this._ie11PreventScrollOnFocus();\n                    }\n                    e.preventDefault();\n                }\n\n                if (key === keys.TAB && isPopupVisible) {\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                }\n            },\n\n            _focusPrevTag: function() {\n                var focused = this.tagList.find(DOT + FOCUSED);\n                if (focused.length) {\n                    var activedescendant = this._activeId;\n\n                    focused.first()\n                        .removeClass(FOCUSED)\n                        .removeAttr(\"id\")\n                        .prev(CHIP)\n                        .addClass(FOCUSED)\n                        .attr(\"id\", activedescendant);\n\n                    this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n                } else {\n                    this._focusLastTag();\n                }\n            },\n\n            _focusNextTag: function() {\n                var focused = this.tagList.find(DOT + FOCUSED);\n\n                if (focused.length) {\n                    var activedescendant = this._activeId;\n\n                    focused.first()\n                        .removeClass(FOCUSED)\n                        .removeAttr(\"id\")\n                        .next(CHIP)\n                        .addClass(FOCUSED)\n                        .attr(\"id\", activedescendant);\n\n                    this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n                } else {\n                    this._focusFirstTag();\n                }\n            },\n\n            _focusFirstTag: function() {\n                var activedescendant = this._activeId;\n\n                this._clearDisabledTag();\n\n                var firstTag = this.tagList.children(CHIP).first()\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n                return firstTag;\n            },\n\n            _focusLastTag: function() {\n                var activedescendant = this._activeId;\n\n                this._clearDisabledTag();\n\n                var lastTag = this.tagList.children(CHIP).last()\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n                return lastTag;\n            },\n\n            _clearDisabledTag: function() {\n                this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED).removeAttr(\"id\");\n            },\n\n            _search: function() {\n                var that = this;\n                clearTimeout(that._typingTimeout);\n\n                that._typingTimeout = setTimeout(function() {\n                    var value = that.filterInput.val();\n\n                    if (that._prev !== value) {\n                        that._prev = value;\n                        that.search(value);\n                    }\n\n                    that._typingTimeout = null;\n                }, that.options.delay);\n            },\n\n            _clearFilter: function() {\n                if (this.filterInput.val().length) {\n                    this.filterInput.val(\"\");\n                    this._prev = \"\";\n                    this._filtering = true;\n                    this.treeview.dataSource.filter({});\n                }\n            },\n\n            _removeTagClick: function(e) {\n                e.stopPropagation();\n                var tagItem = this._tags[$(e.currentTarget.closest(CHIP)).index()];\n                this._removeTag(tagItem);\n            },\n\n            _removeTag: function(tagItem) {\n               if (!tagItem) {\n                    return;\n               }\n\n               var uid = tagItem.uid;\n               this._uncheckItemByUid(uid);\n            }\n        });\n\n        function assign(instance, fields, value) {\n            var idx = 0,\n                lastIndex = fields.length - 1,\n                field;\n\n            for (; idx < lastIndex; ++idx) {\n                field = fields[idx];\n\n                if (!(field in instance)) {\n                    instance[field] = {};\n                }\n\n                instance = instance[field];\n            }\n\n            instance[fields[lastIndex]] = value;\n        }\n\n        ui.plugin(DropDownTree);\n\n        kendo.cssProperties.registerPrefix(\"DropDownTree\", \"k-picker-\");\n\n        kendo.cssProperties.registerValues(\"DropDownTree\", [{\n            prop: \"rounded\",\n            values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n        }]);\n\n        kendo.cssProperties.registerPrefix(\"MultiSelectTree\", \"k-input-\");\n\n        kendo.cssProperties.registerValues(\"MultiSelectTree\", [{\n            prop: \"rounded\",\n            values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n        }]);\n\n        var SingleSelection = kendo.Class.extend({\n            init: function(view) {\n                this._dropdowntree = view;\n            },\n\n            _initWrapper: function() {\n                this._wrapper();\n                this._span();\n            },\n\n            _preselect: function(data) {\n                var dropdowntree = this._dropdowntree;\n\n                dropdowntree._selectValue(data);\n            },\n\n            _wrapper: function() {\n                var dropdowntree = this._dropdowntree,\n                    element = dropdowntree.element,\n                    DOMelement = element[0],\n                    wrapper;\n\n                wrapper = element.parent();\n\n                if (!wrapper.is(\"span.k-dropdowntree\")) {\n                    wrapper = element.wrap(\"<span />\").parent();\n                    wrapper[0].style.cssText = DOMelement.style.cssText;\n                    wrapper[0].title = DOMelement.title;\n                }\n\n                dropdowntree._focused = dropdowntree.wrapper = wrapper\n                    .addClass(\"k-dropdowntree k-picker\")\n                    .addClass(DOMelement.className)\n                    .removeClass('input-validation-error')\n                    .removeClass('k-invalid')\n                    .css(\"display\", \"\")\n                    .attr({\n                        accesskey: element.attr(\"accesskey\"),\n                        unselectable: \"on\"\n                    });\n\n                element.hide().removeAttr(\"accesskey\");\n            },\n\n            _span: function() {\n                var dropdowntree = this._dropdowntree,\n                    wrapper = dropdowntree.wrapper,\n                    SELECTOR = \"span.k-input-value-text\",\n                    span;\n\n                span = wrapper.find(SELECTOR);\n\n                if (!span[0]) {\n                    wrapper.append('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>' +\n                                    html.renderButton('<button unselectable=\"on\" class=\"k-input-button\" aria-label=\"select\" tabindex=\"-1\"></button>', extend({}, dropdowntree.options, {\n                                        icon: \"caret-alt-down\",\n                                        shape: \"none\",\n                                        rounded: \"none\"\n                                    })))\n                           .append(dropdowntree.element);\n\n                    span = wrapper.find(SELECTOR);\n                }\n\n                dropdowntree.span = span;\n                dropdowntree._arrow = wrapper.find(\".k-input-button\");\n                dropdowntree._arrowIcon = dropdowntree._arrow.find(\".k-icon,.k-svg-icon\");\n            },\n\n            _setValue: function(value) {\n                var dropdowntree = this._dropdowntree;\n                var currentValue;\n\n                if (value === undefined$1 || value === null) {\n                    currentValue = dropdowntree._values.slice()[0];\n                    value = (typeof currentValue === \"object\") ? currentValue : dropdowntree._accessor() || currentValue;\n                    return value === undefined$1 || value === null ? \"\" : value;\n                }\n                dropdowntree._valueMethodCalled = true;\n                if (value.length === 0) {\n                    dropdowntree._clearTextAndValue();\n                    dropdowntree._valueMethodCalled = false;\n                    return;\n                }\n\n                dropdowntree._selectItemByValue(value);\n                dropdowntree._toggleCloseVisibility();\n                dropdowntree._refreshFloatingLabel();\n            },\n\n            _clearValue: function() {\n                var dropdowntree = this._dropdowntree;\n                var selectedNode = dropdowntree.treeview.select();\n                var dropdowntreeHasValue = dropdowntree._values.length;\n                var triggerChange = false;\n                if (dropdowntree.treeview.dataItem(selectedNode)) {\n                    dropdowntree.treeview.dataItem(selectedNode).set('selected', false);\n                    triggerChange = true;\n                } else if (dropdowntreeHasValue > 0) {\n                    triggerChange = true;\n                }\n\n                if (!dropdowntree._valueMethodCalled && triggerChange) {\n                    return true;\n                }\n\n                return false;\n            },\n\n            _checkLoadedItem: function(tempItem, value) {\n                var dropdowntree = this._dropdowntree;\n\n                if (!dropdowntree._isNullorUndefined(value) && value !== \"\") {\n                    if (dropdowntree._valueComparer(tempItem, value)) {\n                        dropdowntree._preventChangeTrigger = true;\n                        tempItem.set(\"selected\", true);\n                        dropdowntree._preventChangeTrigger = false;\n                    } else if (tempItem.selected) {\n                        dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n                    }\n\n                } else if (!value && tempItem.selected) {\n                    dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n                }\n            }\n        });\n\n        var MultipleSelection = kendo.Class.extend({\n            init: function(view) {\n                this._dropdowntree = view;\n            },\n\n            _initWrapper: function() {\n                var dropdowntree = this._dropdowntree;\n\n                this._tagTemplate();\n                dropdowntree.element.attr(\"multiple\", \"multiple\").hide();\n                this._wrapper();\n                dropdowntree._tags = new ObservableArray([]);\n                dropdowntree._multipleTags = new ObservableArray([]);\n                this._tagList();\n                dropdowntree.span = $('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>').appendTo(dropdowntree.wrapper).find(\".k-input-value-text\");\n            },\n\n            _preselect: function(data, value) {\n                var dropdowntree = this._dropdowntree;\n                var valueToSelect = value || dropdowntree.options.value;\n\n                if (!Array.isArray(data) && !(data instanceof kendo.data.ObservableArray)) {\n                    data = [data];\n                }\n\n                if ($.isPlainObject(data[0]) || data[0] instanceof kendo.data.ObservableObject || !dropdowntree.options.dataValueField) {\n                    dropdowntree.dataSource.data(data);\n\n                    dropdowntree.value(valueToSelect);\n                }\n            },\n\n            _tagTemplate: function() {\n                var dropdowntree = this._dropdowntree;\n                var options = dropdowntree.options;\n                var tagTemplate = options.valueTemplate;\n                var isMultiple = options.tagMode === \"multiple\";\n                var singleTag = encode(options.messages.singleTag);\n\n                tagTemplate = tagTemplate ? kendo.template(tagTemplate) : dropdowntree.valueTemplate;\n\n                dropdowntree.valueTemplate = function(data) {\n                    return html.renderChip('<span ' +\n                        'class=\"' + ((data.enabled === false) ? \"k-disabled\" : \"\") + '\"' +\n                        ((data.enabled === false) ? 'aria-disabled=\"true\"' : '') +\n                        '>' +\n                        '</span>', $.extend({}, options, {\n                                fillMode: \"solid\",\n                                themeColor: \"base\",\n                                rounded: \"medium\",\n                                attr: {\n                                    unselectable: \"on\",\n                                    \"aria-keyshortcuts\": \"Enter Delete\",\n                                    role: \"option\"\n                                },\n                                text: (isMultiple ? tagTemplate(data) : ('<span unselectable=\"on\" data-bind=\"text: tags.length\"></span>' +\n                                '<span unselectable=\"on\">&nbsp;' + singleTag + '</span>' )),\n                                removable: isMultiple,\n                                removeIcon: \"x-circle\",\n                                removableAttr: {\n                                    unselectable: \"on\",\n                                    \"aria-hidden\": true,\n                                    \"aria-label\": dropdowntree.options.messages.deleteTag,\n                                    title: dropdowntree.options.messages.deleteTag\n                                }\n                            }));\n                };\n            },\n\n            _wrapper: function() {\n                var dropdowntree = this._dropdowntree,\n                    element = dropdowntree.element,\n                    wrapper = element.parent(\".k-multiselecttree\");\n\n                if (!wrapper[0]) {\n                    wrapper = element.wrap('<span class=\"k-multiselecttree k-input\" unselectable=\"on\" />').parent();\n                    wrapper[0].style.cssText = element[0].style.cssText;\n                    wrapper[0].title = element[0].title;\n                }\n\n                dropdowntree.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n            },\n\n            _tagList: function() {\n                var dropdowntree = this._dropdowntree,\n                    tagList = dropdowntree.wrapper.children(\"div.k-input-values\");\n\n                if (!tagList[0]) {\n                    var isMultiple = dropdowntree.options.tagMode === \"multiple\";\n                    var tagCollection = isMultiple ? \"tags\" : \"multipleTag\";\n\n                    tagList = $(html.renderChipList('<div unselectable=\"on\" class=\"k-input-values k-selection-multiple\" data-template=\"tagTemplate\" data-bind=\"source: ' + tagCollection + '\" />', $.extend({ selectable: \"none\" }, dropdowntree.options))).appendTo(dropdowntree.wrapper);\n                }\n\n                dropdowntree.tagList = tagList;\n                dropdowntree.tagList.attr('id', kendo.guid() + \"_tagList\");\n                dropdowntree.wrapper.attr(\"aria-controls\", dropdowntree.tagList.attr('id'));\n                var viewModel = kendo.observable({\n                    multipleTag: dropdowntree._multipleTags,\n                    tags: dropdowntree._tags,\n                    tagTemplate: dropdowntree.valueTemplate\n                });\n                kendo.bind(dropdowntree.tagList, viewModel);\n                dropdowntree.tagList.attr(\"data-stop\", true);\n            },\n\n            _refreshTagListAria: function() {\n                var that = this;\n                if (that.tagList) {\n                    html.renderChipList(that.tagList, $.extend({ selectable: that.tagList.items().length === 0 ? \"none\" : \"multiple\" }, that.options));\n                }\n            },\n\n            _setValue: function(value) {\n                var that = this;\n                var dropdowntree = this._dropdowntree;\n                var oldValues = dropdowntree._values;\n                if (value === undefined$1 || value === null) {\n                    return dropdowntree._values.slice();\n                }\n\n                dropdowntree.setValue(value);\n                dropdowntree._valueMethodCalled = true;\n                if (value.length) {\n                    this._removeValues(oldValues, value);\n\n                    dropdowntree._checkItemByValue(value);\n                } else {\n                    dropdowntree._clearTextAndValue();\n                }\n\n                dropdowntree._valueMethodCalled = false;\n                dropdowntree._toggleCloseVisibility();\n                that._refreshTagListAria();\n                dropdowntree._refreshFloatingLabel();\n            },\n\n            _removeValues: function(oldValues, value) {\n                var dropdowntree = this._dropdowntree;\n                var removedValues = this._getNewValues(oldValues, value);\n\n                for (var idx = 0; idx < removedValues.length; idx++) {\n                    for (var j = 0; j < dropdowntree._tags.length; j++) {\n                        if (dropdowntree._valueComparer(dropdowntree._tags[j],removedValues[idx])) {\n                            dropdowntree._uncheckItemByUid(dropdowntree._tags[j].uid);\n                        }\n                    }\n                }\n            },\n\n            _getNewValues: function(oldValues, value) {\n                var removedValues = [];\n\n                for (var idx = 0; idx < oldValues.length; idx++) {\n                    if (value.indexOf(oldValues[idx]) === -1) {\n                        removedValues.push(oldValues[idx]);\n                    }\n                }\n\n                return removedValues;\n            },\n\n            _clearValue: function() {\n                var dropdowntree = this._dropdowntree;\n                var tagsArray = dropdowntree._tags.slice();\n\n                for (var idx = 0; idx < tagsArray.length; idx++) {\n                    var uid = tagsArray[idx].uid;\n                    dropdowntree._preventChangeTrigger = true;\n                    dropdowntree._uncheckItemByUid(uid);\n                }\n\n                if (tagsArray.length) {\n                    dropdowntree._preventChangeTrigger = false;\n                    if (!dropdowntree._valueMethodCalled) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            _checkLoadedItem: function(tempItem, value) {\n                var dropdowntree = this._dropdowntree;\n\n                if (dropdowntree._noInitialValue && tempItem.checked) {\n                    dropdowntree._checkValue(tempItem);\n                    return;\n                }\n\n                if ((value.length || this._isDataSourceSet) &&\n                    (value.indexOf(dropdowntree._currentValue(tempItem)) !== -1 || value.indexOf(tempItem)) !== -1 &&\n                    !this._findTag(dropdowntree._currentValue(tempItem))) {\n                    if (tempItem.checked) {\n                        dropdowntree._checkValue(tempItem);\n                    } else {\n                        dropdowntree._preventChangeTrigger = true;\n                        tempItem.set(\"checked\", true);\n                        dropdowntree._preventChangeTrigger = false;\n                    }\n                }\n            },\n\n            _findTag: function(tempItemValue) {\n                var dropdowntree = this._dropdowntree;\n\n                return dropdowntree._tags.find(function(item) {\n                    return dropdowntree._valueComparer(item, tempItemValue);\n                });\n            }\n        });\n\n        kendo.ui.DropDownTree.SingleSelection = SingleSelection;\n        kendo.ui.DropDownTree.MultipleSelection = MultipleSelection;\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}