/**
 * Kendo UI v2023.3.1114 (http://www.telerik.com/kendo-ui)
 * Copyright 2023 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("kendo.mobile.scroller.js"),require("kendo.toolbar.js"),require("kendo.combobox.js"),require("kendo.textbox.js"),require("kendo.core.js"),require("kendo.drawing.js"),require("kendo.upload.js"),require("kendo.dialog.js"),require("kendo.window.js"),require("kendo.binder.js"),require("kendo.numerictextbox.js"),require("kendo.dropdownlist.js"),require("kendo.icons.js"),require("kendo.draganddrop.js")):"function"==typeof define&&define.amd?define(["kendo.mobile.scroller.min","kendo.toolbar.min","kendo.combobox.min","kendo.textbox.min","kendo.core.min","kendo.drawing.min","kendo.upload.min","kendo.dialog.min","kendo.window.min","kendo.binder.min","kendo.numerictextbox.min","kendo.dropdownlist.min","kendo.icons.min","kendo.draganddrop.min"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).kendopdfviewer=e.kendopdfviewer||{},e.kendopdfviewer.js=t())}(this,(function(){var e=function(e,t){return function(o){return t(e(o))}},t=function(e,t,o){return e.addEventListener&&e.addEventListener(t,o)},o=function(e,t,o){return e&&e.removeEventListener&&e.removeEventListener(t,o)},n=function(){},i=function(e){return e.preventDefault()},a=/touch/;function r(e){return e.type.match(a)?{pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,type:e.type,originalEvent:e,isTouch:!0}:{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,originalEvent:e}}var s=function(a){var s=this,l=a.press;void 0===l&&(l=n);var d=a.drag;void 0===d&&(d=n);var c=a.release;void 0===c&&(c=n);var p=a.mouseOnly;void 0===p&&(p=!1),this._pressHandler=e(r,l),this._dragHandler=e(r,d),this._releaseHandler=e(r,c),this._ignoreMouse=!1,this._mouseOnly=p,this._touchstart=function(e){1===e.touches.length&&s._pressHandler(e)},this._touchmove=function(e){1===e.touches.length&&s._dragHandler(e)},this._touchend=function(e){0===e.touches.length&&1===e.changedTouches.length&&(s._releaseHandler(e),s._ignoreMouse=!0,setTimeout(s._restoreMouse,2e3))},this._restoreMouse=function(){s._ignoreMouse=!1},this._mousedown=function(e){var o=e.which;o&&o>1||s._ignoreMouse||(t(s.document,"mousemove",s._mousemove),t(s.document,"mouseup",s._mouseup),s._pressHandler(e))},this._mousemove=function(e){s._dragHandler(e)},this._mouseup=function(e){o(s.document,"mousemove",s._mousemove),o(s.document,"mouseup",s._mouseup),s._releaseHandler(e)},this._pointerdown=function(e){e.isPrimary&&0===e.button&&(t(s.document,"pointermove",s._pointermove),t(s.document,"pointerup",s._pointerup),t(s.document,"pointercancel",s._pointerup),t(s.document,"contextmenu",i),s._pressHandler(e))},this._pointermove=function(e){e.isPrimary&&s._dragHandler(e)},this._pointerup=function(e){e.isPrimary&&(o(s.document,"pointermove",s._pointermove),o(s.document,"pointerup",s._pointerup),o(s.document,"pointercancel",s._pointerup),o(s.document,"contextmenu",i),s._releaseHandler(e))}},l={document:{configurable:!0}};s.supportPointerEvent=function(){return"undefined"!=typeof window&&window.PointerEvent},l.document.get=function(){return this._element?this._element.ownerDocument:document},s.prototype.bindTo=function(e){e!==this._element&&(this._element&&this._unbindFromCurrent(),this._element=e,this._bindToCurrent())},s.prototype._bindToCurrent=function(){var e=this._element;this._usePointers()?t(e,"pointerdown",this._pointerdown):(t(e,"mousedown",this._mousedown),this._mouseOnly||(t(e,"touchstart",this._touchstart),t(e,"touchmove",this._touchmove),t(e,"touchend",this._touchend)))},s.prototype._unbindFromCurrent=function(){var e=this._element;if(this._usePointers())return o(e,"pointerdown",this._pointerdown),o(this.document,"pointermove",this._pointermove),o(this.document,"pointerup",this._pointerup),o(this.document,"contextmenu",i),void o(this.document,"pointercancel",this._pointerup);o(e,"mousedown",this._mousedown),this._mouseOnly||(o(e,"touchstart",this._touchstart),o(e,"touchmove",this._touchmove),o(e,"touchend",this._touchend))},s.prototype._usePointers=function(){return!this._mouseOnly&&s.supportPointerEvent()},s.prototype.update=function(t){var o=t.press;void 0===o&&(o=n);var i=t.drag;void 0===i&&(i=n);var a=t.release;void 0===a&&(a=n);var s=t.mouseOnly;void 0===s&&(s=!1),this._pressHandler=e(r,o),this._dragHandler=e(r,i),this._releaseHandler=e(r,a),this._mouseOnly=s},s.prototype.destroy=function(){this._unbindFromCurrent(),this._element=null},Object.defineProperties(s.prototype,l),s.default=s;!function(e,t){var o=function(e,o,n){var i,a,r,s;void 0===n&&(n={});var l=0,d=function(){l=!1===n.leading?0:(new Date).getTime(),i=t,s=e.apply(a,r),i||(a=r=null)};return function(){var c=(new Date).getTime();l||!1!==n.leading||(l=c);var p=o-(c-l);return a=t,r=arguments,p<=0||p>o?(i&&(clearTimeout(i),i=t),l=c,s=e.apply(a,r),i||(a=r=null)):i||!1===n.trailing||(i=window.setTimeout(d,p)),s}},n=1e3/60,i="scroll",a=function(e,o){var a,r=this;this.options={events:(a={},a[i]=function(){return t},a),filter:"",panScrollThrottleDelay:n,scrollDirectionModifier:-1,scrollThrottleDelay:n},this.onElementScroll=function(){var e=r.element;r.state.trackNextElementScroll?r.scrollTo(e.scrollLeft,e.scrollTop):r.state.trackNextElementScroll=!0},this.onDragStart=function(e){if(r.state.dragStarted=!1,r.shouldTrackPanEvents()){var t=e.target||(e.originalEvent||{}).target;r.options.filter&&!function(e,t){return!(!e||!t)&&e.closest(t)}(t,r.options.filter)||(!function(e){e.preventDefault&&e.preventDefault(),e.originalEvent&&e.originalEvent.preventDefault()}(e),r.setState({dragStarted:!0,location:{pageX:e.pageX,pageY:e.pageY},locationDelta:{x:0,y:0}}))}},this.onDrag=function(e){if(r.shouldTrackPanEvents()&&r.state.dragStarted){r.calculateEventLocationDelta(e),r.setState({location:{pageX:e.pageX,pageY:e.pageY}});var t=r.options.scrollDirectionModifier,o=r.element.scrollLeft+t*r.state.locationDelta.x,n=r.element.scrollTop+t*r.state.locationDelta.y;r.scrollTo(o,n)}},this.onDragEnd=function(){r.shouldTrackPanEvents()},this.element=e,this.options=Object.assign({},this.options,o),this.resetState(),this.bindEvents()};a.prototype.destroy=function(){this.unbindEvents()},a.prototype.initDraggable=function(){this.destroyDraggable(),this.options.panScrollThrottleDelay>0?this.throttledOnDrag=o(this.onDrag,this.options.panScrollThrottleDelay):this.throttledOnDrag=this.onDrag,this.draggable=new s({mouseOnly:!1,press:this.onDragStart,drag:this.throttledOnDrag,release:this.onDragEnd}),this.draggable.bindTo(this.element)},a.prototype.destroyDraggable=function(){this.draggable&&this.draggable.destroy&&(this.draggable.destroy(),this.throttledOnDrag&&this.throttledOnDrag.cancel&&(this.throttledOnDrag.cancel(),this.throttledOnDrag=null))},a.prototype.bindEvents=function(){this.bindDraggableEvents(),this.bindElementScroll()},a.prototype.bindDraggableEvents=function(){this.initDraggable()},a.prototype.bindElementScroll=function(){this.options.scrollThrottleDelay>0?this.throttledOnElementScroll=o(this.onElementScroll,this.options.scrollThrottleDelay):this.throttledOnElementScroll=this.onElementScroll,this.element.addEventListener(i,this.throttledOnElementScroll)},a.prototype.unbindEvents=function(){this.unbindElementScroll(),this.unbindDraggableEvents()},a.prototype.unbindDraggableEvents=function(){this.destroyDraggable()},a.prototype.unbindElementScroll=function(){this.throttledOnElementScroll&&this.throttledOnElementScroll.cancel&&(this.throttledOnElementScroll.cancel(),this.throttledOnElementScroll=null),this.element.removeEventListener(i,this.throttledOnElementScroll)},a.prototype.setState=function(e){this.state=Object.assign({},this.state||{},e)},a.prototype.resetState=function(){this.setState({trackPanEvents:!1,trackNextElementScroll:!1,location:{pageX:0,pageY:0},locationDelta:{x:0,y:0}})},a.prototype.enablePanEventsTracking=function(){this.state.trackPanEvents=!0,this.bindDraggableEvents()},a.prototype.disablePanEventsTracking=function(){this.unbindDraggableEvents(),this.state.trackPanEvents=!1},a.prototype.shouldTrackPanEvents=function(){return this.state.trackPanEvents},a.prototype.calculateEventLocationDelta=function(e){this.state.locationDelta={x:e.pageX-this.state.location.pageX,y:e.pageY-this.state.location.pageY}},a.prototype.scrollTo=function(e,t,o){void 0===o&&(o={trackScrollEvent:!0}),o.trackScrollEvent||(this.state.trackNextElementScroll=!1),this.element.scrollLeft=e,this.element.scrollTop=t};kendo.ui.PdfViewerCommon={Scroller:a,currentPage:function(e){var t=e.querySelector(".k-pdf-viewer-canvas"),o=e.querySelector(".k-page");return t&&o?Math.floor(Math.round(t.scrollTop)/(o.offsetHeight+o.offsetTop)+.01):0},scrollToPage:function(e,t){var o=e.querySelectorAll(".k-page"),n=o[0];if(n instanceof HTMLDivElement){var i=(n.offsetHeight+n.offsetTop)*Math.max(0,Math.min(t,o.length-1)),a=n.closest(".k-pdf-viewer-canvas");a&&a.scrollTo({top:i,behavior:"auto"})}},scrollToSearchMatch:function(e,t){if(e){var o=e.closest(".k-text-char"),n=o?o.closest('span[role="presentation"]'):null;if(n){var i=n.closest(".k-page");if(i){var a=i.offsetLeft+-1*t.element.offsetLeft+n.offsetLeft+0,r=i.offsetTop+-1*t.element.offsetTop+n.offsetTop+-64;t.scrollTo(a,r,{trackScrollEvent:!1})}}}}}}(window.kendo.jQuery),(0,window.kendo.jQuery.extend)(kendo,{pdfviewer:{pdfjs:{lib:window.pdfjsLib,isLoaded:function(){if(!window.pdfjsLib){var e=window.console;return e&&e.error&&e.error("PDF.JS required."),!1}return kendo.pdfviewer.pdfjs.lib=window.pdfjsLib,!0}}}});!function(e,t){var o,n=window.kendo,i=n.Class,a=e.extend,r=window.atob,s=i.extend({init:function(e,t){n.pdfviewer.pdfjs.isLoaded()&&(o=n.pdfviewer.pdfjs.lib),this.file=e.file,this.viewer=t},fetchDocument:function(){var t=this,n=e.Deferred(),i=t.viewer.options.messages.errorMessages;return t.file?(t._isBase64Data()&&r&&(t.file.data=r(t.file.data)),o.getDocument(this.file).promise.then((function(o){var a=[];t.pdf=o,t.pagePromises=[],t._downloadData=e.Deferred(),o.getData().then((function(e){var o=new Blob([e],{type:"application/pdf"});t._downloadData.resolve({file:o})}));for(var r=1;r<=o.numPages;r++)t.pagePromises.push(o.getPage(r));Promise.all(t.pagePromises).then((function(e){a=e.map((function(e){var t=e.getViewport({scale:4/3});return{width:t.width,height:t.height}})),n.resolve({total:o.numPages,pages:a})})).catch((function(e){t.viewer._triggerError({error:e.message,message:i.parseError})}))})).catch((function(e){var o=e.name.includes("Missing"),n=o?i.notFound:i.parseError;t.viewer._triggerError({error:e.message,message:n}),o&&t.viewer._renderBlankPage()})),n):n.resolve()},fetchPageData:function(e){return this.pagePromises[e-1]},downloadFile:function(e){var t=this;n.ui.progress(t.viewer.pageContainer,!0),t._downloadData.done((function(o){n.ui.progress(t.viewer.pageContainer,!1);var i=new FileReader;i.readAsDataURL(o.file),i.onload=function(){n.saveAs({dataURI:i.result,fileName:e+".pdf",proxyURL:function(){return i.result}})}}))},navigateToDestination:function(e){var t=this;e=e.split("#")[1];try{e=JSON.parse(decodeURI(e))}catch(t){e=decodeURI(e)}n.isString(e)?t.pdf.getDestination(e).then((function(e){t._navigateToDest(e)})):e&&t._navigateToDest(e)},_navigateToDest:function(e){var t=this,o=e[0],n=e[4]||t.viewer.options.zoom;t.pdf.getPageIndex(o).then((function(e){t.viewer.activatePage(e+1),t.viewer.zoom(100*n+"%")}))},_updateDocument:function(e){this.pdf&&this.pdf.loadingTask&&this.pdf.loadingTask.destroy(),this.file=e},_isBase64Data:function(){var e,t=this.file.data,o=t&&t.length;return!(!o||o%4!=0||/[^A-Z0-9+\/=]/i.test(t))&&(-1===(e=t.indexOf("="))||e===o-1||e===o-2&&"="===t[o-1])},renderTextLayer:function(e){o.renderTextLayer(e)}});a(n.pdfviewer.pdfjs,{processor:s})}(window.kendo.jQuery);var d,c,p,h,u,g;!function(e,t){var o=window.kendo,n=e.extend,i=o.Class.extend({init:function(e,t){var o=this;o.options=e,o.read=e.read,o.upload=e.upload,o.download=e.download,o.viewer=t},fetchDocument:function(){var t=this,n=e.Deferred(),i=t.viewer.options.messages.errorMessages;return t.read?(e.ajax({type:t.read.type,url:t.read.url,dataType:t.read.dataType,success:function(e){"string"!=typeof e&&(e=o.stringify(e)),n.resolve(JSON.parse(e))},error:function(e){t.viewer._triggerError({error:e.responseText,message:i.parseError})}}),n):n.resolve()},fetchPageData:function(t){var o=this,n=e.Deferred(),i=o.viewer.document.pages[t-1],a={};return a[o.read.pageField]=t,i.geometries.length?n.resolve(i):e.ajax({type:o.read.type,url:o.read.url,data:a,success:function(e){n.resolve(JSON.parse(e))},error:function(e){o.viewer._triggerError({error:e.responseText,message:o.viewer.options.messages.errorMessages.parseError})}}),n},downloadFile:function(e){window.location=this.download.url+"?file="+e},fromJSON:function(e){var t=this.viewer;t._clearPages(),t.document=e,t.document.total=t.document.pages.length,t._renderPages(),t.resize(!0),t.activatePage(1)}});n(o.pdfviewer,{dpl:{processor:i}})}(window.kendo.jQuery),d=window.kendo.jQuery,c=kendo.Class,p=d.extend,h=JSON.parse,u=kendo.ui.progress,c=kendo.Class,g=c.extend({init:function(e){this.viewer=e,this.errorMessages=this.viewer.options.messages.errorMessages,this.upload=this.viewer.processor.upload},_initUpload:function(e,t){var o=p({select:this._onSelect.bind(this),success:this._onSuccess.bind(this),error:this._onError.bind(this),complete:this._onComplete.bind(this),showFileList:!1,multiple:!1,validation:{allowedExtensions:[".pdf"]}},t||{});return this.upload&&p(o,{async:{saveUrl:this.upload.url,autoUpload:!0,saveField:this.upload.saveField}}),(e||d('<input name="files" accept=".pdf" type="file" />')).kendoUpload(o).getKendoUpload()},_onComplete:function(){u(this.viewer.pageContainer,!1)},_onSuccess:function(e){var t=h(e.response);d.isPlainObject(t)?this.viewer.processor.fromJSON(t):this.viewer._triggerError({error:t,message:this.errorMessages.parseError})},_onError:function(e){this.viewer._triggerError({error:e.XMLHttpRequest.responseText,message:this.errorMessages.notSupported})},_onSelect:function(e){var t=this,o=e.files[0];if(u(t.viewer.pageContainer,!0),!t.viewer.trigger("open",{file:o})&&!t.upload)if(".pdf"===o.extension.toLowerCase()){var n=new FileReader;n.onload=function(e){var o=e.target.result;t.viewer.fromFile(o)},n.onerror=function(){t.viewer._triggerError({error:o,message:t.errorMessages.parseError})},n.readAsArrayBuffer(o.rawFile)}else t.viewer._triggerError({error:o,message:t.errorMessages.notSupported})}}),p(kendo.pdfviewer,{UploadHelper:g}),function(e,t){var o=e.extend,n=e.noop,i=kendo.drawing,a=i.Group,r=i.Surface,s="render",l=kendo.Class,d=kendo.pdfviewer.UploadHelper,c={Path:"path",MultiPath:"multipath",Rect:"rect",Image:"image",Text:"text"},p=l.extend({init:function(t,o){this.viewer=o,this.processor=t.processor,this.options=t,this.pageNumber=t.number,this.element=e("<div class='k-page' />"),this.element.attr(kendo.attr("number"),this.pageNumber),this._updatePageSize(t),this.width=t.width,this.height=t.height},resize:function(e){var t=this.element;this._updatePageSize({width:Math.min(t.width()*e,this.width),height:Math.min(t.height()*e,this.height)})},_updatePageSize:function(e){this.element.width(e.width).height(e.height)},destroy:function(){kendo.destroy(this.element)},render:n}),h=p.extend({init:function(t,o){this.viewer=o,this.options=t,this._externalDropZoneId=o.element.attr("id")+"-external-dropzone",this.element=e('<div class="k-page k-blank-page">\n        <div id="'+this._externalDropZoneId+'" class="k-external-dropzone">\n            <div class="k-dropzone-inner">\n                <span class="k-dropzone-icon k-svg-icon k-icon-xxxl k-svg-i-upload">\n                    <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n                        <path d="M32 384v96h448v-96H32zm192-64h64V192h96L256 32 128 192h96v128z"></path>\n                    </svg>\n                </span>\n                <span class="k-dropzone-hint">Drag and drop files here to upload</span>\n            </div>\n        </div>\n        <input name="files" accept=".pdf" type="file" ref-pdfviewer-blank-page-upload>\n    </div>'),this._uploadHelper=new d(o)},_initUpload:function(){this._upload=this._uploadHelper._initUpload(this.element.find("input[ref-pdfviewer-blank-page-upload]"),{dropZone:"#"+this._externalDropZoneId,showFileList:!1,async:{autoUpload:!1,saveUrl:"save"}})},resize:n,_updatePageSize:n,destroy:function(){this._upload&&this._upload.destroy(),kendo.destroy(this.element)},render:n}),u=p.extend({draw:function(){var e=this,t=e.options.geometries;e.group=new a,e.surface.draw(e.group),e._drawGeometries(t),e.viewer.trigger(s,{page:this}),kendo.ui.progress(e.element,!1)},load:function(){var e=this;!e.loaded&&e.processor&&(e.processor.fetchPageData(e.pageNumber).then((function(t){e.options=t,e._initSurface(),e.draw()})),e.loaded=!0)},_initSurface:function(){var e={width:this.element.width(),height:this.element.height()},t=o({width:this.width,height:this.height},this.viewer.options.view);this.surface=new r(this.element,t),this._updatePageSize(e)},_drawGeometries:function(e){var t,o=this;if(e)for(var n=0;n<=e.length;n++){var i=e[n];if(i){switch(i.type){case c.Path:case c.MultiPath:t=o._drawPath(i);break;case c.Rect:t=o._drawRect(i);break;case c.Image:t=o._drawImage(i);break;case c.Text:t=o._drawText(i);break;default:t=null}t&&o.group.append(t)}}},_drawRect:function(e){var t=new kendo.geometry.Rect(e.point,e.size);return new i.Rect(t,{transform:this._getMatrix(e.transform),fill:e.fillOptions,stroke:e.strokeOptions})},_drawImage:function(e){var t=new kendo.geometry.Rect(e.point,e.size);return new i.Image(e.src,t,{transform:this._getMatrix(e.transform)})},_drawText:function(e){var t={transform:this._getMatrix(e.transform),stroke:e.strokeOptions,fill:e.fillOptions,font:e.font};return new kendo.drawing.Text(e.content,e.point,t)},_drawPath:function(e){for(var t={transform:this._getMatrix(e.transform),stroke:e.strokeOptions,fill:e.fillOptions},o=new i.MultiPath(t),n=0;n<e.paths.length;n++){var a=e.paths[n];if(!a.segments)return;o.moveTo.apply(o,a.point);for(var r=0;r<a.segments.length;r++){var s=a.segments[r];(1===s.points.length?o.lineTo:o.curveTo).apply(o,s.points)}a.closed&&o.close()}return o},_getMatrix:function(e){var t=Object.create(kendo.geometry.Matrix.prototype);return kendo.geometry.Matrix.apply(t,e),t}}),g=p.extend({init:function(t,o){var n,i=this;n=e("<canvas />").css({width:"100%",height:"100%"}),i.canvas=n.get(0),p.fn.init.call(i,t,o),i.canvas.width=i.width,i.canvas.height=i.height,i.element.append(n)},load:function(t,o){var n=this,i=e.Deferred();if(n._scale!==t||o)return n._scale&&n._scale!==t&&!o?(n._scale=t,n.render(t),i.resolve(n)):(n.processor&&n.processor.fetchPageData(n.pageNumber).then((function(e){n._page=e,n._renderPromise=n.render(t).then((function(){n.viewer.trigger(s,{page:n})})),i.resolve(n)})),n._scale=t,n.loaded=!0,i)},render:function(e){var t=this,o=window.devicePixelRatio>=2?window.devicePixelRatio:2,n=this.canvas.getContext("2d"),i=this._page.getViewport({scale:e});return this.canvas.width=i.width*o,this.canvas.height=i.height*o,n.scale(o,o),this._scale=e,this._dpr=o,this._renderTask&&(this._renderTask.cancel(),this._renderTask=null),this._updatePageSize({width:i.width,height:i.height}),this._renderTask=this._page.render({canvasContext:n,viewport:i}),this._renderTextLayer(i),this._renderTask.promise.then((function(){t._renderTask=null})).catch((function(){}))},_renderTextLayer:function(t){var o=this,n=o._page;o.textLayer&&o.textLayer.remove(),o.textLayer=e("<div class='k-text-layer'></div>").get(0),o.element.append(o.textLayer),n.getTextContent({normalizeWhitespace:!0}).then((function(n){e(o.textLayer).css({height:t.height,width:t.width}).html("");var i={textContent:n,container:o.textLayer,viewport:t,textDivs:[],enhanceTextSelection:!0};o.processor.renderTextLayer(i),o._renderAnnotationLayer(t)}))},_renderAnnotationLayer:function(t){var o=this,n=o._page;o.annotationLayer&&o.annotationLayer.remove(),o.annotationLayer=e("<div class='k-annotation-layer'></div>").css({position:"absolute",top:0,left:0,overflow:"hidden",height:o.element.height(),width:o.element.width(),pointerEvents:"none"}),o.element.append(o.annotationLayer),n.getAnnotations({intent:"display"}).then((function(n){n.map((function(e){if("Link"===e.subtype){var o=e.rect,n=[t.convertToViewportPoint(o[0],o[1]),t.convertToViewportPoint(o[2],o[3])],i=Math.min(n[0][0],n[1][0]),a=Math.min(n[0][1],n[1][1]),r=Math.max(n[0][0],n[1][0])-i,s=Math.max(n[0][1],n[1][1])-a;return{url:e.url||e.dest&&"#"+(kendo.isString(e.dest)?encodeURI(e.dest):encodeURI(JSON.stringify(e.dest))),rect:{left:i,top:a,width:r,height:s}}}})).forEach((function(t){var n=e("<span></span>").css({position:"absolute",left:t.rect.left,top:t.rect.top}).append(e("<a "+(t.url?"href="+t.url:"")+"></a>").css({width:t.rect.width,height:t.rect.height,display:"inline-block",pointerEvents:"auto"}));o.annotationLayer.append(n)}))}))}});o(kendo.pdfviewer.dpl,{geometryTypes:c,Page:u}),o(kendo.pdfviewer.pdfjs,{Page:g}),o(kendo.pdfviewer,{BlankPage:h})}(window.kendo.jQuery),function(e,t){var o=kendo.Class,n=e.extend,i="k-search-highlight-mark",a=Array.isArray,r=o.extend({init:function(e){var t=this;t.options=n({},t.options,e),t.processDom()},options:{highlightClass:"k-search-highlight",charClass:"k-text-char"},processDom:function(){var e=this;e.targets=a(e.options.target)?e.options.target:[e.options.target],e.textNodes=[],e.charIndex=0,e.text="",e.targets.forEach((function(t){e.traverseToTextNode(t)}));for(var t=0;t<e.textNodes.length;t++)e.processTextNode(e.textNodes[t])},traverseToTextNode:function(e){if(3===e.nodeType)this.textNodes.push(e);else for(var t=0;t<e.childNodes.length;t++)this.traverseToTextNode(e.childNodes[t])},processTextNode:function(t){var o,n=this,i=t.textContent;n.text=n.text+i,i.length>0&&((o=e(t).wrap("<span>").parent()).parent().attr("role","presentation"),o.empty(),n.splitChars(o.get(0),i),o.children().unwrap())},splitChars:function(e,t){for(var o=this,n="",i=0;i<t.length;i++)n=n+"<span class='"+o.options.charClass+"' "+kendo.attr("char-index")+"="+o.charIndex+">"+t[i]+"</span>",o.charIndex++;e.innerHTML=n},search:function(e,t){var o,n=this,i=new RegExp(e,t?"g":"gi");if(n.matches=[],n.resetMark(),n.resetHighlight(),n.resetMatchIndex(),""!==e){for(o=i.exec(n.text);o;)n.matches.push({startOffset:o.index,endOffset:o.index+o[0].length}),o=i.exec(n.text);n.highlightAll(),n.mark()}},highlightAll:function(){var e=this;e.matches.forEach((function(t,o){var n=t.startOffset,i=t.endOffset;e.highlight(n,i,o+1)}))},highlight:function(t,o,n){for(var i=this,a=t;a<o;a++)e(i.targets).find("."+i.options.charClass+"["+kendo.attr("char-index")+"="+a+"]").addClass(i.options.highlightClass).attr(kendo.attr("match-index"),n)},resetHighlight:function(){var t=this;e(t.targets).find("."+t.options.highlightClass).removeClass(t.options.highlightClass)},resetMatchIndex:function(){e(this.targets).find("."+this.options.charClass+"["+kendo.attr("match-index")+"]").removeAttr(kendo.attr("match-index"))},mark:function(){var t=this;t.currentIndex||0===t.currentIndex?t.currentIndex>t.matches.length?t.currentIndex=t.matches.length:t.resetMark():t.currentIndex=0,e(t.targets).find("."+t.options.charClass+"["+kendo.attr("match-index")+"="+t.currentIndex+"]").wrapInner('<span class="'+i+'">')},resetMark:function(){e(this.targets).find("."+i).contents().unwrap()},nextMatch:function(){var e=this;e.currentIndex++,e.currentIndex>e.matches.length&&(e.currentIndex=1),e.mark()},previousMatch:function(){var e=this;e.currentIndex--,e.currentIndex<1&&(e.currentIndex=e.matches.length),e.mark()},getMarkedIndex:function(){return this.matches.length?this.currentIndex:0},getFirstMarked:function(){return e(this.targets).find("."+i).eq(0)},destroy:function(){var t=this;t.resetMark(),e(t.targets).children("span:not(."+t.options.charClass+")").each((function(t,o){e(o).text(e(o).text())}))}});n(kendo.pdfviewer,{SearchDOM:r})}(window.kendo.jQuery),function(e,t){var o=window.kendo,n=o.htmlEncode,i=e.extend,a=o.Class,r=o.ui.Draggable,s=o._outerWidth,l=".svg",d=".png",c=o.keys,p=a.extend({init:function(t){this.options=i(t,{actions:[{text:t.messages.dialogs.okText}]}),this._dialog=e("<div />").kendoDialog(this.options).getKendoDialog()},open:function(){this._dialog.center().open()}}),h=a.extend({init:function(e){return this.options=i(e,this.options,{fileFormats:[{description:e.messages.dialogs.exportAsDialog.png,extension:d},{description:e.messages.dialogs.exportAsDialog.svg,extension:l}],title:e.messages.dialogs.exportAsDialog.title,open:function(){this.center()}}),this._initializeDialog(),this},options:{extension:d,autoFocus:!0,resizable:!1,modal:{preventScroll:!0},width:"90%",maxWidth:520,template:function(e){var t=e.messages,o=e.total;return"<div class='k-edit-label'><label>"+n(t.exportAsDialog.labels.fileName)+":</label></div><div class='k-edit-field'><span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input class='k-input-inner' data-bind='value: name' /></span></div><div><div class='k-edit-label'><label>"+n(t.exportAsDialog.labels.saveAsType)+":</label></div><div class='k-edit-field'><select data-role='dropdownlist' class='k-file-format' data-text-field='description' data-value-field='extension' data-bind='value: extension, source: fileFormats'></select></div></div><div class='k-edit-label'><label>"+n(t.exportAsDialog.labels.page)+":</label></div><div class='k-edit-field'><input data-role='numerictextbox' data-format='n0' data-min='1' data-max='"+n(o)+"' data-bind='value: page' /></div><div class='k-actions'><button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary' data-bind='click: apply'><span class='k-button-text'>"+n(t.save)+"</span></button><button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base' data-bind='click: close'><span class='k-button-text'>"+n(t.cancel)+"</span></button></div>"}},_updateModel:function(e){e.pagesCount&&this.viewModel.set("pagesCount",e.pagesCount),e.page&&this.viewModel.set("page",e.page)},_initializeDialog:function(){var t=this,n=t.options,i=n.messages.dialogs,a=e("<div class='k-pdf-viewer-window k-action-window k-popup-edit-form' />").append(o.template(n.template)({total:n.pagesCount,messages:i})).kendoWindow(n).getKendoWindow();return t.viewModel=o.observable({title:i.exportAsDialog.title,name:i.exportAsDialog.defaultFileName,extension:n.extension,fileFormats:n.fileFormats,pagesCount:n.pagesCount,page:1,apply:t.apply.bind(this),close:function(){a.close()}}),t._dialog=a,o.bind(a.element,t.viewModel),a},open:function(){this._dialog.center().open()},apply:function(){this._dialog.close(),this.options.apply({fileName:this.viewModel.name+this.viewModel.extension,extension:this.viewModel.extension,page:this.viewModel.page})}}),u=a.extend({init:function(e){this.options=i({},e,this.options)},options:{resizable:!1,template:function(e){var t=e.messages;return'<div class="k-search-panel k-pos-sticky k-top-center"><button aria-label=\''+n(t.dragHandle)+"' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-search-dialog-draghandle'>"+o.ui.icon({icon:"handle-drag",iconClass:"k-button-icon"})+"</button><span class='k-textbox k-input k-input-md k-rounded-md k-input-solid'><input class='k-search-dialog-input k-input-inner' data-bind='value: boundValue, events: { keyup: onKeyup, input: onInput }' aria-label='"+n(t.inputLabel)+"' title='"+n(t.inputLabel)+"' /><span class='k-input-suffix'><button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-match-case-button k-match-case-button' data-bind='css: {k-selected: matchCase}, click: matchCaseClick' aria-label='"+n(t.matchCase)+"' title='"+n(t.matchCase)+"'>"+o.ui.icon({icon:"convert-lowercase",iconClass:"k-button-icon"})+"</button></span></span><span class='k-search-matches'><span data-bind='text: matchIndex'></span> "+n(t.of)+" <span data-bind='text: matches'></span></span><button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: prev' aria-label='"+n(t.previous)+"' title='"+n(t.previous)+"'>"+o.ui.icon({icon:"arrow-up",iconClass:"k-button-icon"})+"</button><button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: next' aria-label='"+n(t.next)+"' title='"+n(t.next)+"'>"+o.ui.icon({icon:"arrow-down",iconClass:"k-button-icon"})+"</button><button class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button' data-bind='click: close' aria-label='"+n(t.close)+"' title='"+n(t.close)+"'>"+o.ui.icon({icon:"x",iconClass:"k-button-icon"})+"</button></div>"}},open:function(){var e=this;e.dialog||e._initializeDialog(),e.options.open(),e._showSearchDialog()},close:function(){this.options.close(),this._hideSearchDialog()},_showSearchDialog:function(){var e=this;e.dialog.css("left",e.options.pageContainer.innerWidth()/2-s(e.dialog,!0)/2+"px"),e.dialog.kendoStop().kendoAnimate({effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350,complete:function(t){e.dialog.find(".k-search-dialog-input").trigger("focus")}})},_hideSearchDialog:function(){this.dialog.kendoStop().kendoAnimate({effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0})},_initializeDialog:function(){var t=this,n=o.template(t.options.template),i=e(n({messages:t.options.messages}));t.options.pageContainer.prepend(i),t.dialog=i,t._draggable=new r(i,{filter:".k-search-dialog-draghandle",axis:"x",dragstart:function(e){var n=t.dialog,i=t.options.pageContainer;if(n.startPosition={left:e.x.client-o.getOffset(n,"position").left},!i)return null;i._innerWidth=i.innerWidth(),parseInt(i._innerWidth,10)>i[0].clientWidth&&(i._innerWidth-=o.support.scrollbar()),n.maxLeft=i._innerWidth-s(n,!0)},drag:function(e){var o,n=t.dialog,i={};(o=e.x.client-n.startPosition.left)&&isNaN(o)&&o.toString().indexOf("px")<0?i.left=o:i.left=Math.max(Math.min(parseInt(o,10),parseInt(n.maxLeft,10)),0),n.css(i)}}),t._draggable.userEvents.stopPropagation=!1,t.searchModel=o.observable({boundValue:"",searchText:"",matchCase:!1,matchIndex:0,matches:0,matchCaseClick:function(){this.set("matchCase",!this.matchCase)},next:t.options.next,prev:t.options.prev,close:function(){this.set("boundValue",""),t.close()},onKeyup:function(e){var t=e.keyCode,o=e.shiftKey?this.prev:this.next;t===c.ENTER?(o(),e.preventDefault()):t==c.ESC&&this.close()},onInput:function(e){this.set("searchText",e.target.value)}}),o.bind(i,t.searchModel)}});i(o.pdfviewer,{dialogs:{ErrorDialog:p,ExportAsDialog:h,SearchDialog:u}})}(window.kendo.jQuery),function(e,t){var o=window.kendo,n=e.extend,i=(JSON.parse,o.ui.progress),a=o.ui.PdfViewerCommon.scrollToSearchMatch,r=o.Class,s=o.pdfviewer.UploadHelper,l=r.extend({init:function(e){this.options=e,this.viewer=e.viewer,this.errorMessages=this.viewer.options.messages.errorMessages}}),d=l.extend({init:function(e){l.fn.init.call(this,e),this._uploadHelper=new s(this.viewer)},exec:function(){this.viewer._upload=this.viewer._upload||this._uploadHelper._initUpload(),this.viewer._upload.element.click()}}),c=l.extend({exec:function(){var e,t,o=this.options.value,n=this.viewer;if(isNaN(o))switch(e=n._pageNum,t=n.document.total,o){case"first":o=1;break;case"prev":o=e>1?e-1:1;break;case"next":o=e<t?e+1:t;break;case"last":o=t}else o=Number(o);n.activatePage(o)}}),p=l.extend({exec:function(){if(this.viewer.document){var e=this.viewer.document.info&&this.viewer.document.info.title||this.viewer.options.messages.defaultFileName;this.viewer.processor.downloadFile(e)}else this.viewer._triggerError({message:this.errorMessages.notFound})}}),h=l.extend({init:function(t){t=e.extend(t,this.options),l.fn.init.call(this,t)},exec:function(){var e=this.viewer._saveDialog||this._initDialog();e._updateModel({pagesCount:this.viewer.document&&this.viewer.document.total||1,page:this.viewer.options.page}),e.open()},apply:function(e){var t=e.extension;".png"===t?this.viewer.exportImage(e):".svg"===t&&this.viewer.exportSVG(e)},_initDialog:function(){return this.viewer._saveDialog=new o.pdfviewer.dialogs.ExportAsDialog({apply:this.apply.bind(this),pagesCount:this.viewer.document&&this.viewer.document.total||1,messages:this.viewer.options.messages}),this.viewer._saveDialog}}),u=l.extend({exec:function(){this.viewer._toggleSelection(!0)}}),g=l.extend({exec:function(){this.viewer._toggleSelection(!1)}}),f=l.extend({init:function(e){var t=this;t.viewer=e.viewer,t.viewer.searchDialog||(t.viewer.searchDialog=new o.pdfviewer.dialogs.SearchDialog({pageContainer:t.viewer.pageContainerWrapper,position:{top:t.viewer.pageContainer.offset().top,left:t.viewer.pageContainer.offset().left},messages:t.viewer.options.messages.dialogs.search,open:t._open.bind(t),next:t._next.bind(t),prev:t._prev.bind(t),close:t._close.bind(t)})),l.fn.init.call(t,e)},exec:function(){this.viewer.searchDialog.open()},_open:function(){var e=this;e.changeHandler=e._change.bind(e),e.zoomStartHandler=e._closeDialog.bind(e),e.openFileHandler=e._closeDialog.bind(e),e.viewer._searchDOM||(e.viewer._initSearchDOM(),e.viewer.searchDialog.searchModel.bind("change",e.changeHandler),e.viewer.bind("zoomStart",e.zoomStartHandler),e.viewer.bind("open",e.openFileHandler))},_close:function(){var e=this,t=e.viewer._searchDOM;e.viewer.searchDialog.searchModel.unbind("change",e.changeHandler),e.viewer.unbind("zoomStart",e.zoomStartHandler),e.viewer.unbind("open",e.openFileHandler),t.destroy(),delete e.viewer._searchDOM,e._updateSearchModel(),e.viewer.toolbar.element.find("[tabindex=0]").trigger("focus")},_change:function(e){var t=this,o=t.viewer._searchDOM,n=e.field,i=t.viewer.searchDialog.searchModel,a=i[n];if(o)switch(n){case"searchText":o.search(a,i.matchCase),t._updateSearchModel();break;case"matchCase":o.search(i.searchText,a),t._updateSearchModel()}},_next:function(){var e=this.viewer._searchDOM;e.matches&&e.matches.length&&(e.nextMatch(),this._updateSearchModel())},_prev:function(){var e=this.viewer._searchDOM;e.matches&&e.matches.length&&(e.previousMatch(),this._updateSearchModel())},_updateSearchModel:function(){var e=this,t=e.viewer._searchDOM,o=e.viewer.searchDialog.searchModel;t?(o.set("matches",t.matches.length),o.set("matchIndex",t.getMarkedIndex()),e._scrollToMark()):(o.set("searchText",""),o.set("matches",0),o.set("matchIndex",0),o.set("matchCase",!1))},_scrollToMark:function(){var e=this.viewer._searchDOM.getFirstMarked();e.length&&a(e[0],this.viewer.pdfScroller)},_closeDialog:function(){this.viewer.searchDialog.close()}}),m=l.extend({exec:function(){var e=this,t=e.options,o=e.viewer,n=t.value||t.scale,i=0,a=e.viewer._pageNum,r=o.pageContainer[0].clientHeight,s=1,l=[];if("dpl"!==o.processingLib){n=e._calculateZoom();var d=function(){o._scrollingStarted||(o.activatePage(a),o._scrollingStarted=!1)};n&&(o.zoomScale=n,o._scrollingStarted=!1,o._setPageContainerScaleFactor(n),o.pages&&(o.pages.forEach((function(e){var t;-1!==o._visiblePages.indexOf(e)&&e.loaded?(l.push(e.render(n)),t=e._page.getViewport({scale:n}).height):(e.resize(n),t=e.element.height()),(i+=t)<=r&&s++})),o._visiblePagesCount!=s&&(o._visiblePagesCount=s,o._loadVisiblePages())),Promise.all(l).then((function(){d(),e._triggerZoomEnd(n)})).catch((function(){d(),e._triggerZoomEnd(n)})))}},_calculateZoom:function(){var e,t=this.options,o=this.viewer,n=o.options,i=o.pageContainer,a=o._visiblePages&&o._visiblePages[0].canvas,r=o._visiblePages&&o._visiblePages[0]._dpr||2,s=t.value||t.scale,l=s;if(o._allowResize=!1,o._autoFit=!1,t.zoomIn?l=s=o.zoomScale+n.zoomRate:t.zoomOut?l=s=o.zoomScale-n.zoomRate:"auto"===s?(o._allowResize=!0,l=o._autoZoomScale):"actual"===s?l=1:"fitToWidth"===s?(o._allowResize=!0,o._autoFit="fitToWidth",l=i.width()/(a.width/r/o.zoomScale)):"fitToPage"===s?(o._allowResize=!0,o._autoFit="fitToPage",l=i.height()/(a.height/r/o.zoomScale)):s&&s.toString().match(/^[0-9]+%?$/)?l=s=parseInt(s.replace("%",""),10)/100:e=isNaN(s),e||(e=s<n.zoomMin||s>n.zoomMax),!e&&!o.trigger("zoomStart",{scale:s}))return t.updateComboBox&&o.toolbar&&o._updateZoomComboBox(s),l},_triggerZoomEnd:function(e){this.viewer.trigger("zoomEnd",{scale:e})}}),v=l.extend({init:function(e){l.fn.init.call(this,e)},exec:function(){var e=this;e.viewer.document?(i(e.viewer.pageContainer,!0),e._renderPrintContainer(),e._loadAllPages().then(e.processAfterRender.bind(e))):e.viewer._triggerError({message:this.errorMessages.notFound})},_renderPrintContainer:function(){this.printContainer=e("<div></div>")},_loadAllPages:function(){var t=this,o=t.viewer.pages,n=[],i=[],a=e.Deferred();function r(e){i.push(e._renderPromise)}t._originalScale=t.viewer.zoom(),t.viewer._setPageContainerScaleFactor(3);for(var s=0;s<o.length;s++)n.push(o[s].load(3,!0).then(r));return Promise.all(n).then((function(){a.resolve(i)})),a},processAfterRender:function(e){var t=this;Promise.all(e).then((function(){t._renderPrintPages(),setTimeout((function(){t._printDocument(),t.viewer.zoom(t._originalScale),i(t.viewer.pageContainer,!1),delete t._originalScale}),0)}))},_renderPrintPages:function(){for(var e=this.viewer.pages,t=0;t<e.length;t++)this._renderPrintImage(e[t])},_renderPrintImage:function(t){var o=t.canvas,n=e("<div></div>"),i="<img src='"+o.toDataURL()+"' width='"+t.width+"px' height='"+t.height+"px' />";n.append(i),this.printContainer.append(n)},_printDocument:function(){var t=this,n=t.viewer.pages,i=n[0].width,a=n[0].height,r=window.open("","","innerWidth="+i+",innerHeight="+a+"location=no,titlebar=no,toolbar=no"),s=o.support.browser;r?(r.document.write(t.printContainer.html()),r.document.close(),r.focus(),r.print(),!s.chrome||s.chromiumEdge?r.close():e(r.document).find("body").on("mousemove",(function(){r.close()}))):t.viewer._triggerError({message:t.errorMessages.popupBlocked})}});n(o.pdfviewer,{OpenCommand:d,PageChangeCommand:c,DownloadCommand:p,EnableSelectionCommand:u,EnablePanCommand:g,ExportCommand:h,PrintCommand:v,OpenSearchCommand:f,ZoomCommand:m})}(window.kendo.jQuery);return function(e,t){var o,n=".kendoPDFViewer",i=window.kendo,a=i.ui,r=a.PdfViewerCommon.Scroller,s=a.PdfViewerCommon.currentPage,l=a.PdfViewerCommon.scrollToPage,d=e.extend,c=i.drawing,p=e.extend({PLUS:187,MINUS:189,ZERO:48,NUMPAD_ZERO:96},i.keys),h=i.pdfviewer.BlankPage,u=a.Widget,g=i.ui.progress,f="error",m="keydown"+n,v="DOMMouseScroll"+n+" mousewheel"+n,w="update",b=1.25,_="pagechange",x="ZoomCommand",k="click",y="pdfjs",P="dpl",C="k-pdf-viewer k-widget",D="k-canvas k-pdf-viewer-canvas k-pos-relative k-overflow-auto",S="k-enable-text-select",T="k-enable-panning",M="k-search-highlight",E="k-text-char",z="auto",O="actual",L="fitToWidth",N="fitToPage",I=u.extend({init:function(e,t){var o=this;u.fn.init.call(o,e,i.deepExtend({},this.options,t)),o._processMessages(),o._wrapper(),o.options.toolbar&&o._renderToolbar(),o._initProcessor(t||{}),o._renderPageContainer(),o._loadDocument(),i.notify(o,i.ui),o._showWatermarkOverlay&&o._showWatermarkOverlay(o.wrapper[0])},events:["render","open",f,"zoomStart","zoomEnd"],options:{name:"PDFViewer",view:{type:"canvas"},pdfjsProcessing:{file:null},dplProcessing:{read:{url:null,type:"GET",dataType:"json",pageField:"pageNumber"},upload:{url:null,saveField:"file"},download:{url:null},loadOnDemand:!1},toolbar:{items:[]},width:1e3,height:1200,page:1,defaultPageSize:{width:794,height:1123},scale:null,zoomMin:.5,zoomMax:4,zoomRate:.25,messages:{defaultFileName:"Document",toolbar:{zoom:{zoomLevel:"zoom level",zoomOut:"Zoom Out",zoomIn:"Zoom In",actualWidth:"Actual Width",autoWidth:"Automatic Width",fitToWidth:"Fit to Width",fitToPage:"Fit to Page"},open:"Open",exportAs:"Export",download:"Download",pager:{first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",of:"of",page:"page",pages:"pages"},print:"Print",toggleSelection:"Enable Selection",togglePan:"Enable Panning",search:"Search"},errorMessages:{notSupported:"Only pdf files allowed.",parseError:"PDF file fails to process.",notFound:"File is not found.",popupBlocked:"Popup is blocked."},dialogs:{exportAsDialog:{title:"Export...",defaultFileName:"Document",pdf:"Portable Document Format (.pdf)",png:"Portable Network Graphics (.png)",svg:"Scalable Vector Graphics (.svg)",labels:{fileName:"File name",saveAsType:"Save as",page:"Page"}},okText:"OK",save:"Save",cancel:"Cancel",search:{inputLabel:"Search Text",matchCase:"Match Case",next:"Next Match",previous:"Previous Match",close:"Close",of:"of",dragHandle:"Drag search"}}}},defaultTools:{pager:{name:"pager",command:"PageChangeCommand"},spacer:{type:"spacer"},zoomInOut:{type:"buttonGroup",fillMode:"flat",attributes:{class:"k-zoom-in-out-group"},buttons:[{type:"button",icon:"zoom-out",name:"zoomOut",command:"ZoomCommand",showText:"overflow",options:'{ "zoomOut": true, "updateComboBox": true }',fillMode:"flat"},{type:"button",icon:"zoom-in",name:"zoomIn",command:"ZoomCommand",showText:"overflow",options:'{ "zoomIn": true, "updateComboBox": true }',fillMode:"flat"}]},zoom:{type:"component",name:"zoom",command:"ZoomCommand",overflow:"never",component:"ComboBox",data:[50,100,150,200,300,400],componentOptions:{enable:!1,dataTextField:"text",dataValueField:"percent",valuePrimitive:!0,clearOnEscape:!1,commandOn:"change"}},toggleSelection:{type:"buttonGroup",fillMode:"flat",attributes:{class:"k-toggle-selection-group"},buttons:[{togglable:!0,command:"EnableSelectionCommand",icon:"pointer",showText:"overflow",name:"toggleSelection",group:"toggle-pan",fillMode:"flat"},{togglable:!0,command:"EnablePanCommand",icon:"hand",showText:"overflow",name:"togglePan",group:"toggle-pan",selected:!0,fillMode:"flat"}]},spacer2:{type:"spacer"},search:{type:"button",command:"OpenSearchCommand",icon:"search",name:"search",showText:"overflow",enable:!1,fillMode:"flat"},open:{type:"button",showText:"overflow",name:"open",icon:"folder-open",command:"OpenCommand",fillMode:"flat"},download:{type:"button",showText:"overflow",name:"download",icon:"download",command:"DownloadCommand",enable:!1,fillMode:"flat"},print:{type:"button",showText:"overflow",name:"print",icon:"print",command:"PrintCommand",enable:!1,fillMode:"flat"}},exportAsTool:{exportAs:{type:"button",showText:"overflow",name:"exportAs",icon:"image-export",command:"ExportCommand",fillMode:"flat"}},pagerTools:[{type:"buttonGroup",fillMode:"flat",buttons:[{type:"button",icon:"caret-alt-to-left",name:"first",showText:"overflow",options:'{ "value": "first" }',attributes:{class:"k-first-link"}},{type:"button",icon:"caret-alt-left",name:"previous",showText:"overflow",options:'{ "value": "prev" }',attributes:{class:"k-prev-link"},rounded:"none"}]},{type:"component",component:"TextBox",name:"page",attributes:{class:"k-viewer-pager-input"},element:"<input id='page-input'/>",overflow:"never",componentOptions:{commandOn:"change"}},{overflow:"never",template:function(e){return"<label for='page-input'>"+e.componentOptions.messages.of+" <span id='total-page'></span> "+e.componentOptions.messages.pages+"</label>"},componentOptions:{messages:{of:"of",pages:"pages"}}},{type:"buttonGroup",fillMode:"flat",buttons:[{type:"button",icon:"caret-alt-right",name:"next",showText:"overflow",options:'{ "value": "next" }',fillMode:"flat",attributes:{class:"k-next-link"},rounded:"none"},{type:"button",icon:"caret-alt-to-right",name:"last",showText:"overflow",options:'{ "value": "last" }',fillMode:"flat",attributes:{class:"k-last-link"}}]}],_processMessages:function(){var t=this.options.messages.toolbar,o=t.zoom,n=t.pager;e.isPlainObject(o)&&(this.options.messages.toolbar=e.extend({},this.options.messages.toolbar,o),this.options.messages.toolbar.zoom=o.zoomLevel||this.options.messages.toolbar.zoom),e.isPlainObject(n)&&(this.options.messages.toolbar=e.extend({},this.options.messages.toolbar,n))},_wrapper:function(){var e=this,t=e.options;e.wrapper=e.element,e.wrapper.width(t.width).height(t.height).addClass(C).on(m,e._keydown.bind(e)),e._allowResize=null===e.options.scale,e._autoZoomScale=b,e.zoomScale=e.options.scale||e._autoZoomScale,e._resizeHandler=i.onResize((function(){e.resize()})),e._pageNum=e.options.page},_keydown:function(e){var t=[p.PLUS,p.NUMPAD_PLUS],o=[p.MINUS,p.NUMPAD_MINUS],n=[p.ZERO,p.NUMPAD_ZERO],i=!1,a={command:x,options:{updateComboBox:!0}};e.ctrlKey&&!this._blankPage&&this.processingLib!==P&&(t.includes(e.keyCode)?(a.options.zoomIn=!0,i=!0):o.includes(e.keyCode)?(a.options.zoomOut=!0,i=!0):n.includes(e.keyCode)&&(a.options.value=b,i=!0),i&&(this.execute(a),e.preventDefault()))},_initProcessor:function(e){var t,n=this;t=e.dplProcessing?n.options.dplProcessing:n.options.pdfjsProcessing,n.processingLib=e.dplProcessing?P:y,n.processor=new i.pdfviewer[n.processingLib].processor(t,n),o=i.pdfviewer[n.processingLib].Page},_renderToolbar:function(){var t=this,o=t.options,n=d({},o.toolbar),a=n.items&&n.items.length?n.items:Object.keys(t.defaultTools);a=t._processTools(a),n={defaultTools:e.extend({},t.defaultTools,t.exportAsTool),parentMessages:o.messages.toolbar,tools:a,resizable:!0};var r=e("<div />");return r.appendTo(t.element),t.toolbar=new i.ui.ToolBar(r,n),t.options.toolbar=t.toolbar.options,t.toolbar.bind("toggle",t._toolbarClick.bind(t)),t.toolbar.bind(k,t._toolbarClick.bind(t)),t.toolbar.bind("change",t._toolbarClick.bind(t)),t.bind({update:t._updateToolbar.bind(t)}),t.toolbar},_processTools:function(t){var o=this,n=o.options.messages.toolbar;return t=t.flatMap((function(t){if("zoom"===t?t=o.defaultTools.zoom:"pager"===t&&(t=o.defaultTools.pager),"zoom"===t.name){t=e.extend({},o.defaultTools.zoom,t);var a=[{percent:z,text:n.autoWidth},{percent:O,text:n.actualWidth},{percent:L,text:n.fitToWidth},{percent:N,text:n.fitToPage}],r=t.data.map((function(e){return{percent:e,text:e+"%"}})),s=o.options.scale?100*o.options.scale+"%":"auto";a=a.concat(r),t.componentOptions.dataSource=a,t.componentOptions.value=s}else if("pager"===t.name){t=e.extend({},o.defaultTools.pager,t);var l=o.pagerTools;o.pager=!0,t=l.map((function(e){return e.componentOptions&&e.componentOptions.messages&&(e.componentOptions.messages,Object.keys(n).forEach((function(t){e.componentOptions.messages[t]=n.pager[t]}))),e.buttons?e.buttons=e.buttons.map((function(e){if(e.icon&&e.icon.indexOf("caret-alt")>-1&&i.support.isRtl(o.element)){var n=e.icon.indexOf("left")>-1?"left":"right",a=e.icon.indexOf("left")>-1?"right":"left";e.icon=e.icon.replace(n,a)}return e.command=t.command,e})):e.command=t.command,e}))}return t}))},_updateToolbar:function(e){var t={page:e.page||1,total:e.total||1},o=this.toolbar,n=o.element,i=n.find("[data-command=ZoomCommand][data-role=combobox]").data("kendoComboBox"),a=n.find(".k-focus");0===a.length&&0===(a=n.find("[tabindex=0]").first()).length&&(a=o._getAllItems().first()),i&&(i.enable(!e.isBlank),"zoom"===e.action&&this._updateZoomComboBox(e.zoom)),("pagechange"===e.action||e.isBlank)&&this.pager&&this._updatePager(t),this._updateOnBlank(e.isBlank),o._resetTabIndex(a)},_updateOnBlank:function(e){var t=this.toolbar,o=t.element;t.enable(o.find(".k-toggle-selection-group"),!e),t.enable(o.find(".k-zoom-in-out-group"),!e),t.enable(o.find("[data-command='OpenSearchCommand']"),!e),t.enable(o.find("[data-command='DownloadCommand']"),!e),t.enable(o.find("[data-command='PrintCommand']"),!e)},_updatePager:function(e){var t=this.toolbar.element,o=t.find("#page-input").data("kendoTextBox"),n=t.find("#total-page");o&&e.page&&o.value(e.page),n.length&&e.total&&n.text(e.total),this._togglePagerDisabledClass(e)},_togglePagerDisabledClass:function(e){var t=this.toolbar,o=t.element,n=!e.total,i=o.find(".k-prev-link").closest(".k-button-group"),a=o.find(".k-next-link").closest(".k-button-group"),r=o.find("#page-input").data("kendoTextBox");i.length&&t.enable(i,n||1!==e.page),a.length&&t.enable(a,n||e.page!==e.total),r&&r.enable(e.total>1)},_updateZoomComboBox:function(e){var t=e===z||e===O||e===N||e===L,o=this.toolbar.element.find("[data-command=ZoomCommand][data-role=combobox]").data("kendoComboBox");t||(e=Math.round(100*e)+"%"),o&&o.value(e)},_toolbarClick:function(t){var o=e(t.target).data("command"),n=e(t.target).data("options");n=d({},{value:e(t.target).val()},n),o&&this.execute({command:o,options:n})},_initErrorDialog:function(e){var t=this;if(!t._errorDialog){e=d(e,{messages:t.options.messages});var o=new i.pdfviewer.dialogs.ErrorDialog(e);t._errorDialog=o._dialog}return t._errorDialog},_renderPageContainer:function(){var t=this;t.pageContainer||(t.pageContainerWrapper=e("<div />"),t.pageContainerWrapper.addClass(D),t.pageContainer=e('<div class="k-pdf-viewer-pages" style="--scale-factor: '+t.zoomScale+'" />'),t.pageContainer.attr("tabindex",0),t.pageContainerWrapper.append(t.pageContainer),t.wrapper.append(t.pageContainerWrapper))},_setPageContainerScaleFactor:function(e){this.pageContainer&&this.pageContainer[0].style.setProperty("--scale-factor",e)},_triggerError:function(e){var t=this._initErrorDialog();d(e,{dialog:t}),this.pageContainer&&g(this.pageContainer,!1),this.trigger(f,e)||t.open().content(e.message)},_renderPages:function(){var e,t=this,n=t.document;if(t.pages=[],n&&n.total){e=n.pages;for(var i=1;i<=n.total;i++){var a,r={processor:t.processor,number:i};e&&e.length&&(r=d(r,e[i-1])),a=new o(r,t),t.pages.push(a),t.pageContainer.append(a.element)}t._attachContainerEvents(),t._getVisiblePagesCount()}else t._renderBlankPage()},_renderBlankPage:function(){this._blankPage=new h(this.options.defaultPageSize,this),this.pageContainer.append(this._blankPage.element),this._blankPage._initUpload(),this.trigger(w,{isBlank:!0})},_resize:function(){var e,t=this;t._allowResize&&(t.pages&&t.pages.length?(t.toolbar&&t.toolbar.resize(!0),t._resizeHandler&&clearTimeout(t._resizeHandler),t._resizeHandler=setTimeout(t._resizePages.bind(t),100)):t._blankPage&&(e=undefined/t._blankPage.element.width(),t._blankPage.resize(e)))},_resizePages:function(){var e=this,t=e.pageContainer[0].clientWidth,o=0;e.pages.forEach((function(e){var n=t/e.element.width();n>o&&(o=n)})),e._autoFit?e.zoom(e._autoFit,!0):(o=Math.min(Math.max(o,e.options.zoomMin),b))!=e.zoomScale&&(e.zoom(o,!0),e.zoomScale=o,e._allowResize=!0)},_attachContainerEvents:function(){var e=this;e._wheel=i.throttle(e._wheel.bind(e),300),e.processingLib!==P&&e.pageContainer.on(v,(function(t){t.ctrlKey&&(document.activeElement!==e.pageContainer[0]&&e.pageContainer.trigger("focus"),e._wheel(t),t.preventDefault())})),e.pageContainer.addClass(T),e.pageContainerWrapper.bind("scroll",e._scroll.bind(e)),e.pageContainerWrapper.on(k+n,".k-annotation-layer a[href]",e._linkHandler.bind(e))},_linkHandler:function(t){var o=e(t.target).attr("href");o&&0===o.indexOf("#")&&(this.processor.navigateToDestination&&this.processor.navigateToDestination(o),t.preventDefault())},_scroll:function(e){var t,o=this,n=o.pageContainerWrapper.height(),i=o.pages.length,a=o._pageNum,r=a-1;if(!o._preventScroll&&i){o._scrollingStarted=!0;var l=s(o.element[0]);if(o.pages[r],a!==(t=a+l-r)&&t>=1&&t<=i){if(o.pages[t-1].element.offset().top>n)return;o._pageNum=t,o._loadVisiblePages(),o.trigger(w,{action:_,page:t,total:i})}}else o._preventScroll=!1},_wheel:function(e){var t=e.originalEvent,o=(t.wheelDelta?-t.wheelDelta:t.detail)<0;this.execute({command:x,options:{zoomIn:o,zoomOut:!o,updateComboBox:!0}}),e.preventDefault()},zoom:function(e,t){return e?this.execute({command:x,options:{value:e,updateComboBox:!t}}):this.zoomScale},execute:function(e){var t=d({viewer:this},e.options);return new i.pdfviewer[e.command](t).exec()},_loadDocument:function(){var e=this,t=e.options.page;g(e.pageContainer,!0),e.processor.fetchDocument().done((function(o){e._clearPages(),e.document=o,e._renderPages(),e.resize(!0),o&&(t=t>=1&&t<=o.total?t:1,e.activatePage(t)),e.pdfScroller&&e.pdfScroller.destroy(),e.pdfScroller=new r(e.pageContainer[0].parentNode,{filter:".k-page",events:{}}),e.pdfScroller.enablePanEventsTracking(),g(e.pageContainer,!1)}))},loadPage:function(e){var t=this.pages&&this.pages[e-1];if(t)return t.load(this.zoomScale)},activatePage:function(e){var t=this.pages&&this.pages[e-1],o=this.pageContainerWrapper;t&&(this._pageNum=e,this._loadVisiblePages(),this._preventScroll=!0,l(o[0],e-1),this.trigger(w,{action:_,page:e,total:this.pages.length}))},_getVisiblePagesCount:function(){for(var e=this,t=0,o=0,n=e.pageContainer[0].clientHeight,i=0;t<=n&&i<e.pages.length;)t+=e.pages[i].element.height(),o++,i++;e._visiblePagesCount=o},_loadVisiblePages:function(){var e=this.pages&&this.pages.length,t=Math.max(this._pageNum-this._visiblePagesCount,1),o=Math.min(this._pageNum+this._visiblePagesCount,e);this._visiblePages=this.pages.slice(t-1,o);for(var n=t;n<=o;n++)this.loadPage(n)},_loadAllPages:function(){for(var e=this.pages&&this.pages.length,t=[],o=0;o<=e;o++)t.push(this.loadPage(o));return t},fromFile:function(e){this.zoomScale=this.options.scale||b,this.zoom(this.zoomScale,!0),this.trigger(w,{action:"zoom",zoom:this.options.scale||"auto"}),this.processor._updateDocument(e),this._loadDocument()},exportImage:function(e){var t=this,o=e.page,n=t.pages[o-1]||t._blankPage,a=new c.Group;n.load();var r=i.drawing.Path.fromRect(new i.geometry.Rect([0,0],[n.width,n.height]),{fill:{color:"#ffffff"},stroke:null});g(t.pageContainer,!0),a.append(r,n.group),c.exportImage(a).done((function(o){g(t.pageContainer,!1),i.saveAs({dataURI:o,fileName:e.fileName,proxyURL:e.proxyURL||"",forceProxy:e.forceProxy,proxyTarget:e.proxyTarget})}))},exportSVG:function(e){var t=this,o=e.page,n=t.pages[o-1]||t._blankPage;g(t.pageContainer,!0),n.load(),c.exportSVG(n.group).done((function(o){g(t.pageContainer,!1),i.saveAs({dataURI:o,fileName:e.fileName,proxyURL:e.proxyURL||"",forceProxy:e.forceProxy,proxyTarget:e.proxyTarget})}))},setOptions:function(t){var o=this;(t.pdfjsProcessing||t.dplProcessing)&&o._initProcessor(t||{}),t=e.extend(o.options,t),u.fn.setOptions.call(o,t),t.page&&(o._pageNum=t.page,o.activatePage(t.page)),t.width&&o.element.width(t.width),t.height&&o.element.height(t.height)},destroy:function(){this._resizeHandler&&i.unbindResize(this._resizeHandler),this._errorDialog&&this._errorDialog.destroy(),this._saveDialog&&this._saveDialog.destroy(),this._upload&&this._upload.destroy(),this.toolbar&&(this.toolbar.unbind(),this.toolbar.destroy(),this.toolbar=null),this.pages&&this.pages.length&&(this.pages.forEach((function(e){e.destroy()})),this.pages=[]),this.pdfScroller&&this.pdfScroller.destroy(),this.pageContainer.off(n),this.pageContainerWrapper.off(n),u.fn.destroy.call(this)},_clearPages:function(){this.pages=[],this.document=null,this._pageNum=1,this.pageContainer.off(n),this.pageContainer.empty(),this.pdfScroller&&this.pdfScroller.destroy()},_toggleSelection:function(e){var t=this;undefined===e&&(e=!0),t.pdfScroller&&(e?t.pdfScroller.disablePanEventsTracking():t.pdfScroller.enablePanEventsTracking()),t.pageContainer.toggleClass(S,e),t.pageContainer.toggleClass(T,!e)},_initSearchDOM:function(){var e=this;return new Promise((function(t){Promise.all(e._loadAllPages()).then((function(){e._searchDOM=new i.pdfviewer.SearchDOM({target:e._getTextLayers(),highlightClass:M,charClass:E}),t()}))}))},_getTextLayers:function(){return this.pages.map((function(e){return e.textLayer}))}});a.plugin(I)}(window.kendo.jQuery),kendo}));
//# sourceMappingURL=kendo.pdfviewer.min.js.map
