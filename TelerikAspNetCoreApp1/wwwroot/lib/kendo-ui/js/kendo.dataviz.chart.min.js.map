{"version":3,"file":"kendo.dataviz.chart.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendodataviz","chart","js","this","$","window","kendo","dataviz","Class","isNumber","datavizConstants","constants","MAX_VALUE","MIN_VALUE","VALUE","DATE","CENTER","TOP","BOTTOM","LEFT","WHITE","CIRCLE","X","Y","RIGHT","BLACK","DEFAULT_PRECISION","ARC","defined","getter","isArray","ChartElement","Point","Box","alignPathToPixel","setDefaultOptions","isString","inArray","isFunction","valueOrDefault","isObject","parseDate","deepExtend","last","eventElement","getTemplate","TextBox","ShapeElement","getSpacing","CurveProcessor","append","styleValue","CategoryAxis","BoxElement","Title","round","limitValue","grep","elementStyles","bindEvents","services","unbindEvents","support","drawing","Path","Animation","AnimationFactory","Group","Color","geometry","GeometryPoint","transform","ChartAxis","extend","init","axis","_axis","options","value","point","getCategory","getValue","slot","from","to","limit","range","valueRange","findAxisByName","name","axes","idx","length","prepareUserOptions","ChartPane","pane","visual","chartsVisual","chartContainer","_pane","ChartPlotArea","plotArea","_plotArea","backgroundVisual","_bgVisual","countNumbers","values","count","i","num","Aggregates","min","Math","max","sum","sumOrNull","result","avg","first","getField","field","row","get","SeriesBinder","_valueFields","_otherFields","_nullValue","_undefinedValue","register","seriesTypes","valueFields","otherFields","this$1$1","type","_makeValue","undefined","canonicalFields","series","concat","bindPoint","pointIx","item","fields","data","pointData","Array","fieldData","slice","_bindFromArray","srcValueFields","sourceFields","srcPointFields","_bindFromObject","initialValue","array","object","srcFields","fieldName","srcFieldName","sourceFieldName","push","current","percentRegex","standardDeviationRegex","RegExp","ErrorRangeCalculator","errorValue","initGlobalRanges","deviationMatch","exec","valueGetter","createValueGetter","average","getAverage","deviation","getStandardDeviation","multiple","parseFloat","errorRange","low","high","globalRange","indexOf","standardError","getStandardError","binder","index","OBJECT","getErrorRange","pointValue","Error","percentValue","abs","sqrt","isSample","total","squareDifferenceSum","pow","browser","INITIAL_ANIMATION_DURATION","FADEIN","BORDER_BRIGHTNESS","START_SCALE","msie","ERROR_LOW_FIELD","ERROR_HIGH_FIELD","X_ERROR_LOW_FIELD","X_ERROR_HIGH_FIELD","Y_ERROR_LOW_FIELD","Y_ERROR_HIGH_FIELD","ZERO","INTERPOLATE","GAP","ABOVE","BELOW","SMOOTH","STEP","AREA","BAR","BOX_PLOT","BUBBLE","BULLET","CANDLESTICK","COLUMN","DONUT","FUNNEL","PYRAMID","HEATMAP","HORIZONTAL_WATERFALL","LINE","OHLC","PIE","POLAR_AREA","POLAR_LINE","POLAR_SCATTER","RADAR_AREA","RADAR_COLUMN","RADAR_LINE","RANGE_AREA","RANGE_BAR","RANGE_COLUMN","SCATTER","SCATTER_LINE","VERTICAL_AREA","VERTICAL_BOX_PLOT","VERTICAL_BULLET","VERTICAL_LINE","VERTICAL_RANGE_AREA","WATERFALL","EQUALLY_SPACED_SERIES","TRENDLINE_LINEAR","TRENDLINE_MOVING_AVERAGE","TRENDLINE_SERIES","LEGEND_ITEM_CLICK","LEGEND_ITEM_HOVER","LEGEND_ITEM_LEAVE","SERIES_CLICK","SERIES_HOVER","SERIES_OVER","SERIES_LEAVE","PLOT_AREA_CLICK","PLOT_AREA_HOVER","PLOT_AREA_LEAVE","DRAG","DRAG_END","DRAG_START","ZOOM_START","ZOOM","ZOOM_END","SELECT_START","SELECT","SELECT_END","RENDER","SHOW_TOOLTIP","HIDE_TOOLTIP","PANE_RENDER","LOGARITHMIC","CATEGORY","INSIDE_END","INSIDE_BASE","OUTSIDE_END","MOUSEWHEEL","MOUSEWHEEL_DELAY","DRILLDOWN","DRILLDOWN_FIELD","MIN_MOVING_AVERAGE_PERIOD","GLASS","TOOLTIP_OFFSET","LINE_MARKER_SIZE","MOUSEWHEEL_ZOOM_RATE","ErrorBarBase","isVertical","fn","call","reflow","targetBox","linePoints","endCaps","valueBox","getAxis","getSlot","centerBox","center","capsWidth","getCapsWidth","capValue","x","y","capStart","capEnd","y1","y2","box","x1","x2","boxSize","width","height","floor","createVisual","rect","toRect","sender","getSender","color","line","createDefaultVisual","defaultVisual","lineOptions","stroke","dashType","moveTo","lineTo","animation","delay","zIndex","CategoricalErrorBar","seriesValueAxis","anyHasZIndex","elements","appendIfNotNull","element","areNumbers","segmentVisible","visible","pointVisibility","bindSegments","points","categoriesCount","seriesCount","categories","equalsIgnoreCase","a","b","toLowerCase","evalOptions","context","state","dryRun","defaults","depth","needsEval","excluded","property","hasOwnProperty","propValue","filterSeriesByType","types","currentSeries","getDateField","intlService","key","hasGradientOverlay","overlay","gradient","hasValue","isDateAxis","axisOptions","sampleCategory","dateCategory","Date","singleItemOrArray","AREA_REGEX","hasValue$1","convertableToNumber","findNext","ref","pointHasValue","outPoint","start","dir","getter$$1","hasItem","createOutOfRangePoints","hasMinPoint","hasMaxPoint","minPoint","maxPoint","missingValues","test","stack","seriesMissingValues","_outOfRangeMinPoint","_outOfRangeMaxPoint","CategoricalChart","chartService","categoryAxis","seriesCategoryAxis","valueAxisRanges","categoryPoints","seriesPoints","seriesOptions","_evalSeries","render","traverseDataPoints","addValue","bind","pointOptions","seriesIx","pointType","prototype","vertical","invertAxes","plotValue","isStacked100","categoryIx","otherValues","categorySum","other","otherStack","group","plotRange","startValue","isStacked","positive","prevValue","isStackedBar","STRING","otherValue","valueAxis","axisCrossingValue","categoryAxisCrossingValue","stackLimits","axisName","stackName","pIx","isFinite","updateStackRange","chartSeries","limitsCache","limits","errorTotals","negative","sparseArrayLimits","addErrorBar","errorBars","lowValue","highValue","seriesErrorRanges","addPointErrorBar","stackedErrorRange","updateRange","errorBar","createPoint","owner","noteText","dataItem","evalPointOptions","category","_defaults","doEval","axisRange","namedValueAxes","categorySlots","chartPoints","categorySlot","valueSlot","pointSlot","aboveAxis","stackValue","percentage","reflowPoint","reflowCategories","clip","limitPoints","limitPoint","limitedSlot","limitSlot","equals","reverse","axisCrossingValues","axisIndex","slotX","slotY","callback","_outOfRangeCallback","seriesIx$1","currentCategory","categoryAt","seriesIx$2","outOfRangePoint","formatPointValue","format","auto","PointEventsMixin","click","e","trigger","eventArgs","hover","over","out","runningTotal","originalEvent","NoteMixin","createNote","notes","text","label","note","Note","LinePoint","tooltipTracking","markers","labels","_rendered","size","marker","createMarker","labelTemplate","labelText","formatValue","align","vAlign","margin","left","right","markerBorder","background","border","brightness","toHex","rotation","opacity","markerBox","_childBox","childBox","clone","reflowLabel","noteTargetBox","anchor","position","alignTo","createHighlight","highlight","defaultColor","shadow","getElement","highlightVisual","highlightVisualArgs","paddingBox","halfSize","Rect","tooltipAnchor","clipBox","overlaps","verticalAlign","horizontalAlign","horizontal","overlapsBox","unclipElements","noclip","padding","HIGHLIGHT_ZINDEX","LineSegment","toGeometryPoints","customVisual","segmentVisual","fromPoints","closed","close","aliasFor","coords","parent","getNearestPoint","StepLineMixin","calculateStepPoints","justified","stepAxis","stepDir","previousPoint","toGeometryPoint","stepPoint","lintPoint","StepLineSegment","SplineSegment","segments","process","curve","apply","LineChartMixin","renderSegments","lastSegment","_segments","sortedPoints","sortPoints","pointCount","createSegment","_addSegment","children","unshift","segment","nearestPoint","target","allPoints","nearestPointDistance","pointDistance","distanceTo","ClipAnimation","setup","_setEnd","step","pos","interpolateValue","topRight","bottomRight","suspend","setX","resume","duration","ClipAnimationMixin","createAnimation","root","getRoot","transitions","clipPath","fromRect","_setChildrenAnimation","animationPoints","LineChart","style","supportsPointInactiveOpacity","AreaSegment","prevSegment","stackPoints","createFill","fill","createStroke","lineCap","strokeSegments","_strokeSegments","createStrokeSegments","segmentsFromPoints","stackSegments","createStackSegments","map","Segment","hasStackSegment","fillSegments","hasStackSegments","fillToAxes","fillPath","crossingValue","endSlot","firstPoint","lastPoint","end","StepAreaSegment","SplineAreaSegment","curveProcessor","controlOut","controlIn","AreaChart","previousSegment","_gapStackPoints","_stackPoints","stackPoint","startIdx","endIdx","pointOffset","currentSeriesIx","_previousSegmentPoint","gapStackPoint","_createGapStackPoint","segmentIx","seriesIdx","AxisGroupRangeTracker","axisRanges","update","chartAxisRanges","chartRange","reset","query","BarLabel","content","textBox","textOptions","labelBox","contentBox","top","bottom","alignToClipBox","parentBox","Bar","createLabel","rectVisual","createRect","strokeOpacity","path","getBorderColor","lineJoin","createGradientOverlay","baseColor","_brightness","borderColor","forEach","forEachReverse","ClusterLayout","rtl","gap","spacing","slots","slotSize","child","StackWrap","positionAxis","childrenCount","currentChild","snapTo","wrap","BarChart","clusterType","stackType","labelOptions","negativeColor","cluster","getStackWrap","stackWrap","stackGroup","wraps","_stackGroup","zeroSlot","stackAxis","childrenLength","_setAnimationOptions","pointVisual","origin","Candlestick","ocSlot","open","lhSlot","realBody","mid","lines","reflowNote","_mainVisual","mainVisual","createOverlay","createBody","createLines","container","body","set","drawLines","lineStyle","normalColor","tooltip","CandlestickChart","splitValue","downColor","parts","BoxPlot","whiskerSlot","boxSlot","q1","q3","reflowBoxSlot","lower","upper","reflowWhiskerSlot","medianSlot","median","mean","meanSlot","meanPoints","calcMeanPoints","whiskerPoints","calcWhiskerPoints","medianPoints","calcMedianPoints","renderOutliers","outliers","outerFence","outlierValue","extremes","markersBorder","shape","reflowOutliers","move","whiskers","CROSS","VerticalBoxPlot","BoxPlotChart","filterOutliers","items","ScatterErrorBar","seriesAxes","ScatterChart","_initFields","xAxisRanges","yAxisRanges","valueErrorField","lowField","highField","createMissingValue","intl","xAxisName","xAxis","yAxisName","yAxis","xAxisRange","yAxisRange","namedXAxes","axisX","namedYAxes","axisY","ref$1","Bubble","radius","highlightGroup","Circle","createGradient","stops","offset","BubbleChart","_maxSize","negativeValues","updateBubblesSize","pointsCount","animationOptions","minR","minSize","maxR","maxSize","minArea","PI","areaRatio","area","Target","Bullet","targetValueSlot","targetSlotX","targetSlotY","targetSlot","bodyVisual","create","BulletChart","seriesItem","wrapData","bulletOptions","bullet","isNaN","BaseTooltip","getStyle","pointColor","backgroundColor","font","borderWidth","paddingTop","paddingBottom","paddingLeft","paddingRight","show","tooltipOptions","isDark","className","notify","hide","destroy","CrosshairTooltip","crosshair","formatService","initAxisName","showAt","stickyMode","formattedValue","dateFormats","baseUnit","getAnchor","ref_options","lineBox","bbox","bottomLeft","translate","topLeft","Crosshair","moveLine","lineEnd","getBox","dim","lineStart","pointCategoryIndex","axisLineBox","currentAxis","ChartContainer","shouldClip","_clipBox","chartsBox","clipRect","unclipLabels","stackRoot","charts","j","isStackRoot","Pane","id","ID","createTitle","titleOptions","title","buildTitle","appendAxis","appendAxisAt","splice","appendChart","empty","removeAxis","i$1","removeChart","pop","visualStyle","renderComplete","createGridLines","clipRoot","allAxes","vGridLines","hGridLines","gridLines","altAxis","refresh","clear","renderVisual","notifyRender","axisValueField","length$1","idx$1","axis$1","lineBox$1","service","getService","paneIndex","shrinkToFit","PlotAreaBase","initFields","initSeries","legend","crosshairs","originalOptions","originalSeries","_bindCache","WeakMap","createPanes","createCrosshairs","cached","paneDefaults","paneOptions","panes","panesLength","currentPane","crosshairOptions","currentCrosshair","removeCrosshairs","hideCrosshairs","findPane","matchingPane","findPointPane","containsPoint","axisToRemove","filteredAxes","chartToRemove","filteredCharts","addToLegend","inactiveItems","inactiveItemsLabels","seriesVisible","visibleInLegend","itemLabelOptions","markerColor","active","groupAxes","xAxes","yAxes","paneIx","paneAxes","axisIx","any","groupSeriesByPane","seriesByPane","seriesPaneName","filterVisibleSeries","unpad","reflowPanes","detachLabels","reflowAxes","reflowCharts","redraw","panesArray","cleanGradients","crossingAxes","crossingValues","valuesToAdd","defaultValue","alignAxisTo","targetAxis","targetCrossingValue","slotEdge","targetEdge","axisBox","alignAxes","xAnchor","yAnchor","xAnchorCrossings","yAnchorCrossings","leftAnchors","rightAnchors","topAnchors","bottomAnchors","paneId","paneAnchor","anchorCrossings","_overlap","_mirrored","mirror","pane$1","paneId$1","visible$1","anchor$1","anchorCrossings$1","COORD_PRECISION","shrinkAxisWidth","axisGroupBox","overflowX","shrink","shrinkAxisHeight","shrinked","overflowY","fitAxes","offsetX","paneBox","offsetY","currentAxis$1","reflowPaneAxes","autoRotateAxisLabels","groupedAxes","rotated","allPaneAxes","autoRotateLabels","chartPane","remainingHeight","autoHeightPanes","percents","parseInt","currentPane$1","i$2","currentPane$2","backgroundBox","axesCount","axisA","axisB","chartsBoxes","boxes","addBackgroundPaths","multipath","paths","backgroundContainsPoint","bg","MultiPath","appendVisual","pointsByCategoryIndex","categoryIndex","pointsBySeriesIndex","seriesIndex","filterPoints","pointsBySeriesName","findPoint","paneByPoint","detachAxisGroupLabels","labelAxisCount","labelAxis","createLabelAxis","onAxis","END","START","edge","plotBands","isTrendline","trendlineFactory","createTrendlineSeries","modifiedSeries","forSeries","seriesByName","for","trendlineSeries","INHERIT","filter","find","isSingleAxis","some","reduce","acc","PlotAreaEventsMixin","_dispatchEvent","SeriesAggregator","defaultAggregates","seriesFields","_seriesFields","rootAggregate","aggregate","_series","_binder","fieldAggregate","canonicalName","aggregatePoints","srcPoints","_bindPoints","firstDataItem","dataItems","srcValues","_bindField","setValue","parentObj","split","shift","DefaultAggregates","aggregates","seriesType","RangeBar","fromOptions","toOptions","labelFrom","_createLabel","labelTo","RangeBarChart","plotLimits","RangeLinePoint","AUTO","RangeAreaPoint","initLabelsFormat","fromPoint","toPoint","copyFields","fromBox","toBox","positionLabels","fromLabelPosition","toLabelPosition","RangeAreaSegment","toPoints","fromSegments","toPath","fromPath","SplineRangeAreaSegment","createCurveSegments","StepRangeAreaSegment","RangeAreaChart","fromSlot","toSlot","OHLCPoint","oPoints","cPoints","lhPoints","oSlot","cSlot","OHLCChart","WaterfallSegment","WaterfallChart","createSegments","totalCategories","summary","prevPoint","registry","impl","String","calculateSlope","sourceValues","slope","intercept","xy","xMin","Number","xMax","xValue","yValue","calculateMovingAverage","period","averagePoints","lastValue","valueGetter$1","seriesValues","totalRange","totalRangeIndices","currentRange","currentRangeIndices","ceil","getData","categoryField","trendline","calculatePoints","getData$1","AREA_SERIES","OUT_OF_RANGE_SERIES","CategoricalPlotArea","namedCategoryAxes","valueAxisRangeTracker","_seriesPointsCache","_currentPointsCache","stack100","createCategoryAxes","aggregateCategories","createCategoryAxesLabels","createCharts","createValueAxes","filterSeries","trendlineAggregateForecast","forecast","before","after","srcSeries","aggregateSeries","paneSeries","visibleSeries","groups","groupSeriesByCategoryAxis","groupIx","createChartGroup","createAreaChart","createRangeAreaChart","createBarChart","createRangeBarChart","createBulletChart","createCandlestickChart","createBoxPlotChart","createOHLCChart","createWaterfallChart","createLineChart","processedSeries","axisPane","dataLength","_seriesMax","outOfRangePoints","clearSeriesPointsCache","seriesSourcePoints","categoriesHash","srcCategories","dateAxis","srcData","getFn","mapCategories","totalIndex","aggregator","categoryItem","categoryIdx","totalCount","categoriesToAdd","defaultPaneName","stackableChartOptions","firstSeries","categoryAxes","unique","axisSeries","groupSeries","barChart","rangeColumnChart","bulletChart","lineChart","areaChart","rangeAreaChart","waterfallChart","axisRequiresRounding","categoryAxisName","categoryAxisIndex","centeredSeries","seriesAxis","aggregatedAxis","createLabels","definitions","isJustified","_forecast","DateCategoryAxis","primaryAxis","tracker","defaultRange","baseOptions","roundToMajorUnit","defaultAxisRange","LogarithmicAxis","NumericAxis","eventType","_eventCoordinates","pointPane","updateAxisOptions","targetOptions","axesOptions","s","Highlight","_points","arrayPoints","toggleHighlight","hasHighlight","togglePointHighlight","toggleHandler","toggle","preventDefault","_defaultPrevented","isHighlighted","acceptKey","mouseKey","event","ctrlKey","shiftKey","altKey","toChartAxisRanges","ranges","Pannable","_active","_panAxes","pan","delta","lock","updatedAxes","limitRange","ZoomSelection","createElement","marquee","_marquee","document","marqueeColor","appendChild","removeElement","parentNode","removeChild","setStyles","styles","zoomPane","_zoomPane","_elementOffset","_zoomPaneClipBox","pageX","pageY","chartElement","elementOffset","_selectionPosition","elementOffset$$1","selectionPosition","_updateAxisRanges","zoom","pointsRange","startLocation","location","limitValue$1","util","MousewheelZoom","rate","updateRanges","zoomRange","LegendLayout","Layout","lineSpacing","orientation","alignItems","legendItem","clippedBBox","rectToBox","addVisual","LegendItem","createContainer","FloatElement","markerOptions","cursor","eventSink","_itemOverlay","widget","args","_legendItemHover","pointIndex","_unsetActivePoint","renderChildren","HORIZONTAL","CUSTOM","Legend","createContainers","createLegendTitle","createItems","userAlign","hasTitle","itemsContainer","innerElement","hasItems","legendBox","containerCustomReflow","containerReflow","alignTarget","containerBox","createTitleLayout","appendTitleLayoutContent","layout","Boolean","PlotAreaFactory","_registry","match","entry","trendlines","createDiv","classNames","closestHandle","hasClasses","Selection","observer","_dateAxis","initOptions","offsetHeight","createElements","_index","onPane","wrapper","direction","selection","leftMask","rightMask","leftHandle","rightHandle","selectionStyles","leftHandleHeight","rightHandleHeight","borderLeftWidth","borderRightWidth","cssText","obj","mousewheel","_mousewheelHandler","_mousewheel","_domEvents","DomEventsBuilder","stopPropagation","_start","_move","_end","tap","_tap","press","_press","gesturestart","_gesturestart","gesturechange","_gesturechange","gestureend","_gestureend","clearTimeout","_mwTimeout","_state","_rangeEventArgs","_value","_pointInPane","modelCoords","_toModelCoordinates","eventCoordinates","handle","bodyRect","getBoundingClientRect","inBody","moveTarget","addClass","oldRange","span","scale","removeClass","rightClick","which","mousewheelDelta","expand","setTimeout","touch","touches","p0","p1","_slot","leftMaskWidth","rightMaskWidth","distance","fromValue","toValue","zDir","relative","minDelta","maxDelta","Tooltip","_current","SharedTooltip","tooltipPoints","_slotAnchor","_defaultAnchor","shared","categoryText","categoryFormat","slotCenter","BarChartAnimation","fromScale","abort","scaleX","scaleY","BubbleAnimation","easing","FadeInAnimation","fadeTo","PieAnimation","ScatterLineChart","missingValue","scatterValueGetter","scatterRegistry","samplingInterval","diff","log","relativeValue","autoMajorUnit","getData$2","getData$3","XYPlotArea","xAxisRangeTracker","yAxisRangeTracker","filteredSeries","createScatterChart","createScatterLineChart","createBubbleChart","createAxes","xAxisOptions","yAxisOptions","createXYAxis","inferredDate","namedAxes","isLog","typeSamples","seriesAxisName","firstPointValue","DateValueAxis","xAxesOptions","yAxesOptions","axisPane$1","xValues","yValues","currentValue","updateAxisOptions$1","PieSegment","sector","autoTextColor","themeLabels","theme","seriesDefaults","animationDelay","labelsOptions","labelsDistance","angle","middle","lp","labelHeight","labelWidth","startAngle","innerRadius","endAngle","createSegmentVisual","borderOptions","fallbackFill","userSpace","singleSegment","ShapeBuilder","createRing","midAndle","tooltipAlignment","RAD_30","rad","RAD_60","radians","sine","sin","cosine","cos","DEFAULT_FONT","PieChartMixin","createLegendItem","legendOptions","pointVisible","legendItems","PieChart","seriesColors","colorsCount","anglePerValue","constantAngle","currentAngle","explode","Ring","evalSegmentOptions","segmentOptions","seriesConfigs","minWidth","halfMinWidth","defaultPadding","newBox","newBoxCenter","boxCenter","leftSideLabels","rightSideLabels","seriesConfig","setRadius","sort","labelComparator","leftLabelsReflow","rightLabelsReflow","distances","distanceBetweenLabels","distributeLabels","lr","firstBox","secondBox","remaining","_takeDistance","reflowLabels","amount","available","boxX","labelsCount","labelDistance","boxY","hAlignLabel","connectors","_connectorLines","connectorsColor","connectorLine","centerPoint","sr","crossing","intersection","pointInCircle","space","autoFit","pieCenter","bboxBottom","reverseValue","originalX","sector_center","cx","cy","t","a1","a2","b1","b2","uat","ub","ua","PiePlotArea","createPieChart","pieChart","DonutSegment","DonutChart","holeSize","totalSize","seriesWithoutSize","currentSeries$1","DonutPlotArea","createDonutChart","donutChart","PolarPlotAreaBase","createPolarAxis","createValueAxis","polarAxis","axisType","axisDefaultRange","valueAxisOptions","RadarLogarithmicAxis","RadarNumericAxis","valueAxisBox","heightDiff","PolarScatterChart","valueRadius","onCircle","PolarLineChart","SplinePolarAreaSegment","_polarAxisCenter","PolarAreaSegment","centerSegment","PolarAreaChart","_hasMissingValuesGap","xComparer","PolarPlotArea","PolarAxis","majorGridLines","minorGridLines","scatterChart","RadarLineChart","seriesSegments","groupBySeriesIx","isFirstDataPoint","isLastDataPoint","SplineRadarAreaSegment","RadarAreaSegment","RadarAreaChart","RadarSegment","RadarClusterLayout","slotAngle","slotSector","RadarStackLayout","childSector","RadarBarChart","RadarPlotArea","RadarCategoryAxis","_hasBarCharts","_isStacked100","chartOptions","FunnelSegment","chartBox","createPath","FunnelChart","labelPadding","dynamicSlopeReflow","totalHeight","firstSegment","maxSegment","lastUpperSide","previousOffset","previousHeight","nextSegment","nextPercentage","segmentSpacing","constantSlopeReflow","decreasingWidth","neckRatio","finalNarrow","dynamicSlope","dynamicHeight","PyramidChart","FunnelPlotArea","createChart","chartType","HeatmapPoint","labelColor","isRoundRect","ROUNDED_RECT","halfBorderWidth","borderRadius","HeatmapChart","setRange","minLightnessOffset","parseColor","hsl","toHSL","l","toCss","colorScale","indexX","indexY","xRange","yRange","ref$2","xIndex","yIndex","xIn","yIn","HeatmapPlotArea","bindCategories","createAxisLabels","xCategories","createHashSet","yCategories","has","add","createHeatmapChart","firstCategory","updateAxisOptions$2","COLOR","FIRST","MAX","MIN","NOTE_TEXT","errorLow","errorHigh","AXIS_NAMES","MOUSEMOVE","CONTEXTMENU","MOUSELEAVE","Chart","userOptions","themeOptions","observers","addObserver","ChartService","_initElement","_originalOptions","_theme","_initTheme","_initHandlers","_initSurface","FontLoader","preloadFonts","fontLoaded","_destroyed","_redraw","_attachEvents","_setElementClass","firstChild","seriesCopies","aliases","alias","resolveAxisAliases","applyDefaults","applySeriesColors","getSize","chartArea","offsetWidth","resize","force","currentSize","_size","hasSize","_resize","_selections","_destroySelections","_setupSelection","_noTransitionsRedraw","paneName","_model","findPaneByName","findPaneByIndex","seriesName","categoryName","pointByCategoryName","togglePointsHighlight","_highlight","showTooltip","_sharedTooltip","_tooltip","hideTooltip","surface","_surfaceWrap","elementSize","renderAs","_destroySurface","Surface","_surfaceMouseenterHandler","_surfaceMouseleaveHandler","model","_getModel","_destroyView","traverse","draw","play","_createTooltip","_createPannable","_createZoomSelection","_createMousewheelZoom","triggerPaneRender","_navState","_cancelDomEvents","exportVisual","exportOptions","currentOptions","clearMissingValues","pannable","_pannable","zoomable","_zoomSelection","_mousewheelZoom","_toggleDragZoomEvents","allowDrag","requiresHandlers","allowZoom","_dragZoomEnabled","touchAction","_touchAction","_toggleDomEvents","drag","domEvents","toggleDrag","toggleZoom","_createSharedTooltip","axisDefaults","themeAxisDefaults","mapAxisOptions","axisColor","applyAxisDefaults","seriesLength","commonDefaults","themeSeriesDefaults","commonThemeDefaults","cleanupNestedSeriesDefaults","applySeriesDefaults","colors","seriesColor","_createPlotArea","RootElement","_modelOptions","subtitle","orderTitles","DEFAULT_WIDTH","DEFAULT_HEIGHT","skipSeries","selections","select","_selectStart","_select","_selectEnd","_clickHandler","_click","_mouseleaveHandler","_mouseleave","_mouseover","_mouseout","_mousemove","throttle","removeObserver","eventNames","_toDocumentCoordinates","_updateDrilldownPoint","_resetDrilldownPoint","_startDrilldown","isDefaultPrevented","obj$1","_shouldAttachMouseMove","_hoveredPoint","_plotAreaHovered","_hasInactiveOpacity","_activeChartInstance","_applySeriesOpacity","_updateSeriesOpacity","cancel","_stopChartHandlers","_gestureDistance","suspendTracking","_zooming","resumeTracking","mousewheelZoom","previousGestureDistance","scaleDelta","_drawingChartElement","leave","_startNavigation","_suppressHover","panning","ranges$1","translateRange","_endNavigation","_mousewheelZoomRate","totalDelta","scaleRange","chartEvent","_getChartElement","eventTarget","closest","coordinates","_elementPadding","_padding","clientX","clientY","inverseTransform","elementScale","invert","drawingElement","sharedTooltip","_startHover","_trackSharedTooltip","_propagateClick","handlingTap","_showInactiveOpacity","_displayTooltip","_displayInactiveOpacity","activePoint","multipleSeries","highlightPoints","chartInstance","_chartInstanceFromPoint","inactivePoints","_getInactivePoints","_getInactiveOpacityForSeries","_getAllPointsOfType","constructor","_updateHoveredPoint","hoveredPoint","drilldown","_drilldownState","resetOpacity","currSeries","defaultOpacity","_getDefaultOpacityForSeries","inactiveOpacity","activeSeries","_activePoint","hasInactiveOpacity","_hideInactiveOpacity","hasDefaultInactiveOpacity","defaultInactiveOpacity","DEFAULT_SERIES_OPACITY","_mouseMoveTrackHandler","_mouseMoveTracking","seriesPoint","_trackCrosshairs","overPlotArea","_tooltipCategoryIx","_sharedHighlight","pointArgs","hoverArgs","hideElements","keepTooltipOpen","_deferRedraw","_clearRedrawTimeout","_redrawTimeout","clearInterval","autoBind","bindCategoryAxisFromSeries","uniqueCategories","HashMap","bindable","dataIx","dataRow","srcDates","comparer","dateComparer","dates","sortDates","uniqueDates","rows","rowCount","rowIx","colCount","colIx","transpose","_isBindable","transitionsState","updateMouseMoveHandler","applyOptions","setOptions","setDirection","setIntlService","noTransitionsRedraw","unbind","bar","column","rangeColumn","verticalLine","pie","donut","verticalArea","scatter","scatterLine","bubble","candlestick","ohlc","boxPlot","verticalBullet","polarArea","polarLine","radarArea","radarLine","waterfall","DATA_FIELDS","fieldValue","originalValue","nullValue","jQuery","undefined$1","Widget","ui","ChartBreadcrumb","_attachChartEvents","_renderBreadcrumb","events","rootItem","icon","showIcon","breadcrumb","_onChartDrilldown","_onChartDrilldownLevelChange","deferred","resetDrilldownLevel","getKendoChart","breadcrumbElement","Breadcrumb","_onBreadcrumbClick","level","findIndex","plugin","NS","outerWidth","_outerWidth","outerHeight","_outerHeight","KendoChart","DataSource","InstanceObserver","template","encode","htmlEncode","MOUSELEAVE_NS","AXIS_LABEL_CLICK","DRILLDOWN_LEVEL_CHANGE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","DOCUMENT_ELEMENT","documentElement","CHANGE","DATABOUND","LEAVE","Observable","UserEvents","multiTouch","fastTap","ChartInstanceObserver","handlerMap","legendItemClick","dataSource","_seriesVisibility","SeriesVisibilityState","_initDataSource","_showWatermarkOverlay","instance","_instance","_bindSeries","_bindCategories","dimensions","_setEvents","_getThemeOptions","_sourceSeries","setDataSource","_hasDataSource","_onDataChanged","_dataChangeHandler","_hasData","fetch","off","_destroyCrosshairTooltips","findSeries","ChartSeries","findSeriesByName","_createSeries","findSeriesByIndex","originalChartArea","_seriesOptions","on","relatedTarget","autoHide","themeName","SASS_THEMES","autoTheme","themes","_initChart","_createChart","_isRtl","_onInit","_initTooltip","tooltips","_crosshairTooltips","_getCrosshairTooltip","_showTooltip","_hideTooltip","_onRender","_copyMembers","names","_events","_tooltipleave","_onLegendItemClick","_legendItemClick","save","_onDrilldown","drilldownSeriesFactory","Promise","then","resolved","_onDrilldownData","drilldownSeries","Object","assign","_bindData","groupedSeries","view","grouped","seriesVisibility","read","applyByGroup","applyByIndex","seriesData","_groupIx","categoriesData","_bindCategoryAxis","isRtl","css","proxyMembers","createProxyMember","arguments","nameTemplate","seriesClone","legacyTemplate","groupNameTemplate","logToConsole","_groupValue","ExportMixin","PDFMixin","action","persistSeriesVisibility","saveState","geom","attr","applyStylesFromKendoAttributes","mobileScrollerSelector","_mobileScroller","downEvent","applyEventMap","guid","_closeTooltipHandler","_closeTooltip","_clearShowTimeout","remove","sharedTemplate","colspan","colorMarker","nameColumn","sharedTemplateIterator","_offset","_ensureElement","stop","animate","showTimeout","_measure","zoomLevel","viewport","scrollTop","pageYOffset","scrollLeft","pageXOffset","movable","_fit","fakeContainer","normalizeStyle","toggleClass","_sharedContent","_pointContent","html","forceHide","_hideElement","is","appendTo","contains","fadeOut","always","toString","tooltipTemplate","xLow","xHigh","yLow","yHigh","viewPortSize","output","_chart","_options","_filterPoints","_clearFields","toggleVisibility","_filterData"],"sources":["kendo.dataviz.chart.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.core.js'), require('kendo.color.js'), require('kendo.drawing.js'), require('kendo.dataviz.core.js'), require('kendo.breadcrumb.js'), require('kendo.data.js'), require('kendo.dataviz.themes.js'), require('kendo.userevents.js'), require('kendo.icons.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.color', 'kendo.drawing', 'kendo.dataviz.core', 'kendo.breadcrumb', 'kendo.data', 'kendo.dataviz.themes', 'kendo.userevents', 'kendo.icons'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendodataviz = global.kendodataviz || {}, global.kendodataviz.chart = global.kendodataviz.chart || {}, global.kendodataviz.chart.js = factory()));\n})(this, (function () {\n    /***********************************************************************\n     * WARNING: this file is auto-generated.  If you change it directly,\n     * your modifications will eventually be lost.  The source code is in\n     * `kendo-charts` repository, you should make your changes there and\n     * run `src-modules/sync.sh` in this repository.\n     */\n\n    (function($) {\n    /* eslint-disable */\n\n    window.kendo.dataviz = window.kendo.dataviz || {};\n    var dataviz = kendo.dataviz;\n    var Class = dataviz.Class;\n    var isNumber = dataviz.isNumber;\n    var datavizConstants = dataviz.constants;\n    var MAX_VALUE = datavizConstants.MAX_VALUE;\n    var MIN_VALUE = datavizConstants.MIN_VALUE;\n    var VALUE = datavizConstants.VALUE;\n    var DATE = datavizConstants.DATE;\n    var CENTER = datavizConstants.CENTER;\n    var TOP = datavizConstants.TOP;\n    var BOTTOM = datavizConstants.BOTTOM;\n    var LEFT = datavizConstants.LEFT;\n    var WHITE = datavizConstants.WHITE;\n    var CIRCLE = datavizConstants.CIRCLE;\n    var X = datavizConstants.X;\n    var Y = datavizConstants.Y;\n    var RIGHT = datavizConstants.RIGHT;\n    var BLACK = datavizConstants.BLACK;\n    var DEFAULT_PRECISION = datavizConstants.DEFAULT_PRECISION;\n    var ARC = datavizConstants.ARC;\n    var defined = dataviz.defined;\n    var getter = dataviz.getter;\n    var isArray = dataviz.isArray;\n    var ChartElement = dataviz.ChartElement;\n    var Point = dataviz.Point;\n    var Box = dataviz.Box;\n    var alignPathToPixel = dataviz.alignPathToPixel;\n    var setDefaultOptions = dataviz.setDefaultOptions;\n    var isString = dataviz.isString;\n    var inArray = dataviz.inArray;\n    var isFunction = dataviz.isFunction;\n    var valueOrDefault = dataviz.valueOrDefault;\n    var isObject = dataviz.isObject;\n    var parseDate = dataviz.parseDate;\n    var deepExtend = dataviz.deepExtend;\n    var last = dataviz.last;\n    var eventElement = dataviz.eventElement;\n    var getTemplate = dataviz.getTemplate;\n    var TextBox = dataviz.TextBox;\n    var ShapeElement = dataviz.ShapeElement;\n    var getSpacing = dataviz.getSpacing;\n    var CurveProcessor = dataviz.CurveProcessor;\n    var append = dataviz.append;\n    var styleValue = dataviz.styleValue;\n    var CategoryAxis = dataviz.CategoryAxis;\n    var BoxElement = dataviz.BoxElement;\n    var Title = dataviz.Title;\n    var round = dataviz.round;\n    var limitValue = dataviz.limitValue;\n    var grep = dataviz.grep;\n    var elementStyles = dataviz.elementStyles;\n    var bindEvents = dataviz.bindEvents;\n    var services = dataviz.services;\n    var unbindEvents = dataviz.unbindEvents;\n    var support = kendo.support;\n    var drawing = kendo.drawing;\n    var Path = drawing.Path;\n    var Animation = drawing.Animation;\n    var AnimationFactory = drawing.AnimationFactory;\n    var Group = drawing.Group;\n    var Color = kendo.Color;\n    var geometry = kendo.geometry;\n    var GeometryPoint = geometry.Point;\n    var transform = geometry.transform;\n\n    var ChartAxis = Class.extend({\n        init: function(axis) {\n\n            this._axis = axis;\n            this.options = axis.options;\n        },\n\n        value: function(point) {\n            var axis = this._axis;\n            var value = axis.getCategory ? axis.getCategory(point) : axis.getValue(point);\n\n            return value;\n        },\n\n        slot: function(from, to, limit) {\n            if (limit === void 0) { limit = true; }\n\n            return this._axis.slot(from, to, limit);\n        },\n\n        range: function() {\n            return this._axis.range();\n        },\n\n        valueRange: function() {\n            return this._axis.valueRange();\n        }\n    });\n\n    function findAxisByName(name, axes) {\n        for (var idx = 0; idx < axes.length; idx++) {\n            if (axes[idx].options.name === name) {\n                axes[idx].prepareUserOptions();\n                return new ChartAxis(axes[idx]);\n            }\n        }\n    }\n\n    var ChartPane = kendo.Class.extend({\n        init: function(pane) {\n            this.visual = pane.visual;\n            this.chartsVisual = pane.chartContainer.visual;\n            this._pane = pane;\n        },\n\n        findAxisByName: function(name) {\n            return findAxisByName(name, this._pane.axes);\n        }\n    });\n\n    var ChartPlotArea = Class.extend({\n        init: function(plotArea) {\n\n            this._plotArea = plotArea;\n            this.visual = plotArea.visual;\n            this.backgroundVisual = plotArea._bgVisual;\n        }\n    });\n\n    function countNumbers(values) {\n        var length = values.length;\n        var count = 0;\n\n        for (var i = 0; i < length; i++) {\n            var num = values[i];\n            if (isNumber(num)) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    var Aggregates = {\n        min: function(values) {\n            var length = values.length;\n            var min = MAX_VALUE;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (isNumber(value)) {\n                    min = Math.min(min, value);\n                }\n            }\n\n            return min === MAX_VALUE ? values[0] : min;\n        },\n\n        max: function(values) {\n            var length = values.length;\n            var max = MIN_VALUE;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (isNumber(value)) {\n                    max = Math.max(max, value);\n                }\n            }\n\n            return max === MIN_VALUE ? values[0] : max;\n        },\n\n        sum: function(values) {\n            var length = values.length;\n            var sum = 0;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (isNumber(value)) {\n                    sum += value;\n                }\n            }\n\n            return sum;\n        },\n\n        sumOrNull: function(values) {\n            var result = null;\n\n            if (countNumbers(values)) {\n                result = Aggregates.sum(values);\n            }\n\n            return result;\n        },\n\n        count: function(values) {\n            var length = values.length;\n            var count = 0;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (value !== null && defined(value)) {\n                    count++;\n                }\n            }\n\n            return count;\n        },\n\n        avg: function(values) {\n            var count = countNumbers(values);\n            var result = values[0];\n\n            if (count > 0) {\n                result = Aggregates.sum(values) / count;\n            }\n\n            return result;\n        },\n\n        first: function(values) {\n            var length = values.length;\n\n            for (var i = 0; i < length; i++) {\n                var value = values[i];\n                if (value !== null && defined(value)) {\n                    return value;\n                }\n            }\n\n            return values[0];\n        }\n    };\n\n    function getField(field, row) {\n        if (row === null) {\n            return row;\n        }\n\n        var get = getter(field, true);\n        return get(row);\n    }\n\n    var SeriesBinder = Class.extend({\n        init: function() {\n\n            this._valueFields = {};\n            this._otherFields = {};\n            this._nullValue = {};\n            this._undefinedValue = {};\n        },\n\n        register: function(seriesTypes, valueFields, otherFields) {\n            var this$1$1 = this;\n            if (valueFields === void 0) { valueFields = [ VALUE ]; }\n            if (otherFields === void 0) { otherFields = {}; }\n\n            for (var i = 0; i < seriesTypes.length; i++) {\n                var type = seriesTypes[i];\n\n                this$1$1._valueFields[type] = valueFields;\n                this$1$1._otherFields[type] = otherFields;\n                this$1$1._nullValue[type] = this$1$1._makeValue(valueFields, null);\n                this$1$1._undefinedValue[type] = this$1$1._makeValue(valueFields, undefined);\n            }\n        },\n\n        canonicalFields: function(series) {\n            return this.valueFields(series).concat(this.otherFields(series));\n        },\n\n        valueFields: function(series) {\n            return this._valueFields[series.type] || [ VALUE ];\n        },\n\n        otherFields: function(series) {\n            return this._otherFields[series.type] || [ VALUE ];\n        },\n\n        bindPoint: function(series, pointIx, item) {\n            var data = series.data;\n            var pointData = defined(item) ? item : data[pointIx];\n            var result = { valueFields: { value: pointData } };\n            var valueFields = this.valueFields(series);\n            var otherFields = this._otherFields[series.type];\n            var fields, value;\n\n            if (pointData === null) {\n                value = this._nullValue[series.type];\n            } else if (!defined(pointData)) {\n                value = this._undefinedValue[series.type];\n            } else if (Array.isArray(pointData)) {\n                var fieldData = pointData.slice(valueFields.length);\n                value = this._bindFromArray(pointData, valueFields);\n                fields = this._bindFromArray(fieldData, otherFields);\n            } else if (typeof pointData === \"object\") {\n                var srcValueFields = this.sourceFields(series, valueFields);\n                var srcPointFields = this.sourceFields(series, otherFields);\n\n                value = this._bindFromObject(pointData, valueFields, srcValueFields);\n                fields = this._bindFromObject(pointData, otherFields, srcPointFields);\n            }\n\n            if (defined(value)) {\n                if (valueFields.length === 1) {\n                    result.valueFields.value = value[valueFields[0]];\n                } else {\n                    result.valueFields = value;\n                }\n            }\n\n            result.fields = fields || {};\n\n            return result;\n        },\n\n        _makeValue: function(fields, initialValue) {\n            var value = {};\n            var length = fields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = fields[i];\n                value[fieldName] = initialValue;\n            }\n\n            return value;\n        },\n\n        _bindFromArray: function(array, fields) {\n            var value = {};\n\n            if (fields) {\n                var length = Math.min(fields.length, array.length);\n\n                for (var i = 0; i < length; i++) {\n                    value[fields[i]] = array[i];\n                }\n            }\n\n            return value;\n        },\n\n        _bindFromObject: function(object, fields, srcFields) {\n            if (srcFields === void 0) { srcFields = fields; }\n\n            var value = {};\n\n            if (fields) {\n                var length = fields.length;\n\n                for (var i = 0; i < length; i++) {\n                    var fieldName = fields[i];\n                    var srcFieldName = srcFields[i];\n                    if (srcFieldName !== null) {\n                        value[fieldName] = getField(srcFieldName, object);\n                    }\n                }\n            }\n\n            return value;\n        },\n\n        sourceFields: function(series, canonicalFields) {\n            var sourceFields = [];\n\n            if (canonicalFields) {\n                var length = canonicalFields.length;\n\n                for (var i = 0; i < length; i++) {\n                    var fieldName = canonicalFields[i];\n                    var sourceFieldName = fieldName === VALUE ? \"field\" : fieldName + \"Field\";\n\n                    sourceFields.push(series[sourceFieldName] !== null ? (series[sourceFieldName] || fieldName) : null);\n                }\n            }\n\n            return sourceFields;\n        }\n    });\n\n    SeriesBinder.current = new SeriesBinder();\n\n    var STD_ERR = \"stderr\";\n    var STD_DEV = \"stddev\";\n    var percentRegex = /percent(?:\\w*)\\((\\d+)\\)/;\n    var standardDeviationRegex = new RegExp(\"^\" + STD_DEV + \"(?:\\\\((\\\\d+(?:\\\\.\\\\d+)?)\\\\))?$\");\n\n    var ErrorRangeCalculator = Class.extend({\n        init: function(errorValue, series, field) {\n\n            this.initGlobalRanges(errorValue, series, field);\n        },\n\n        initGlobalRanges: function(errorValue, series, field) {\n            var data = series.data;\n            var deviationMatch = standardDeviationRegex.exec(errorValue);\n\n            if (deviationMatch) {\n                this.valueGetter = this.createValueGetter(series, field);\n\n                var average = this.getAverage(data);\n                var deviation = this.getStandardDeviation(data, average, false);\n                var multiple = deviationMatch[1] ? parseFloat(deviationMatch[1]) : 1;\n                var errorRange = { low: average.value - deviation * multiple, high: average.value + deviation * multiple };\n\n                this.globalRange = function() {\n                    return errorRange;\n                };\n            } else if (errorValue.indexOf && errorValue.indexOf(STD_ERR) >= 0) {\n                this.valueGetter = this.createValueGetter(series, field);\n                var standardError = this.getStandardError(data, this.getAverage(data));\n\n                this.globalRange = function(value) {\n                    return { low: value - standardError, high: value + standardError };\n                };\n            }\n        },\n\n        createValueGetter: function(series, field) {\n            var data = series.data;\n            var binder = SeriesBinder.current;\n            var valueFields = binder.valueFields(series);\n            var item = defined(data[0]) ? data[0] : {};\n            var valueGetter;\n\n            if (isArray(item)) {\n                var index = field ? valueFields.indexOf(field) : 0;\n                valueGetter = getter(\"[\" + index + \"]\");\n            } else if (isNumber(item)) {\n                valueGetter = getter();\n            } else if (typeof item === datavizConstants.OBJECT) {\n                var srcValueFields = binder.sourceFields(series, valueFields);\n                valueGetter = getter(srcValueFields[valueFields.indexOf(field)]);\n            }\n\n            return valueGetter;\n        },\n\n        getErrorRange: function(pointValue, errorValue) {\n            var low, high, value;\n\n            if (!defined(errorValue)) {\n                return null;\n            }\n\n            if (this.globalRange) {\n                return this.globalRange(pointValue);\n            }\n\n            if (isArray(errorValue)) {\n                low = pointValue - errorValue[0];\n                high = pointValue + errorValue[1];\n            } else if (isNumber(value = parseFloat(errorValue))) {\n                low = pointValue - value;\n                high = pointValue + value;\n            } else if ((value = percentRegex.exec(errorValue))) {\n                var percentValue = pointValue * (parseFloat(value[1]) / 100);\n                low = pointValue - Math.abs(percentValue);\n                high = pointValue + Math.abs(percentValue);\n            } else {\n                throw new Error(\"Invalid ErrorBar value: \" + errorValue);\n            }\n\n            return { low: low, high: high };\n        },\n\n        getStandardError: function(data, average) {\n            return this.getStandardDeviation(data, average, true) / Math.sqrt(average.count);\n        },\n\n        getStandardDeviation: function(data, average, isSample) {\n            var this$1$1 = this;\n\n            var length = data.length;\n            var total = isSample ? average.count - 1 : average.count;\n            var squareDifferenceSum = 0;\n\n            for (var idx = 0; idx < length; idx++) {\n                var value = this$1$1.valueGetter(data[idx]);\n                if (isNumber(value)) {\n                    squareDifferenceSum += Math.pow(value - average.value, 2);\n                }\n            }\n\n            return Math.sqrt(squareDifferenceSum / total);\n        },\n\n        getAverage: function(data) {\n            var this$1$1 = this;\n\n            var length = data.length;\n            var sum = 0;\n            var count = 0;\n\n            for (var idx = 0; idx < length; idx++) {\n                var value = this$1$1.valueGetter(data[idx]);\n                if (isNumber(value)) {\n                    sum += value;\n                    count++;\n                }\n            }\n\n            return {\n                value: sum / count,\n                count: count\n            };\n        }\n    });\n\n    var browser = support.browser || {};\n\n    var INITIAL_ANIMATION_DURATION = 600;\n    var FADEIN = \"fadeIn\";\n\n    var GLASS = \"glass\";\n    var BORDER_BRIGHTNESS = 0.8;\n    var TOOLTIP_OFFSET = 5;\n    var START_SCALE = browser.msie ? 0.001 : 0;\n    var ERROR_LOW_FIELD = \"errorLow\";\n    var ERROR_HIGH_FIELD = \"errorHigh\";\n    var X_ERROR_LOW_FIELD = \"xErrorLow\";\n    var X_ERROR_HIGH_FIELD = \"xErrorHigh\";\n    var Y_ERROR_LOW_FIELD = \"yErrorLow\";\n    var Y_ERROR_HIGH_FIELD = \"yErrorHigh\";\n    var LINE_MARKER_SIZE = 8;\n    var ZERO = \"zero\";\n    var INTERPOLATE = \"interpolate\";\n    var GAP = \"gap\";\n    var ABOVE = \"above\";\n    var BELOW = \"below\";\n\n    var SMOOTH = \"smooth\";\n    var STEP = \"step\";\n\n    var AREA = \"area\";\n    var BAR = \"bar\";\n    var BOX_PLOT = \"boxPlot\";\n    var BUBBLE = \"bubble\";\n    var BULLET = \"bullet\";\n    var CANDLESTICK = \"candlestick\";\n    var COLUMN = \"column\";\n    var DONUT = \"donut\";\n    var FUNNEL = \"funnel\";\n    var PYRAMID = \"pyramid\";\n    var HEATMAP = \"heatmap\";\n    var HORIZONTAL_WATERFALL = \"horizontalWaterfall\";\n    var LINE = \"line\";\n    var OHLC = \"ohlc\";\n    var PIE = \"pie\";\n    var POLAR_AREA = \"polarArea\";\n    var POLAR_LINE = \"polarLine\";\n    var POLAR_SCATTER = \"polarScatter\";\n    var RADAR_AREA = \"radarArea\";\n    var RADAR_COLUMN = \"radarColumn\";\n    var RADAR_LINE = \"radarLine\";\n    var RANGE_AREA = \"rangeArea\";\n    var RANGE_BAR = \"rangeBar\";\n    var RANGE_COLUMN = \"rangeColumn\";\n    var SCATTER = \"scatter\";\n    var SCATTER_LINE = \"scatterLine\";\n    var VERTICAL_AREA = \"verticalArea\";\n    var VERTICAL_BOX_PLOT = \"verticalBoxPlot\";\n    var VERTICAL_BULLET = \"verticalBullet\";\n    var VERTICAL_LINE = \"verticalLine\";\n    var VERTICAL_RANGE_AREA = \"verticalRangeArea\";\n    var WATERFALL = \"waterfall\";\n    var EQUALLY_SPACED_SERIES = [\n        BAR, COLUMN, OHLC, CANDLESTICK, BOX_PLOT, VERTICAL_BOX_PLOT,\n        BULLET, RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL\n    ];\n\n    var TRENDLINE_LINEAR = 'linearTrendline';\n    var TRENDLINE_MOVING_AVERAGE = 'movingAverageTrendline';\n    var TRENDLINE_SERIES = [\n        TRENDLINE_LINEAR, TRENDLINE_MOVING_AVERAGE\n    ];\n\n    var LEGEND_ITEM_CLICK = \"legendItemClick\";\n    var LEGEND_ITEM_HOVER = \"legendItemHover\";\n    var LEGEND_ITEM_LEAVE = \"legendItemLeave\";\n    var SERIES_CLICK = \"seriesClick\";\n    var SERIES_HOVER = \"seriesHover\";\n    var SERIES_OVER = \"seriesOver\";\n    var SERIES_LEAVE = \"seriesLeave\";\n    var PLOT_AREA_CLICK = \"plotAreaClick\";\n    var PLOT_AREA_HOVER = \"plotAreaHover\";\n    var PLOT_AREA_LEAVE = \"plotAreaLeave\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var DRAG_START = \"dragStart\";\n    var ZOOM_START = \"zoomStart\";\n    var ZOOM = \"zoom\";\n    var ZOOM_END = \"zoomEnd\";\n    var SELECT_START = \"selectStart\";\n    var SELECT = \"select\";\n    var SELECT_END = \"selectEnd\";\n    var RENDER = \"render\";\n    var SHOW_TOOLTIP = \"showTooltip\";\n    var HIDE_TOOLTIP = \"hideTooltip\";\n    var PANE_RENDER = \"paneRender\";\n\n    var LOGARITHMIC = \"log\";\n    var CATEGORY = \"category\";\n\n    var INSIDE_END = \"insideEnd\";\n    var INSIDE_BASE = \"insideBase\";\n    var OUTSIDE_END = \"outsideEnd\";\n\n    var MOUSEWHEEL = \"wheel\";\n    var MOUSEWHEEL_DELAY = 150;\n    var MOUSEWHEEL_ZOOM_RATE = 0.3;\n\n    var DRILLDOWN = \"drilldown\";\n    var DRILLDOWN_FIELD = \"drilldown\";\n\n    var MIN_MOVING_AVERAGE_PERIOD = 2;\n\n    var constants = {\n    \tINITIAL_ANIMATION_DURATION: INITIAL_ANIMATION_DURATION,\n    \tFADEIN: FADEIN,\n    \tLEGEND_ITEM_CLICK: LEGEND_ITEM_CLICK,\n    \tLEGEND_ITEM_HOVER: LEGEND_ITEM_HOVER,\n    \tLEGEND_ITEM_LEAVE: LEGEND_ITEM_LEAVE,\n    \tSERIES_CLICK: SERIES_CLICK,\n    \tSERIES_HOVER: SERIES_HOVER,\n    \tSERIES_OVER: SERIES_OVER,\n    \tSERIES_LEAVE: SERIES_LEAVE,\n    \tGLASS: GLASS,\n    \tBORDER_BRIGHTNESS: BORDER_BRIGHTNESS,\n    \tTOOLTIP_OFFSET: TOOLTIP_OFFSET,\n    \tSTART_SCALE: START_SCALE,\n    \tERROR_LOW_FIELD: ERROR_LOW_FIELD,\n    \tERROR_HIGH_FIELD: ERROR_HIGH_FIELD,\n    \tX_ERROR_LOW_FIELD: X_ERROR_LOW_FIELD,\n    \tX_ERROR_HIGH_FIELD: X_ERROR_HIGH_FIELD,\n    \tY_ERROR_LOW_FIELD: Y_ERROR_LOW_FIELD,\n    \tY_ERROR_HIGH_FIELD: Y_ERROR_HIGH_FIELD,\n    \tLINE_MARKER_SIZE: LINE_MARKER_SIZE,\n    \tINTERPOLATE: INTERPOLATE,\n    \tZERO: ZERO,\n    \tSMOOTH: SMOOTH,\n    \tSTEP: STEP,\n    \tCATEGORY: CATEGORY,\n    \tFUNNEL: FUNNEL,\n    \tPYRAMID: PYRAMID,\n    \tBAR: BAR,\n    \tCANDLESTICK: CANDLESTICK,\n    \tPIE: PIE,\n    \tCOLUMN: COLUMN,\n    \tAREA: AREA,\n    \tVERTICAL_BULLET: VERTICAL_BULLET,\n    \tBOX_PLOT: BOX_PLOT,\n    \tOHLC: OHLC,\n    \tWATERFALL: WATERFALL,\n    \tLINE: LINE,\n    \tBULLET: BULLET,\n    \tVERTICAL_LINE: VERTICAL_LINE,\n    \tVERTICAL_AREA: VERTICAL_AREA,\n    \tRANGE_AREA: RANGE_AREA,\n    \tVERTICAL_RANGE_AREA: VERTICAL_RANGE_AREA,\n    \tRANGE_COLUMN: RANGE_COLUMN,\n    \tVERTICAL_BOX_PLOT: VERTICAL_BOX_PLOT,\n    \tRANGE_BAR: RANGE_BAR,\n    \tHORIZONTAL_WATERFALL: HORIZONTAL_WATERFALL,\n    \tSCATTER: SCATTER,\n    \tSCATTER_LINE: SCATTER_LINE,\n    \tBUBBLE: BUBBLE,\n    \tRADAR_AREA: RADAR_AREA,\n    \tRADAR_LINE: RADAR_LINE,\n    \tRADAR_COLUMN: RADAR_COLUMN,\n    \tPOLAR_LINE: POLAR_LINE,\n    \tPOLAR_AREA: POLAR_AREA,\n    \tPOLAR_SCATTER: POLAR_SCATTER,\n    \tRENDER: RENDER,\n    \tPLOT_AREA_CLICK: PLOT_AREA_CLICK,\n    \tPLOT_AREA_HOVER: PLOT_AREA_HOVER,\n    \tPLOT_AREA_LEAVE: PLOT_AREA_LEAVE,\n    \tLOGARITHMIC: LOGARITHMIC,\n    \tDRAG: DRAG,\n    \tDRAG_START: DRAG_START,\n    \tDRAG_END: DRAG_END,\n    \tZOOM_START: ZOOM_START,\n    \tZOOM: ZOOM,\n    \tZOOM_END: ZOOM_END,\n    \tSELECT_START: SELECT_START,\n    \tSELECT: SELECT,\n    \tSELECT_END: SELECT_END,\n    \tPANE_RENDER: PANE_RENDER,\n    \tGAP: GAP,\n    \tDONUT: DONUT,\n    \tINSIDE_END: INSIDE_END,\n    \tINSIDE_BASE: INSIDE_BASE,\n    \tOUTSIDE_END: OUTSIDE_END,\n    \tMOUSEWHEEL: MOUSEWHEEL,\n    \tMOUSEWHEEL_DELAY: MOUSEWHEEL_DELAY,\n    \tMOUSEWHEEL_ZOOM_RATE: MOUSEWHEEL_ZOOM_RATE,\n    \tSHOW_TOOLTIP: SHOW_TOOLTIP,\n    \tHIDE_TOOLTIP: HIDE_TOOLTIP,\n    \tEQUALLY_SPACED_SERIES: EQUALLY_SPACED_SERIES,\n    \tABOVE: ABOVE,\n    \tBELOW: BELOW,\n    \tHEATMAP: HEATMAP,\n    \tDRILLDOWN: DRILLDOWN,\n    \tDRILLDOWN_FIELD: DRILLDOWN_FIELD,\n    \tMIN_MOVING_AVERAGE_PERIOD: MIN_MOVING_AVERAGE_PERIOD,\n    \tTRENDLINE_SERIES: TRENDLINE_SERIES,\n    \tTRENDLINE_LINEAR: TRENDLINE_LINEAR,\n    \tTRENDLINE_MOVING_AVERAGE: TRENDLINE_MOVING_AVERAGE\n    };\n\n    var DEFAULT_ERROR_BAR_WIDTH = 4;\n\n    var ErrorBarBase = ChartElement.extend({\n        init: function(low, high, isVertical, chart, series, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.low = low;\n            this.high = high;\n            this.isVertical = isVertical;\n            this.chart = chart;\n            this.series = series;\n        },\n\n        reflow: function(targetBox) {\n            var endCaps = this.options.endCaps;\n            var isVertical = this.isVertical;\n            var axis = this.getAxis();\n            var valueBox = axis.getSlot(this.low, this.high);\n            var centerBox = targetBox.center();\n            var capsWidth = this.getCapsWidth(targetBox, isVertical);\n            var capValue = isVertical ? centerBox.x : centerBox.y;\n            var capStart = capValue - capsWidth;\n            var capEnd = capValue + capsWidth;\n            var linePoints;\n\n            if (isVertical) {\n                linePoints = [\n                    new Point(centerBox.x, valueBox.y1),\n                    new Point(centerBox.x, valueBox.y2)\n                ];\n                if (endCaps) {\n                    linePoints.push(new Point(capStart, valueBox.y1),\n                        new Point(capEnd, valueBox.y1),\n                        new Point(capStart, valueBox.y2),\n                        new Point(capEnd, valueBox.y2));\n                }\n                this.box = new Box(capStart, valueBox.y1, capEnd, valueBox.y2);\n            } else {\n                linePoints = [\n                    new Point(valueBox.x1, centerBox.y),\n                    new Point(valueBox.x2, centerBox.y)\n                ];\n                if (endCaps) {\n                    linePoints.push(new Point(valueBox.x1, capStart),\n                        new Point(valueBox.x1, capEnd),\n                        new Point(valueBox.x2, capStart),\n                        new Point(valueBox.x2, capEnd));\n                }\n                this.box = new Box(valueBox.x1, capStart, valueBox.x2, capEnd);\n            }\n\n            this.linePoints = linePoints;\n        },\n\n        getCapsWidth: function(box, isVertical) {\n            var boxSize = isVertical ? box.width() : box.height();\n            var capsWidth = Math.min(Math.floor(boxSize / 2), DEFAULT_ERROR_BAR_WIDTH) || DEFAULT_ERROR_BAR_WIDTH;\n\n            return capsWidth;\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var visual = options.visual;\n\n            if (visual) {\n                this.visual = visual({\n                    low: this.low,\n                    high: this.high,\n                    rect: this.box.toRect(),\n                    sender: this.getSender(),\n                    options: {\n                        endCaps: options.endCaps,\n                        color: options.color,\n                        line: options.line\n                    },\n                    createVisual: function () {\n                        this$1$1.createDefaultVisual();\n                        var defaultVisual = this$1$1.visual;\n                        delete this$1$1.visual;\n                        return defaultVisual;\n                    }\n                });\n            } else {\n                this.createDefaultVisual();\n            }\n        },\n\n        createDefaultVisual: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var linePoints = ref.linePoints;\n            var lineOptions = {\n                stroke: {\n                    color: options.color,\n                    width: options.line.width,\n                    dashType: options.line.dashType\n                }\n            };\n\n            ChartElement.fn.createVisual.call(this);\n\n            for (var idx = 0; idx < linePoints.length; idx += 2) {\n                var line = new Path(lineOptions)\n                    .moveTo(linePoints[idx].x, linePoints[idx].y)\n                    .lineTo(linePoints[idx + 1].x, linePoints[idx + 1].y);\n\n                alignPathToPixel(line);\n                this$1$1.visual.append(line);\n            }\n        }\n    });\n\n    setDefaultOptions(ErrorBarBase, {\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        },\n        endCaps: true,\n        line: {\n            width: 2\n        },\n        zIndex: 1\n    });\n\n    var CategoricalErrorBar = ErrorBarBase.extend({\n        getAxis: function() {\n            var axis = this.chart.seriesValueAxis(this.series);\n\n            return axis;\n        }\n    });\n\n    function anyHasZIndex(elements) {\n        for (var idx = 0; idx < elements.length; idx++) {\n            if (defined(elements[idx].zIndex)) {\n                return true;\n            }\n        }\n    }\n\n    function appendIfNotNull(array, element) {\n        if (element !== null) {\n            array.push(element);\n        }\n    }\n\n    function areNumbers(values) {\n        return countNumbers(values) === values.length;\n    }\n\n    function segmentVisible(series, fields, index) {\n        var visible = fields.visible;\n        if (defined(visible)) {\n            return visible;\n        }\n\n        var pointVisibility = series.pointVisibility;\n        if (pointVisibility) {\n            return pointVisibility[index];\n        }\n    }\n\n    function bindSegments(series) {\n        var data = series.data;\n        var points = [];\n        var sum = 0;\n        var count = 0;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            var pointData = SeriesBinder.current.bindPoint(series, idx);\n            var value = pointData.valueFields.value;\n\n            if (isString(value)) {\n                value = parseFloat(value);\n            }\n\n            if (isNumber(value)) {\n                pointData.visible = segmentVisible(series, pointData.fields, idx) !== false;\n\n                pointData.value = Math.abs(value);\n                points.push(pointData);\n\n                if (pointData.visible) {\n                    sum += pointData.value;\n                }\n\n                if (value !== 0) {\n                    count++;\n                }\n            } else {\n                points.push(null);\n            }\n        }\n\n        return {\n            total: sum,\n            points: points,\n            count: count\n        };\n    }\n\n    function categoriesCount(series) {\n        var seriesCount = series.length;\n        var categories = 0;\n\n        for (var i = 0; i < seriesCount; i++) {\n            categories = Math.max(categories, series[i].data.length);\n        }\n\n        return categories;\n    }\n\n    function equalsIgnoreCase(a, b) {\n        if (a && b) {\n            return a.toLowerCase() === b.toLowerCase();\n        }\n\n        return a === b;\n    }\n\n    var MAX_EXPAND_DEPTH = 5;\n\n    function evalOptions(options, context, state, dryRun) {\n        if (state === void 0) { state = {}; }\n        if (dryRun === void 0) { dryRun = false; }\n\n        var defaults = state.defaults = state.defaults || {};\n        var depth = state.depth = state.depth || 0;\n        var needsEval = false;\n\n        state.excluded = state.excluded || [];\n\n        if (depth > MAX_EXPAND_DEPTH) {\n            return null;\n        }\n\n        for (var property in options) {\n            if (!inArray(property, state.excluded) && options.hasOwnProperty(property)) {\n                var propValue = options[property];\n                if (isFunction(propValue)) {\n                    needsEval = true;\n                    if (!dryRun) {\n                        options[property] = valueOrDefault(propValue(context), defaults[property]);\n                    }\n                } else if (isObject(propValue)) {\n                    if (!dryRun) {\n                        state.defaults = defaults[property];\n                    }\n                    state.depth++;\n                    needsEval = evalOptions(propValue, context, state, dryRun) || needsEval;\n                    state.depth--;\n                }\n            }\n        }\n\n        return needsEval;\n    }\n\n    function filterSeriesByType(series, types) {\n        var result = [];\n\n        var seriesTypes = [].concat(types);\n        for (var idx = 0; idx < series.length; idx++) {\n            var currentSeries = series[idx];\n            if (inArray(currentSeries.type, seriesTypes)) {\n                result.push(currentSeries);\n            }\n        }\n\n        return result;\n    }\n\n    function getDateField(field, row, intlService) {\n        if (row === null) {\n            return row;\n        }\n\n        var key = \"_date_\" + field;\n        var value = row[key];\n\n        if (!value) {\n            value = parseDate(intlService, getter(field, true)(row));\n            row[key] = value;\n        }\n\n        return value;\n    }\n\n    function hasGradientOverlay(options) {\n        var overlay = options.overlay;\n\n        return overlay && overlay.gradient && overlay.gradient !== \"none\";\n    }\n\n    function hasValue(value) {\n        return defined(value) && value !== null;\n    }\n\n    function isDateAxis(axisOptions, sampleCategory) {\n        var type = axisOptions.type;\n        var dateCategory = sampleCategory instanceof Date;\n\n        return (!type && dateCategory) || equalsIgnoreCase(type, DATE);\n    }\n\n    function singleItemOrArray(array) {\n        return array.length === 1 ? array[0] : array;\n    }\n\n    var AREA_REGEX = /area/i;\n\n    function seriesMissingValues(series) {\n        if (series.missingValues) {\n            return series.missingValues;\n        }\n\n        return AREA_REGEX.test(series.type) || series.stack ? ZERO : INTERPOLATE;\n    }\n\n    function hasValue$1(series, item) {\n        var fields = SeriesBinder.current.bindPoint(series, null, item);\n        var valueFields = fields.valueFields;\n\n        for (var field in valueFields) {\n            if (dataviz.convertableToNumber(valueFields[field])) {\n                return true;\n            }\n        }\n    }\n\n    function findNext(ref) {\n        var start = ref.start;\n        var dir = ref.dir;\n        var min = ref.min;\n        var max = ref.max;\n        var getter$$1 = ref.getter;\n        var hasItem = ref.hasItem;\n        var series = ref.series;\n\n        var pointHasValue, outPoint;\n        var idx = start;\n        do {\n            idx += dir;\n            //aggregating and binding the item takes too much time for large number of categories\n            //will assume that if the aggregation does not create value for a missing item for one it will not create for others\n            if (hasItem(idx)) {\n                outPoint = getter$$1(idx);\n                pointHasValue = hasValue$1(series, outPoint.item);\n            }\n        } while (min <= idx && idx <= max && !pointHasValue);\n\n        if (pointHasValue) {\n            return outPoint;\n        }\n    }\n\n    function createOutOfRangePoints(series, range, count, getter$$1, hasItem) {\n        var min = range.min;\n        var max = range.max;\n        var hasMinPoint = min > 0 && min < count;\n        var hasMaxPoint = max + 1 < count;\n\n        if (hasMinPoint || hasMaxPoint) {\n            var missingValues = seriesMissingValues(series);\n            var minPoint, maxPoint;\n            if (missingValues !== INTERPOLATE) {\n                if (hasMinPoint) {\n                    minPoint = getter$$1(min - 1);\n                }\n\n                if (hasMaxPoint) {\n                    maxPoint = getter$$1(max + 1);\n                }\n            } else {\n                var outPoint, pointHasValue;\n                if (hasMinPoint) {\n                    outPoint = getter$$1(min - 1);\n                    pointHasValue = hasValue$1(series, outPoint.item);\n                    if (!pointHasValue) {\n                        minPoint = findNext({\n                            start: min,\n                            dir: -1,\n                            min: 0,\n                            max: count - 1,\n                            getter: getter$$1,\n                            hasItem: hasItem,\n                            series: series\n                        });\n                    } else {\n                        minPoint = outPoint;\n                    }\n                }\n\n                if (hasMaxPoint) {\n                    outPoint = getter$$1(max + 1);\n                    pointHasValue = hasValue$1(series, outPoint.item);\n                    if (!pointHasValue) {\n                        maxPoint = findNext({\n                            start: max,\n                            dir: 1,\n                            min: 0,\n                            max: count - 1,\n                            getter: getter$$1,\n                            hasItem: hasItem,\n                            series: series\n                        });\n                    } else {\n                        maxPoint = outPoint;\n                    }\n                }\n            }\n\n            if (minPoint) {\n                series._outOfRangeMinPoint = minPoint;\n            }\n\n            if (maxPoint) {\n                series._outOfRangeMaxPoint = maxPoint;\n            }\n        }\n    }\n\n    var CategoricalChart = ChartElement.extend({\n        init: function(plotArea, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.chartService = plotArea.chartService;\n            this.categoryAxis = plotArea.seriesCategoryAxis(options.series[0]);\n\n            // Value axis ranges grouped by axis name, e.g.:\n            // primary: { min: 0, max: 1 }\n            this.valueAxisRanges = {};\n\n            this.points = [];\n            this.categoryPoints = [];\n            this.seriesPoints = [];\n            this.seriesOptions = [];\n            this._evalSeries = [];\n\n            this.render();\n        },\n\n        render: function() {\n            this.traverseDataPoints(this.addValue.bind(this));\n        },\n\n        pointOptions: function(series, seriesIx) {\n            var options = this.seriesOptions[seriesIx];\n            if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({ }, defaults, {\n                    vertical: !this.options.invertAxes\n                }, series);\n            }\n\n            return options;\n        },\n\n        plotValue: function(point) {\n            if (!point) {\n                return 0;\n            }\n\n            if (this.options.isStacked100 && isNumber(point.value)) {\n                var categoryIx = point.categoryIx;\n                var categoryPoints = this.categoryPoints[categoryIx];\n                var otherValues = [];\n                var categorySum = 0;\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                    var other = categoryPoints[i];\n                    if (other) {\n                        var stack = point.series.stack;\n                        var otherStack = other.series.stack;\n\n                        if ((stack && otherStack) && stack.group !== otherStack.group) {\n                            continue;\n                        }\n\n                        if (isNumber(other.value)) {\n                            categorySum += Math.abs(other.value);\n                            otherValues.push(Math.abs(other.value));\n                        }\n                    }\n                }\n\n                if (categorySum > 0) {\n                    return point.value / categorySum;\n                }\n            }\n\n            return point.value;\n        },\n\n        plotRange: function(point, startValue) {\n            var this$1$1 = this;\n            if (startValue === void 0) { startValue = 0; }\n\n            var categoryPoints = this.categoryPoints[point.categoryIx];\n\n            if (this.options.isStacked) {\n                var plotValue = this.plotValue(point);\n                var positive = plotValue >= 0;\n                var prevValue = startValue;\n                var isStackedBar = false;\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                    var other = categoryPoints[i];\n\n                    if (point === other) {\n                        break;\n                    }\n\n                    var stack = point.series.stack;\n                    var otherStack = other.series.stack;\n                    if (stack && otherStack) {\n                        if (typeof stack === datavizConstants.STRING && stack !== otherStack) {\n                            continue;\n                        }\n\n                        if (stack.group && stack.group !== otherStack.group) {\n                            continue;\n                        }\n                    }\n\n                    var otherValue = this$1$1.plotValue(other);\n                    if ((otherValue >= 0 && positive) ||\n                        (otherValue < 0 && !positive)) {\n                        prevValue += otherValue;\n                        plotValue += otherValue;\n                        isStackedBar = true;\n\n                        if (this$1$1.options.isStacked100) {\n                            plotValue = Math.min(plotValue, 1);\n                        }\n                    }\n                }\n\n                if (isStackedBar) {\n                    prevValue -= startValue;\n                }\n\n                return [ prevValue, plotValue ];\n            }\n\n            var series = point.series;\n            var valueAxis = this.seriesValueAxis(series);\n            var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n            return [ axisCrossingValue, dataviz.convertableToNumber(point.value) ? point.value : axisCrossingValue ];\n        },\n\n        stackLimits: function(axisName, stackName) {\n            var this$1$1 = this;\n\n            var min = MAX_VALUE;\n            var max = MIN_VALUE;\n\n            for (var i = 0; i < this.categoryPoints.length; i++) {\n                var categoryPoints = this$1$1.categoryPoints[i];\n                if (!categoryPoints) {\n                    continue;\n                }\n\n                for (var pIx = 0; pIx < categoryPoints.length; pIx++) {\n                    var point = categoryPoints[pIx];\n                    if (point) {\n                        if (point.series.stack === stackName || point.series.axis === axisName) {\n                            var to = this$1$1.plotRange(point, 0)[1];\n                            if (defined(to) && isFinite(to)) {\n                                max = Math.max(max, to);\n                                min = Math.min(min, to);\n                            }\n                        }\n                    }\n                }\n            }\n\n            return { min: min, max: max };\n        },\n\n        updateStackRange: function() {\n            var this$1$1 = this;\n\n            var ref = this.options;\n            var isStacked = ref.isStacked;\n            var chartSeries = ref.series;\n            var limitsCache = {};\n\n            if (isStacked) {\n                for (var i = 0; i < chartSeries.length; i++) {\n                    var series = chartSeries[i];\n                    var axisName = series.axis;\n                    var key = axisName + series.stack;\n\n                    var limits = limitsCache[key];\n                    if (!limits) {\n                        limits = this$1$1.stackLimits(axisName, series.stack);\n\n                        var errorTotals = this$1$1.errorTotals;\n                        if (errorTotals) {\n                            if (errorTotals.negative.length) {\n                                limits.min = Math.min(limits.min, dataviz.sparseArrayLimits(errorTotals.negative).min);\n                            }\n                            if (errorTotals.positive.length) {\n                                limits.max = Math.max(limits.max, dataviz.sparseArrayLimits(errorTotals.positive).max);\n                            }\n                        }\n\n                        if (limits.min !== MAX_VALUE || limits.max !== MIN_VALUE) {\n                            limitsCache[key] = limits;\n                        } else {\n                            limits = null;\n                        }\n                    }\n\n                    if (limits) {\n                        this$1$1.valueAxisRanges[axisName] = limits;\n                    }\n                }\n            }\n        },\n\n        addErrorBar: function(point, data, categoryIx) {\n            var value = point.value;\n            var series = point.series;\n            var seriesIx = point.seriesIx;\n            var errorBars = point.options.errorBars;\n            var lowValue = data.fields[ERROR_LOW_FIELD];\n            var highValue = data.fields[ERROR_HIGH_FIELD];\n            var errorRange;\n\n            if (isNumber(lowValue) && isNumber(highValue)) {\n                errorRange = { low: lowValue, high: highValue };\n            } else if (errorBars && defined(errorBars.value)) {\n                this.seriesErrorRanges = this.seriesErrorRanges || [];\n                this.seriesErrorRanges[seriesIx] = this.seriesErrorRanges[seriesIx] ||\n                    new ErrorRangeCalculator(errorBars.value, series, VALUE);\n\n                errorRange = this.seriesErrorRanges[seriesIx].getErrorRange(value, errorBars.value);\n            }\n\n            if (errorRange) {\n                point.low = errorRange.low;\n                point.high = errorRange.high;\n                this.addPointErrorBar(point, categoryIx);\n            }\n        },\n\n        addPointErrorBar: function(point, categoryIx) {\n            var isVertical = !this.options.invertAxes;\n            var options = point.options.errorBars;\n            var series = point.series;\n            var low = point.low;\n            var high = point.high;\n\n            if (this.options.isStacked) {\n                var stackedErrorRange = this.stackedErrorRange(point, categoryIx);\n                low = stackedErrorRange.low;\n                high = stackedErrorRange.high;\n            } else {\n                var fields = { categoryIx: categoryIx, series: series };\n                this.updateRange({ value: low }, fields);\n                this.updateRange({ value: high }, fields);\n            }\n\n            var errorBar = new CategoricalErrorBar(low, high, isVertical, this, series, options);\n            point.errorBars = [ errorBar ];\n            point.append(errorBar);\n        },\n\n        stackedErrorRange: function(point, categoryIx) {\n            var plotValue = this.plotRange(point, 0)[1] - point.value;\n            var low = point.low + plotValue;\n            var high = point.high + plotValue;\n\n            this.errorTotals = this.errorTotals || { positive: [], negative: [] };\n\n            if (low < 0) {\n                this.errorTotals.negative[categoryIx] = Math.min(this.errorTotals.negative[categoryIx] || 0, low);\n            }\n\n            if (high > 0) {\n                this.errorTotals.positive[categoryIx] = Math.max(this.errorTotals.positive[categoryIx] || 0, high);\n            }\n\n            return { low: low, high: high };\n        },\n\n        addValue: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n\n            var categoryPoints = this.categoryPoints[categoryIx];\n            if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n            }\n\n            var seriesPoints = this.seriesPoints[seriesIx];\n            if (!seriesPoints) {\n                this.seriesPoints[seriesIx] = seriesPoints = [];\n            }\n\n            var point = this.createPoint(data, fields);\n            if (point) {\n                $.extend(point, fields);\n\n                point.owner = this;\n                point.noteText = data.fields.noteText;\n                if (!defined(point.dataItem)) {\n                    point.dataItem = series.data[categoryIx];\n                }\n                this.addErrorBar(point, data, categoryIx);\n            }\n\n            this.points.push(point);\n            seriesPoints.push(point);\n            categoryPoints.push(point);\n\n            this.updateRange(data.valueFields, fields);\n        },\n\n        evalPointOptions: function(options, value, fields) {\n            var categoryIx = fields.categoryIx;\n            var category = fields.category;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var state = {\n                defaults: series._defaults,\n                excluded: [\n                    \"data\", \"aggregate\", \"_events\", \"tooltip\", \"content\", \"template\",\n                    \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                    \"drilldownSeriesFactory\"\n                ]\n            };\n\n            var doEval = this._evalSeries[seriesIx];\n            if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n            }\n\n            var pointOptions = options;\n            if (doEval) {\n                pointOptions = deepExtend({}, pointOptions);\n                evalOptions(pointOptions, {\n                    value: value,\n                    category: category,\n                    index: categoryIx,\n                    series: series,\n                    dataItem: series.data[categoryIx]\n                }, state);\n            }\n\n            return pointOptions;\n        },\n\n        updateRange: function(data, fields) {\n            var axisName = fields.series.axis;\n            var value = data.value;\n            var axisRange = this.valueAxisRanges[axisName];\n\n            if (isFinite(value) && value !== null) {\n                axisRange = this.valueAxisRanges[axisName] =\n                    axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                axisRange.min = Math.min(axisRange.min, value);\n                axisRange.max = Math.max(axisRange.max, value);\n            }\n        },\n\n        seriesValueAxis: function(series) {\n            var plotArea = this.plotArea;\n            var axisName = series.axis;\n            var axis = axisName ? plotArea.namedValueAxes[axisName] : plotArea.valueAxis;\n\n            if (!axis) {\n                throw new Error(\"Unable to locate value axis with name \" + axisName);\n            }\n\n            return axis;\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var categorySlots = this.categorySlots = [];\n            var chartPoints = this.points;\n            var categoryAxis = this.categoryAxis;\n            var pointIx = 0;\n\n            this.traverseDataPoints(function (data, fields) {\n                var categoryIx = fields.categoryIx;\n                var currentSeries = fields.series;\n\n                var valueAxis = this$1$1.seriesValueAxis(currentSeries);\n                var point = chartPoints[pointIx++];\n\n                var categorySlot = categorySlots[categoryIx];\n                if (!categorySlot) {\n                    categorySlots[categoryIx] = categorySlot =\n                        this$1$1.categorySlot(categoryAxis, categoryIx, valueAxis);\n                }\n\n                if (point) {\n                    var plotRange = this$1$1.plotRange(point, valueAxis.startValue());\n                    var valueSlot = this$1$1.valueSlot(valueAxis, plotRange);\n                    if (valueSlot) {\n                        var pointSlot = this$1$1.pointSlot(categorySlot, valueSlot);\n\n                        point.aboveAxis = this$1$1.aboveAxis(point, valueAxis);\n                        point.stackValue = plotRange[1];\n\n                        if (this$1$1.options.isStacked100) {\n                            point.percentage = this$1$1.plotValue(point);\n                        }\n\n                        this$1$1.reflowPoint(point, pointSlot);\n                    } else {\n                        point.visible = false;\n                    }\n                }\n            });\n\n            this.reflowCategories(categorySlots);\n            if (!this.options.clip && this.options.limitPoints && this.points.length) {\n                this.limitPoints();\n            }\n\n            this.box = targetBox;\n        },\n\n        valueSlot: function(valueAxis, plotRange) {\n            return valueAxis.getSlot(plotRange[0], plotRange[1], !this.options.clip);\n        },\n\n        limitPoints: function() {\n            var this$1$1 = this;\n\n            var categoryPoints = this.categoryPoints;\n            var points = categoryPoints[0].concat(last(categoryPoints));\n            for (var idx = 0; idx < points.length; idx++) {\n                if (points[idx]) {\n                    this$1$1.limitPoint(points[idx]);\n                }\n            }\n        },\n\n        limitPoint: function(point) {\n            var limitedSlot = this.categoryAxis.limitSlot(point.box);\n            if (!limitedSlot.equals(point.box)) {\n                point.reflow(limitedSlot);\n            }\n        },\n\n        aboveAxis: function(point, valueAxis) {\n            var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n            var value = point.value;\n\n            return valueAxis.options.reverse ?\n                value < axisCrossingValue : value >= axisCrossingValue;\n        },\n\n        categoryAxisCrossingValue: function(valueAxis) {\n            var categoryAxis = this.categoryAxis;\n            var options = valueAxis.options;\n            var crossingValues = [].concat(\n                options.axisCrossingValues || options.axisCrossingValue\n            );\n\n            return crossingValues[categoryAxis.axisIndex || 0] || 0;\n        },\n\n        reflowPoint: function(point, pointSlot) {\n            point.reflow(pointSlot);\n        },\n\n        reflowCategories: function() { },\n\n        pointSlot: function(categorySlot, valueSlot) {\n            var options = this.options;\n            var invertAxes = options.invertAxes;\n            var slotX = invertAxes ? valueSlot : categorySlot;\n            var slotY = invertAxes ? categorySlot : valueSlot;\n\n            return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n        },\n\n        categorySlot: function(categoryAxis, categoryIx) {\n            return categoryAxis.getSlot(categoryIx);\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n            var count = categoriesCount(series);\n            var seriesCount = series.length;\n\n            for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                this$1$1._outOfRangeCallback(series[seriesIx], \"_outOfRangeMinPoint\", seriesIx, callback);\n            }\n\n            for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n                for (var seriesIx$1 = 0; seriesIx$1 < seriesCount; seriesIx$1++) {\n                    var currentSeries = series[seriesIx$1];\n                    var currentCategory = this$1$1.categoryAxis.categoryAt(categoryIx);\n                    var pointData = this$1$1.plotArea.bindPoint(currentSeries, categoryIx);\n\n                    callback(pointData, {\n                        category: currentCategory,\n                        categoryIx: categoryIx,\n                        categoriesCount: count,\n                        series: currentSeries,\n                        seriesIx: seriesIx$1\n                    });\n                }\n            }\n\n            for (var seriesIx$2 = 0; seriesIx$2 < seriesCount; seriesIx$2++) {\n                this$1$1._outOfRangeCallback(series[seriesIx$2], \"_outOfRangeMaxPoint\", seriesIx$2, callback);\n            }\n        },\n\n        _outOfRangeCallback: function(series, field, seriesIx, callback) {\n            var outOfRangePoint = series[field];\n            if (outOfRangePoint) {\n                var categoryIx = outOfRangePoint.categoryIx;\n                var pointData = this.plotArea.bindPoint(series, categoryIx, outOfRangePoint.item);\n\n                callback(pointData, {\n                    category: outOfRangePoint.category,\n                    categoryIx: categoryIx,\n                    series: series,\n                    seriesIx: seriesIx,\n                    dataItem: outOfRangePoint.item\n                });\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            if (point.value === null) {\n                return \"\";\n            }\n\n            return this.chartService.format.auto(format, point.value);\n        },\n\n        pointValue: function(data) {\n            return data.valueFields.value;\n        }\n    });\n\n    setDefaultOptions(CategoricalChart, {\n        series: [],\n        invertAxes: false,\n        isStacked: false,\n        clip: true,\n        limitPoints: true\n    });\n\n    var PointEventsMixin = {\n        click: function(chart, e) {\n            return chart.trigger(\n                SERIES_CLICK,\n                this.eventArgs(e)\n            );\n        },\n\n        hover: function(chart, e) {\n            return chart.trigger(\n                SERIES_HOVER,\n                this.eventArgs(e)\n            );\n        },\n\n        over: function(chart, e) {\n            return chart.trigger(\n                SERIES_OVER,\n                this.eventArgs(e)\n            );\n        },\n\n        out: function(chart, e) {\n            return chart.trigger(\n                SERIES_LEAVE,\n                this.eventArgs(e)\n            );\n        },\n\n        eventArgs: function(e) {\n            return {\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                category: this.category,\n                series: this.series,\n                dataItem: this.dataItem,\n                runningTotal: this.runningTotal,\n                total: this.total,\n                element: eventElement(e),\n                originalEvent: e,\n                point: this\n            };\n        }\n    };\n\n    var NoteMixin = {\n        createNote: function() {\n            var options = this.options.notes;\n            var text = this.noteText || options.label.text;\n\n            if (options.visible !== false && defined(text) && text !== null) {\n                this.note = new dataviz.Note({\n                    value: this.value,\n                    text: text,\n                    dataItem: this.dataItem,\n                    category: this.category,\n                    series: this.series\n                }, this.options.notes, this.owner.chartService);\n\n                this.append(this.note);\n            }\n        }\n    };\n\n    var LinePoint = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this);\n\n            this.value = value;\n            this.options = options;\n            this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n            this.tooltipTracking = true;\n        },\n\n        render: function() {\n            var ref = this.options;\n            var markers = ref.markers;\n            var labels = ref.labels;\n\n            if (this._rendered) {\n                return;\n            }\n\n            this._rendered = true;\n\n            if (markers.visible && markers.size) {\n                this.marker = this.createMarker();\n                this.append(this.marker);\n            }\n\n            if (labels.visible) {\n                var labelTemplate = getTemplate(labels);\n                var pointData = this.pointData();\n                var labelText = this.value;\n                if (labelTemplate) {\n                    labelText = labelTemplate(pointData);\n                } else if (labels.format) {\n                    labelText = this.formatValue(labels.format);\n                }\n                this.label = new TextBox(labelText,\n                    deepExtend({\n                        align: CENTER,\n                        vAlign: CENTER,\n                        margin: {\n                            left: 5,\n                            right: 5\n                        },\n                        zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                    }, labels),\n                    pointData\n                );\n                this.append(this.label);\n            }\n\n            this.createNote();\n\n            if (this.errorBar) {\n                this.append(this.errorBar);\n            }\n        },\n\n        markerBorder: function() {\n            var options = this.options.markers;\n            var background = options.background;\n            var border = deepExtend({ color: this.color }, options.border);\n\n            if (!defined(border.color)) {\n                border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n            }\n\n            return border;\n        },\n\n        createVisual: function() {},\n\n        createMarker: function() {\n            var options = this.options.markers;\n            var marker = new ShapeElement({\n                type: options.type,\n                width: options.size,\n                height: options.size,\n                rotation: options.rotation,\n                background: options.background,\n                border: this.markerBorder(),\n                opacity: options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n                animation: options.animation,\n                visual: options.visual\n            }, {\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                category: this.category\n            });\n\n            return marker;\n        },\n\n        markerBox: function() {\n            if (!this.marker) {\n                this.marker = this.createMarker();\n                this.marker.reflow(this._childBox);\n            }\n\n            return this.marker.box;\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var aboveAxis = ref.aboveAxis;\n            var vertical = options.vertical;\n\n            this.render();\n\n            this.box = targetBox;\n            var childBox = targetBox.clone();\n\n            if (vertical) {\n                if (aboveAxis) {\n                    childBox.y1 -= childBox.height();\n                } else {\n                    childBox.y2 += childBox.height();\n                }\n            } else {\n                if (aboveAxis) {\n                    childBox.x1 += childBox.width();\n                } else {\n                    childBox.x2 -= childBox.width();\n                }\n            }\n\n            this._childBox = childBox;\n            if (this.marker) {\n                this.marker.reflow(childBox);\n            }\n\n            this.reflowLabel(childBox);\n\n            if (this.errorBars) {\n                for (var i = 0; i < this.errorBars.length; i++) {\n                    this$1$1.errorBars[i].reflow(childBox);\n                }\n            }\n\n            if (this.note) {\n                var noteTargetBox = this.markerBox();\n\n                if (!(options.markers.visible && options.markers.size)) {\n                    var center = noteTargetBox.center();\n                    noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n                }\n\n                this.note.reflow(noteTargetBox);\n            }\n        },\n\n        reflowLabel: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var label = ref.label;\n            var anchor = options.labels.position;\n\n            if (label) {\n                anchor = anchor === ABOVE ? TOP : anchor;\n                anchor = anchor === BELOW ? BOTTOM : anchor;\n\n                label.reflow(box);\n                label.box.alignTo(this.markerBox(), anchor);\n                label.reflow(label.box);\n            }\n        },\n\n        createHighlight: function() {\n            var markers = this.options.highlight.markers;\n            var defaultColor = this.markerBorder().color;\n            var options = this.options.markers;\n            var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n\n            var shadow = new ShapeElement({\n                type: options.type,\n                width: size,\n                height: size,\n                rotation: options.rotation,\n                background: markers.color || defaultColor,\n                border: {\n                    color: markers.border.color,\n                    width: markers.border.width,\n                    opacity: valueOrDefault(markers.border.opacity, 1)\n                },\n                opacity: valueOrDefault(markers.opacity, 1)\n            });\n            shadow.reflow(this._childBox);\n\n            return shadow.getElement();\n        },\n\n        highlightVisual: function() {\n            return (this.marker || {}).visual;\n        },\n\n        highlightVisualArgs: function() {\n            var marker = this.marker;\n            var visual, rect;\n\n            if (marker) {\n                rect = marker.paddingBox.toRect();\n                visual = marker.visual;\n            } else {\n                var size = this.options.markers.size;\n                var halfSize = size / 2;\n                var center = this.box.center();\n                rect = new geometry.Rect([ center.x - halfSize, center.y - halfSize ], [ size, size ]);\n            }\n\n            return {\n                options: this.options,\n                rect: rect,\n                visual: visual\n            };\n        },\n\n        tooltipAnchor: function() {\n            var markerBox = this.markerBox();\n            var clipBox = this.owner.pane.clipBox();\n            var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n            if (showTooltip) {\n                var x = markerBox.x2 + TOOLTIP_OFFSET;\n                var horizontalAlign = LEFT;\n                var y, verticalAlign;\n\n                if (this.aboveAxis) {\n                    y = markerBox.y1;\n                    verticalAlign = BOTTOM;\n                } else {\n                    y = markerBox.y2;\n                    verticalAlign = TOP;\n                }\n\n                return {\n                    point: new Point(x, y),\n                    align: {\n                        horizontal: horizontalAlign,\n                        vertical: verticalAlign\n                    }\n                };\n            }\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        overlapsBox: function(box) {\n            var markerBox = this.markerBox();\n            return markerBox.overlaps(box);\n        },\n\n        unclipElements: function() {\n            if (this.label) {\n                this.label.options.noclip = true;\n            }\n\n            if (this.note) {\n                this.note.options.noclip = true;\n            }\n        },\n\n        pointData: function() {\n            return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                series: this.series\n            };\n        }\n    });\n\n    LinePoint.prototype.defaults = {\n        vertical: true,\n        markers: {\n            visible: true,\n            background: WHITE,\n            size: LINE_MARKER_SIZE,\n            type: CIRCLE,\n            border: {\n                width: 2\n            },\n            opacity: 1\n        },\n        labels: {\n            visible: false,\n            position: ABOVE,\n            margin: getSpacing(3),\n            padding: getSpacing(4),\n            animation: {\n                type: FADEIN,\n                delay: INITIAL_ANIMATION_DURATION\n            }\n        },\n        notes: {\n            label: {}\n        },\n        highlight: {\n            markers: {\n                border: {\n                    color: \"#fff\",\n                    width: 2\n                }\n            },\n            zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n        },\n        errorBars: {\n            line: {\n                width: 1\n            }\n        }\n    };\n\n    deepExtend(LinePoint.prototype, PointEventsMixin);\n    deepExtend(LinePoint.prototype, NoteMixin);\n\n    var LineSegment = ChartElement.extend({\n        init: function(linePoints, series, seriesIx) {\n            ChartElement.fn.init.call(this);\n\n            this.linePoints = linePoints;\n            this.series = series;\n            this.seriesIx = seriesIx;\n        },\n\n        points: function() {\n            return this.toGeometryPoints(this.linePoints);\n        },\n\n        toGeometryPoints: function(points) {\n            var result = [];\n            for (var i = 0, length = points.length; i < length; i++) {\n                if (points[i] && points[i].visible !== false) {\n                    result.push(points[i]._childBox.toRect().center());\n                }\n            }\n\n            return result;\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var customVisual = this.series.visual;\n            if (customVisual) {\n                this.visual = customVisual({\n                    points: this.toGeometryPoints(this.linePoints),\n                    series: this.series,\n                    sender: this.getSender(),\n                    createVisual: function () {\n                        this$1$1.segmentVisual();\n\n                        return this$1$1.visual;\n                    }\n                });\n                if (this.visual && !defined(this.visual.options.zIndex)) {\n                    this.visual.options.zIndex = this.series.zIndex;\n                }\n            } else {\n                this.segmentVisual();\n            }\n        },\n\n        segmentVisual: function() {\n            var ref = this;\n            var options = ref.options;\n            var series = ref.series;\n            var color = series.color;\n            var defaults = series._defaults;\n\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            var line = Path.fromPoints(this.points(), {\n                stroke: {\n                    color: color,\n                    width: series.width,\n                    opacity: series.opacity,\n                    dashType: series.dashType\n                },\n                zIndex: series.zIndex\n            });\n\n            if (options.closed) {\n                line.close();\n            }\n\n            this.visual = line;\n        },\n\n        aliasFor: function(e, coords) {\n            return this.parent.getNearestPoint(coords.x, coords.y, this.seriesIx);\n        }\n    });\n\n    setDefaultOptions(LineSegment, {\n        closed: false\n    });\n\n    var StepLineMixin = {\n        calculateStepPoints: function(points) {\n            var categoryAxis = this.parent.plotArea.seriesCategoryAxis(this.series);\n            var ref = categoryAxis.options;\n            var justified = ref.justified;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n\n            var stepAxis = vertical ? X : Y;\n            var axis = vertical ? Y : X;\n            var stepDir = reverse ? 2 : 1;\n            var dir = stepDir;\n\n            var previousPoint = toGeometryPoint(points[0], stepAxis, stepDir, axis, dir);\n            var result = [ previousPoint ];\n\n            for (var idx = 1; idx < points.length; idx++) {\n                var point = toGeometryPoint(points[idx], stepAxis, stepDir, axis, dir);\n\n                if (previousPoint[stepAxis] !== point[stepAxis]) {\n                    var stepPoint = new GeometryPoint();\n                    stepPoint[stepAxis] = previousPoint[stepAxis];\n                    stepPoint[axis] = point[axis];\n\n                    result.push(stepPoint, point);\n                }\n\n                previousPoint = point;\n            }\n\n            if (!justified) {\n                result.push(toGeometryPoint(last(points), stepAxis, stepDir, axis, reverse ? 1 : 2));\n            } else if (previousPoint !== last(result)) {\n                result.push(previousPoint);\n            }\n\n            return result;\n\n        }\n    };\n\n    function toGeometryPoint(lintPoint, stepAxis, stepDir, axis, dir) {\n        var box = lintPoint.box;\n        var result = new GeometryPoint();\n\n        result[stepAxis] = box[stepAxis + stepDir];\n        result[axis] = box[axis + dir];\n\n        return result;\n    }\n\n    var StepLineSegment = LineSegment.extend({\n        points: function() {\n            return this.calculateStepPoints(this.linePoints);\n        }\n    });\n\n    deepExtend(StepLineSegment.prototype, StepLineMixin);\n\n    var SplineSegment = LineSegment.extend({\n        segmentVisual: function() {\n            var series = this.series;\n            var defaults = series._defaults;\n            var color = series.color;\n\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            var curveProcessor = new CurveProcessor(this.options.closed);\n            var segments = curveProcessor.process(this.points());\n            var curve = new Path({\n                stroke: {\n                    color: color,\n                    width: series.width,\n                    opacity: series.opacity,\n                    dashType: series.dashType\n                },\n                zIndex: series.zIndex\n            });\n\n            curve.segments.push.apply(curve.segments, segments);\n\n            this.visual = curve;\n        }\n    });\n\n    var LineChartMixin = {\n        renderSegments: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var seriesPoints = ref.seriesPoints;\n            var series = options.series;\n            var seriesCount = seriesPoints.length;\n            var lastSegment;\n\n            this._segments = [];\n\n            for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var sortedPoints = this$1$1.sortPoints(seriesPoints[seriesIx]);\n                var pointCount = sortedPoints.length;\n                var linePoints = [];\n\n                for (var pointIx = 0; pointIx < pointCount; pointIx++) {\n                    var point = sortedPoints[pointIx];\n                    if (point) {\n                        linePoints.push(point);\n                    } else if (this$1$1.seriesMissingValues(currentSeries) !== INTERPOLATE) {\n                        if (linePoints.length > 1) {\n                            lastSegment = this$1$1.createSegment(\n                                linePoints, currentSeries, seriesIx, lastSegment\n                            );\n                            this$1$1._addSegment(lastSegment);\n                        }\n                        linePoints = [];\n                    }\n                }\n\n                if (linePoints.length > 1) {\n                    lastSegment = this$1$1.createSegment(\n                        linePoints, currentSeries, seriesIx, lastSegment\n                    );\n                    this$1$1._addSegment(lastSegment);\n                }\n            }\n\n            this.children.unshift.apply(this.children, this._segments);\n        },\n\n        _addSegment: function(segment) {\n            this._segments.push(segment);\n            segment.parent = this;\n        },\n\n        sortPoints: function(points) {\n            return points;\n        },\n\n        seriesMissingValues: function(series) {\n            var missingValues = series.missingValues;\n            var assumeZero = !missingValues && this.options.isStacked;\n\n            return assumeZero ? ZERO : missingValues || INTERPOLATE;\n        },\n\n        getNearestPoint: function(x, y, seriesIx) {\n            var target = new Point(x, y);\n            var allPoints = this.seriesPoints[seriesIx];\n            var nearestPointDistance = MAX_VALUE;\n            var nearestPoint;\n\n            for (var i = 0; i < allPoints.length; i++) {\n                var point = allPoints[i];\n\n                if (point && defined(point.value) && point.value !== null && point.visible !== false) {\n                    var pointBox = point.box;\n                    var pointDistance = pointBox.center().distanceTo(target);\n\n                    if (pointDistance < nearestPointDistance) {\n                        nearestPoint = point;\n                        nearestPointDistance = pointDistance;\n                    }\n                }\n            }\n\n            return nearestPoint;\n        }\n    };\n\n    var ClipAnimation = Animation.extend({\n        setup: function() {\n            this._setEnd(this.options.box.x1);\n        },\n\n        step: function(pos) {\n            var box = this.options.box;\n            this._setEnd(dataviz.interpolateValue(box.x1, box.x2, pos));\n        },\n\n        _setEnd: function(x) {\n            var element = this.element;\n            var segments = element.segments;\n            var topRight = segments[1].anchor();\n            var bottomRight = segments[2].anchor();\n\n            element.suspend();\n            topRight.setX(x);\n            element.resume();\n            bottomRight.setX(x);\n        }\n    });\n\n    setDefaultOptions(ClipAnimation, {\n        duration: INITIAL_ANIMATION_DURATION\n    });\n\n    AnimationFactory.current.register(\"clip\", ClipAnimation);\n\n    var ClipAnimationMixin = {\n        createAnimation: function() {\n            var root = this.getRoot();\n            if (root && (root.options || {}).transitions !== false) {\n                var box = root.size();\n                var clipPath = Path.fromRect(box.toRect());\n                this.visual.clip(clipPath);\n                this.animation = new ClipAnimation(clipPath, {\n                    box: box\n                });\n                if (anyHasZIndex(this.options.series)) {\n                    this._setChildrenAnimation(clipPath);\n                }\n            }\n        },\n\n        _setChildrenAnimation: function(clipPath) {\n            var points = this.animationPoints();\n\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                if (point && point.visual && defined(point.visual.options.zIndex)) {\n                    point.visual.clip(clipPath);\n                }\n            }\n        }\n    };\n\n    var LineChart = CategoricalChart.extend({\n        render: function() {\n\n            CategoricalChart.fn.render.call(this);\n\n            this.updateStackRange();\n            this.renderSegments();\n        },\n\n        pointType: function() {\n            return LinePoint;\n        },\n\n        createPoint: function(data, fields) {\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var missingValues = this.seriesMissingValues(series);\n            var value = data.valueFields.value;\n\n            if (!defined(value) || value === null) {\n                if (missingValues === ZERO) {\n                    value = 0;\n                } else {\n                    return null;\n                }\n            }\n\n            var pointOptions = this.pointOptions(series, seriesIx);\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            var color = data.fields.color || series.color;\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            var point = new LinePoint(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        plotRange: function(point) {\n            var this$1$1 = this;\n\n            var plotValue = this.plotValue(point);\n\n            if (this.options.isStacked) {\n                var categoryIx = point.categoryIx;\n                var categoryPoints = this.categoryPoints[categoryIx];\n\n                for (var i = 0; i < categoryPoints.length; i++) {\n                    var other = categoryPoints[i];\n\n                    if (point === other) {\n                        break;\n                    }\n\n                    plotValue += this$1$1.plotValue(other);\n\n                    if (this$1$1.options.isStacked100) {\n                        plotValue = Math.min(plotValue, 1);\n                    }\n                }\n\n            }\n\n            return [ plotValue, plotValue ];\n        },\n\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = currentSeries.style;\n            var pointType;\n\n            if (style === STEP) {\n                pointType = StepLineSegment;\n            } else if (style === SMOOTH) {\n                pointType = SplineSegment;\n            } else {\n                pointType = LineSegment;\n            }\n\n            return new pointType(linePoints, currentSeries, seriesIx);\n        },\n\n        animationPoints: function() {\n            var points = this.points;\n            var result = [];\n            for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n            }\n            return result.concat(this._segments);\n        },\n\n        supportsPointInactiveOpacity: function() {\n            return false;\n        }\n    });\n\n    deepExtend(LineChart.prototype, LineChartMixin, ClipAnimationMixin);\n\n    var AreaSegment = LineSegment.extend({\n        init: function(linePoints, currentSeries, seriesIx, prevSegment, stackPoints) {\n            LineSegment.fn.init.call(this, linePoints, currentSeries, seriesIx);\n\n            this.prevSegment = prevSegment;\n            this.stackPoints = stackPoints;\n        },\n\n        createVisual: function() {\n            var series = this.series;\n            var defaults = series._defaults;\n            var lineOptions = series.line || {};\n            var color = series.color;\n\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            this.visual = new Group({\n                zIndex: series.zIndex\n            });\n\n            this.createFill({\n                fill: {\n                    color: color,\n                    opacity: series.opacity\n                },\n                stroke: null\n            });\n\n            if (lineOptions.width > 0 && lineOptions.visible !== false) {\n                this.createStroke({\n                    stroke: deepExtend({\n                        color: color,\n                        opacity: series.opacity,\n                        lineCap: \"butt\"\n                    }, lineOptions)\n                });\n            }\n        },\n\n        strokeSegments: function() {\n            var segments = this._strokeSegments;\n\n            if (!segments) {\n                segments = this._strokeSegments = this.createStrokeSegments();\n            }\n\n            return segments;\n        },\n\n        createStrokeSegments: function() {\n            return this.segmentsFromPoints(this.points());\n        },\n\n        stackSegments: function() {\n            if (this.prevSegment) {\n                return this.prevSegment.createStackSegments(this.stackPoints);\n            }\n\n            return this.createStackSegments(this.stackPoints);\n        },\n\n        createStackSegments: function(stackPoints) {\n            return this.segmentsFromPoints(this.toGeometryPoints(stackPoints)).reverse();\n        },\n\n        segmentsFromPoints: function(points) {\n            return points.map(function (point) { return new geometry.Segment(point); });\n        },\n\n        createStroke: function(style) {\n            var stroke = new Path(style);\n            stroke.segments.push.apply(stroke.segments, this.strokeSegments());\n\n            this.visual.append(stroke);\n        },\n\n        hasStackSegment: function() {\n            return this.prevSegment || (this.stackPoints && this.stackPoints.length);\n        },\n\n        createFill: function(style) {\n            var strokeSegments = this.strokeSegments();\n            var fillSegments = strokeSegments.slice(0);\n            var hasStackSegments = this.hasStackSegment();\n\n            if (hasStackSegments) {\n                var stackSegments = this.stackSegments();\n\n                append(fillSegments, stackSegments);\n            }\n\n            var fill = new Path(style);\n            fill.segments.push.apply(fill.segments, fillSegments);\n\n            if (!hasStackSegments && strokeSegments.length > 1) {\n                this.fillToAxes(fill);\n            }\n\n            this.visual.append(fill);\n        },\n\n        fillToAxes: function(fillPath) {\n            var chart = this.parent;\n            var invertAxes = chart.options.invertAxes;\n            var valueAxis = chart.seriesValueAxis(this.series);\n            var crossingValue = chart.categoryAxisCrossingValue(valueAxis);\n            var endSlot = valueAxis.getSlot(crossingValue, crossingValue, true);\n            var segments = this.strokeSegments();\n            var firstPoint = segments[0].anchor();\n            var lastPoint = last(segments).anchor();\n            var end = invertAxes ? endSlot.x1 : endSlot.y1;\n\n            if (invertAxes) {\n                fillPath.lineTo(end, lastPoint.y)\n                        .lineTo(end, firstPoint.y);\n            } else {\n                fillPath.lineTo(lastPoint.x, end)\n                        .lineTo(firstPoint.x, end);\n            }\n        }\n    });\n\n    var StepAreaSegment = AreaSegment.extend({\n        createStrokeSegments: function() {\n            return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints));\n        },\n\n        createStackSegments: function(stackPoints) {\n            return this.segmentsFromPoints(this.calculateStepPoints(stackPoints)).reverse();\n        }\n    });\n\n    deepExtend(StepAreaSegment.prototype, StepLineMixin);\n\n    var SplineAreaSegment = AreaSegment.extend({\n        createStrokeSegments: function() {\n            var curveProcessor = new CurveProcessor(this.options.closed);\n            var linePoints = this.points();\n\n            return curveProcessor.process(linePoints);\n        },\n\n        createStackSegments: function() {\n            var strokeSegments = this.strokeSegments();\n            var stackSegments = [];\n            for (var idx = strokeSegments.length - 1; idx >= 0; idx--) {\n                var segment = strokeSegments[idx];\n                stackSegments.push(new geometry.Segment(\n                    segment.anchor(),\n                    segment.controlOut(),\n                    segment.controlIn()\n                ));\n            }\n\n            return stackSegments;\n        }\n    });\n\n    var AreaChart = LineChart.extend({\n        createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n            var isStacked = this.options.isStacked;\n            var style = (currentSeries.line || {}).style;\n            var previousSegment;\n\n            var stackPoints;\n            if (isStacked && seriesIx > 0 && prevSegment) {\n                var missingValues = this.seriesMissingValues(currentSeries);\n                if (missingValues !== \"gap\") {\n                    stackPoints = prevSegment.linePoints;\n                    previousSegment = prevSegment;\n                } else {\n                    stackPoints = this._gapStackPoints(linePoints, seriesIx, style);\n                }\n            }\n\n            var pointType;\n            if (style === STEP) {\n                pointType = StepAreaSegment;\n            } else if (style === SMOOTH) {\n                pointType = SplineAreaSegment;\n            } else {\n                pointType = AreaSegment;\n            }\n\n            return new pointType(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            LineChart.fn.reflow.call(this, targetBox);\n\n            var stackPoints = this._stackPoints;\n            if (stackPoints) {\n                for (var idx = 0; idx < stackPoints.length; idx++) {\n                    var stackPoint = stackPoints[idx];\n                    var pointSlot = this$1$1.categoryAxis.getSlot(stackPoint.categoryIx);\n                    stackPoint.reflow(pointSlot);\n                }\n            }\n        },\n\n        _gapStackPoints: function(linePoints, seriesIx, style) {\n            var this$1$1 = this;\n\n            var seriesPoints = this.seriesPoints;\n            var startIdx = linePoints[0].categoryIx;\n            var length = linePoints.length;\n            if (startIdx < 0) {\n                startIdx = 0;\n                length--;\n            }\n\n            var endIdx = startIdx + length;\n            var pointOffset = this.seriesOptions[0]._outOfRangeMinPoint ? 1 : 0;\n            var stackPoints = [];\n\n            this._stackPoints = this._stackPoints || [];\n            for (var categoryIx = startIdx; categoryIx < endIdx; categoryIx++) {\n                var pointIx = categoryIx + pointOffset;\n                var currentSeriesIx = seriesIx;\n                var point = (void 0);\n\n                do {\n                    currentSeriesIx--;\n                    point = seriesPoints[currentSeriesIx][pointIx];\n                } while (currentSeriesIx > 0 && !point);\n\n                if (point) {\n                    if (style !== STEP && categoryIx > startIdx && !seriesPoints[currentSeriesIx][pointIx - 1]) {\n                        stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx - 1, currentSeriesIx));\n                    }\n\n                    stackPoints.push(point);\n\n                    if (style !== STEP && categoryIx + 1 < endIdx && !seriesPoints[currentSeriesIx][pointIx + 1]) {\n                        stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx + 1, currentSeriesIx));\n                    }\n                } else {\n                    var gapStackPoint = this$1$1._createGapStackPoint(categoryIx);\n                    this$1$1._stackPoints.push(gapStackPoint);\n                    stackPoints.push(gapStackPoint);\n                }\n            }\n\n            return stackPoints;\n        },\n\n        _previousSegmentPoint: function(categoryIx, pointIx, segmentIx, seriesIdx) {\n            var seriesPoints = this.seriesPoints;\n            var index = seriesIdx;\n            var point;\n\n            while (index > 0 && !point) {\n                index--;\n                point = seriesPoints[index][segmentIx];\n            }\n\n            if (!point) {\n                point = this._createGapStackPoint(categoryIx);\n                this._stackPoints.push(point);\n            } else {\n                point = seriesPoints[index][pointIx];\n            }\n\n            return point;\n        },\n\n        _createGapStackPoint: function(categoryIx) {\n            var options = this.pointOptions({}, 0);\n            var point = new LinePoint(0, options);\n            point.categoryIx = categoryIx;\n            point.series = {};\n\n            return point;\n        },\n\n        seriesMissingValues: function(series) {\n            return series.missingValues || ZERO;\n        },\n\n        supportsPointInactiveOpacity: function() {\n            return false;\n        }\n    });\n\n    var AxisGroupRangeTracker = Class.extend({\n        init: function() {\n\n            this.axisRanges = {};\n        },\n\n        update: function(chartAxisRanges) {\n            var axisRanges = this.axisRanges;\n\n            for (var axisName in chartAxisRanges) {\n                var chartRange = chartAxisRanges[axisName];\n                var range = axisRanges[axisName];\n                axisRanges[axisName] = range = range || { min: MAX_VALUE, max: MIN_VALUE };\n\n                range.min = Math.min(range.min, chartRange.min);\n                range.max = Math.max(range.max, chartRange.max);\n            }\n        },\n\n        reset: function(axisName) {\n            this.axisRanges[axisName] = undefined;\n        },\n\n        query: function(axisName) {\n            return this.axisRanges[axisName];\n        }\n    });\n\n    var BarLabel = ChartElement.extend({\n        init: function(content, options, pointData) {\n            ChartElement.fn.init.call(this, options);\n\n            this.textBox = new TextBox(content, this.options, pointData);\n            this.append(this.textBox);\n        },\n\n        createVisual: function() {\n            this.textBox.options.noclip = this.options.noclip;\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options;\n            var vertical = options.vertical;\n            var aboveAxis = options.aboveAxis;\n            var text = this.children[0];\n            var textOptions = text.options;\n            var box = text.box;\n            var padding = text.options.padding;\n            var labelBox = targetBox;\n\n            textOptions.align = vertical ? CENTER : LEFT;\n            textOptions.vAlign = vertical ? TOP : CENTER;\n\n            if (options.position === INSIDE_END) {\n                if (vertical) {\n                    textOptions.vAlign = TOP;\n\n                    if (!aboveAxis && box.height() < targetBox.height()) {\n                        textOptions.vAlign = BOTTOM;\n                    }\n                } else {\n                    textOptions.align = aboveAxis ? RIGHT : LEFT;\n                }\n            } else if (options.position === CENTER) {\n                textOptions.vAlign = CENTER;\n                textOptions.align = CENTER;\n            } else if (options.position === INSIDE_BASE) {\n                if (vertical) {\n                    textOptions.vAlign = aboveAxis ? BOTTOM : TOP;\n                } else {\n                    textOptions.align = aboveAxis ? LEFT : RIGHT;\n                }\n            } else if (options.position === OUTSIDE_END) {\n                if (vertical) {\n                    if (aboveAxis) {\n                        labelBox = new Box(\n                            targetBox.x1, targetBox.y1 - box.height(),\n                            targetBox.x2, targetBox.y1\n                        );\n                    } else {\n                        labelBox = new Box(\n                            targetBox.x1, targetBox.y2,\n                            targetBox.x2, targetBox.y2 + box.height()\n                        );\n                    }\n                } else {\n                    textOptions.align = CENTER;\n                    if (aboveAxis) {\n                        labelBox = new Box(\n                            targetBox.x2, targetBox.y1,\n                            targetBox.x2 + box.width(), targetBox.y2\n                        );\n                    } else {\n                        labelBox = new Box(\n                            targetBox.x1 - box.width(), targetBox.y1,\n                            targetBox.x1, targetBox.y2\n                        );\n                    }\n                }\n            }\n\n            if (!options.rotation) {\n                if (vertical) {\n                    padding.left = padding.right =\n                        (labelBox.width() - text.contentBox.width()) / 2;\n                } else {\n                    padding.top = padding.bottom =\n                        (labelBox.height() - text.contentBox.height()) / 2;\n                }\n            }\n\n            text.reflow(labelBox);\n        },\n\n        alignToClipBox: function(clipBox) {\n            var vertical = this.options.vertical;\n            var field = vertical ? Y : X;\n            var start = field + \"1\";\n            var end = field + \"2\";\n            var text = this.children[0];\n            var parentBox = this.parent.box;\n\n            if (parentBox[start] < clipBox[start] || clipBox[end] < parentBox[end]) {\n                var targetBox = text.paddingBox.clone();\n                targetBox[start] = Math.max(parentBox[start], clipBox[start]);\n                targetBox[end] = Math.min(parentBox[end], clipBox[end]);\n\n                this.reflow(targetBox);\n            }\n        }\n    });\n\n    setDefaultOptions(BarLabel, {\n        position: OUTSIDE_END,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        color: BLACK,\n        background: \"\",\n        border: {\n            width: 1,\n            color: \"\"\n        },\n        aboveAxis: true,\n        vertical: false,\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        },\n        zIndex: 2\n    });\n\n    var BAR_ALIGN_MIN_WIDTH = 6;\n\n    var Bar = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this);\n\n            this.options = options;\n            this.color = options.color || WHITE;\n            this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n            this.value = value;\n        },\n\n        render: function() {\n            if (this._rendered) {\n                return;\n            }\n\n            this._rendered = true;\n\n            this.createLabel();\n            this.createNote();\n\n            if (this.errorBar) {\n                this.append(this.errorBar);\n            }\n        },\n\n        createLabel: function() {\n            var options = this.options;\n            var labels = options.labels;\n\n            if (labels.visible) {\n                var pointData = this.pointData();\n                var labelTemplate = getTemplate(labels);\n                var labelText;\n\n                if (labelTemplate) {\n                    labelText = labelTemplate(pointData);\n                } else {\n                    labelText = this.formatValue(labels.format);\n                }\n\n                this.label = new BarLabel(labelText,\n                    deepExtend({\n                        vertical: options.vertical\n                    },\n                    labels\n                ), pointData);\n                this.append(this.label);\n            }\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            this.render();\n\n            var label = this.label;\n\n            this.box = targetBox;\n\n            if (label) {\n                label.options.aboveAxis = this.aboveAxis;\n                label.reflow(targetBox);\n            }\n\n            if (this.note) {\n                this.note.reflow(targetBox);\n            }\n\n            if (this.errorBars) {\n                for (var i = 0; i < this.errorBars.length; i++) {\n                    this$1$1.errorBars[i].reflow(targetBox);\n                }\n            }\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var box = ref.box;\n            var options = ref.options;\n            var customVisual = options.visual;\n\n            if (this.visible !== false) {\n                ChartElement.fn.createVisual.call(this);\n\n                if (customVisual) {\n                    var visual = this.rectVisual = customVisual({\n                        category: this.category,\n                        dataItem: this.dataItem,\n                        value: this.value,\n                        sender: this.getSender(),\n                        series: this.series,\n                        percentage: this.percentage,\n                        stackValue: this.stackValue,\n                        runningTotal: this.runningTotal,\n                        total: this.total,\n                        rect: box.toRect(),\n                        createVisual: function () {\n                            var group = new Group();\n                            this$1$1.createRect(group);\n                            return group;\n                        },\n                        options: options\n                    });\n\n                    if (visual) {\n                        this.visual.append(visual);\n                    }\n                } else if (box.width() > 0 && box.height() > 0) {\n                    this.createRect(this.visual);\n                }\n            }\n        },\n\n        createRect: function(visual) {\n            var options = this.options;\n            var border = options.border;\n            var strokeOpacity = defined(border.opacity) ? border.opacity : options.opacity;\n            var rect = this.box.toRect();\n\n            rect.size.width = Math.round(rect.size.width);\n\n            var path = this.rectVisual = Path.fromRect(rect, {\n                fill: {\n                    color: this.color,\n                    opacity: options.opacity\n                },\n                stroke: {\n                    color: this.getBorderColor(),\n                    width: border.width,\n                    opacity: strokeOpacity,\n                    dashType: border.dashType\n                }\n            });\n\n            var width = this.box.width();\n            var height = this.box.height();\n\n            var size = options.vertical ? width : height;\n\n            if (size > BAR_ALIGN_MIN_WIDTH) {\n                alignPathToPixel(path);\n\n                // Fixes lineJoin issue in firefox when the joined lines are parallel\n                if (width < 1 || height < 1) {\n                    path.options.stroke.lineJoin = \"round\";\n                }\n            }\n\n            visual.append(path);\n\n            if (hasGradientOverlay(options)) {\n                var overlay = this.createGradientOverlay(path, { baseColor: this.color }, deepExtend({\n                    end: !options.vertical ? [ 0, 1 ] : undefined\n                }, options.overlay));\n\n                visual.append(overlay);\n            }\n        },\n\n        createHighlight: function(style) {\n            var highlight = Path.fromRect(this.box.toRect(), style);\n\n            return alignPathToPixel(highlight);\n        },\n\n        highlightVisual: function() {\n            return this.rectVisual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this.rectVisual\n            };\n        },\n\n        getBorderColor: function() {\n            var color = this.color;\n            var border = this.options.border;\n            var brightness = border._brightness || BORDER_BRIGHTNESS;\n            var borderColor = border.color;\n\n            if (!defined(borderColor)) {\n                borderColor = new Color(color).brightness(brightness).toHex();\n            }\n\n            return borderColor;\n        },\n\n        tooltipAnchor: function() {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.box;\n            var aboveAxis = ref.aboveAxis;\n            var clipBox = this.owner.pane.clipBox() || box;\n            var horizontalAlign = LEFT;\n            var verticalAlign = TOP;\n            var x, y;\n\n            if (options.vertical) {\n                x = Math.min(box.x2, clipBox.x2) + TOOLTIP_OFFSET;\n                if (aboveAxis) {\n                    y = Math.max(box.y1, clipBox.y1);\n                } else {\n                    y = Math.min(box.y2, clipBox.y2);\n                    verticalAlign = BOTTOM;\n                }\n            } else {\n                var x1 = Math.max(box.x1, clipBox.x1);\n                var x2 = Math.min(box.x2, clipBox.x2);\n\n                if (options.isStacked) {\n                    verticalAlign = BOTTOM;\n                    if (aboveAxis) {\n                        horizontalAlign = RIGHT;\n                        x = x2;\n                    } else {\n                        x = x1;\n                    }\n                    y = Math.max(box.y1, clipBox.y1) - TOOLTIP_OFFSET;\n                } else {\n                    if (aboveAxis) {\n                        x = x2 + TOOLTIP_OFFSET;\n                    } else {\n                        x = x1 - TOOLTIP_OFFSET;\n                        horizontalAlign = RIGHT;\n                    }\n                    y = Math.max(box.y1, clipBox.y1);\n                }\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        },\n\n        pointData: function() {\n            return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                percentage: this.percentage,\n                stackValue: this.stackValue,\n                runningTotal: this.runningTotal,\n                total: this.total,\n                series: this.series\n            };\n        }\n    });\n\n    deepExtend(Bar.prototype, PointEventsMixin);\n    deepExtend(Bar.prototype, NoteMixin);\n\n    Bar.prototype.defaults = {\n        border: {\n            width: 1\n        },\n        vertical: true,\n        overlay: {\n            gradient: \"glass\"\n        },\n        labels: {\n            visible: false,\n            format: \"{0}\"\n        },\n        opacity: 1,\n        notes: {\n            label: {}\n        }\n    };\n\n    function forEach(elements, callback) {\n        elements.forEach(callback);\n    }\n\n    function forEachReverse(elements, callback) {\n        var length = elements.length;\n\n        for (var idx = length - 1; idx >= 0; idx--) {\n            callback(elements[idx], idx - length - 1);\n        }\n    }\n\n    var ClusterLayout = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.forEach = options.rtl ? forEachReverse : forEach;\n        },\n\n        reflow: function(box) {\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var gap = ref.gap;\n            var spacing = ref.spacing;\n            var children = this.children;\n            var count = children.length;\n            var axis = vertical ? Y : X;\n            var slots = count + gap + (spacing * (count - 1));\n            var slotSize = (vertical ? box.height() : box.width()) / slots;\n            var position = box[axis + 1] + slotSize * (gap / 2);\n\n            this.forEach(children, function (child, idx) {\n                var childBox = (child.box || box).clone();\n\n                childBox[axis + 1] = position;\n                childBox[axis + 2] = position + slotSize;\n\n                child.reflow(childBox);\n                if (idx < count - 1) {\n                    position += (slotSize * spacing);\n                }\n\n                position += slotSize;\n            });\n        }\n    });\n\n    setDefaultOptions(ClusterLayout, {\n        vertical: false,\n        gap: 0,\n        spacing: 0\n    });\n\n    var StackWrap = ChartElement.extend({\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var positionAxis = this.options.vertical ? X : Y;\n            var children = this.children;\n            var childrenCount = children.length;\n            var box = this.box = new Box();\n\n            for (var i = 0; i < childrenCount; i++) {\n                var currentChild = children[i];\n\n                if (currentChild.visible !== false) {\n                    var childBox = currentChild.box.clone();\n                    childBox.snapTo(targetBox, positionAxis);\n\n                    if (i === 0) {\n                        box = this$1$1.box = childBox.clone();\n                    }\n\n                    currentChild.reflow(childBox);\n                    box.wrap(childBox);\n                }\n            }\n        }\n    });\n\n    setDefaultOptions(StackWrap, {\n        vertical: true\n    });\n\n    var BarChart = CategoricalChart.extend({\n        render: function() {\n            CategoricalChart.fn.render.call(this);\n            this.updateStackRange();\n        },\n\n        pointType: function() {\n            return Bar;\n        },\n\n        clusterType: function() {\n            return ClusterLayout;\n        },\n\n        stackType: function() {\n            return StackWrap;\n        },\n\n        stackLimits: function(axisName, stackName) {\n            var limits = CategoricalChart.fn.stackLimits.call(this, axisName, stackName);\n\n            return limits;\n        },\n\n        createPoint: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var isStacked = options.isStacked;\n            var value = this.pointValue(data);\n            var pointOptions = this.pointOptions(series, seriesIx);\n\n            var labelOptions = pointOptions.labels;\n            if (isStacked) {\n                if (labelOptions.position === OUTSIDE_END) {\n                    labelOptions.position = INSIDE_END;\n                }\n            }\n\n            pointOptions.isStacked = isStacked;\n\n            var color = data.fields.color || series.color;\n            if (value < 0 && pointOptions.negativeColor) {\n                color = pointOptions.negativeColor;\n            }\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            var pointType = this.pointType();\n            var point = new pointType(value, pointOptions);\n            point.color = color;\n\n            var cluster = children[categoryIx];\n            if (!cluster) {\n                var clusterType = this.clusterType();\n                cluster = new clusterType({\n                    vertical: options.invertAxes,\n                    gap: options.gap,\n                    spacing: options.spacing,\n                    rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n            }\n\n            if (isStacked) {\n                var stackWrap = this.getStackWrap(series, cluster);\n                stackWrap.append(point);\n            } else {\n                cluster.append(point);\n            }\n\n            return point;\n        },\n\n        getStackWrap: function(series, cluster) {\n            var stack = series.stack;\n            var stackGroup = stack ? stack.group || stack : stack;\n            var wraps = cluster.children;\n            var stackWrap;\n\n            if (typeof stackGroup === datavizConstants.STRING) {\n                for (var i = 0; i < wraps.length; i++) {\n                    if (wraps[i]._stackGroup === stackGroup) {\n                        stackWrap = wraps[i];\n                        break;\n                    }\n                }\n            } else {\n                stackWrap = wraps[0];\n            }\n\n            if (!stackWrap) {\n                var stackType = this.stackType();\n                stackWrap = new stackType({\n                    vertical: !this.options.invertAxes\n                });\n                stackWrap._stackGroup = stackGroup;\n                cluster.append(stackWrap);\n            }\n\n            return stackWrap;\n        },\n\n        categorySlot: function(categoryAxis, categoryIx, valueAxis) {\n            var options = this.options;\n            var categorySlot = categoryAxis.getSlot(categoryIx);\n            var startValue = valueAxis.startValue();\n\n            if (options.isStacked) {\n                var zeroSlot = valueAxis.getSlot(startValue, startValue, true);\n                var stackAxis = options.invertAxes ? X : Y;\n                categorySlot[stackAxis + 1] = categorySlot[stackAxis + 2] = zeroSlot[stackAxis + 1];\n            }\n\n            return categorySlot;\n        },\n\n        reflowCategories: function(categorySlots) {\n            var children = this.children;\n            var childrenLength = children.length;\n\n            for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n            }\n        },\n\n        createAnimation: function() {\n            this._setAnimationOptions();\n            CategoricalChart.fn.createAnimation.call(this);\n\n            if (anyHasZIndex(this.options.series)) {\n                this._setChildrenAnimation();\n            }\n        },\n\n        _setChildrenAnimation: function() {\n            var this$1$1 = this;\n\n            var points = this.points;\n\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                var pointVisual = point.visual;\n                if (pointVisual && defined(pointVisual.options.zIndex)) {\n                    point.options.animation = this$1$1.options.animation;\n                    point.createAnimation();\n                }\n            }\n        },\n\n        _setAnimationOptions: function() {\n            var options = this.options;\n            var animation = options.animation || {};\n            var origin;\n\n            if (options.isStacked) {\n                var valueAxis = this.seriesValueAxis(options.series[0]);\n                origin = valueAxis.getSlot(valueAxis.startValue());\n            } else {\n                origin = this.categoryAxis.getSlot(0);\n            }\n\n            animation.origin = new GeometryPoint(origin.x1, origin.y1);\n            animation.vertical = !options.invertAxes;\n        }\n    });\n\n    setDefaultOptions(BarChart, {\n        animation: {\n            type: BAR\n        }\n    });\n\n    var Candlestick = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this, options);\n            this.value = value;\n        },\n\n        reflow: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var value = ref.value;\n            var chart = ref.owner;\n            var valueAxis = chart.seriesValueAxis(options);\n            var ocSlot = valueAxis.getSlot(value.open, value.close);\n            var lhSlot = valueAxis.getSlot(value.low, value.high);\n\n            ocSlot.x1 = lhSlot.x1 = box.x1;\n            ocSlot.x2 = lhSlot.x2 = box.x2;\n\n            this.realBody = ocSlot;\n\n            var mid = lhSlot.center().x;\n            var points = [];\n\n            points.push([ [ mid, lhSlot.y1 ], [ mid, ocSlot.y1 ] ]);\n            points.push([ [ mid, ocSlot.y2 ], [ mid, lhSlot.y2 ] ]);\n\n            this.lines = points;\n\n            this.box = lhSlot.clone().wrap(ocSlot);\n\n            if (!this._rendered) {\n                this._rendered = true;\n                this.createNote();\n            }\n\n            this.reflowNote();\n        },\n\n        reflowNote: function() {\n            if (this.note) {\n                this.note.reflow(this.box);\n            }\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n            this._mainVisual = this.mainVisual(this.options);\n            this.visual.append(\n                this._mainVisual\n            );\n\n            this.createOverlay();\n        },\n\n        mainVisual: function(options) {\n            var group = new Group();\n\n            this.createBody(group, options);\n            this.createLines(group, options);\n\n            return group;\n        },\n\n        createBody: function(container, options) {\n            var body = Path.fromRect(this.realBody.toRect(), {\n                fill: {\n                    color: this.color,\n                    opacity: options.opacity\n                },\n                stroke: null\n            });\n\n            if (options.border.width > 0) {\n                body.options.set(\"stroke\", {\n                    color: this.getBorderColor(),\n                    width: options.border.width,\n                    dashType: options.border.dashType,\n                    opacity: valueOrDefault(options.border.opacity, options.opacity)\n                });\n            }\n\n            alignPathToPixel(body);\n            container.append(body);\n\n            if (hasGradientOverlay(options)) {\n                container.append(this.createGradientOverlay(body, { baseColor: this.color }, deepExtend({\n                    end: !options.vertical ? [ 0, 1 ] : undefined\n                }, options.overlay)));\n            }\n        },\n\n        createLines: function(container, options) {\n            this.drawLines(container, options, this.lines, options.line);\n        },\n\n        drawLines: function(container, options, lines, lineOptions) {\n            if (!lines) {\n                return;\n            }\n\n            var lineStyle = {\n                stroke: {\n                    color: lineOptions.color || this.color,\n                    opacity: valueOrDefault(lineOptions.opacity, options.opacity),\n                    width: lineOptions.width,\n                    dashType: lineOptions.dashType,\n                    lineCap: \"butt\"\n                }\n            };\n\n            for (var i = 0; i < lines.length; i++) {\n                var line = Path.fromPoints(lines[i], lineStyle);\n                alignPathToPixel(line);\n                container.append(line);\n            }\n        },\n\n        getBorderColor: function() {\n            var border = this.options.border;\n            var borderColor = border.color;\n\n            if (!defined(borderColor)) {\n                borderColor = new Color(this.color).brightness(border._brightness).toHex();\n            }\n\n            return borderColor;\n        },\n\n        createOverlay: function() {\n            var overlay = Path.fromRect(this.box.toRect(), {\n                fill: {\n                    color: WHITE,\n                    opacity: 0\n                },\n                stroke: null\n            });\n\n            this.visual.append(overlay);\n        },\n\n        createHighlight: function() {\n            var highlight = this.options.highlight;\n            var normalColor = this.color;\n\n            this.color = highlight.color || this.color;\n            var overlay = this.mainVisual(\n                deepExtend({}, this.options, {\n                    line: {\n                        color: this.getBorderColor()\n                    }\n                }, highlight)\n            );\n            this.color = normalColor;\n\n            return overlay;\n        },\n\n        highlightVisual: function() {\n            return this._mainVisual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this._mainVisual\n            };\n        },\n\n        tooltipAnchor: function() {\n            var box = this.box;\n            var clipBox = this.owner.pane.clipBox() || box;\n\n            return {\n                point: new Point(box.x2 + TOOLTIP_OFFSET, Math.max(box.y1, clipBox.y1) + TOOLTIP_OFFSET),\n                align: {\n                    horizontal: LEFT,\n                    vertical: TOP\n                }\n            };\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        }\n    });\n\n    setDefaultOptions(Candlestick, {\n        vertical: true,\n        border: {\n            _brightness: 0.8\n        },\n        line: {\n            width: 2\n        },\n        overlay: {\n            gradient: \"glass\"\n        },\n        tooltip: {\n            format: \"<table>\" +\n                        \"<tr><th colspan='2'>{4:d}</th></tr>\" +\n                        \"<tr><td>Open:</td><td>{0:C}</td></tr>\" +\n                        \"<tr><td>High:</td><td>{1:C}</td></tr>\" +\n                        \"<tr><td>Low:</td><td>{2:C}</td></tr>\" +\n                        \"<tr><td>Close:</td><td>{3:C}</td></tr>\" +\n                    \"</table>\"\n        },\n        highlight: {\n            opacity: 1,\n            border: {\n                width: 1,\n                opacity: 1\n            },\n            line: {\n                width: 1,\n                opacity: 1\n            }\n        },\n        notes: {\n            visible: true,\n            label: {}\n        }\n    });\n\n    deepExtend(Candlestick.prototype, PointEventsMixin);\n    deepExtend(Candlestick.prototype, NoteMixin);\n\n    var CandlestickChart = CategoricalChart.extend({\n        reflowCategories: function(categorySlots) {\n            var children = this.children;\n            var childrenLength = children.length;\n\n            for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n            }\n        },\n\n        addValue: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var category = fields.category;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var ref = this;\n            var children = ref.children;\n            var options = ref.options;\n            var value = data.valueFields;\n            var valueParts = this.splitValue(value);\n            var hasValue = areNumbers(valueParts);\n            var dataItem = series.data[categoryIx];\n            var categoryPoints = this.categoryPoints[categoryIx];\n            var point;\n\n            if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n            }\n\n            if (hasValue) {\n                point = this.createPoint(data, fields);\n            }\n\n            var cluster = children[categoryIx];\n            if (!cluster) {\n                cluster = new ClusterLayout({\n                    vertical: options.invertAxes,\n                    gap: options.gap,\n                    spacing: options.spacing,\n                    rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n            }\n\n            if (point) {\n                this.updateRange(value, fields);\n\n                cluster.append(point);\n\n                point.categoryIx = categoryIx;\n                point.category = category;\n                point.series = series;\n                point.seriesIx = seriesIx;\n                point.owner = this;\n                point.dataItem = dataItem;\n                point.noteText = data.fields.noteText;\n            }\n\n            this.points.push(point);\n            categoryPoints.push(point);\n        },\n\n        pointType: function() {\n            return Candlestick;\n        },\n\n        createPoint: function(data, fields) {\n            var series = fields.series;\n            var pointType = this.pointType();\n            var value = data.valueFields;\n            var pointOptions = deepExtend({}, series);\n            var color = data.fields.color || series.color;\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            if (series.type === CANDLESTICK) {\n                if (value.open > value.close) {\n                    color = data.fields.downColor || series.downColor || series.color;\n                }\n            }\n\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            pointOptions.vertical = !this.options.invertAxes;\n\n            var point = new pointType(value, pointOptions);\n            point.color = color;\n\n            return point;\n        },\n\n        splitValue: function(value) {\n            return [ value.low, value.open, value.close, value.high ];\n        },\n\n        updateRange: function(value, fields) {\n            var axisName = fields.series.axis;\n            var parts = this.splitValue(value);\n            var axisRange = this.valueAxisRanges[axisName];\n\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange = this.valueAxisRanges[axisName] = {\n                min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n                max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n            };\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n\n            return this.chartService.format.auto(format,\n                value.open, value.high,\n                value.low, value.close, point.category\n            );\n        },\n\n        animationPoints: function() {\n            return this.points;\n        }\n    });\n\n    deepExtend(CandlestickChart.prototype, ClipAnimationMixin);\n\n    var BoxPlot = Candlestick.extend({\n        init: function(value, options) {\n            Candlestick.fn.init.call(this, value, options);\n\n            this.createNote();\n        },\n\n        reflow: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var value = ref.value;\n            var chart = ref.owner;\n            var valueAxis = chart.seriesValueAxis(options);\n            var whiskerSlot, boxSlot;\n\n            this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n            this.realBody = boxSlot;\n            this.reflowBoxSlot(box);\n\n            this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n            this.reflowWhiskerSlot(box);\n\n            var medianSlot = valueAxis.getSlot(value.median);\n\n            if (value.mean) {\n                var meanSlot = valueAxis.getSlot(value.mean);\n                this.meanPoints = this.calcMeanPoints(box, meanSlot);\n            }\n\n            this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n            this.medianPoints = this.calcMedianPoints(box, medianSlot);\n\n            this.box = whiskerSlot.clone().wrap(boxSlot);\n            this.reflowNote();\n        },\n\n        reflowBoxSlot: function(box) {\n            this.boxSlot.x1 = box.x1;\n            this.boxSlot.x2 = box.x2;\n        },\n\n        reflowWhiskerSlot: function(box) {\n            this.whiskerSlot.x1 = box.x1;\n            this.whiskerSlot.x2 = box.x2;\n        },\n\n        calcMeanPoints: function(box, meanSlot) {\n            return [\n                [ [ box.x1, meanSlot.y1 ], [ box.x2, meanSlot.y1 ] ]\n            ];\n        },\n\n        calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n            var mid = whiskerSlot.center().x;\n            return [ [\n                [ mid - 5, whiskerSlot.y1 ], [ mid + 5, whiskerSlot.y1 ],\n                [ mid, whiskerSlot.y1 ], [ mid, boxSlot.y1 ]\n            ], [\n                [ mid - 5, whiskerSlot.y2 ], [ mid + 5, whiskerSlot.y2 ],\n                [ mid, whiskerSlot.y2 ], [ mid, boxSlot.y2 ]\n            ] ];\n        },\n\n        calcMedianPoints: function(box, medianSlot) {\n            return [\n                [ [ box.x1, medianSlot.y1 ], [ box.x2, medianSlot.y1 ] ]\n            ];\n        },\n\n        renderOutliers: function(options) {\n            var this$1$1 = this;\n\n            var value = this.value;\n            var outliers = value.outliers || [];\n            var outerFence = Math.abs(value.q3 - value.q1) * 3;\n            var elements = [];\n            var markers = options.markers || {};\n\n            for (var i = 0; i < outliers.length; i++) {\n                var outlierValue = outliers[i];\n                if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n                    markers = options.outliers;\n                } else {\n                    markers = options.extremes;\n                }\n                var markersBorder = deepExtend({}, markers.border);\n\n                if (!defined(markersBorder.color)) {\n                    if (defined(this$1$1.color)) {\n                        markersBorder.color = this$1$1.color;\n                    } else {\n                        markersBorder.color =\n                            new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n                    }\n                }\n\n                var shape = new ShapeElement({\n                    type: markers.type,\n                    width: markers.size,\n                    height: markers.size,\n                    rotation: markers.rotation,\n                    background: markers.background,\n                    border: markersBorder,\n                    opacity: markers.opacity\n                });\n\n                shape.value = outlierValue;\n\n                elements.push(shape);\n            }\n\n            this.reflowOutliers(elements);\n            return elements;\n        },\n\n        reflowOutliers: function(outliers) {\n            var this$1$1 = this;\n\n            var valueAxis = this.owner.seriesValueAxis(this.options);\n            var center = this.box.center();\n\n            for (var i = 0; i < outliers.length; i++) {\n                var outlierValue = outliers[i].value;\n                var markerBox = valueAxis.getSlot(outlierValue);\n\n                if (this$1$1.options.vertical) {\n                    markerBox.move(center.x);\n                } else {\n                    markerBox.move(undefined, center.y);\n                }\n\n                this$1$1.box = this$1$1.box.wrap(markerBox);\n                outliers[i].reflow(markerBox);\n            }\n        },\n\n        mainVisual: function(options) {\n            var group = Candlestick.fn.mainVisual.call(this, options);\n            var outliers = this.renderOutliers(options);\n\n            for (var i = 0; i < outliers.length; i++) {\n                var element = outliers[i].getElement();\n                if (element) {\n                    group.append(element);\n                }\n            }\n\n            return group;\n        },\n\n        createLines: function(container, options) {\n            this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n            this.drawLines(container, options, this.medianPoints, options.median);\n            this.drawLines(container, options, this.meanPoints, options.mean);\n        },\n\n        getBorderColor: function() {\n            if ((this.options.border || {}).color) {\n                return this.options.border.color;\n            }\n\n            if (this.color) {\n                return this.color;\n            }\n\n            return Candlestick.fn.getBorderColor.call(this);\n        }\n    });\n\n    setDefaultOptions(BoxPlot, {\n        border: {\n            _brightness: 0.8\n        },\n        line: {\n            width: 2\n        },\n        median: {\n            color: \"#f6f6f6\"\n        },\n        mean: {\n            width: 2,\n            dashType: \"dash\",\n            color: \"#f6f6f6\"\n        },\n        overlay: {\n            gradient: \"glass\"\n        },\n        tooltip: {\n            format: \"<table>\" +\n                        \"<tr><th colspan='2'>{6:d}</th></tr>\" +\n                        \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" +\n                        \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" +\n                        \"<tr><td>Median:</td><td>{2:C}</td></tr>\" +\n                        \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" +\n                        \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" +\n                        \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" +\n                    \"</table>\"\n        },\n        highlight: {\n            opacity: 1,\n            border: {\n                width: 1,\n                opacity: 1\n            },\n            line: {\n                width: 1,\n                opacity: 1\n            }\n        },\n        notes: {\n            visible: true,\n            label: {}\n        },\n        outliers: {\n            visible: true,\n            size: LINE_MARKER_SIZE,\n            type: datavizConstants.CROSS,\n            background: WHITE,\n            border: {\n                width: 2,\n                opacity: 1\n            },\n            opacity: 0\n        },\n        extremes: {\n            visible: true,\n            size: LINE_MARKER_SIZE,\n            type: CIRCLE,\n            background: WHITE,\n            border: {\n                width: 2,\n                opacity: 1\n            },\n            opacity: 0\n        }\n    });\n\n    deepExtend(BoxPlot.prototype, PointEventsMixin);\n\n    var VerticalBoxPlot = BoxPlot.extend({\n        reflowBoxSlot: function(box) {\n            this.boxSlot.y1 = box.y1;\n            this.boxSlot.y2 = box.y2;\n        },\n\n        reflowWhiskerSlot: function(box) {\n            this.whiskerSlot.y1 = box.y1;\n            this.whiskerSlot.y2 = box.y2;\n        },\n\n        calcMeanPoints: function(box, meanSlot) {\n            return [\n                [ [ meanSlot.x1, box.y1 ], [ meanSlot.x1, box.y2 ] ]\n            ];\n        },\n\n        calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n            var mid = whiskerSlot.center().y;\n            return [ [\n                [ whiskerSlot.x1, mid - 5 ], [ whiskerSlot.x1, mid + 5 ],\n                [ whiskerSlot.x1, mid ], [ boxSlot.x1, mid ]\n            ], [\n                [ whiskerSlot.x2, mid - 5 ], [ whiskerSlot.x2, mid + 5 ],\n                [ whiskerSlot.x2, mid ], [ boxSlot.x2, mid ]\n            ] ];\n        },\n\n        calcMedianPoints: function(box, medianSlot) {\n            return [\n                [ [ medianSlot.x1, box.y1 ], [ medianSlot.x1, box.y2 ] ]\n            ];\n        }\n    });\n\n    var BoxPlotChart = CandlestickChart.extend({\n        addValue: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var category = fields.category;\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var ref = this;\n            var children = ref.children;\n            var options = ref.options;\n            var value = data.valueFields;\n            var valueParts = this.splitValue(value);\n            var hasValue = areNumbers(valueParts);\n            var dataItem = series.data[categoryIx];\n            var categoryPoints = this.categoryPoints[categoryIx];\n            var point;\n\n            if (!categoryPoints) {\n                this.categoryPoints[categoryIx] = categoryPoints = [];\n            }\n\n            if (hasValue) {\n                point = this.createPoint(data, fields);\n            }\n\n            var cluster = children[categoryIx];\n            if (!cluster) {\n                cluster = new ClusterLayout({\n                    vertical: options.invertAxes,\n                    gap: options.gap,\n                    spacing: options.spacing,\n                    rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n            }\n\n            if (point) {\n                this.updateRange(value, fields);\n\n                cluster.append(point);\n\n                point.categoryIx = categoryIx;\n                point.category = category;\n                point.series = series;\n                point.seriesIx = seriesIx;\n                point.owner = this;\n                point.dataItem = dataItem;\n            }\n\n            this.points.push(point);\n            categoryPoints.push(point);\n        },\n\n        pointType: function() {\n            if (this.options.invertAxes) {\n                return VerticalBoxPlot;\n            }\n\n            return BoxPlot;\n        },\n\n        splitValue: function(value) {\n            return [\n                value.lower, value.q1, value.median,\n                value.q3, value.upper\n            ];\n        },\n\n        updateRange: function(value, fields) {\n            var axisName = fields.series.axis;\n            var axisRange = this.valueAxisRanges[axisName];\n            var parts = this.splitValue(value).concat(this.filterOutliers(value.outliers));\n\n            if (defined(value.mean)) {\n                parts = parts.concat(value.mean);\n            }\n\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange = this.valueAxisRanges[axisName] = {\n                min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n                max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n            };\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n\n            return this.chartService.format.auto(format,\n                value.lower, value.q1, value.median,\n                value.q3, value.upper, value.mean, point.category\n            );\n        },\n\n        filterOutliers: function(items) {\n            var length = (items || []).length;\n            var result = [];\n\n            for (var i = 0; i < length; i++) {\n                var item = items[i];\n                if (defined(item) && item !== null) {\n                    result.push(item);\n                }\n            }\n\n            return result;\n        },\n\n        supportsPointInactiveOpacity: function() {\n            return false;\n        }\n    });\n\n    var ScatterErrorBar = ErrorBarBase.extend({\n        getAxis: function() {\n            var axes = this.chart.seriesAxes(this.series);\n            var axis = this.isVertical ? axes.y : axes.x;\n\n            return axis;\n        }\n    });\n\n    var ScatterChart = ChartElement.extend({\n        init: function(plotArea, options) {\n\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.chartService = plotArea.chartService;\n            this._initFields();\n\n            this.render();\n        },\n\n        _initFields: function() {\n            // X and Y axis ranges grouped by name, e.g.:\n            // primary: { min: 0, max: 1 }\n            this.xAxisRanges = {};\n            this.yAxisRanges = {};\n\n            this.points = [];\n            this.seriesPoints = [];\n            this.seriesOptions = [];\n            this._evalSeries = [];\n        },\n\n        render: function() {\n            this.traverseDataPoints(this.addValue.bind(this));\n        },\n\n        addErrorBar: function(point, field, fields) {\n            var value = point.value[field];\n            var valueErrorField = field + \"Value\";\n            var lowField = field + \"ErrorLow\";\n            var highField = field + \"ErrorHigh\";\n            var seriesIx = fields.seriesIx;\n            var series = fields.series;\n            var errorBars = point.options.errorBars;\n            var lowValue = fields[lowField];\n            var highValue = fields[highField];\n\n            if (isNumber(value)) {\n                var errorRange;\n                if (isNumber(lowValue) && isNumber(highValue)) {\n                    errorRange = { low: lowValue, high: highValue };\n                }\n\n                if (errorBars && defined(errorBars[valueErrorField])) {\n                    this.seriesErrorRanges = this.seriesErrorRanges || { x: [], y: [] };\n                    this.seriesErrorRanges[field][seriesIx] = this.seriesErrorRanges[field][seriesIx] ||\n                        new ErrorRangeCalculator(errorBars[valueErrorField], series, field);\n\n                    errorRange = this.seriesErrorRanges[field][seriesIx].getErrorRange(value, errorBars[valueErrorField]);\n                }\n\n                if (errorRange) {\n                    this.addPointErrorBar(errorRange, point, field);\n                }\n            }\n        },\n\n        addPointErrorBar: function(errorRange, point, field) {\n            var low = errorRange.low;\n            var high = errorRange.high;\n            var series = point.series;\n            var options = point.options.errorBars;\n            var isVertical = field === Y;\n            var item = {};\n\n            point[field + \"Low\"] = low;\n            point[field + \"High\"] = high;\n\n            point.errorBars = point.errorBars || [];\n            var errorBar = new ScatterErrorBar(low, high, isVertical, this, series, options);\n            point.errorBars.push(errorBar);\n            point.append(errorBar);\n\n            item[field] = low;\n            this.updateRange(item, series);\n            item[field] = high;\n            this.updateRange(item, series);\n        },\n\n        addValue: function(value, fields) {\n            var x = value.x;\n            var y = value.y;\n            var seriesIx = fields.seriesIx;\n            var series = this.options.series[seriesIx];\n            var missingValues = this.seriesMissingValues(series);\n            var seriesPoints = this.seriesPoints[seriesIx];\n\n            var pointValue = value;\n            if (!(hasValue(x) && hasValue(y))) {\n                pointValue = this.createMissingValue(pointValue, missingValues);\n            }\n\n            var point;\n            if (pointValue) {\n                point = this.createPoint(pointValue, fields);\n                if (point) {\n                    $.extend(point, fields);\n                    this.addErrorBar(point, X, fields);\n                    this.addErrorBar(point, Y, fields);\n                }\n                this.updateRange(pointValue, fields.series);\n            }\n\n            this.points.push(point);\n            seriesPoints.push(point);\n        },\n\n        seriesMissingValues: function(series) {\n            return series.missingValues;\n        },\n\n        createMissingValue: function() {},\n\n        updateRange: function(value, series) {\n            var intlService = this.chartService.intl;\n            var xAxisName = series.xAxis;\n            var yAxisName = series.yAxis;\n            var x = value.x;\n            var y = value.y;\n            var xAxisRange = this.xAxisRanges[xAxisName];\n            var yAxisRange = this.yAxisRanges[yAxisName];\n\n            if (hasValue(x)) {\n                xAxisRange = this.xAxisRanges[xAxisName] =\n                    xAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                if (isString(x)) {\n                    x = parseDate(intlService, x);\n                }\n\n                xAxisRange.min = Math.min(xAxisRange.min, x);\n                xAxisRange.max = Math.max(xAxisRange.max, x);\n            }\n\n            if (hasValue(y)) {\n                yAxisRange = this.yAxisRanges[yAxisName] =\n                    yAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                if (isString(y)) {\n                    y = parseDate(intlService, y);\n                }\n\n                yAxisRange.min = Math.min(yAxisRange.min, y);\n                yAxisRange.max = Math.max(yAxisRange.max, y);\n            }\n        },\n\n        evalPointOptions: function(options, value, fields) {\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var state = {\n                defaults: series._defaults,\n                excluded: [\n                    \"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\",\n                    \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                    \"drilldownSeriesFactory\"\n                ]\n            };\n\n            var doEval = this._evalSeries[seriesIx];\n            if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n            }\n\n            var pointOptions = options;\n            if (doEval) {\n                pointOptions = deepExtend({}, options);\n                evalOptions(pointOptions, {\n                    value: value,\n                    series: series,\n                    dataItem: fields.dataItem\n                }, state);\n            }\n\n            return pointOptions;\n        },\n\n        pointType: function() {\n            return LinePoint;\n        },\n\n        pointOptions: function(series, seriesIx) {\n            var options = this.seriesOptions[seriesIx];\n            if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                    markers: {\n                        opacity: series.opacity\n                    },\n                    tooltip: {\n                        format: this.options.tooltip.format\n                    },\n                    labels: {\n                        format: this.options.labels.format\n                    }\n                }, series);\n            }\n\n            return options;\n        },\n\n        createPoint: function(value, fields) {\n            var series = fields.series;\n            var pointOptions = this.pointOptions(series, fields.seriesIx);\n            var color = fields.color || series.color;\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            var point = new LinePoint(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        seriesAxes: function(series) {\n            var xAxisName = series.xAxis;\n            var yAxisName = series.yAxis;\n            var plotArea = this.plotArea;\n            var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n            var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n            if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n            }\n\n            if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n            }\n\n            return {\n                x: xAxis,\n                y: yAxis\n            };\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var chartPoints = this.points;\n            var limit = !this.options.clip;\n            var pointIx = 0;\n\n            this.traverseDataPoints(function (value, fields) {\n                var point = chartPoints[pointIx++];\n                var seriesAxes = this$1$1.seriesAxes(fields.series);\n                var slotX = seriesAxes.x.getSlot(value.x, value.x, limit);\n                var slotY = seriesAxes.y.getSlot(value.y, value.y, limit);\n\n                if (point) {\n                    if (slotX && slotY) {\n                        var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                        point.reflow(pointSlot);\n                    } else {\n                        point.visible = false;\n                    }\n                }\n            });\n\n            this.box = targetBox;\n        },\n\n        pointSlot: function(slotX, slotY) {\n            return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref.options.series;\n            var seriesPoints = ref.seriesPoints;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var currentSeriesPoints = seriesPoints[seriesIx];\n                if (!currentSeriesPoints) {\n                    seriesPoints[seriesIx] = [];\n                }\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                    var ref$1 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                    var value = ref$1.valueFields;\n                    var fields = ref$1.fields;\n\n                    callback(value, deepExtend({\n                        pointIx: pointIx,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        dataItem: currentSeries.data[pointIx],\n                        owner: this$1$1\n                    }, fields));\n                }\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n            return this.chartService.format.auto(format, value.x, value.y);\n        },\n\n        animationPoints: function() {\n            var points = this.points;\n            var result = [];\n            for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n            }\n            return result;\n        }\n    });\n    setDefaultOptions(ScatterChart, {\n        series: [],\n        tooltip: {\n            format: \"{0}, {1}\"\n        },\n        labels: {\n            format: \"{0}, {1}\"\n        },\n        clip: true\n    });\n    deepExtend(ScatterChart.prototype, ClipAnimationMixin);\n\n    var Bubble = LinePoint.extend({\n        init: function(value, options) {\n            LinePoint.fn.init.call(this, value, options);\n\n            this.category = value.category;\n        },\n\n        createHighlight: function() {\n            var highlight = this.options.highlight;\n            var border = highlight.border;\n            var markers = this.options.markers;\n            var center = this.box.center();\n            var radius = (markers.size + markers.border.width + border.width) / 2;\n            var highlightGroup = new Group();\n            var shadow = new drawing.Circle(new geometry.Circle([ center.x, center.y + radius / 5 + border.width / 2 ], radius + border.width / 2), {\n                stroke: {\n                    color: 'none'\n                },\n                fill: this.createGradient({\n                    gradient: 'bubbleShadow',\n                    color: markers.background,\n                    stops: [ {\n                        offset: 0,\n                        color: markers.background,\n                        opacity: 0.3\n                    }, {\n                        offset: 1,\n                        color: markers.background,\n                        opacity: 0\n                    } ]\n                })\n            });\n            var overlay = new drawing.Circle(new geometry.Circle([ center.x, center.y ], radius), {\n                stroke: {\n                    color: border.color ||\n                        new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex(),\n                    width: border.width,\n                    opacity: border.opacity\n                },\n                fill: {\n                    color: markers.background,\n                    opacity: highlight.opacity\n                }\n            });\n\n            highlightGroup.append(shadow, overlay);\n\n            return highlightGroup;\n        }\n    });\n\n    Bubble.prototype.defaults = deepExtend({}, Bubble.prototype.defaults, {\n        labels: {\n            position: CENTER\n        },\n        highlight: {\n            opacity: 1,\n            border: {\n                color: \"#fff\",\n                width: 2,\n                opacity: 1\n            }\n        }\n    });\n\n    Bubble.prototype.defaults.highlight.zIndex = undefined;\n\n    var BubbleChart = ScatterChart.extend({\n        _initFields: function() {\n            this._maxSize = MIN_VALUE;\n            ScatterChart.fn._initFields.call(this);\n        },\n\n        addValue: function(value, fields) {\n            if (value.size !== null && (value.size > 0 || (value.size < 0 && fields.series.negativeValues.visible))) {\n                this._maxSize = Math.max(this._maxSize, Math.abs(value.size));\n                ScatterChart.fn.addValue.call(this, value, fields);\n            } else {\n                this.points.push(null);\n                this.seriesPoints[fields.seriesIx].push(null);\n            }\n        },\n\n        reflow: function(box) {\n            this.updateBubblesSize(box);\n            ScatterChart.fn.reflow.call(this, box);\n        },\n\n        pointType: function() {\n            return Bubble;\n        },\n\n        createPoint: function(value, fields) {\n            var series = fields.series;\n            var pointsCount = series.data.length;\n            var delay = fields.pointIx * (INITIAL_ANIMATION_DURATION / pointsCount);\n            var animationOptions = {\n                delay: delay,\n                duration: INITIAL_ANIMATION_DURATION - delay,\n                type: BUBBLE\n            };\n\n            var color = fields.color || series.color;\n            if (value.size < 0 && series.negativeValues.visible) {\n                color = valueOrDefault(\n                    series.negativeValues.color, color\n                );\n            }\n\n            var pointOptions = deepExtend({\n                labels: {\n                    animation: {\n                        delay: delay,\n                        duration: INITIAL_ANIMATION_DURATION - delay\n                    }\n                }\n            }, this.pointOptions(series, fields.seriesIx), {\n                markers: {\n                    type: CIRCLE,\n                    border: series.border,\n                    opacity: series.opacity,\n                    animation: animationOptions\n                }\n            });\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            pointOptions.markers.background = color;\n\n            var point = new Bubble(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        updateBubblesSize: function(box) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref.options.series;\n            var boxSize = Math.min(box.width(), box.height());\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesPoints = this$1$1.seriesPoints[seriesIx];\n                var minSize = currentSeries.minSize || Math.max(boxSize * 0.02, 10);\n                var maxSize = currentSeries.maxSize || boxSize * 0.2;\n                var minR = minSize / 2;\n                var maxR = maxSize / 2;\n                var minArea = Math.PI * minR * minR;\n                var maxArea = Math.PI * maxR * maxR;\n                var areaRange = maxArea - minArea;\n                var areaRatio = areaRange / this$1$1._maxSize;\n\n                for (var pointIx = 0; pointIx < seriesPoints.length; pointIx++) {\n                    var point = seriesPoints[pointIx];\n                    if (point) {\n                        var area = Math.abs(point.value.size) * areaRatio;\n                        var radius = Math.sqrt((minArea + area) / Math.PI);\n                        var baseZIndex = valueOrDefault(point.options.zIndex, 0);\n                        var zIndex = baseZIndex + (1 - radius / maxR);\n\n                        deepExtend(point.options, {\n                            zIndex: zIndex,\n                            markers: {\n                                size: radius * 2,\n                                zIndex: zIndex\n                            },\n                            labels: {\n                                zIndex: zIndex + 1\n                            }\n                        });\n                    }\n                }\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n            return this.chartService.format.auto(format, value.x, value.y, value.size, point.category);\n        },\n\n        createAnimation: function() {},\n\n        createVisual: function() {}\n    });\n\n    setDefaultOptions(BubbleChart, {\n        tooltip: {\n            format: \"{3}\"\n        },\n        labels: {\n            format: \"{3}\"\n        }\n    });\n\n    var Target = ShapeElement.extend({\n\n    });\n\n    deepExtend(Target.prototype, PointEventsMixin);\n\n    var Bullet = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.aboveAxis = this.options.aboveAxis;\n            this.color = options.color || WHITE;\n            this.value = value;\n        },\n\n        render: function() {\n            var options = this.options;\n\n            if (!this._rendered) {\n                this._rendered = true;\n\n                if (defined(this.value.target)) {\n                    this.target = new Target({\n                        type: options.target.shape,\n                        background: options.target.color || this.color,\n                        opacity: options.opacity,\n                        zIndex: options.zIndex,\n                        border: options.target.border,\n                        vAlign: TOP,\n                        align: RIGHT\n                    });\n\n                    this.target.value = this.value;\n                    this.target.dataItem = this.dataItem;\n                    this.target.series = this.series;\n\n                    this.append(this.target);\n                }\n\n                this.createLabel();\n                this.createNote();\n            }\n        },\n\n        createLabel: function() {\n            var options = this.options;\n            var labels = options.labels;\n\n            if (labels.visible) {\n                var pointData = this.pointData();\n                var labelTemplate = getTemplate(labels);\n                var labelText;\n\n                if (labelTemplate) {\n                    labelText = labelTemplate(pointData);\n                } else {\n                    labelText = this.formatValue(labels.format);\n                }\n\n                this.label = new BarLabel(labelText, labels, pointData);\n                this.append(this.label);\n            }\n        },\n\n        reflow: function(box) {\n            this.render();\n\n            var ref = this;\n            var options = ref.options;\n            var target = ref.target;\n            var chart = ref.owner;\n            var invertAxes = options.invertAxes;\n            var valueAxis = chart.seriesValueAxis(this.options);\n            var categorySlot = chart.categorySlot(chart.categoryAxis, options.categoryIx, valueAxis);\n            var targetValueSlot = valueAxis.getSlot(this.value.target);\n            var targetSlotX = invertAxes ? targetValueSlot : categorySlot;\n            var targetSlotY = invertAxes ? categorySlot : targetValueSlot;\n\n            if (target) {\n                var targetSlot = new Box(\n                    targetSlotX.x1, targetSlotY.y1,\n                    targetSlotX.x2, targetSlotY.y2\n                );\n                target.options.height = invertAxes ? targetSlot.height() : options.target.line.width;\n                target.options.width = invertAxes ? options.target.line.width : targetSlot.width();\n                target.reflow(targetSlot);\n            }\n\n            var label = this.label;\n            if (label) {\n                label.options.aboveAxis = this.aboveAxis;\n                label.reflow(box);\n            }\n\n            if (this.note) {\n                this.note.reflow(box);\n            }\n\n            this.box = box;\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var options = this.options;\n            var body = Path.fromRect(this.box.toRect(), {\n                fill: {\n                    color: this.color,\n                    opacity: options.opacity\n                },\n                stroke: null\n            });\n\n            if (options.border.width > 0) {\n                body.options.set(\"stroke\", {\n                    color: options.border.color || this.color,\n                    width: options.border.width,\n                    dashType: options.border.dashType,\n                    opacity: valueOrDefault(options.border.opacity, options.opacity)\n                });\n            }\n\n            this.bodyVisual = body;\n\n            alignPathToPixel(body);\n            this.visual.append(body);\n        },\n\n        createAnimation: function() {\n            if (this.bodyVisual) {\n                this.animation = Animation.create(\n                    this.bodyVisual, this.options.animation\n                );\n            }\n        },\n\n        createHighlight: function(style) {\n            return Path.fromRect(this.box.toRect(), style);\n        },\n\n        highlightVisual: function() {\n            return this.bodyVisual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                rect: this.box.toRect(),\n                visual: this.bodyVisual,\n                options: this.options\n            };\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        pointData: function() {\n            return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                series: this.series\n            };\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        }\n    });\n\n    Bullet.prototype.tooltipAnchor = Bar.prototype.tooltipAnchor;\n\n    setDefaultOptions(Bullet, {\n        border: {\n            width: 1\n        },\n        vertical: false,\n        opacity: 1,\n        target: {\n            shape: \"\",\n            border: {\n                width: 0,\n                color: \"green\"\n            },\n            line: {\n                width: 2\n            }\n        },\n        labels: {\n            visible: false\n        },\n        tooltip: {\n            format: \"Current: {0}<br />Target: {1}\"\n        },\n        notes: {\n            label: {}\n        }\n    });\n\n    deepExtend(Bullet.prototype, PointEventsMixin);\n    deepExtend(Bullet.prototype, NoteMixin);\n\n    var BulletChart = CategoricalChart.extend({\n        init: function(plotArea, options) {\n\n            wrapData(options);\n\n            CategoricalChart.fn.init.call(this, plotArea, options);\n        },\n\n        reflowCategories: function(categorySlots) {\n            var children = this.children;\n            var childrenLength = children.length;\n\n            for (var i = 0; i < childrenLength; i++) {\n                children[i].reflow(categorySlots[i]);\n            }\n        },\n\n        plotRange: function(point) {\n            var series = point.series;\n            var valueAxis = this.seriesValueAxis(series);\n            var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n            return [ axisCrossingValue, point.value.current || axisCrossingValue ];\n        },\n\n        createPoint: function(data, fields) {\n            var categoryIx = fields.categoryIx;\n            var series = fields.series;\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var value = data.valueFields;\n\n            var bulletOptions = deepExtend({\n                vertical: !options.invertAxes,\n                overlay: series.overlay,\n                categoryIx: categoryIx,\n                invertAxes: options.invertAxes\n            }, series);\n\n            var color = data.fields.color || series.color;\n            bulletOptions = this.evalPointOptions(bulletOptions, value, fields);\n            if (isFunction(series.color)) {\n                color = bulletOptions.color;\n            }\n\n            var bullet = new Bullet(value, bulletOptions);\n            bullet.color = color;\n\n            var cluster = children[categoryIx];\n            if (!cluster) {\n                cluster = new ClusterLayout({\n                    vertical: options.invertAxes,\n                    gap: options.gap,\n                    spacing: options.spacing,\n                    rtl: !options.invertAxes && (this.chartService || {}).rtl\n                });\n                this.append(cluster);\n            }\n\n            cluster.append(bullet);\n\n            return bullet;\n        },\n\n        updateRange: function(value, fields) {\n            var current = value.current;\n            var target = value.target;\n            var axisName = fields.series.axis;\n            var axisRange = this.valueAxisRanges[axisName];\n\n            if (defined(current) && !isNaN(current) && defined(target && !isNaN(target))) {\n                axisRange = this.valueAxisRanges[axisName] =\n                    axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                axisRange.min = Math.min(axisRange.min, current, target);\n                axisRange.max = Math.max(axisRange.max, current, target);\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            return this.chartService.format.auto(format, point.value.current, point.value.target);\n        },\n\n        pointValue: function(data) {\n            return data.valueFields.current;\n        },\n\n        aboveAxis: function(point) {\n            var value = point.value.current;\n\n            return value > 0;\n        },\n\n        createAnimation: function() {\n            var this$1$1 = this;\n\n            var points = this.points;\n\n            this._setAnimationOptions();\n\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                point.options.animation = this$1$1.options.animation;\n                point.createAnimation();\n            }\n        }\n    });\n\n    BulletChart.prototype._setAnimationOptions = BarChart.prototype._setAnimationOptions;\n\n    setDefaultOptions(BulletChart, {\n        animation: {\n            type: BAR\n        }\n    });\n\n    function wrapData(options) {\n        var series = options.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var seriesItem = series[i];\n            var data = seriesItem.data;\n            if (data && !isArray(data[0]) && !isObject(data[0])) {\n                seriesItem.data = [ data ];\n            }\n        }\n    }\n\n    var BaseTooltip = Class.extend({\n        init: function(chartService, options) {\n\n            this.chartService = chartService;\n            this.options = deepExtend({}, this.options, options);\n        },\n\n        getStyle: function(options, point) {\n            var background = options.background;\n            var border = options.border.color;\n\n            if (point) {\n                var pointColor = point.color || point.options.color;\n                background = valueOrDefault(background, pointColor);\n                border = valueOrDefault(border, pointColor);\n            }\n\n            var padding = getSpacing(options.padding || {}, \"auto\");\n\n            return {\n                backgroundColor: background,\n                borderColor: border,\n                font: options.font,\n                color: options.color,\n                opacity: options.opacity,\n                borderWidth: styleValue(options.border.width),\n                paddingTop: styleValue(padding.top),\n                paddingBottom: styleValue(padding.bottom),\n                paddingLeft: styleValue(padding.left),\n                paddingRight: styleValue(padding.right)\n            };\n        },\n\n        show: function(options, tooltipOptions, point) {\n            options.format = tooltipOptions.format;\n\n            var style = this.getStyle(tooltipOptions, point);\n            options.style = style;\n\n            var background = new Color(style.backgroundColor);\n            if (!defined(tooltipOptions.color) && !background.isDark()) {\n                options.className = \"k-chart-tooltip-inverse\";\n            }\n\n            this.chartService.notify(SHOW_TOOLTIP, options);\n\n            this.visible = true;\n        },\n\n        hide: function() {\n            if (this.chartService) {\n                this.chartService.notify(HIDE_TOOLTIP);\n            }\n\n            this.visible = false;\n        },\n\n        destroy: function() {\n            delete this.chartService;\n        }\n    });\n\n    setDefaultOptions(BaseTooltip, {\n        border: {\n            width: 1\n        },\n        opacity: 1\n    });\n\n    var CrosshairTooltip = BaseTooltip.extend({\n        init: function(chartService, crosshair, options) {\n            BaseTooltip.fn.init.call(this, chartService, options);\n\n            this.crosshair = crosshair;\n            this.formatService = chartService.format;\n            this.initAxisName();\n        },\n\n        initAxisName: function() {\n            var axis = this.crosshair.axis;\n            var plotArea = axis.plotArea;\n            var name;\n            if (plotArea.categoryAxis) {\n                name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n            } else {\n                name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n            }\n            this.axisName = name;\n        },\n\n        showAt: function(point) {\n            var ref = this;\n            var axis = ref.crosshair.axis;\n            var options = ref.options;\n            var value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n            var formattedValue = value;\n\n            if (options.format) {\n                formattedValue = this.formatService.auto(options.format, value);\n            } else if (axis.options.type === DATE) {\n                formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n            }\n\n            this.show({\n                point: point,\n                anchor: this.getAnchor(),\n                crosshair: this.crosshair,\n                value: formattedValue,\n                axisName: this.axisName,\n                axisIndex: this.crosshair.axis.axisIndex\n            }, this.options);\n        },\n\n        hide: function() {\n            this.chartService.notify(HIDE_TOOLTIP, {\n                crosshair: this.crosshair,\n                axisName: this.axisName,\n                axisIndex: this.crosshair.axis.axisIndex\n            });\n        },\n\n        getAnchor: function() {\n            var ref = this;\n            var crosshair = ref.crosshair;\n            var ref_options = ref.options;\n            var position = ref_options.position;\n            var padding = ref_options.padding;\n            var vertical = !crosshair.axis.options.vertical;\n            var lineBox = crosshair.line.bbox();\n            var horizontalAlign, verticalAlign, point;\n\n            if (vertical) {\n                horizontalAlign = CENTER;\n                if (position === BOTTOM) {\n                    verticalAlign = TOP;\n                    point = lineBox.bottomLeft().translate(0, padding);\n                } else {\n                    verticalAlign = BOTTOM;\n                    point = lineBox.topLeft().translate(0, -padding);\n                }\n            } else {\n                verticalAlign = CENTER;\n                if (position === LEFT) {\n                    horizontalAlign = RIGHT;\n                    point = lineBox.topLeft().translate(-padding, 0);\n                } else {\n                    horizontalAlign = LEFT;\n                    point = lineBox.topRight().translate(padding, 0);\n                }\n            }\n\n            return {\n                point: point,\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    });\n\n    setDefaultOptions(CrosshairTooltip, {\n        padding: 10\n    });\n\n    var Crosshair = ChartElement.extend({\n        init: function(chartService, axis, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.axis = axis;\n            this.stickyMode = axis instanceof CategoryAxis;\n\n            var tooltipOptions = this.options.tooltip;\n\n            if (tooltipOptions.visible) {\n                this.tooltip = new CrosshairTooltip(chartService, this,\n                    deepExtend({}, tooltipOptions, { stickyMode: this.stickyMode })\n                );\n            }\n        },\n\n        showAt: function(point) {\n            this.point = point;\n            this.moveLine();\n            this.line.visible(true);\n\n            if (this.tooltip) {\n                this.tooltip.showAt(point);\n            }\n        },\n\n        hide: function() {\n            this.line.visible(false);\n\n            if (this.tooltip) {\n                this.tooltip.hide();\n            }\n        },\n\n        moveLine: function() {\n            var ref = this;\n            var axis = ref.axis;\n            var point = ref.point;\n            var vertical = axis.options.vertical;\n            var box = this.getBox();\n            var dim = vertical ? Y : X;\n            var lineStart = new GeometryPoint(box.x1, box.y1);\n            var lineEnd;\n\n            if (vertical) {\n                lineEnd = new GeometryPoint(box.x2, box.y1);\n            } else {\n                lineEnd = new GeometryPoint(box.x1, box.y2);\n            }\n\n            if (point) {\n                if (this.stickyMode) {\n                    var slot = axis.getSlot(axis.pointCategoryIndex(point));\n                    lineStart[dim] = lineEnd[dim] = slot.center()[dim];\n                } else {\n                    lineStart[dim] = lineEnd[dim] = point[dim];\n                }\n            }\n\n            this.box = box;\n\n            this.line.moveTo(lineStart).lineTo(lineEnd);\n        },\n\n        getBox: function() {\n            var axis = this.axis;\n            var axes = axis.pane.axes;\n            var length = axes.length;\n            var vertical = axis.options.vertical;\n            var box = axis.lineBox().clone();\n            var dim = vertical ? X : Y;\n            var axisLineBox;\n\n            for (var i = 0; i < length; i++) {\n                var currentAxis = axes[i];\n                if (currentAxis.options.vertical !== vertical) {\n                    if (!axisLineBox) {\n                        axisLineBox = currentAxis.lineBox().clone();\n                    } else {\n                        axisLineBox.wrap(currentAxis.lineBox());\n                    }\n                }\n            }\n\n            box[dim + 1] = axisLineBox[dim + 1];\n            box[dim + 2] = axisLineBox[dim + 2];\n\n            return box;\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var options = this.options;\n            this.line = new Path({\n                stroke: {\n                    color: options.color,\n                    width: options.width,\n                    opacity: options.opacity,\n                    dashType: options.dashType\n                },\n                visible: false\n            });\n\n            this.moveLine();\n            this.visual.append(this.line);\n        },\n\n        destroy: function() {\n            if (this.tooltip) {\n                this.tooltip.destroy();\n            }\n\n            ChartElement.fn.destroy.call(this);\n        }\n    });\n\n    setDefaultOptions(Crosshair, {\n        color: BLACK,\n        width: 2,\n        zIndex: -1,\n        tooltip: {\n            visible: false\n        }\n    });\n\n    var ChartContainer = ChartElement.extend({\n        init: function(options, pane) {\n            ChartElement.fn.init.call(this, options);\n            this.pane = pane;\n        },\n\n        shouldClip: function() {\n            var children = this.children;\n            var length = children.length;\n\n            for (var i = 0; i < length; i++) {\n                if (children[i].options.clip === true) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _clipBox: function() {\n            return this.pane.chartsBox();\n        },\n\n        createVisual: function() {\n            this.visual = new Group({\n                zIndex: 0\n            });\n\n            if (this.shouldClip()) {\n                var clipBox = this.clipBox = this._clipBox();\n                var clipRect = clipBox.toRect();\n                var clipPath = Path.fromRect(clipRect);\n                alignPathToPixel(clipPath);\n\n                this.visual.clip(clipPath);\n                this.unclipLabels();\n            }\n        },\n\n        stackRoot: function() {\n            return this;\n        },\n\n        unclipLabels: function() {\n            var ref = this;\n            var charts = ref.children;\n            var clipBox = ref.clipBox;\n\n            for (var i = 0; i < charts.length; i++) {\n                var points = charts[i].points || {};\n                var length = points.length;\n\n                for (var j = 0; j < length; j++) {\n                    var point = points[j];\n                    if (point && point.visible !== false && point.overlapsBox && point.overlapsBox(clipBox)) {\n                        if (point.unclipElements) {\n                            point.unclipElements();\n                        } else {\n                            var label = point.label;\n                            var note = point.note;\n\n                            if (label && label.options.visible) {\n                                if (label.alignToClipBox) {\n                                    label.alignToClipBox(clipBox);\n                                }\n                                label.options.noclip = true;\n                            }\n\n                            if (note && note.options.visible) {\n                                note.options.noclip = true;\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        destroy: function() {\n            ChartElement.fn.destroy.call(this);\n\n            delete this.parent;\n        }\n    });\n\n    ChartContainer.prototype.isStackRoot = true;\n\n    var Pane = BoxElement.extend({\n        init: function(options) {\n            BoxElement.fn.init.call(this, options);\n\n            this.id = paneID();\n\n            this.createTitle();\n\n            this.content = new ChartElement();\n\n            this.chartContainer = new ChartContainer({}, this);\n            this.append(this.content);\n\n            this.axes = [];\n            this.charts = [];\n        },\n\n        createTitle: function() {\n            var titleOptions = this.options.title;\n            if (isObject(titleOptions)) {\n                titleOptions = deepExtend({}, titleOptions, {\n                    align: titleOptions.position,\n                    position: TOP\n                });\n            }\n\n            this.title = Title.buildTitle(titleOptions, Pane.prototype.options.title);\n            if (this.title) {\n                this.append(this.title);\n            }\n        },\n\n        appendAxis: function(axis) {\n            this.content.append(axis);\n            this.axes.push(axis);\n            axis.pane = this;\n        },\n\n        appendAxisAt: function(axis, pos) {\n            this.content.append(axis);\n            this.axes.splice(pos, 0, axis);\n            axis.pane = this;\n        },\n\n        appendChart: function(chart) {\n            if (this.chartContainer.parent !== this.content) {\n                this.content.append(this.chartContainer);\n            }\n\n            this.charts.push(chart);\n            this.chartContainer.append(chart);\n            chart.pane = this;\n        },\n\n        empty: function() {\n            var this$1$1 = this;\n\n            var plotArea = this.parent;\n\n            if (plotArea) {\n                for (var i = 0; i < this.axes.length; i++) {\n                    plotArea.removeAxis(this$1$1.axes[i]);\n                }\n\n                for (var i$1 = 0; i$1 < this.charts.length; i$1++) {\n                    plotArea.removeChart(this$1$1.charts[i$1]);\n                }\n            }\n\n            this.axes = [];\n            this.charts = [];\n\n            this.content.destroy();\n            this.content.children = [];\n            this.chartContainer.children = [];\n        },\n\n        reflow: function(targetBox) {\n            // Content (such as charts) is rendered, but excluded from reflows\n            var content;\n            if (last(this.children) === this.content) {\n                content = this.children.pop();\n            }\n\n            BoxElement.fn.reflow.call(this, targetBox);\n\n            if (content) {\n                this.children.push(content);\n            }\n\n            if (this.title) {\n                this.contentBox.y1 += this.title.box.height();\n            }\n        },\n\n        visualStyle: function() {\n            var style = BoxElement.fn.visualStyle.call(this);\n            style.zIndex = -10;\n\n            return style;\n        },\n\n        renderComplete: function() {\n            if (this.options.visible) {\n                this.createGridLines();\n            }\n        },\n\n        stackRoot: function() {\n            return this;\n        },\n\n        clipRoot: function() {\n            return this;\n        },\n\n        createGridLines: function() {\n            var axes = this.axes;\n            var allAxes = axes.concat(this.parent.axes);\n            var vGridLines = [];\n            var hGridLines = [];\n\n            // TODO\n            // Is full combination really necessary?\n            for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var vertical = axis.options.vertical;\n                var gridLines = vertical ? vGridLines : hGridLines;\n                for (var j = 0; j < allAxes.length; j++) {\n                    if (gridLines.length === 0) {\n                        var altAxis = allAxes[j];\n                        if (vertical !== altAxis.options.vertical) {\n                            append(gridLines, axis.createGridLines(altAxis));\n                        }\n                    }\n                }\n            }\n        },\n\n        refresh: function() {\n            this.visual.clear();\n\n            this.content.parent = null;\n            this.content.createGradient = this.createGradient.bind(this);\n            this.content.renderVisual();\n            this.content.parent = this;\n\n            if (this.title) {\n                this.visual.append(this.title.visual);\n            }\n\n            this.visual.append(this.content.visual);\n\n            this.renderComplete();\n            this.notifyRender();\n        },\n\n        chartsBox: function() {\n            var axes = this.axes;\n            var length = axes.length;\n            var chartsBox = new Box();\n\n            for (var idx = 0; idx < length; idx++) {\n                var axis = axes[idx];\n                var axisValueField = axis.options.vertical ? Y : X;\n                var lineBox = axis.lineBox();\n                chartsBox[axisValueField + 1] = lineBox[axisValueField + 1];\n                chartsBox[axisValueField + 2] = lineBox[axisValueField + 2];\n            }\n\n            if (chartsBox.x2 === 0) {\n                var allAxes = this.parent.axes;\n                var length$1 = allAxes.length;\n\n                for (var idx$1 = 0; idx$1 < length$1; idx$1++) {\n                    var axis$1 = allAxes[idx$1];\n                    if (!axis$1.options.vertical) {\n                        var lineBox$1 = axis$1.lineBox();\n                        chartsBox.x1 = lineBox$1.x1;\n                        chartsBox.x2 = lineBox$1.x2;\n                    }\n                }\n            }\n            return chartsBox;\n        },\n\n        clipBox: function() {\n            return this.chartContainer.clipBox;\n        },\n\n        notifyRender: function() {\n            var service = this.getService();\n            if (service) {\n                service.notify(PANE_RENDER, {\n                    pane: new ChartPane(this),\n                    index: this.paneIndex,\n                    name: this.options.name\n                });\n            }\n        }\n    });\n\n    var ID = 1;\n\n    function paneID() {\n        return \"pane\" + ID++;\n    }\n\n    Pane.prototype.isStackRoot = true;\n\n    setDefaultOptions(Pane, {\n        zIndex: -1,\n        shrinkToFit: true,\n        title: {\n            align: LEFT\n        },\n        visible: true\n    });\n\n    var PlotAreaBase = ChartElement.extend({\n        init: function(series, options, chartService) {\n            ChartElement.fn.init.call(this, options);\n\n            this.initFields(series, options);\n            this.series = series;\n            this.initSeries();\n            this.charts = [];\n            this.options.legend = this.options.legend || {};\n            this.options.legend.items = [];\n            this.axes = [];\n            this.crosshairs = [];\n            this.chartService = chartService;\n            this.originalOptions = options;\n            this.originalSeries = series;\n            this._bindCache = new WeakMap();\n\n            this.createPanes();\n            this.render();\n            this.createCrosshairs();\n        },\n\n        initFields: function() { },\n\n        initSeries: function() {\n            var series = this.series;\n\n            for (var i = 0; i < series.length; i++) {\n                series[i].index = i;\n            }\n        },\n\n        bindPoint: function(series, pointIx, item) {\n            var cached = this._bindCache.get(series);\n            if (!cached) {\n                cached = [];\n                this._bindCache.set(series, cached);\n            }\n\n            var data = cached[pointIx];\n            if (!data) {\n                data = cached[pointIx] = SeriesBinder.current.bindPoint(series, pointIx, item);\n            }\n\n            return data;\n        },\n\n        createPanes: function() {\n            var this$1$1 = this;\n\n            var titleOptions = this.options.title || {};\n            var paneDefaults = this.options.paneDefaults;\n            var paneOptions = this.options.panes || [];\n            var panesLength = Math.max(paneOptions.length, 1);\n            var panes = [];\n\n            var defaults = deepExtend({\n                title: {\n                    color: titleOptions.color\n                }\n            }, paneDefaults);\n\n            for (var i = 0; i < panesLength; i++) {\n                var options = deepExtend({}, defaults, paneOptions[i]);\n                if (isString(options.title)) {\n                    options.title = deepExtend({ text: options.title }, defaults.title);\n                }\n\n                var currentPane = new Pane(options);\n                currentPane.paneIndex = i;\n\n                panes.push(currentPane);\n                this$1$1.append(currentPane);\n            }\n\n            this.panes = panes;\n        },\n\n        crosshairOptions: function(axis) {\n            return axis.options.crosshair;\n        },\n\n        createCrosshairs: function(panes) {\n            var this$1$1 = this;\n            if (panes === void 0) { panes = this.panes; }\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                for (var j = 0; j < pane.axes.length; j++) {\n                    var axis = pane.axes[j];\n                    var options = this$1$1.crosshairOptions(axis);\n                    if (options && options.visible) {\n                        var currentCrosshair = new Crosshair(this$1$1.chartService, axis, options);\n\n                        this$1$1.crosshairs.push(currentCrosshair);\n                        pane.content.append(currentCrosshair);\n                    }\n                }\n            }\n        },\n\n        removeCrosshairs: function(pane) {\n            var crosshairs = this.crosshairs;\n            var axes = pane.axes;\n\n            for (var i = crosshairs.length - 1; i >= 0; i--) {\n                for (var j = 0; j < axes.length; j++) {\n                    if (crosshairs[i].axis === axes[j]) {\n                        crosshairs.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n        },\n\n        hideCrosshairs: function() {\n            var crosshairs = this.crosshairs;\n            for (var idx = 0; idx < crosshairs.length; idx++) {\n                crosshairs[idx].hide();\n            }\n        },\n\n        findPane: function(name) {\n            var panes = this.panes;\n            var matchingPane;\n\n            for (var i = 0; i < panes.length; i++) {\n                if (panes[i].options.name === name) {\n                    matchingPane = panes[i];\n                    break;\n                }\n            }\n\n            return matchingPane || panes[0];\n        },\n\n        findPointPane: function(point) {\n            var panes = this.panes;\n            var matchingPane;\n\n            for (var i = 0; i < panes.length; i++) {\n                if (panes[i].box.containsPoint(point)) {\n                    matchingPane = panes[i];\n                    break;\n                }\n            }\n\n            return matchingPane;\n        },\n\n        appendAxis: function(axis) {\n            var pane = this.findPane(axis.options.pane);\n\n            pane.appendAxis(axis);\n            this.axes.push(axis);\n            axis.plotArea = this;\n        },\n\n        removeAxis: function(axisToRemove) {\n            var this$1$1 = this;\n\n            var filteredAxes = [];\n\n            for (var i = 0; i < this.axes.length; i++) {\n                var axis = this$1$1.axes[i];\n                if (axisToRemove !== axis) {\n                    filteredAxes.push(axis);\n                } else {\n                    axis.destroy();\n                }\n            }\n\n            this.axes = filteredAxes;\n        },\n\n        appendChart: function(chart, pane) {\n            this.charts.push(chart);\n            if (pane) {\n                pane.appendChart(chart);\n            } else {\n                this.append(chart);\n            }\n        },\n\n        removeChart: function(chartToRemove) {\n            var this$1$1 = this;\n\n            var filteredCharts = [];\n\n            for (var i = 0; i < this.charts.length; i++) {\n                var chart = this$1$1.charts[i];\n                if (chart !== chartToRemove) {\n                    filteredCharts.push(chart);\n                } else {\n                    chart.destroy();\n                }\n            }\n\n            this.charts = filteredCharts;\n        },\n\n        addToLegend: function(series) {\n            var count = series.length;\n            var legend = this.options.legend;\n            var labels = legend.labels || {};\n            var inactiveItems = legend.inactiveItems || {};\n            var inactiveItemsLabels = inactiveItems.labels || {};\n            var data = [];\n\n            for (var i = 0; i < count; i++) {\n                var currentSeries = series[i];\n                var seriesVisible = currentSeries.visible !== false;\n                if (currentSeries.visibleInLegend === false) {\n                    continue;\n                }\n\n                var text = currentSeries.name;\n                var labelTemplate = seriesVisible ? getTemplate(labels) : getTemplate(inactiveItemsLabels) || getTemplate(labels);\n                if (labelTemplate) {\n                    text = labelTemplate({\n                        text: hasValue(text) ? text : \"\",\n                        series: currentSeries\n                    });\n                }\n\n                var defaults = currentSeries._defaults;\n                var color = currentSeries.color;\n                if (isFunction(color) && defaults) {\n                    color = defaults.color;\n                }\n\n                var itemLabelOptions = (void 0), markerColor = (void 0);\n                if (seriesVisible) {\n                    itemLabelOptions = {};\n                    markerColor = color;\n                } else {\n                    itemLabelOptions = {\n                        color: inactiveItemsLabels.color,\n                        font: inactiveItemsLabels.font\n                    };\n                    markerColor = inactiveItems.markers.color;\n                }\n\n                if (hasValue(text) && text !== \"\") {\n                    data.push({\n                        text: text,\n                        labels: itemLabelOptions,\n                        markerColor: markerColor,\n                        series: currentSeries,\n                        active: seriesVisible\n                    });\n                }\n            }\n\n            append(legend.items, data);\n        },\n\n        groupAxes: function(panes) {\n            var xAxes = [];\n            var yAxes = [];\n\n            for (var paneIx = 0; paneIx < panes.length; paneIx++) {\n                var paneAxes = panes[paneIx].axes;\n                for (var axisIx = 0; axisIx < paneAxes.length; axisIx++) {\n                    var axis = paneAxes[axisIx];\n                    if (axis.options.vertical) {\n                        yAxes.push(axis);\n                    } else {\n                        xAxes.push(axis);\n                    }\n                }\n            }\n\n            return { x: xAxes, y: yAxes, any: xAxes.concat(yAxes) };\n        },\n\n        groupSeriesByPane: function() {\n            var this$1$1 = this;\n\n            var series = this.series;\n            var seriesByPane = {};\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var pane = this$1$1.seriesPaneName(currentSeries);\n\n                if (seriesByPane[pane]) {\n                    seriesByPane[pane].push(currentSeries);\n                } else {\n                    seriesByPane[pane] = [ currentSeries ];\n                }\n            }\n\n            return seriesByPane;\n        },\n\n        filterVisibleSeries: function(series) {\n            var result = [];\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                if (currentSeries.visible !== false) {\n                    result.push(currentSeries);\n                }\n            }\n\n            return result;\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options.plotArea;\n            var panes = this.panes;\n            var margin = getSpacing(options.margin);\n\n            this.box = targetBox.clone().unpad(margin);\n            this.reflowPanes();\n\n            this.detachLabels();\n            this.reflowAxes(panes);\n            this.reflowCharts(panes);\n        },\n\n        redraw: function(panes) {\n            var this$1$1 = this;\n\n            var panesArray = [].concat(panes);\n            this.initSeries();\n\n            //prevents leak during partial redraws. the cached gradients observers retain reference to the destroyed elements.\n            var root = this.getRoot();\n            if (root) {\n                root.cleanGradients();\n            }\n\n            for (var i = 0; i < panesArray.length; i++) {\n                this$1$1.removeCrosshairs(panesArray[i]);\n                panesArray[i].empty();\n            }\n\n            this._bindCache = new WeakMap();\n\n            this.render(panesArray);\n            this.detachLabels();\n            this.reflowAxes(this.panes);\n            this.reflowCharts(panesArray);\n\n            this.createCrosshairs(panesArray);\n\n            for (var i$1 = 0; i$1 < panesArray.length; i$1++) {\n                panesArray[i$1].refresh();\n            }\n        },\n\n        axisCrossingValues: function(axis, crossingAxes) {\n            var options = axis.options;\n            var crossingValues = [].concat(\n                options.axisCrossingValues || options.axisCrossingValue\n            );\n            var valuesToAdd = crossingAxes.length - crossingValues.length;\n            var defaultValue = crossingValues[0] || 0;\n\n            for (var i = 0; i < valuesToAdd; i++) {\n                crossingValues.push(defaultValue);\n            }\n\n            return crossingValues;\n        },\n\n        alignAxisTo: function(axis, targetAxis, crossingValue, targetCrossingValue) {\n            var slot = axis.getSlot(crossingValue, crossingValue, true);\n            var slotEdge = axis.options.reverse ? 2 : 1;\n            var targetSlot = targetAxis.getSlot(targetCrossingValue, targetCrossingValue, true);\n            var targetEdge = targetAxis.options.reverse ? 2 : 1;\n            var axisBox = axis.box.translate(\n                targetSlot[X + targetEdge] - slot[X + slotEdge],\n                targetSlot[Y + targetEdge] - slot[Y + slotEdge]\n            );\n\n            if (axis.pane !== targetAxis.pane) {\n                axisBox.translate(0, axis.pane.box.y1 - targetAxis.pane.box.y1);\n            }\n\n            axis.reflow(axisBox);\n        },\n\n        alignAxes: function(xAxes, yAxes) {\n            var this$1$1 = this;\n\n            var xAnchor = xAxes[0];\n            var yAnchor = yAxes[0];\n            var xAnchorCrossings = this.axisCrossingValues(xAnchor, yAxes);\n            var yAnchorCrossings = this.axisCrossingValues(yAnchor, xAxes);\n            var leftAnchors = {};\n            var rightAnchors = {};\n            var topAnchors = {};\n            var bottomAnchors = {};\n\n            for (var i = 0; i < yAxes.length; i++) {\n                var axis = yAxes[i];\n                var pane = axis.pane;\n                var paneId = pane.id;\n                var visible = axis.options.visible !== false;\n\n                // Locate pane anchor, if any, and use its axisCrossingValues\n                var anchor = paneAnchor(xAxes, pane) || xAnchor;\n                var anchorCrossings = xAnchorCrossings;\n\n                if (anchor !== xAnchor) {\n                    anchorCrossings = this$1$1.axisCrossingValues(anchor, yAxes);\n                }\n\n                this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                if (axis.options._overlap) {\n                    continue;\n                }\n\n                if (round(axis.lineBox().x1) === round(anchor.lineBox().x1)) {\n                    // Push the axis to the left the previous y-axis so they don't overlap\n                    if (leftAnchors[paneId]) {\n                        axis.reflow(axis.box\n                            .alignTo(leftAnchors[paneId].box, LEFT)\n                            .translate(-axis.options.margin, 0)\n                        );\n                    }\n\n                    if (visible) {\n                        leftAnchors[paneId] = axis;\n                    }\n                }\n\n                if (round(axis.lineBox().x2) === round(anchor.lineBox().x2)) {\n                    // Flip the labels on the right if we're at the right end of the pane\n                    if (!axis._mirrored) {\n                        axis.options.labels.mirror = !axis.options.labels.mirror;\n                        axis._mirrored = true;\n                    }\n\n                    this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                    // Push the axis to the right the previous y-axis so they don't overlap\n                    if (rightAnchors[paneId]) {\n                        axis.reflow(axis.box\n                            .alignTo(rightAnchors[paneId].box, RIGHT)\n                            .translate(axis.options.margin, 0)\n                        );\n                    }\n\n                    if (visible) {\n                        rightAnchors[paneId] = axis;\n                    }\n                }\n\n                if (i !== 0 && yAnchor.pane === axis.pane) {\n                    axis.alignTo(yAnchor);\n                    axis.reflow(axis.box);\n                }\n            }\n\n            for (var i$1 = 0; i$1 < xAxes.length; i$1++) {\n                var axis$1 = xAxes[i$1];\n                var pane$1 = axis$1.pane;\n                var paneId$1 = pane$1.id;\n                var visible$1 = axis$1.options.visible !== false;\n\n                // Locate pane anchor and use its axisCrossingValues\n                var anchor$1 = paneAnchor(yAxes, pane$1) || yAnchor;\n                var anchorCrossings$1 = yAnchorCrossings;\n                if (anchor$1 !== yAnchor) {\n                    anchorCrossings$1 = this$1$1.axisCrossingValues(anchor$1, xAxes);\n                }\n\n                this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                if (axis$1.options._overlap) {\n                    continue;\n                }\n\n                if (round(axis$1.lineBox().y1) === round(anchor$1.lineBox().y1)) {\n                    // Flip the labels on top if we're at the top of the pane\n                    if (!axis$1._mirrored) {\n                        axis$1.options.labels.mirror = !axis$1.options.labels.mirror;\n                        axis$1._mirrored = true;\n                    }\n                    this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                    // Push the axis above the previous x-axis so they don't overlap\n                    if (topAnchors[paneId$1]) {\n                        axis$1.reflow(axis$1.box\n                            .alignTo(topAnchors[paneId$1].box, TOP)\n                            .translate(0, -axis$1.options.margin)\n                        );\n                    }\n\n                    if (visible$1) {\n                        topAnchors[paneId$1] = axis$1;\n                    }\n                }\n\n                if (round(axis$1.lineBox().y2, datavizConstants.COORD_PRECISION) === round(anchor$1.lineBox().y2, datavizConstants.COORD_PRECISION)) {\n                    // Push the axis below the previous x-axis so they don't overlap\n                    if (bottomAnchors[paneId$1]) {\n                        axis$1.reflow(axis$1.box\n                            .alignTo(bottomAnchors[paneId$1].box, BOTTOM)\n                            .translate(0, axis$1.options.margin)\n                        );\n                    }\n\n                    if (visible$1) {\n                        bottomAnchors[paneId$1] = axis$1;\n                    }\n                }\n\n                if (i$1 !== 0) {\n                    axis$1.alignTo(xAnchor);\n                    axis$1.reflow(axis$1.box);\n                }\n            }\n        },\n\n        shrinkAxisWidth: function(panes) {\n            var axes = this.groupAxes(panes).any;\n            var axisBox = axisGroupBox(axes);\n            var overflowX = 0;\n\n            for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n\n                if (currentPane.axes.length > 0) {\n                    overflowX = Math.max(\n                        overflowX,\n                        axisBox.width() - currentPane.contentBox.width()\n                    );\n                }\n            }\n\n            if (overflowX !== 0) {\n                for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                    var currentAxis = axes[i$1];\n\n                    if (!currentAxis.options.vertical) {\n                        currentAxis.reflow(currentAxis.box.shrink(overflowX, 0));\n                    }\n                }\n            }\n        },\n\n        shrinkAxisHeight: function(panes) {\n            var shrinked;\n\n            for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n                var axes = currentPane.axes;\n                var overflowY = Math.max(0, axisGroupBox(axes).height() - currentPane.contentBox.height());\n\n                if (overflowY !== 0) {\n                    for (var j = 0; j < axes.length; j++) {\n                        var currentAxis = axes[j];\n\n                        if (currentAxis.options.vertical) {\n                            currentAxis.reflow(\n                                currentAxis.box.shrink(0, overflowY)\n                            );\n                        }\n                    }\n                    shrinked = true;\n                }\n            }\n\n            return shrinked;\n        },\n\n        fitAxes: function(panes) {\n            var axes = this.groupAxes(panes).any;\n            var offsetX = 0;\n\n            for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n                var paneAxes = currentPane.axes;\n                var paneBox = currentPane.contentBox;\n\n                if (paneAxes.length > 0) {\n                    var axisBox = axisGroupBox(paneAxes);\n                    // OffsetY is calculated and applied per pane\n                    var offsetY = Math.max(paneBox.y1 - axisBox.y1, paneBox.y2 - axisBox.y2);\n\n                    // OffsetX is calculated and applied globally\n                    offsetX = Math.max(offsetX, paneBox.x1 - axisBox.x1);\n\n                    for (var j = 0; j < paneAxes.length; j++) {\n                        var currentAxis = paneAxes[j];\n\n                        currentAxis.reflow(\n                            currentAxis.box.translate(0, offsetY)\n                        );\n                    }\n                }\n            }\n\n            for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                var currentAxis$1 = axes[i$1];\n\n                currentAxis$1.reflow(\n                    currentAxis$1.box.translate(offsetX, 0)\n                );\n            }\n        },\n\n        reflowAxes: function(panes) {\n            var this$1$1 = this;\n\n            var axes = this.groupAxes(panes);\n\n            for (var i = 0; i < panes.length; i++) {\n                this$1$1.reflowPaneAxes(panes[i]);\n            }\n\n            if (axes.x.length > 0 && axes.y.length > 0) {\n                this.alignAxes(axes.x, axes.y);\n                this.shrinkAxisWidth(panes);\n\n                this.autoRotateAxisLabels(axes);\n\n                this.alignAxes(axes.x, axes.y);\n                if (this.shrinkAxisWidth(panes)) {\n                    this.alignAxes(axes.x, axes.y);\n                }\n\n                this.shrinkAxisHeight(panes);\n                this.alignAxes(axes.x, axes.y);\n\n                if (this.shrinkAxisHeight(panes)) {\n                    this.alignAxes(axes.x, axes.y);\n                }\n\n                this.fitAxes(panes);\n            }\n        },\n\n        autoRotateAxisLabels: function(groupedAxes) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var panes = ref.panes;\n            var axes = allPaneAxes(panes);\n            var rotated;\n\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n                if (axis.autoRotateLabels()) {\n                    rotated = true;\n                }\n            }\n\n            if (rotated) {\n                for (var idx$1 = 0; idx$1 < panes.length; idx$1++) {\n                    this$1$1.reflowPaneAxes(panes[idx$1]);\n                }\n\n                if (groupedAxes.x.length > 0 && groupedAxes.y.length > 0) {\n                    this.alignAxes(groupedAxes.x, groupedAxes.y);\n                    this.shrinkAxisWidth(panes);\n                }\n            }\n        },\n\n        reflowPaneAxes: function(pane) {\n            var axes = pane.axes;\n            var length = axes.length;\n\n            if (length > 0) {\n                for (var i = 0; i < length; i++) {\n                    axes[i].reflow(pane.contentBox);\n                }\n            }\n        },\n\n        reflowCharts: function(panes) {\n            var charts = this.charts;\n            var count = charts.length;\n            var box = this.box;\n\n            for (var i = 0; i < count; i++) {\n                var chartPane = charts[i].pane;\n                if (!chartPane || inArray(chartPane, panes)) {\n                    charts[i].reflow(box);\n                }\n            }\n        },\n\n        reflowPanes: function() {\n            var ref = this;\n            var box = ref.box;\n            var panes = ref.panes;\n            var panesLength = panes.length;\n            var remainingHeight = box.height();\n            var remainingPanes = panesLength;\n            var autoHeightPanes = 0;\n            var top = box.y1;\n\n            for (var i = 0; i < panesLength; i++) {\n                var currentPane = panes[i];\n                var height = currentPane.options.height;\n\n                currentPane.options.width = box.width();\n\n                if (!currentPane.options.height) {\n                    autoHeightPanes++;\n                } else {\n                    if (height.indexOf && height.indexOf(\"%\")) {\n                        var percents = parseInt(height, 10) / 100;\n                        currentPane.options.height = percents * box.height();\n                    }\n\n                    currentPane.reflow(box.clone());\n\n                    remainingHeight -= currentPane.options.height;\n                }\n            }\n\n            for (var i$1 = 0; i$1 < panesLength; i$1++) {\n                var currentPane$1 = panes[i$1];\n\n                if (!currentPane$1.options.height) {\n                    currentPane$1.options.height = remainingHeight / autoHeightPanes;\n                }\n            }\n\n            for (var i$2 = 0; i$2 < panesLength; i$2++) {\n                var currentPane$2 = panes[i$2];\n                var paneBox = box\n                    .clone()\n                    .move(box.x1, top);\n\n                currentPane$2.reflow(paneBox);\n\n                remainingPanes--;\n                top += currentPane$2.options.height;\n            }\n        },\n\n        backgroundBox: function() {\n            var axes = this.axes;\n            var axesCount = axes.length;\n            var box;\n\n            for (var i = 0; i < axesCount; i++) {\n                var axisA = axes[i];\n\n                for (var j = 0; j < axesCount; j++) {\n                    var axisB = axes[j];\n\n                    if (axisA.options.vertical !== axisB.options.vertical) {\n                        var lineBox = axisA.lineBox().clone().wrap(axisB.lineBox());\n\n                        if (!box) {\n                            box = lineBox;\n                        } else {\n                            box = box.wrap(lineBox);\n                        }\n                    }\n                }\n            }\n\n            return box || this.box;\n        },\n\n        chartsBoxes: function() {\n            var panes = this.panes;\n            var boxes = [];\n\n            for (var idx = 0; idx < panes.length; idx++) {\n                boxes.push(panes[idx].chartsBox());\n            }\n\n            return boxes;\n        },\n\n        addBackgroundPaths: function(multipath) {\n            var boxes = this.chartsBoxes();\n            for (var idx = 0; idx < boxes.length; idx++) {\n                multipath.paths.push(Path.fromRect(boxes[idx].toRect()));\n            }\n        },\n\n        backgroundContainsPoint: function(point) {\n            var boxes = this.chartsBoxes();\n            for (var idx = 0; idx < boxes.length; idx++) {\n                if (boxes[idx].containsPoint(point)) {\n                    return true;\n                }\n            }\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var options = this.options.plotArea;\n            var opacity = options.opacity;\n            var background = options.background;\n            var border = options.border; if (border === void 0) { border = {}; }\n            if (isTransparent(background)) {\n                background = WHITE;\n                opacity = 0;\n            }\n\n            var bg = this._bgVisual = new drawing.MultiPath({\n                fill: {\n                    color: background,\n                    opacity: opacity\n                },\n                stroke: {\n                    color: border.width ? border.color : \"\",\n                    width: border.width,\n                    dashType: border.dashType\n                },\n                zIndex: -1\n            });\n\n            this.addBackgroundPaths(bg);\n\n            this.appendVisual(bg);\n        },\n\n        pointsByCategoryIndex: function(categoryIndex) {\n            var charts = this.charts;\n            var result = [];\n\n            if (categoryIndex !== null) {\n                for (var i = 0; i < charts.length; i++) {\n                    var chart = charts[i];\n                    if (chart.pane.options.name === \"_navigator\") {\n                        continue;\n                    }\n\n                    var points = charts[i].categoryPoints[categoryIndex];\n                    if (points && points.length) {\n                        for (var j = 0; j < points.length; j++) {\n                            var point = points[j];\n                            if (point && defined(point.value) && point.value !== null) {\n                                result.push(point);\n                            }\n                        }\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        pointsBySeriesIndex: function(seriesIndex) {\n            return this.filterPoints(function(point) {\n                return point.series.index === seriesIndex;\n            });\n        },\n\n        pointsBySeriesName: function(name) {\n            return this.filterPoints(function(point) {\n                return point.series.name === name;\n            });\n        },\n\n        filterPoints: function(callback) {\n            var charts = this.charts;\n            var result = [];\n\n            for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                var points = chart.points;\n                for (var j = 0; j < points.length; j++) {\n                    var point = points[j];\n                    if (point && point.visible !== false && callback(point)) {\n                        result.push(point);\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        findPoint: function(callback) {\n            var charts = this.charts;\n\n            for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n                var points = chart.points;\n                for (var j = 0; j < points.length; j++) {\n                    var point = points[j];\n                    if (point && point.visible !== false && callback(point)) {\n                        return point;\n                    }\n                }\n            }\n        },\n\n        paneByPoint: function(point) {\n            var panes = this.panes;\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                if (pane.box.containsPoint(point)) {\n                    return pane;\n                }\n            }\n        },\n\n        detachLabels: function() {\n            var axes = this.groupAxes(this.panes);\n            var xAxes = axes.x;\n            var yAxes = axes.y;\n\n            this.detachAxisGroupLabels(yAxes, xAxes);\n            this.detachAxisGroupLabels(xAxes, yAxes);\n        },\n\n        detachAxisGroupLabels: function(axes, crossingAxes) {\n            var this$1$1 = this;\n\n            var labelAxisCount = 0;\n\n            for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var pane = axis.pane;\n                var anchor = paneAnchor(crossingAxes, pane) || crossingAxes[0];\n                var axisIndex = i + labelAxisCount;\n                var labelAxis = this$1$1.createLabelAxis(axis, axisIndex, anchor);\n\n                if (labelAxis) {\n                    labelAxisCount++;\n\n                    var pos = pane.axes.indexOf(axis) + labelAxisCount;\n                    pane.appendAxisAt(labelAxis, pos);\n                }\n            }\n        },\n\n        createLabelAxis: function(axis, axisIndex, anchor) {\n            var labelOptions = axis.options.labels;\n            var position = labelOptions.position;\n            var onAxis = position !== datavizConstants.END && position !== datavizConstants.START;\n            var visible = labelOptions.visible;\n\n            if (onAxis || visible === false) {\n                return null;\n            }\n\n            var allAxes = this.groupAxes(this.panes);\n            var crossingAxes = anchor.options.vertical ? allAxes.x : allAxes.y;\n            var anchorCrossings = this.axisCrossingValues(anchor, crossingAxes);\n            var end = position === datavizConstants.END;\n            var range = anchor.range();\n            var edge = end ? range.max : range.min;\n            var crossingValue = limitValue(anchorCrossings[axisIndex], range.min, range.max);\n\n            if (crossingValue - edge === 0) {\n                return null;\n            }\n\n            anchorCrossings.splice(axisIndex + 1, 0, edge);\n            anchor.options.axisCrossingValues = anchorCrossings;\n\n            var labelAxis = axis.clone();\n            axis.clear();\n\n            labelAxis.options.name = undefined;\n            labelAxis.options.line.visible = false;\n\n            labelAxis.options.crosshair = undefined;\n            labelAxis.options.notes = undefined;\n            labelAxis.options.plotBands = undefined;\n\n            return labelAxis;\n        },\n\n        isTrendline: function(series) {\n            return series && inArray(series.type, TRENDLINE_SERIES);\n        },\n\n        trendlineFactory: function() { /* abstract */ },\n\n        createTrendlineSeries: function() {\n            var this$1$1 = this;\n\n            var modifiedSeries = [];\n\n            this.series = this.series.map(function (series) {\n                if (!this$1$1.isTrendline(series)) {\n                    return series;\n                }\n\n                var forSeries = this$1$1.seriesByName(series.for);\n                if (!forSeries) {\n                    throw new Error('Invalid Configuration: Unable to locate linked series ' +\n                        \"\\\"\" + (series.for) + \"\\\" for trendline \\\"\" + (series.name) + \"\\\".\");\n                }\n\n                var valueFields = SeriesBinder.current.valueFields(forSeries);\n                var field = last(valueFields); // Use the last field for multi-field series\n\n                var trendlineSeries = this$1$1.trendlineFactory($.extend({}, {field: field}, series), forSeries);\n                if (trendlineSeries) {\n                    if (forSeries.visible === false) {\n                        trendlineSeries.visible = false;\n                    }\n\n                    if (trendlineSeries.color === datavizConstants.INHERIT) {\n                        trendlineSeries.color = forSeries.color;\n                    }\n\n                    modifiedSeries.push(trendlineSeries);\n                }\n\n                return trendlineSeries;\n            }).filter(function (series) { return series !== null; });\n\n            return modifiedSeries;\n        },\n\n        seriesByName: function(name) {\n            return this.series.find(function (series) { return series.name === name; });\n        }\n    });\n\n    function isSingleAxis(axis) {\n        return !axis.pane.axes.some(function (a) { return a.options.vertical === axis.options.vertical && a !== axis && a.options.visible !== false; }\n        );\n    }\n\n    function axisGroupBox(axes) {\n        var length = axes.length;\n        var box;\n\n        for (var i = 0; i < length; i++) {\n            var axis = axes[i];\n            var visible = axis.options.visible !== false;\n            if (visible || isSingleAxis(axis)) {\n                var axisBox = visible ? axis.contentBox() : axis.lineBox();\n\n                if (!box) {\n                    box = axisBox.clone();\n                } else {\n                    box.wrap(axisBox);\n                }\n            }\n        }\n\n        return box || new Box();\n    }\n\n    function paneAnchor(axes, pane) {\n        for (var i = 0; i < axes.length; i++) {\n            var anchor = axes[i];\n            if (anchor && anchor.pane === pane) {\n                return anchor;\n            }\n        }\n    }\n\n    function isTransparent(color) {\n        return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n    }\n\n    var allPaneAxes = function (panes) { return panes.reduce(function (acc, pane) { return acc.concat(pane.axes); }, []); };\n\n    setDefaultOptions(PlotAreaBase, {\n        series: [],\n        plotArea: {\n            margin: {}\n        },\n        background: \"\",\n        border: {\n            color: BLACK,\n            width: 0\n        },\n        paneDefaults: {\n            title: {}\n        },\n        legend: {\n            inactiveItems: {\n                labels: {\n                    color: \"#919191\"\n                },\n                markers: {\n                    color: \"#919191\"\n                }\n            }\n        }\n    });\n\n    var PlotAreaEventsMixin = {\n        hover: function(chart, e) {\n            this._dispatchEvent(chart, e, PLOT_AREA_HOVER);\n        },\n\n        click: function(chart, e) {\n            this._dispatchEvent(chart, e, PLOT_AREA_CLICK);\n        }\n    };\n\n    var SeriesAggregator = Class.extend({\n        init: function(series, binder, defaultAggregates) {\n\n            var canonicalFields = binder.canonicalFields(series);\n            var valueFields = binder.valueFields(series);\n            var sourceFields = binder.sourceFields(series, canonicalFields);\n            var seriesFields = this._seriesFields = [];\n            var defaults = defaultAggregates.query(series.type);\n            var rootAggregate = series.aggregate || defaults;\n\n            this._series = series;\n            this._binder = binder;\n\n            for (var i = 0; i < canonicalFields.length; i++) {\n                var field = canonicalFields[i];\n                var fieldAggregate = (void 0);\n\n                if (isObject(rootAggregate)) {\n                    fieldAggregate = rootAggregate[field];\n                } else if (i === 0 || inArray(field, valueFields)) {\n                    fieldAggregate = rootAggregate;\n                } else {\n                    break;\n                }\n\n                if (fieldAggregate) {\n                    seriesFields.push({\n                        canonicalName: field,\n                        name: sourceFields[i],\n                        transform: isFunction(fieldAggregate) ? fieldAggregate : Aggregates[fieldAggregate]\n                    });\n                }\n            }\n        },\n\n        aggregatePoints: function(srcPoints, group) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref._series;\n            var seriesFields = ref._seriesFields;\n            var data = this._bindPoints(srcPoints || []);\n            var firstDataItem = data.dataItems[0];\n            var result = {};\n\n            if (firstDataItem && !isNumber(firstDataItem) && !isArray(firstDataItem)) {\n                var fn = function() {};\n                fn.prototype = firstDataItem;\n                result = new fn();\n            }\n\n            for (var i = 0; i < seriesFields.length; i++) {\n                var field = seriesFields[i];\n                var srcValues = this$1$1._bindField(data.values, field.canonicalName);\n                var value = field.transform(srcValues, series, data.dataItems, group);\n\n                if (value !== null && isObject(value) && !defined(value.length) && !(value instanceof Date)) {\n                    result = value;\n                    break;\n                } else {\n                    if (defined(value)) {\n                        setValue(field.name, result, value);\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _bindPoints: function(points) {\n            var ref = this;\n            var binder = ref._binder;\n            var series = ref._series;\n            var values = [];\n            var dataItems = [];\n\n            for (var i = 0; i < points.length; i++) {\n                var pointIx = points[i];\n\n                values.push(binder.bindPoint(series, pointIx));\n                dataItems.push(series.data[pointIx]);\n            }\n\n            return {\n                values: values,\n                dataItems: dataItems\n            };\n        },\n\n        _bindField: function(data, field) {\n            var values = [];\n            var count = data.length;\n\n            for (var i = 0; i < count; i++) {\n                var item = data[i];\n                var valueFields = item.valueFields;\n                var value = (void 0);\n\n                if (defined(valueFields[field])) {\n                    value = valueFields[field];\n                } else {\n                    value = item.fields[field];\n                }\n\n                values.push(value);\n            }\n\n            return values;\n        }\n    });\n\n    function setValue(fieldName, target, value) {\n        var parentObj = target;\n        var field = fieldName;\n\n        if (fieldName.indexOf(\".\") > -1) {\n            var parts = fieldName.split(\".\");\n\n            while (parts.length > 1) {\n                field = parts.shift();\n                if (!defined(parentObj[field])) {\n                    parentObj[field] = {};\n                }\n                parentObj = parentObj[field];\n            }\n            field = parts.shift();\n        }\n\n        parentObj[field] = value;\n    }\n\n    var DefaultAggregates = Class.extend({\n        init: function() {\n\n            this._defaults = {};\n        },\n\n        register: function(seriesTypes, aggregates) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < seriesTypes.length; i++) {\n                this$1$1._defaults[seriesTypes[i]] = aggregates;\n            }\n        },\n\n        query: function(seriesType) {\n            return this._defaults[seriesType];\n        }\n    });\n\n    DefaultAggregates.current = new DefaultAggregates();\n\n    var RangeBar = Bar.extend({\n        createLabel: function() {\n            var labels = this.options.labels;\n            var fromOptions = deepExtend({}, labels, labels.from);\n            var toOptions = deepExtend({}, labels, labels.to);\n\n            if (fromOptions.visible) {\n                this.labelFrom = this._createLabel(fromOptions);\n                this.append(this.labelFrom);\n            }\n\n            if (toOptions.visible) {\n                this.labelTo = this._createLabel(toOptions);\n                this.append(this.labelTo);\n            }\n        },\n\n        _createLabel: function(options) {\n            var labelTemplate = getTemplate(options);\n            var pointData = this.pointData();\n\n            var labelText;\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else {\n                labelText = this.formatValue(options.format);\n            }\n\n            return new BarLabel(labelText,\n                deepExtend({\n                    vertical: this.options.vertical\n                },\n                options\n            ), pointData);\n        },\n\n        reflow: function(targetBox) {\n            this.render();\n\n            var ref = this;\n            var labelFrom = ref.labelFrom;\n            var labelTo = ref.labelTo;\n            var value = ref.value;\n\n            this.box = targetBox;\n\n            if (labelFrom) {\n                labelFrom.options.aboveAxis = value.from > value.to;\n                labelFrom.reflow(targetBox);\n            }\n\n            if (labelTo) {\n                labelTo.options.aboveAxis = value.to > value.from;\n                labelTo.reflow(targetBox);\n            }\n\n            if (this.note) {\n                this.note.reflow(targetBox);\n            }\n        }\n    });\n\n    RangeBar.prototype.defaults = deepExtend({}, RangeBar.prototype.defaults, {\n        labels: {\n            format: \"{0} - {1}\"\n        },\n        tooltip: {\n            format: \"{1}\"\n        }\n    });\n\n    var RangeBarChart = BarChart.extend({\n        pointType: function() {\n            return RangeBar;\n        },\n\n        pointValue: function(data) {\n            return data.valueFields;\n        },\n\n        formatPointValue: function(point, format) {\n            if (point.value.from === null && point.value.to === null) {\n                return \"\";\n            }\n\n            return this.chartService.format.auto(format, point.value.from, point.value.to);\n        },\n\n        plotRange: function(point) {\n            if (!point) {\n                return 0;\n            }\n\n            return [ point.value.from, point.value.to ];\n        },\n\n        updateRange: function(value, fields) {\n            var axisName = fields.series.axis;\n            var from = value.from;\n            var to = value.to;\n            var axisRange = this.valueAxisRanges[axisName];\n\n            if (value !== null && isNumber(from) && isNumber(to)) {\n                axisRange = this.valueAxisRanges[axisName] = axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n                axisRange.min = Math.min(axisRange.min, from);\n                axisRange.max = Math.max(axisRange.max, from);\n\n                axisRange.min = Math.min(axisRange.min, to);\n                axisRange.max = Math.max(axisRange.max, to);\n            }\n        },\n\n        aboveAxis: function(point) {\n            var value = point.value;\n            return value.from < value.to;\n        }\n    });\n\n    RangeBarChart.prototype.plotLimits = CategoricalChart.prototype.plotLimits;\n\n    var RangeLinePoint = LinePoint.extend({\n        aliasFor: function() {\n            return this.parent;\n        }\n    });\n\n    var AUTO = 'auto';\n    var DEFAULT_FROM_FORMAT = '{0}';\n    var DEFAULT_TO_FORMAT = '{1}';\n\n    var RangeAreaPoint = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this);\n\n            this.value = value;\n            this.options = options;\n            this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n            this.tooltipTracking = true;\n            this.initLabelsFormat();\n        },\n\n        render: function() {\n            if (this._rendered) {\n                return;\n            }\n\n            this._rendered = true;\n\n            var ref = this.options;\n            var markers = ref.markers;\n            var labels = ref.labels;\n            var value = this.value;\n\n            var fromPoint = this.fromPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n                labels: labels.from,\n                markers: markers.from\n            }));\n\n            var toPoint = this.toPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n                labels: labels.to,\n                markers: markers.to\n            }));\n\n            this.copyFields(fromPoint);\n            this.copyFields(toPoint);\n\n            this.append(fromPoint);\n            this.append(toPoint);\n        },\n\n        reflow: function(targetBox) {\n            this.render();\n\n            var fromBox = targetBox.from;\n            var toBox = targetBox.to;\n\n            this.positionLabels(fromBox, toBox);\n\n            this.fromPoint.reflow(fromBox);\n            this.toPoint.reflow(toBox);\n\n            this.box = this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox());\n        },\n\n        createHighlight: function() {\n            var group = new Group();\n            group.append(this.fromPoint.createHighlight());\n            group.append(this.toPoint.createHighlight());\n\n            return group;\n        },\n\n        highlightVisual: function() {\n            return this.visual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                options: this.options,\n                from: this.fromPoint.highlightVisualArgs(),\n                to: this.toPoint.highlightVisualArgs()\n            };\n        },\n\n        tooltipAnchor: function() {\n            var clipBox = this.owner.pane.clipBox();\n            var showTooltip = !clipBox || clipBox.overlaps(this.box);\n\n            if (showTooltip) {\n                var box = this.box;\n                var center = box.center();\n                var horizontalAlign = LEFT;\n                var x, y, verticalAlign;\n\n                if (this.options.vertical) {\n                    x = center.x;\n                    y = box.y1 - TOOLTIP_OFFSET;\n                    verticalAlign = BOTTOM;\n                } else {\n                    x = box.x2 + TOOLTIP_OFFSET;\n                    y = center.y;\n                    verticalAlign = CENTER;\n                }\n\n                return {\n                    point: new Point(x, y),\n                    align: {\n                        horizontal: horizontalAlign,\n                        vertical: verticalAlign\n                    }\n                };\n            }\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        },\n\n        unclipElements: function() {\n            this.fromPoint.unclipElements();\n            this.toPoint.unclipElements();\n        },\n\n        initLabelsFormat: function() {\n            var labels = this.options.labels;\n            if (!labels.format) {\n                if (!labels.from || !labels.from.format) {\n                    labels.from = $.extend({}, labels.from, {\n                        format: DEFAULT_FROM_FORMAT\n                    });\n                }\n\n                if (!labels.to || !labels.to.format) {\n                    labels.to = $.extend({}, labels.to, {\n                        format: DEFAULT_TO_FORMAT\n                    });\n                }\n            }\n        },\n\n        positionLabels: function(fromBox, toBox) {\n            var ref = this.options;\n            var labels = ref.labels;\n            var vertical = ref.vertical;\n\n            if (labels.position === AUTO) {\n                var fromLabelPosition, toLabelPosition;\n                if (vertical) {\n                    if (toBox.y1 <= fromBox.y1) {\n                        toLabelPosition = ABOVE;\n                        fromLabelPosition = BELOW;\n                    } else {\n                        toLabelPosition = BELOW;\n                        fromLabelPosition = ABOVE;\n                    }\n                } else {\n                    if (toBox.x1 <= fromBox.x1) {\n                        toLabelPosition = LEFT;\n                        fromLabelPosition = RIGHT;\n                    } else {\n                        toLabelPosition = RIGHT;\n                        fromLabelPosition = LEFT;\n                    }\n                }\n\n                if (!labels.from || !labels.from.position) {\n                    this.fromPoint.options.labels.position = fromLabelPosition;\n                }\n\n                if (!labels.to || !labels.to.position) {\n                    this.toPoint.options.labels.position = toLabelPosition;\n                }\n            }\n        },\n\n        copyFields: function(point) {\n            point.dataItem = this.dataItem;\n            point.category = this.category;\n            point.series = this.series;\n            point.color = this.color;\n            point.owner = this.owner;\n        }\n    });\n\n    deepExtend(RangeAreaPoint.prototype, PointEventsMixin);\n    deepExtend(RangeAreaPoint.prototype, NoteMixin);\n\n    RangeAreaPoint.prototype.defaults = {\n        markers: {\n            visible: false,\n            background: WHITE,\n            size: LINE_MARKER_SIZE,\n            type: CIRCLE,\n            border: {\n                width: 2\n            },\n            opacity: 1\n        },\n        labels: {\n            visible: false,\n            margin: getSpacing(3),\n            padding: getSpacing(4),\n            animation: {\n                type: FADEIN,\n                delay: INITIAL_ANIMATION_DURATION\n            },\n            position: AUTO\n        },\n        notes: {\n            label: {}\n        },\n        highlight: {\n            markers: {\n                border: {\n                    color: WHITE,\n                    width: 2\n                }\n            },\n            zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n        },\n        tooltip: {\n            format: '{0} - {1}'\n        }\n    };\n\n    var RangeAreaSegment = AreaSegment.extend({\n        createStrokeSegments: function() {\n            return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()));\n        },\n\n        stackSegments: function() {\n            var fromSegments = this.fromSegments;\n            if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));\n            }\n\n            return fromSegments;\n        },\n\n        createStroke: function(style) {\n            var toPath = new Path(style);\n            var fromPath = new Path(style);\n\n            toPath.segments.push.apply(toPath.segments, this.strokeSegments());\n            fromPath.segments.push.apply(fromPath.segments, this.stackSegments());\n\n            this.visual.append(toPath);\n            this.visual.append(fromPath);\n        },\n\n        hasStackSegment: function() {\n            return true;\n        },\n\n        fromPoints: function() {\n            return this.linePoints.map(function (point) { return point.fromPoint; });\n        },\n\n        toPoints: function() {\n            return this.linePoints.map(function (point) { return point.toPoint; });\n        }\n    });\n\n    var SplineRangeAreaSegment = RangeAreaSegment.extend({\n        createStrokeSegments: function() {\n            return this.createCurveSegments(this.toPoints());\n        },\n\n        stackSegments: function() {\n            var fromSegments = this.fromSegments;\n            if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.createCurveSegments(this.fromPoints().reverse());\n            }\n\n            return fromSegments;\n        },\n\n        createCurveSegments: function(points) {\n            var curveProcessor = new CurveProcessor();\n\n            return curveProcessor.process(this.toGeometryPoints(points));\n        }\n    });\n\n    var StepRangeAreaSegment = RangeAreaSegment.extend({\n        createStrokeSegments: function() {\n            return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()));\n        },\n\n        stackSegments: function() {\n            var fromSegments = this.fromSegments;\n            if (!this.fromSegments) {\n                fromSegments = this.fromSegments = this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));\n                fromSegments.reverse();\n            }\n\n            return fromSegments;\n        }\n    });\n\n    deepExtend(StepRangeAreaSegment.prototype, StepLineMixin);\n\n    var RangeAreaChart = CategoricalChart.extend({\n        render: function() {\n            CategoricalChart.fn.render.call(this);\n\n            this.renderSegments();\n        },\n\n        pointType: function() {\n            return RangeAreaPoint;\n        },\n\n        createPoint: function(data, fields) {\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var value = data.valueFields;\n\n            if (!hasValue(value.from) && !hasValue(value.to)) {\n                if (this.seriesMissingValues(series) === ZERO) {\n                    value = {\n                        from: 0,\n                        to: 0\n                    };\n                } else {\n                    return null;\n                }\n            }\n\n            var pointOptions = this.pointOptions(series, seriesIx);\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            var color = data.fields.color || series.color;\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            }\n\n            var point = new RangeAreaPoint(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = (currentSeries.line || {}).style;\n            var segmentType;\n            if (style === \"smooth\") {\n                segmentType = SplineRangeAreaSegment;\n            } else if (style === \"step\") {\n                segmentType = StepRangeAreaSegment;\n            } else {\n                segmentType = RangeAreaSegment;\n            }\n\n            return new segmentType(linePoints, currentSeries, seriesIx);\n        },\n\n        plotRange: function(point, startValue) {\n            if (!point) {\n                return [ startValue, startValue ];\n            }\n\n            return [ point.value.from, point.value.to ];\n        },\n\n        valueSlot: function(valueAxis, plotRange) {\n            var fromSlot = valueAxis.getSlot(plotRange[0], plotRange[0], !this.options.clip);\n            var toSlot = valueAxis.getSlot(plotRange[1], plotRange[1], !this.options.clip);\n            if (fromSlot && toSlot) {\n                return {\n                    from: fromSlot,\n                    to: toSlot\n                };\n            }\n        },\n\n        pointSlot: function(categorySlot, valueSlot) {\n            var from = valueSlot.from;\n            var to = valueSlot.to;\n            var fromSlot, toSlot;\n\n            if (this.options.invertAxes) {\n                fromSlot = new Box(from.x1, categorySlot.y1, from.x2, categorySlot.y2);\n                toSlot = new Box(to.x1, categorySlot.y1, to.x2, categorySlot.y2);\n            } else {\n                fromSlot = new Box(categorySlot.x1, from.y1, categorySlot.x2, from.y2);\n                toSlot = new Box(categorySlot.x1, to.y1, categorySlot.x2, to.y2);\n            }\n\n            return {\n                from: fromSlot,\n                to: toSlot\n            };\n        },\n\n        addValue: function(data, fields) {\n            var valueFields = data.valueFields;\n            if (!isNumber(valueFields.from)) {\n                valueFields.from = valueFields.to;\n            }\n\n            if (!isNumber(valueFields.to)) {\n                valueFields.to = valueFields.from;\n            }\n\n            CategoricalChart.fn.addValue.call(this, data, fields);\n        },\n\n        updateRange: function(value, fields) {\n            if (value !== null && isNumber(value.from) && isNumber(value.to)) {\n                var axisName = fields.series.axis;\n                var axisRange = this.valueAxisRanges[axisName] = this.valueAxisRanges[axisName] || { min: MAX_VALUE, max: MIN_VALUE };\n                var from = value.from;\n                var to = value.to;\n\n                axisRange.min = Math.min(axisRange.min, from, to);\n                axisRange.max = Math.max(axisRange.max, from, to);\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n\n            return this.chartService.format.auto(format, value.from, value.to);\n        },\n\n        animationPoints: function() {\n            var points = this.points;\n            var result = [];\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                if (point) {\n                    result.push((point.fromPoint || {}).marker);\n                    result.push((point.toPoint || {}).marker);\n                }\n            }\n\n            return result.concat(this._segments);\n        }\n    });\n\n    deepExtend(RangeAreaChart.prototype, LineChartMixin, ClipAnimationMixin);\n\n    var OHLCPoint = Candlestick.extend({\n        reflow: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var value = ref.value;\n            var chart = ref.owner;\n            var valueAxis = chart.seriesValueAxis(options);\n            var oPoints = [];\n            var cPoints = [];\n            var lhPoints = [];\n\n            var lhSlot = valueAxis.getSlot(value.low, value.high);\n            var oSlot = valueAxis.getSlot(value.open, value.open);\n            var cSlot = valueAxis.getSlot(value.close, value.close);\n\n            oSlot.x1 = cSlot.x1 = lhSlot.x1 = box.x1;\n            oSlot.x2 = cSlot.x2 = lhSlot.x2 = box.x2;\n\n            var mid = lhSlot.center().x;\n\n            oPoints.push([ oSlot.x1, oSlot.y1 ]);\n            oPoints.push([ mid, oSlot.y1 ]);\n            cPoints.push([ mid, cSlot.y1 ]);\n            cPoints.push([ cSlot.x2, cSlot.y1 ]);\n            lhPoints.push([ mid, lhSlot.y1 ]);\n            lhPoints.push([ mid, lhSlot.y2 ]);\n\n            this.lines = [\n                oPoints, cPoints, lhPoints\n            ];\n\n            this.box = lhSlot.clone().wrap(oSlot.clone().wrap(cSlot));\n\n            this.reflowNote();\n        },\n\n        createBody: function() {}\n    });\n\n    var OHLCChart = CandlestickChart.extend({\n        pointType: function() {\n            return OHLCPoint;\n        }\n    });\n\n    var WaterfallSegment = ChartElement.extend({\n        init: function(from, to, series) {\n            ChartElement.fn.init.call(this);\n\n            this.from = from;\n            this.to = to;\n            this.series = series;\n        },\n\n        linePoints: function() {\n            var from = this.from;\n            var ref = this;\n            var fromBox = ref.from.box;\n            var toBox = ref.to.box;\n            var points = [];\n\n            if (from.isVertical) {\n                var y = from.aboveAxis ? fromBox.y1 : fromBox.y2;\n                points.push(\n                    [ fromBox.x1, y ],\n                    [ toBox.x2, y ]\n                );\n            } else {\n                var x = from.aboveAxis ? fromBox.x2 : fromBox.x1;\n                points.push(\n                    [ x, fromBox.y1 ],\n                    [ x, toBox.y2 ]\n                );\n            }\n\n            return points;\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var line = this.series.line || {};\n\n            var path = Path.fromPoints(this.linePoints(), {\n                stroke: {\n                    color: line.color,\n                    width: line.width,\n                    opacity: line.opacity,\n                    dashType: line.dashType\n                }\n            });\n\n            alignPathToPixel(path);\n            this.visual.append(path);\n        }\n    });\n\n    setDefaultOptions(WaterfallSegment, {\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        }\n    });\n\n    var WaterfallChart = BarChart.extend({\n        render: function() {\n            BarChart.fn.render.call(this);\n            this.createSegments();\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n            var totalCategories = categoriesCount(series);\n            var isVertical = !this.options.invertAxes;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var total = 0;\n                var runningTotal = 0;\n\n                for (var categoryIx = 0; categoryIx < totalCategories; categoryIx++) {\n                    var data = SeriesBinder.current.bindPoint(currentSeries, categoryIx);\n                    var value = data.valueFields.value;\n                    var summary = data.fields.summary;\n                    var from = total;\n                    var to = (void 0);\n\n                    if (summary) {\n                        if (summary.toLowerCase() === \"total\") {\n                            data.valueFields.value = total;\n                            from = 0;\n                            to = total;\n                        } else {\n                            data.valueFields.value = runningTotal;\n                            to = from - runningTotal;\n                            runningTotal = 0;\n                        }\n                    } else if (isNumber(value)) {\n                        runningTotal += value;\n                        total += value;\n                        to = total;\n                    }\n\n                    callback(data, {\n                        category: this$1$1.categoryAxis.categoryAt(categoryIx),\n                        categoryIx: categoryIx,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        total: total,\n                        runningTotal: runningTotal,\n                        from: from,\n                        to: to,\n                        isVertical: isVertical\n                    });\n                }\n            }\n        },\n\n        updateRange: function(value, fields) {\n            BarChart.fn.updateRange.call(this, { value: fields.to }, fields);\n        },\n\n        aboveAxis: function(point) {\n            return point.value >= 0;\n        },\n\n        plotRange: function(point) {\n            return [ point.from, point.to ];\n        },\n\n        createSegments: function() {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n            var seriesPoints = this.seriesPoints;\n            var segments = this.segments = [];\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var points = seriesPoints[seriesIx];\n\n                if (points) {\n                    var prevPoint = (void 0);\n                    for (var pointIx = 0; pointIx < points.length; pointIx++) {\n                        var point = points[pointIx];\n\n                        if (point && prevPoint) {\n                            var segment = new WaterfallSegment(prevPoint, point, currentSeries);\n                            segments.push(segment);\n                            this$1$1.append(segment);\n                        }\n\n                        prevPoint = point;\n                    }\n                }\n            }\n        }\n    });\n\n    function trendlineFactory(registry, type, context) {\n        var impl = registry[String(type)];\n        if (impl) {\n            return impl(context);\n        }\n\n        return null;\n    }\n\n    function calculateSlope(sourceValues, valueGetter) {\n        var x = 0;\n        var y = 0;\n        var x2 = 0;\n        var xy = 0;\n        var count = 0;\n        var slope, intercept;\n        var xMin = Number.MAX_VALUE;\n        var xMax = Number.MIN_VALUE;\n\n        for (var i = 0; i < sourceValues.length; i++) {\n            var value = sourceValues[i];\n            var ref = valueGetter(value);\n            var xValue = ref.xValue;\n            var yValue = ref.yValue;\n\n            if (isFinite(xValue) && xValue !== null && isFinite(yValue) && yValue !== null) {\n                xMin = Math.min(xValue, xMin);\n                xMax = Math.max(xValue, xMax);\n\n                count++;\n                x += xValue;\n                y += yValue;\n                x2 += Math.pow(xValue, 2);\n                xy += xValue * yValue;\n            }\n        }\n\n        if (count > 0) {\n            slope = (count * xy - x * y) / (count * x2 - Math.pow(x, 2));\n            intercept = (y - slope * x) / count;\n        }\n\n        return { slope: slope, intercept: intercept, count: count, xMin: xMin, xMax: xMax };\n    }\n\n    function linearTrendline(context) {\n        var options = context.options;\n        var categoryAxis = context.categoryAxis;\n        var seriesValues = context.seriesValues;\n\n        var ref = getData({ seriesValues: seriesValues, categoryAxis: categoryAxis, options: options });\n        var data = ref.data;\n        if (data) {\n            return $.extend({}, options,\n\n                {type: 'line',\n                data: data,\n                categoryField: 'category',\n                field: 'value'});\n        }\n\n        return null;\n    }\n\n    var valueGetter = function (fieldName) { return function (ref) {\n            var categoryIx = ref.categoryIx;\n            var valueFields = ref.valueFields;\n\n            return ({ xValue: categoryIx + 1, yValue: valueFields[fieldName] });\n     }    };\n\n    function getData(ref) {\n        var seriesValues = ref.seriesValues;\n        var categoryAxis = ref.categoryAxis;\n        var options = ref.options;\n\n        var ref$1 = calculateSlope(seriesValues(), valueGetter(options.field));\n        var slope = ref$1.slope;\n        var intercept = ref$1.intercept;\n        var count = ref$1.count;\n\n        if (count > 0) {\n            var data = [];\n            var totalRange = categoryAxis.totalRangeIndices();\n            var currentRange = categoryAxis.currentRangeIndices();\n            var range = {\n                min: Math.floor(Math.max(currentRange.min - 1, totalRange.min)),\n                max: Math.ceil(Math.min(currentRange.max + 2, totalRange.max))\n            };\n\n            for (var i = range.min; i < range.max; i++) {\n                data[i] = {\n                    category: categoryAxis.categoryAt(i, true),\n                    value: slope * (i + 1) + intercept\n                };\n            }\n\n            return { data: data };\n        }\n\n        return { data: null };\n    }\n\n    function calculateMovingAverage(sourceValues, valueGetter, period) {\n        var averagePoints = [];\n        var values = [];\n        var start = Math.max(MIN_MOVING_AVERAGE_PERIOD, period) - 1;\n\n        var end = 0;\n        var sum = 0;\n\n        for (var i = 0; i < sourceValues.length; i++) {\n            var value = sourceValues[i];\n            var ref = valueGetter(value);\n            var xValue = ref.xValue;\n            var yValue = ref.yValue;\n\n            if (isFinite(yValue) && yValue !== null) {\n                values.push(yValue);\n                sum += yValue;\n                end = Math.max(i, end);\n            } else {\n                values.push(null);\n            }\n\n            if (i >= start) {\n                var count = values.filter(function (value) { return value !== null; }).length;\n                var lastValue = values.shift() || 0;\n\n                if (count > 0) {\n                    var average = sum / count;\n                    averagePoints.push([xValue, average]);\n\n                    sum -= lastValue;\n                    continue;\n                }\n            }\n\n            averagePoints.push([xValue, null]);\n        }\n\n        return averagePoints.slice(0, end + 1);\n    }\n\n    function movingAverageTrendline(context) {\n        var options = context.options;\n\n        var ref = getData$1(context);\n        var data = ref.data;\n        if (data) {\n            return $.extend({}, options,\n\n                {type: 'line',\n                data: data,\n                categoryField: 'category',\n                field: 'value'});\n        }\n\n        return null;\n    }\n\n    var valueGetter$1 = function (fieldName) { return function (ref) {\n            var categoryIx = ref.categoryIx;\n            var valueFields = ref.valueFields;\n\n            return ({ xValue: categoryIx, yValue: valueFields[fieldName] });\n     }    };\n\n    function calculatePoints(ref) {\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var seriesValues = ref.seriesValues;\n\n        var period = (options.trendline || {}).period || MIN_MOVING_AVERAGE_PERIOD;\n        var totalRange = categoryAxis.totalRangeIndices();\n        var currentRange = categoryAxis.currentRangeIndices();\n        var range = {\n            min: Math.floor(Math.max(currentRange.min - period, totalRange.min)),\n            max: Math.ceil(Math.min(currentRange.max + period + 2, totalRange.max))\n        };\n\n        return calculateMovingAverage(seriesValues(range), valueGetter$1(options.field), period);\n    }\n\n    function getData$1(context) {\n        var categoryAxis = context.categoryAxis;\n        var points = calculatePoints(context);\n        var data = [];\n        points.forEach(function (ref) {\n            var categoryIx = ref[0];\n            var value = ref[1];\n\n            data[categoryIx] = {\n                category: categoryAxis.categoryAt(categoryIx, true),\n                value: value\n            };\n        });\n\n        if (data.length > 0) {\n            return { data: data };\n        }\n\n        return { data: null };\n    }\n\n    var registry = {};\n    registry[TRENDLINE_LINEAR] = linearTrendline;\n    registry[TRENDLINE_MOVING_AVERAGE] = movingAverageTrendline;\n\n    var AREA_SERIES = [ AREA, VERTICAL_AREA, RANGE_AREA, VERTICAL_RANGE_AREA ];\n    var OUT_OF_RANGE_SERIES = [ LINE, VERTICAL_LINE ].concat(AREA_SERIES);\n\n    var CategoricalPlotArea = PlotAreaBase.extend({\n        initFields: function(series) {\n            var this$1$1 = this;\n\n            this.namedCategoryAxes = {};\n            this.namedValueAxes = {};\n            this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n            this._seriesPointsCache = {};\n            this._currentPointsCache = {};\n\n            if (series.length > 0) {\n                this.invertAxes = inArray(\n                    series[0].type, [ BAR, BULLET, VERTICAL_LINE, VERTICAL_AREA, VERTICAL_RANGE_AREA,\n                                     RANGE_BAR, HORIZONTAL_WATERFALL, VERTICAL_BOX_PLOT ]\n                );\n\n                for (var i = 0; i < series.length; i++) {\n                    var stack = series[i].stack;\n                    if (stack && stack.type === \"100%\") {\n                        this$1$1.stack100 = true;\n                        break;\n                    }\n                }\n            }\n        },\n\n        render: function(panes) {\n            if (panes === void 0) { panes = this.panes; }\n\n            this.series = [].concat( this.originalSeries );\n            this.createCategoryAxes(panes);\n\n            this.aggregateCategories(panes);\n            this.createTrendlineSeries(panes);\n\n            this.createCategoryAxesLabels(panes);\n            this.createCharts(panes);\n            this.createValueAxes(panes);\n        },\n\n        removeAxis: function(axis) {\n            var axisName = axis.options.name;\n\n            PlotAreaBase.fn.removeAxis.call(this, axis);\n\n            if (axis instanceof CategoryAxis) {\n                delete this.namedCategoryAxes[axisName];\n            } else {\n                this.valueAxisRangeTracker.reset(axisName);\n                delete this.namedValueAxes[axisName];\n            }\n\n            if (axis === this.categoryAxis) {\n                delete this.categoryAxis;\n            }\n\n            if (axis === this.valueAxis) {\n                delete this.valueAxis;\n            }\n        },\n\n        trendlineFactory: function(options, series) {\n            var categoryAxis = this.seriesCategoryAxis(options);\n            var seriesValues = this.seriesValues.bind(this, series.index);\n\n            var trendline = trendlineFactory(registry, options.type, {\n                options: options,\n                categoryAxis: categoryAxis,\n                seriesValues: seriesValues\n            });\n\n            if (trendline) {\n                // Inherit settings\n                trendline.categoryAxis = series.categoryAxis;\n                trendline.valueAxis = series.valueAxis;\n\n                return this.filterSeries(trendline, categoryAxis);\n            }\n\n            return trendline;\n        },\n\n        trendlineAggregateForecast: function() {\n            return this.series\n                .map(function (series) { return (series.trendline || {}).forecast; })\n                .filter(function (forecast) { return forecast !== undefined; })\n                .reduce(function (result, forecast) { return ({\n                    before: Math.max(result.before, forecast.before || 0),\n                    after: Math.max(result.after, forecast.after || 0)\n                }); }, { before: 0, after: 0 });\n        },\n\n        seriesValues: function(seriesIx, range) {\n            var this$1$1 = this;\n\n            var result = [];\n\n            var series = this.srcSeries[seriesIx];\n            var categoryAxis = this.seriesCategoryAxis(series);\n            var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n            if (dateAxis) {\n                this._seriesPointsCache = {};\n                this._currentPointsCache = {};\n                categoryAxis.options.dataItems = [];\n                series = this.aggregateSeries(series, categoryAxis, categoryAxis.totalRangeIndices());\n            }\n\n            var min = range ? range.min : 0;\n            var max = range ? range.max : series.data.length;\n            for (var categoryIx = min; categoryIx < max; categoryIx++) {\n                var data = this$1$1.bindPoint(series, categoryIx);\n                result.push({ categoryIx: categoryIx, category: data.fields.category, valueFields: data.valueFields });\n            }\n\n            return result;\n        },\n\n        createCharts: function(panes) {\n            var this$1$1 = this;\n\n            var seriesByPane = this.groupSeriesByPane();\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1$1.addToLegend(paneSeries);\n\n                var visibleSeries = this$1$1.filterVisibleSeries(paneSeries);\n                if (!visibleSeries) {\n                    continue;\n                }\n\n                var groups = this$1$1.groupSeriesByCategoryAxis(visibleSeries);\n                for (var groupIx = 0; groupIx < groups.length; groupIx++) {\n                    this$1$1.createChartGroup(groups[groupIx], pane);\n                }\n            }\n        },\n\n        createChartGroup: function(series, pane) {\n            this.createAreaChart(\n                filterSeriesByType(series, [ AREA, VERTICAL_AREA ]), pane\n            );\n\n            this.createRangeAreaChart(\n                filterSeriesByType(series, [ RANGE_AREA, VERTICAL_RANGE_AREA ]), pane\n            );\n\n            this.createBarChart(\n                filterSeriesByType(series, [ COLUMN, BAR ]), pane\n            );\n\n            this.createRangeBarChart(\n                filterSeriesByType(series, [ RANGE_COLUMN, RANGE_BAR ]), pane\n            );\n\n            this.createBulletChart(\n                filterSeriesByType(series, [ BULLET, VERTICAL_BULLET ]), pane\n            );\n\n            this.createCandlestickChart(\n                filterSeriesByType(series, CANDLESTICK), pane\n            );\n\n            this.createBoxPlotChart(\n                filterSeriesByType(series, [ BOX_PLOT, VERTICAL_BOX_PLOT ]), pane\n            );\n\n            this.createOHLCChart(\n                filterSeriesByType(series, OHLC), pane\n            );\n\n            this.createWaterfallChart(\n                filterSeriesByType(series, [ WATERFALL, HORIZONTAL_WATERFALL ]), pane\n            );\n\n            this.createLineChart(\n                filterSeriesByType(series, [ LINE, VERTICAL_LINE ]), pane\n            );\n        },\n\n        aggregateCategories: function(panes) {\n            var this$1$1 = this;\n\n            var series = [].concat( this.series );\n            var processedSeries = [];\n            this._currentPointsCache = {};\n            this._seriesPointsCache = this._seriesPointsCache || {};\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n\n                if (!this$1$1.isTrendline(currentSeries)) {\n                    var categoryAxis = this$1$1.seriesCategoryAxis(currentSeries);\n                    var axisPane = this$1$1.findPane(categoryAxis.options.pane);\n                    var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n\n                    if ((dateAxis || currentSeries.categoryField) && inArray(axisPane, panes)) {\n                        currentSeries = this$1$1.aggregateSeries(currentSeries, categoryAxis, categoryAxis.currentRangeIndices());\n                    } else {\n                        currentSeries = this$1$1.filterSeries(currentSeries, categoryAxis);\n                    }\n                }\n\n                processedSeries.push(currentSeries);\n            }\n\n            this._seriesPointsCache = this._currentPointsCache;\n            this._currentPointsCache = null;\n\n            this.srcSeries = series;\n            this.series = processedSeries;\n        },\n\n        filterSeries: function(series, categoryAxis) {\n            var dataLength = (series.data || {}).length;\n            categoryAxis._seriesMax = Math.max(categoryAxis._seriesMax || 0, dataLength);\n\n            if (!(defined(categoryAxis.options.min) || defined(categoryAxis.options.max))) {\n                return series;\n            }\n\n            var range = categoryAxis.currentRangeIndices();\n            var outOfRangePoints = inArray(series.type, OUT_OF_RANGE_SERIES);\n            var currentSeries = deepExtend({}, series);\n\n            currentSeries.data = (currentSeries.data || []).slice(range.min, range.max + 1);\n\n            if (outOfRangePoints) {\n                createOutOfRangePoints(currentSeries, range, dataLength, function (idx) { return ({\n                    item: series.data[idx],\n                    category: categoryAxis.categoryAt(idx, true),\n                    categoryIx: idx - range.min\n                }); }, function (idx) { return defined(series.data[idx]); });\n            }\n\n            return currentSeries;\n        },\n\n        clearSeriesPointsCache: function() {\n            this._seriesPointsCache = {};\n        },\n\n        seriesSourcePoints: function(series, categoryAxis) {\n            var this$1$1 = this;\n\n            var key = (series.index) + \";\" + (categoryAxis.categoriesHash());\n            if (this._seriesPointsCache && this._seriesPointsCache[key]) {\n                this._currentPointsCache[key] = this._seriesPointsCache[key];\n                return this._seriesPointsCache[key];\n            }\n\n            var axisOptions = categoryAxis.options;\n            var srcCategories = axisOptions.srcCategories;\n            var dateAxis = equalsIgnoreCase(axisOptions.type, DATE);\n            var srcData = series.data;\n            var getFn = dateAxis ? getDateField : getField;\n            var result = [];\n            if (!dateAxis) {\n                categoryAxis.mapCategories(); //fixes major performance issue caused by searching for the index for large data\n            }\n\n            for (var idx = 0; idx < srcData.length; idx++) {\n                var category = (void 0);\n                if (series.categoryField) {\n                    category = getFn(series.categoryField, srcData[idx], this$1$1.chartService.intl);\n                } else {\n                    category = srcCategories[idx];\n                }\n\n                if (defined(category) && category !== null) {\n                    var categoryIx = categoryAxis.totalIndex(category);\n                    result[categoryIx] = result[categoryIx] || { items: [], category: category };\n                    result[categoryIx].items.push(idx);\n                }\n            }\n\n            this._currentPointsCache[key] = result;\n\n            return result;\n        },\n\n        aggregateSeries: function(series, categoryAxis, range) {\n            var srcData = series.data;\n            if (!srcData.length) {\n                return series;\n            }\n\n            var srcPoints = this.seriesSourcePoints(series, categoryAxis);\n            var result = deepExtend({}, series);\n            var aggregator = new SeriesAggregator(deepExtend({}, series), SeriesBinder.current, DefaultAggregates.current);\n            var data = result.data = [];\n\n            var dataItems = categoryAxis.options.dataItems || [];\n\n            var categoryItem = function (idx) {\n                var categoryIdx = idx - range.min;\n                var point = srcPoints[idx];\n                if (!point) {\n                    point = srcPoints[idx] = {};\n                }\n\n                point.categoryIx = categoryIdx;\n\n                if (!point.item) {\n                    var category = categoryAxis.categoryAt(idx, true);\n                    point.category = category;\n                    point.item = aggregator.aggregatePoints(point.items, category);\n                }\n\n                return point;\n            };\n\n            for (var idx = range.min; idx <= range.max; idx++) {\n                var point = categoryItem(idx);\n                data[point.categoryIx] = point.item;\n\n                if (point.items && point.items.length) {\n                    dataItems[point.categoryIx] = point.item;\n                }\n            }\n\n            if (inArray(result.type, OUT_OF_RANGE_SERIES)) {\n                createOutOfRangePoints(result, range, categoryAxis.totalCount(), categoryItem, function (idx) { return srcPoints[idx]; });\n            }\n\n            categoryAxis.options.dataItems = dataItems;\n\n            return result;\n        },\n\n        appendChart: function(chart, pane) {\n            var series = chart.options.series;\n            var categoryAxis = this.seriesCategoryAxis(series[0]);\n            var categories = categoryAxis.options.categories;\n            var categoriesToAdd = Math.max(0, categoriesCount(series) - categories.length);\n\n            if (categoriesToAdd > 0) {//consider setting an option to axis instead of adding fake categories\n                categories = categoryAxis.options.categories = categoryAxis.options.categories.slice(0);\n                while (categoriesToAdd--) {\n                    categories.push(\"\");\n                }\n            }\n\n            this.valueAxisRangeTracker.update(chart.valueAxisRanges);\n\n            PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        },\n\n        seriesPaneName: function(series) {\n            var options = this.options;\n            var axisName = series.axis;\n            var axisOptions = [].concat(options.valueAxis);\n            var axis = grep(axisOptions, function(a) { return a.name === axisName; })[0];\n            var panes = options.panes || [ {} ];\n            var defaultPaneName = (panes[0] || {}).name || \"default\";\n            var paneName = (axis || {}).pane || defaultPaneName;\n\n            return paneName;\n        },\n\n        seriesCategoryAxis: function(series) {\n            var axisName = series.categoryAxis;\n            var axis = axisName ? this.namedCategoryAxes[axisName] : this.categoryAxis;\n\n            if (!axis) {\n                throw new Error(\"Unable to locate category axis with name \" + axisName);\n            }\n\n            return axis;\n        },\n\n        stackableChartOptions: function(firstSeries, pane) {\n            var stack = firstSeries.stack;\n            var isStacked100 = stack && stack.type === \"100%\";\n            var clip = pane.options.clip;\n\n            return {\n                isStacked: stack,\n                isStacked100: isStacked100,\n                clip: clip\n            };\n        },\n\n        groupSeriesByCategoryAxis: function(series) {\n            var categoryAxes = [];\n            var unique = {};\n            for (var idx = 0; idx < series.length; idx++) {\n                var name = series[idx].categoryAxis || \"$$default$$\";\n                if (!unique.hasOwnProperty(name)) {\n                    unique[name] = true;\n                    categoryAxes.push(name);\n                }\n            }\n\n            var groups = [];\n            for (var axisIx = 0; axisIx < categoryAxes.length; axisIx++) {\n                var axis = categoryAxes[axisIx];\n                var axisSeries = groupSeries(series, axis, axisIx);\n                if (axisSeries.length === 0) {\n                    continue;\n                }\n\n                groups.push(axisSeries);\n            }\n\n            return groups;\n        },\n\n        createBarChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var barChart = new BarChart(this, $.extend({\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n            }, this.stackableChartOptions(firstSeries, pane)));\n\n            this.appendChart(barChart, pane);\n        },\n\n        createRangeBarChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var rangeColumnChart = new RangeBarChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n            });\n\n            this.appendChart(rangeColumnChart, pane);\n        },\n\n        createBulletChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var bulletChart = new BulletChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(bulletChart, pane);\n        },\n\n        createLineChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var lineChart = new LineChart(this, $.extend({\n                invertAxes: this.invertAxes,\n                series: series\n            }, this.stackableChartOptions(firstSeries, pane)));\n\n            this.appendChart(lineChart, pane);\n        },\n\n        createAreaChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var areaChart = new AreaChart(this, $.extend({\n                invertAxes: this.invertAxes,\n                series: series\n            }, this.stackableChartOptions(firstSeries, pane)));\n\n            this.appendChart(areaChart, pane);\n        },\n\n        createRangeAreaChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var rangeAreaChart = new RangeAreaChart(this, {\n                invertAxes: this.invertAxes,\n                series: series,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(rangeAreaChart, pane);\n        },\n\n        createOHLCChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var chart = new OHLCChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(chart, pane);\n        },\n\n        createCandlestickChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var chart = new CandlestickChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(chart, pane);\n        },\n\n        createBoxPlotChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var chart = new BoxPlotChart(this, {\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                series: series,\n                spacing: firstSeries.spacing,\n                clip: pane.options.clip\n            });\n\n            this.appendChart(chart, pane);\n        },\n\n        createWaterfallChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var waterfallChart = new WaterfallChart(this, {\n                series: series,\n                invertAxes: this.invertAxes,\n                gap: firstSeries.gap,\n                spacing: firstSeries.spacing\n            });\n\n            this.appendChart(waterfallChart, pane);\n        },\n\n        axisRequiresRounding: function(categoryAxisName, categoryAxisIndex) {\n            var this$1$1 = this;\n\n            var centeredSeries = filterSeriesByType(this.series, EQUALLY_SPACED_SERIES);\n\n            for (var seriesIx = 0; seriesIx < this.series.length; seriesIx++) {\n                var currentSeries = this$1$1.series[seriesIx];\n                if (inArray(currentSeries.type, AREA_SERIES)) {\n                    var line = currentSeries.line;\n                    if (line && line.style === STEP) {\n                        centeredSeries.push(currentSeries);\n                    }\n                }\n            }\n\n            for (var seriesIx$1 = 0; seriesIx$1 < centeredSeries.length; seriesIx$1++) {\n                var seriesAxis = centeredSeries[seriesIx$1].categoryAxis || \"\";\n                if (seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) {\n                    return true;\n                }\n            }\n        },\n\n        aggregatedAxis: function(categoryAxisName, categoryAxisIndex) {\n            var series = this.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var seriesAxis = series[seriesIx].categoryAxis || \"\";\n                if ((seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) && series[seriesIx].categoryField) {\n                    return true;\n                }\n            }\n        },\n\n        createCategoryAxesLabels: function() {\n            var axes = this.axes;\n            for (var i = 0; i < axes.length; i++) {\n                if (axes[i] instanceof CategoryAxis) {\n                    axes[i].createLabels();\n                }\n            }\n        },\n\n        createCategoryAxes: function(panes) {\n            var this$1$1 = this;\n\n            var invertAxes = this.invertAxes;\n            var definitions = [].concat(this.options.categoryAxis);\n            var axes = [];\n\n            for (var i = 0; i < definitions.length; i++) {\n                var axisOptions = definitions[i];\n                var axisPane = this$1$1.findPane(axisOptions.pane);\n\n                if (inArray(axisPane, panes)) {\n                    var name = axisOptions.name;\n                    var categories = axisOptions.categories; if (categories === void 0) { categories = []; }\n                    axisOptions = deepExtend({\n                        vertical: invertAxes,\n                        reverse: !invertAxes && this$1$1.chartService.rtl,\n                        axisCrossingValue: invertAxes ? MAX_VALUE : 0\n                    }, axisOptions);\n\n                    if (!defined(axisOptions.justified)) {\n                        axisOptions.justified = this$1$1.isJustified();\n                    }\n\n                    if (this$1$1.axisRequiresRounding(name, i)) {\n                        axisOptions.justified = false;\n                    }\n\n                    var categoryAxis = (void 0);\n\n                    if (isDateAxis(axisOptions, categories[0])) {\n                        axisOptions._forecast = this$1$1.trendlineAggregateForecast();\n                        categoryAxis = new dataviz.DateCategoryAxis(axisOptions, this$1$1.chartService);\n                    } else {\n                        categoryAxis = new CategoryAxis(axisOptions, this$1$1.chartService);\n                    }\n\n                    definitions[i].categories = categoryAxis.options.srcCategories;\n\n                    if (name) {\n                        if (this$1$1.namedCategoryAxes[name]) {\n                            throw new Error((\"Category axis with name \" + name + \" is already defined\"));\n                        }\n                        this$1$1.namedCategoryAxes[name] = categoryAxis;\n                    }\n\n                    categoryAxis.axisIndex = i;\n                    axes.push(categoryAxis);\n                    this$1$1.appendAxis(categoryAxis);\n                }\n            }\n\n            var primaryAxis = this.categoryAxis || axes[0];\n            this.categoryAxis = primaryAxis;\n\n            if (invertAxes) {\n                this.axisY = primaryAxis;\n            } else {\n                this.axisX = primaryAxis;\n            }\n        },\n\n        isJustified: function() {\n            var series = this.series;\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                if (!inArray(currentSeries.type, AREA_SERIES)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        createValueAxes: function(panes) {\n            var this$1$1 = this;\n\n            var tracker = this.valueAxisRangeTracker;\n            var defaultRange = tracker.query();\n            var definitions = [].concat(this.options.valueAxis);\n            var invertAxes = this.invertAxes;\n            var baseOptions = { vertical: !invertAxes, reverse: invertAxes && this.chartService.rtl };\n            var axes = [];\n\n            if (this.stack100) {\n                baseOptions.roundToMajorUnit = false;\n                baseOptions.labels = { format: \"P0\" };\n            }\n\n            for (var i = 0; i < definitions.length; i++) {\n                var axisOptions = definitions[i];\n                var axisPane = this$1$1.findPane(axisOptions.pane);\n\n                if (inArray(axisPane, panes)) {\n                    var name = axisOptions.name;\n                    var defaultAxisRange = equalsIgnoreCase(axisOptions.type, LOGARITHMIC) ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n                    var range = tracker.query(name) || defaultRange || defaultAxisRange;\n\n                    if (i === 0 && range && defaultRange) {\n                        range.min = Math.min(range.min, defaultRange.min);\n                        range.max = Math.max(range.max, defaultRange.max);\n                    }\n\n                    var axisType = (void 0);\n                    if (equalsIgnoreCase(axisOptions.type, LOGARITHMIC)) {\n                        axisType = dataviz.LogarithmicAxis;\n                    } else {\n                        axisType = dataviz.NumericAxis;\n                    }\n\n                    var valueAxis = new axisType(range.min, range.max,\n                        deepExtend({}, baseOptions, axisOptions),\n                        this$1$1.chartService\n                    );\n\n                    if (name) {\n                        if (this$1$1.namedValueAxes[name]) {\n                            throw new Error((\"Value axis with name \" + name + \" is already defined\"));\n                        }\n                        this$1$1.namedValueAxes[name] = valueAxis;\n                    }\n                    valueAxis.axisIndex = i;\n\n                    axes.push(valueAxis);\n                    this$1$1.appendAxis(valueAxis);\n                }\n            }\n\n            var primaryAxis = this.valueAxis || axes[0];\n            this.valueAxis = primaryAxis;\n\n            if (invertAxes) {\n                this.axisX = primaryAxis;\n            } else {\n                this.axisY = primaryAxis;\n            }\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var pane = this.pointPane(point);\n            var categories = [];\n            var values = [];\n\n            if (!pane) {\n                return;\n            }\n\n            var allAxes = pane.axes;\n            for (var i = 0; i < allAxes.length; i++) {\n                var axis = allAxes[i];\n                if (axis.getValue) {\n                    appendIfNotNull(values, axis.getValue(point));\n                } else {\n                    appendIfNotNull(categories, axis.getCategory(point));\n                }\n            }\n\n            if (categories.length === 0) {\n                appendIfNotNull(categories, this.categoryAxis.getCategory(point));\n            }\n\n            if (categories.length > 0 && values.length > 0) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    originalEvent: e,\n                    category: singleItemOrArray(categories),\n                    value: singleItemOrArray(values)\n                });\n            }\n        },\n\n        pointPane: function(point) {\n            var panes = this.panes;\n\n            for (var i = 0; i < panes.length; i++) {\n                var currentPane = panes[i];\n                if (currentPane.contentBox.containsPoint(point)) {\n                    return currentPane;\n                }\n            }\n        },\n\n        updateAxisOptions: function(axis, options) {\n            updateAxisOptions(this.options, axis, options);\n            updateAxisOptions(this.originalOptions, axis, options);\n        }\n    });\n\n    function updateAxisOptions(targetOptions, axis, options) {\n        var axesOptions = axis instanceof CategoryAxis ? [].concat(targetOptions.categoryAxis) : [].concat(targetOptions.valueAxis);\n        deepExtend(axesOptions[axis.axisIndex], options);\n    }\n\n    function groupSeries(series, axis, axisIx) {\n        return grep(series, function(s) {\n            return (axisIx === 0 && !s.categoryAxis) || (s.categoryAxis === axis);\n        });\n    }\n\n    setDefaultOptions(CategoricalPlotArea, {\n        categoryAxis: {},\n        valueAxis: {}\n    });\n\n    deepExtend(CategoricalPlotArea.prototype, PlotAreaEventsMixin);\n\n    var Highlight = Class.extend({\n        init: function() {\n\n            this._points = [];\n        },\n\n        destroy: function() {\n            this._points = [];\n        },\n\n        show: function(points, opacity) {\n            var this$1$1 = this;\n\n            var arrayPoints = [].concat(points);\n            this.hide();\n\n            for (var i = 0; i < arrayPoints.length; i++) {\n                var point = arrayPoints[i];\n                if (point && point.toggleHighlight && point.hasHighlight()) {\n                    this$1$1.togglePointHighlight(point, true, opacity);\n                    this$1$1._points.push(point);\n                }\n            }\n        },\n\n        togglePointHighlight: function(point, show, opacity) {\n            var toggleHandler = (point.options.highlight || {}).toggle;\n            if (toggleHandler) {\n                var eventArgs = {\n                    category: point.category,\n                    series: point.series,\n                    dataItem: point.dataItem,\n                    value: point.value,\n                    stackValue: point.stackValue,\n                    preventDefault: preventDefault,\n                    visual: point.highlightVisual(),\n                    show: show\n                };\n                toggleHandler(eventArgs);\n                if (!eventArgs._defaultPrevented) {\n                    point.toggleHighlight(show, opacity);\n                }\n            } else {\n                point.toggleHighlight(show, opacity);\n            }\n        },\n\n        hide: function() {\n            var this$1$1 = this;\n\n            var points = this._points;\n            while (points.length) {\n                this$1$1.togglePointHighlight(points.pop(), false);\n            }\n        },\n\n        isHighlighted: function(element) {\n            var points = this._points;\n\n            for (var i = 0; i < points.length; i++) {\n                var point = points[i];\n                if (element === point) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    });\n\n    function preventDefault() {\n        this._defaultPrevented = true;\n    }\n\n    function acceptKey(e, mouseKey) {\n        var key = (mouseKey || \"\").toLowerCase();\n        var event = e.event;\n        var accept = (key === \"none\" && !(event.ctrlKey || event.shiftKey || event.altKey)) || event[key + \"Key\"];\n\n        return accept;\n    }\n\n    function toChartAxisRanges(axisRanges) {\n        var ranges = {};\n        for (var idx = 0; idx < axisRanges.length; idx++) {\n            var axisRange = axisRanges[idx];\n            if (axisRange.axis.options.name) {\n                ranges[axisRange.axis.options.name] = {\n                    min: axisRange.range.min,\n                    max: axisRange.range.max\n                };\n            }\n        }\n        return ranges;\n    }\n\n    var Pannable = Class.extend({\n        init: function(plotArea, options) {\n\n            this.plotArea = plotArea;\n            this.options = deepExtend({}, this.options, options);\n        },\n\n        start: function(e) {\n            this._active = acceptKey(e, this.options.key);\n            return this._active;\n        },\n\n        move: function(e) {\n            if (this._active) {\n                var axisRanges = this.axisRanges = this._panAxes(e, X).concat(this._panAxes(e, Y));\n                if (axisRanges.length) {\n                    this.axisRanges = axisRanges;\n                    return toChartAxisRanges(axisRanges);\n                }\n            }\n        },\n\n        end: function() {\n            var active = this._active;\n            this._active = false;\n\n            return active;\n        },\n\n        pan: function() {\n            var ref = this;\n            var plotArea = ref.plotArea;\n            var axisRanges = ref.axisRanges;\n            if (axisRanges.length) {\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                    var range = axisRanges[idx];\n                    plotArea.updateAxisOptions(range.axis, range.range);\n                }\n                plotArea.redraw(plotArea.panes);\n            }\n        },\n\n        destroy: function() {\n            delete this.plotArea;\n        },\n\n        _panAxes: function(e, position) {\n            var plotArea = this.plotArea;\n            var delta = -e[position].delta;\n            var lock = (this.options.lock || \"\").toLowerCase();\n            var updatedAxes = [];\n\n            if (delta !== 0 && (lock || \"\").toLowerCase() !== position) {\n                var axes = plotArea.axes;\n                for (var idx = 0; idx < axes.length; idx++) {\n                    var axis = axes[idx];\n\n                    if (position === X && !axis.options.vertical || position === Y && axis.options.vertical) {\n                        var range = axis.pan(delta);\n\n                        if (range) {\n                            range.limitRange = true;\n                            updatedAxes.push({\n                                axis: axis,\n                                range: range\n                            });\n                        }\n                    }\n                }\n            }\n\n            return updatedAxes;\n        }\n    });\n\n    Pannable.prototype.options = {\n        key: \"none\",\n        lock: \"none\"\n    };\n\n    var ZoomSelection = Class.extend({\n        init: function(chart, options) {\n\n            this.chart = chart;\n            this.options = deepExtend({}, this.options, options);\n            this.createElement();\n        },\n\n        createElement: function() {\n            var marquee = this._marquee = document.createElement(\"div\");\n            marquee.className = \"k-marquee\";\n            var marqueeColor = document.createElement(\"div\");\n            marqueeColor.className = \"k-marquee-color\";\n            marquee.appendChild(marqueeColor);\n        },\n\n        removeElement: function() {\n            if (this._marquee.parentNode) {\n                this._marquee.parentNode.removeChild(this._marquee);\n            }\n        },\n\n        setStyles: function(styles) {\n            elementStyles(this._marquee, styles);\n        },\n\n        start: function(e) {\n            if (acceptKey(e, this.options.key)) {\n                var chart = this.chart;\n                var point = chart._eventCoordinates(e);\n                var zoomPane = this._zoomPane = chart._plotArea.paneByPoint(point);\n                var clipBox = zoomPane ? zoomPane.chartsBox().clone() : null;\n\n                if (zoomPane && clipBox) {\n                    var offset = this._elementOffset();\n\n                    clipBox.translate(offset.left, offset.top);\n                    this._zoomPaneClipBox = clipBox;\n\n                    document.body.appendChild(this._marquee);\n                    this.setStyles({\n                        left: e.pageX + 1,\n                        top: e.pageY + 1,\n                        width: 0,\n                        height: 0\n                    });\n\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _elementOffset: function() {\n            var chartElement = this.chart.element;\n            var ref = elementStyles(chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref.paddingLeft;\n            var paddingTop = ref.paddingTop;\n            var offset = dataviz.elementOffset(chartElement);\n\n            return {\n                left: paddingLeft + offset.left,\n                top: paddingTop + offset.top\n            };\n        },\n\n        move: function(e) {\n            var zoomPane = this._zoomPane;\n            if (zoomPane) {\n                this.setStyles(this._selectionPosition(e));\n            }\n        },\n\n        end: function(e) {\n            var zoomPane = this._zoomPane;\n            if (zoomPane) {\n                var elementOffset$$1 = this._elementOffset();\n                var selectionPosition = this._selectionPosition(e);\n                selectionPosition.left -= elementOffset$$1.left;\n                selectionPosition.top -= elementOffset$$1.top;\n\n                var start = { x: selectionPosition.left, y: selectionPosition.top };\n                var end = { x: selectionPosition.left + selectionPosition.width, y: selectionPosition.top + selectionPosition.height };\n                this._updateAxisRanges(start, end);\n\n                this.removeElement();\n                delete this._zoomPane;\n\n                return toChartAxisRanges(this.axisRanges);\n            }\n        },\n\n        zoom: function() {\n            var axisRanges = this.axisRanges;\n            if (axisRanges && axisRanges.length) {\n                var plotArea = this.chart._plotArea;\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                    var axisRange = axisRanges[idx];\n                    plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n                }\n                plotArea.redraw(plotArea.panes);\n            }\n        },\n\n        destroy: function() {\n            this.removeElement();\n            delete this._marquee;\n            delete this.chart;\n        },\n\n        _updateAxisRanges: function(start, end) {\n            var lock = (this.options.lock || \"\").toLowerCase();\n            var axisRanges = [];\n\n            var axes = this._zoomPane.axes;\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n                var vertical = axis.options.vertical;\n                if (!(lock === X && !vertical) && !(lock === Y && vertical) && defined(axis.axisIndex)) {\n                    var range = axis.pointsRange(start, end);\n                    if (range) {\n                        axisRanges.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n\n            this.axisRanges = axisRanges;\n        },\n\n        _selectionPosition: function(e) {\n            var clipBox = this._zoomPaneClipBox;\n            var startLocation = {\n                x: e.x.startLocation,\n                y: e.y.startLocation\n            };\n            var pageX = e.x.location;\n            var pageY = e.y.location;\n            var lock = (this.options.lock || \"\").toLowerCase();\n            var left = Math.min(startLocation.x, pageX);\n            var top = Math.min(startLocation.y, pageY);\n            var width = Math.abs(startLocation.x - pageX);\n            var height = Math.abs(startLocation.y - pageY);\n\n            if (lock === X) {\n                left = clipBox.x1;\n                width = clipBox.width();\n            }\n            if (lock === Y) {\n                top = clipBox.y1;\n                height = clipBox.height();\n            }\n\n            if (pageX > clipBox.x2) {\n                width = clipBox.x2 - startLocation.x;\n            }\n\n            if (pageX < clipBox.x1) {\n                width = startLocation.x - clipBox.x1;\n            }\n\n            if (pageY > clipBox.y2) {\n                height = clipBox.y2 - startLocation.y;\n            }\n\n            if (pageY < clipBox.y1) {\n                height = startLocation.y - clipBox.y1;\n            }\n\n            return {\n                left: Math.max(left, clipBox.x1),\n                top: Math.max(top, clipBox.y1),\n                width: width,\n                height: height\n            };\n        }\n    });\n\n    ZoomSelection.prototype.options = {\n        key: \"shift\",\n        lock: \"none\"\n    };\n\n    var ref = drawing.util;\n    var limitValue$1 = ref.limitValue;\n\n    // Limit the zoom rate between 1% and 90% per mousewheel event.\n    // At zoom rates close to 100% the axis range quickly becomes 0.\n    var MIN_RATE = 0.01;\n    var MAX_RATE = 0.9;\n    var DEFAULT_RATE = 0.3;\n\n    var MousewheelZoom = Class.extend({\n        init: function(chart, options) {\n\n            this.chart = chart;\n            this.options = deepExtend({\n                rate: DEFAULT_RATE\n            }, this.options, options);\n        },\n\n        updateRanges: function(delta, coords) {\n            var this$1$1 = this;\n\n            var lock = (this.options.lock || \"\").toLowerCase();\n            var axisRanges = [];\n            var axes = this.chart._plotArea.axes;\n\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n                var vertical = axis.options.vertical;\n\n                if (!(lock === X && !vertical) && !(lock === Y && vertical) && axis.zoomRange) {\n                    var rate = limitValue$1(this$1$1.options.rate, MIN_RATE, MAX_RATE);\n                    var range = axis.zoomRange(-delta * rate, coords);\n\n                    if (range) {\n                        axisRanges.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n\n            this.axisRanges = axisRanges;\n            return toChartAxisRanges(axisRanges);\n        },\n\n        zoom: function() {\n            var axisRanges = this.axisRanges;\n            var plotArea = this.chart._plotArea;\n\n            if (axisRanges && axisRanges.length && plotArea.updateAxisOptions) {\n                for (var idx = 0; idx < axisRanges.length; idx++) {\n                    var axisRange = axisRanges[idx];\n                    plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n                }\n                plotArea.redraw(plotArea.panes);\n            }\n        },\n\n        destroy: function() {\n            delete this.chart;\n        }\n    });\n\n    var LegendLayout = ChartElement.extend({\n        init: function(options, chartService) {\n            ChartElement.fn.init.call(this, options);\n\n            this.chartService = chartService;\n        },\n\n        render: function() {\n            var ref = this;\n            var children = ref.children;\n            var options = ref.options;\n            var vertical = options.vertical;\n\n            this.visual = new drawing.Layout(null, {\n                spacing: vertical ? 0 : options.spacing,\n                lineSpacing: vertical ? options.spacing : 0,\n                orientation: vertical ? \"vertical\" : \"horizontal\",\n                reverse: options.rtl,\n                alignItems: vertical ? \"start\" : \"center\"\n            });\n\n            for (var idx = 0; idx < children.length; idx++) {\n                var legendItem = children[idx];\n                legendItem.reflow(new Box());\n                legendItem.renderVisual();\n            }\n        },\n\n        reflow: function(box) {\n            this.visual.rect(box.toRect());\n            this.visual.reflow();\n            var bbox = this.visual.clippedBBox();\n\n            if (bbox) {\n                this.box = dataviz.rectToBox(bbox);\n            } else {\n                this.box = new Box();\n            }\n        },\n\n        renderVisual: function() {\n            this.addVisual();\n        },\n\n        createVisual: function() {}\n    });\n\n    var LegendItem = BoxElement.extend({\n        init: function(options) {\n            BoxElement.fn.init.call(this, options);\n\n            this.createContainer();\n            if (!options.rtl) {\n                this.createMarker();\n                this.createLabel();\n            } else {\n                this.createLabel();\n                this.createMarker();\n            }\n        },\n\n        createContainer: function() {\n            this.container = new dataviz.FloatElement({ vertical: false, wrap: false, align: CENTER, spacing: this.options.spacing });\n            this.append(this.container);\n        },\n\n        createMarker: function() {\n            this.container.append(new ShapeElement(this.markerOptions()));\n        },\n\n        markerOptions: function() {\n            var options = this.options;\n            var markerColor = options.markerColor;\n            return deepExtend({}, options.markers, {\n                background: markerColor,\n                border: {\n                    color: markerColor\n                }\n            });\n        },\n\n        createLabel: function() {\n            var options = this.options;\n            var labelOptions = deepExtend({}, options.labels);\n\n            this.container.append(new TextBox(options.text, labelOptions));\n        },\n\n        renderComplete: function() {\n            BoxElement.fn.renderComplete.call(this);\n\n            var cursor = this.options.cursor || {};\n            var eventSink = this._itemOverlay = Path.fromRect(this.container.box.toRect(), {\n                fill: {\n                    color: WHITE,\n                    opacity: 0\n                },\n                stroke: null,\n                cursor: cursor.style || cursor\n            });\n\n            this.appendVisual(eventSink);\n        },\n\n        click: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            if (!widget.trigger(LEGEND_ITEM_CLICK, args) && e && e.type === 'contextmenu') {\n                e.preventDefault();\n            }\n        },\n\n        over: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            if (!widget.trigger(LEGEND_ITEM_HOVER, args)) {\n                widget._legendItemHover(args.seriesIndex, args.pointIndex);\n            }\n\n            // Don't trigger point hover for legend items\n            return true;\n        },\n\n        out: function(widget, e) {\n            widget._unsetActivePoint();\n\n            widget.trigger(LEGEND_ITEM_LEAVE, this.eventArgs(e));\n        },\n\n        eventArgs: function(e) {\n            var options = this.options;\n\n            return {\n                element: eventElement(e),\n                text: options.text,\n                series: options.series,\n                seriesIndex: options.series.index,\n                pointIndex: options.pointIndex\n            };\n        },\n\n        renderVisual: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var customVisual = options.visual;\n\n            if (customVisual) {\n                this.visual = customVisual({\n                    active: options.active,\n                    series: options.series,\n                    sender: this.getSender(),\n                    pointIndex: options.pointIndex,\n                    options: {\n                        markers: this.markerOptions(),\n                        labels: options.labels\n                    },\n                    createVisual: function () {\n                        this$1$1.createVisual();\n                        this$1$1.renderChildren();\n                        this$1$1.renderComplete();\n\n                        var defaultVisual = this$1$1.visual;\n\n                        delete this$1$1.visual;\n\n                        return defaultVisual;\n                    }\n                });\n                this.addVisual();\n            } else {\n                BoxElement.fn.renderVisual.call(this);\n            }\n        }\n    });\n\n    var HORIZONTAL = \"horizontal\";\n    var POINTER = \"pointer\";\n    var CUSTOM = \"custom\";\n\n    var Legend = ChartElement.extend({\n        init: function(options, chartService) {\n            if (chartService === void 0) { chartService = {}; }\n\n            ChartElement.fn.init.call(this, options);\n\n            this.chartService = chartService;\n\n            if (!inArray(this.options.position, [ TOP, RIGHT, BOTTOM, LEFT, CUSTOM ])) {\n                this.options.position = RIGHT;\n            }\n\n            this.createContainers();\n\n            this.createLegendTitle(options.title);\n\n            this.createItems();\n        },\n\n        createContainers: function() {\n            var options = this.options;\n            var position = options.position;\n            var userAlign = options.align;\n            var align = position;\n            var vAlign = CENTER;\n\n            if (position === CUSTOM) {\n                align = LEFT;\n            } else if (inArray(position, [ TOP, BOTTOM ])) {\n                if (userAlign === \"start\") {\n                    align = LEFT;\n                } else if (userAlign === \"end\") {\n                    align = RIGHT;\n                } else {\n                    align = CENTER;\n                }\n                vAlign = position;\n            } else if (userAlign) {\n                if (userAlign === \"start\") {\n                    vAlign = TOP;\n                } else if (userAlign === \"end\") {\n                    vAlign = BOTTOM;\n                }\n            }\n\n            this.container = new BoxElement({\n                margin: options.margin,\n                padding: options.padding,\n                background: options.background,\n                border: options.border,\n                vAlign: vAlign,\n                align: align,\n                zIndex: options.zIndex,\n                shrinkToFit: true\n            });\n\n            if (this.hasTitle()) {\n                this.itemsContainer = new BoxElement({\n                    vAlign: vAlign,\n                    align: align,\n                    zIndex: options.zIndex,\n                    shrinkToFit: true\n                });\n            } else {\n                this.itemsContainer = this.container;\n            }\n\n            this.append(this.container);\n        },\n\n        createItems: function() {\n            var chartService = this.getService();\n            var options = this.options;\n            var vertical = this.isVertical();\n            var innerElement = new LegendLayout({\n                vertical: vertical,\n                spacing: options.spacing,\n                rtl: chartService.rtl\n            }, chartService);\n            var items = options.items;\n\n            if (options.reverse) {\n                items = items.slice(0).reverse();\n            }\n\n            var count = items.length;\n\n            for (var i = 0; i < count; i++) {\n                var item = items[i];\n\n                innerElement.append(new LegendItem(deepExtend({}, {\n                    markers: options.markers,\n                    labels: options.labels,\n                    rtl: chartService.rtl\n                }, options.item, item)));\n            }\n\n            innerElement.render();\n            this.itemsContainer.append(innerElement);\n        },\n\n        isVertical: function() {\n            var ref = this.options;\n            var orientation = ref.orientation;\n            var position = ref.position;\n            var vertical = (position === CUSTOM && orientation !== HORIZONTAL) ||\n                   (defined(orientation) ? orientation !== HORIZONTAL : inArray(position, [ LEFT, RIGHT ]));\n\n            return vertical;\n        },\n\n        hasItems: function() {\n            return this.container.children[0].children.length > 0;\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options;\n            var legendBox = targetBox.clone();\n\n            if (!this.hasItems()) {\n                this.box = legendBox;\n                return;\n            }\n\n            if (options.position === CUSTOM) {\n                this.containerCustomReflow(legendBox);\n                this.box = legendBox;\n            } else {\n                this.containerReflow(legendBox);\n            }\n\n            if (this.hasTitle()) {\n                this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n            }\n        },\n\n        containerReflow: function(targetBox) {\n            var ref = this;\n            var options = ref.options;\n            var container = ref.container;\n            var position = options.position;\n            var width = options.width;\n            var height = options.height;\n            var pos = position === TOP || position === BOTTOM ? X : Y;\n            var vertical = this.isVertical();\n            var alignTarget = targetBox.clone();\n            var containerBox = targetBox.clone();\n\n            if (position === LEFT || position === RIGHT) {\n                containerBox.y1 = alignTarget.y1 = 0;\n            }\n\n            if (vertical && height) {\n                containerBox.y2 = containerBox.y1 + height;\n                containerBox.align(alignTarget, Y, container.options.vAlign);\n            } else if (!vertical && width) {\n                containerBox.x2 = containerBox.x1 + width;\n                containerBox.align(alignTarget, X, container.options.align);\n            }\n\n            container.reflow(containerBox);\n            containerBox = container.box;\n\n            var box = containerBox.clone();\n\n            if (options.offsetX || options.offsetY) {\n                containerBox.translate(options.offsetX, options.offsetY);\n                container.reflow(containerBox);\n            }\n\n            box[pos + 1] = targetBox[pos + 1];\n            box[pos + 2] = targetBox[pos + 2];\n\n            this.box = box;\n        },\n\n        containerCustomReflow: function(targetBox) {\n            var ref = this;\n            var options = ref.options;\n            var container = ref.container;\n            var offsetX = options.offsetX;\n            var offsetY = options.offsetY;\n            var width = options.width;\n            var height = options.height;\n            var vertical = this.isVertical();\n            var containerBox = targetBox.clone();\n\n            if (vertical && height) {\n                containerBox.y2 = containerBox.y1 + height;\n            } else if (!vertical && width) {\n                containerBox.x2 = containerBox.x1 + width;\n            }\n            container.reflow(containerBox);\n            containerBox = container.box;\n\n            container.reflow(new Box(\n                offsetX, offsetY,\n                offsetX + containerBox.width(), offsetY + containerBox.height()\n            ));\n        },\n\n        renderVisual: function() {\n            if (this.hasItems()) {\n                ChartElement.fn.renderVisual.call(this);\n            }\n        },\n\n        createLegendTitle: function(title) {\n            var titleOptions = deepExtend({}, {\n                color: BLACK,\n                position: TOP,\n                align: CENTER\n            }, title);\n            var text = titleOptions.text;\n\n            if (!title || title.visible === false) {\n                return;\n            }\n\n            if (defined(titleOptions) && titleOptions.visible) {\n                var labelTemplate = getTemplate(titleOptions);\n                if (labelTemplate) {\n                    text = labelTemplate({ text: text });\n                } else if (titleOptions.format) {\n                    text = this.chartService.format.auto(titleOptions.format, text);\n                }\n            }\n\n            this.title = new TextBox(text, titleOptions);\n\n            this.createTitleLayout();\n\n            this.appendTitleLayoutContent();\n        },\n\n        createTitleLayout: function() {\n            this.layout = new dataviz.FloatElement({\n                vertical: true,\n                wrap: false\n            });\n\n            this.container.append(this.layout);\n        },\n\n        hasTitle: function() {\n            return Boolean(this.options.title && this.options.title.visible !== false);\n        },\n\n        appendTitleLayoutContent: function() {\n            var options = this.options;\n\n            if (options.title.position === BOTTOM) {\n                this.layout.append(this.itemsContainer);\n                this.layout.append(this.title);\n            } else {\n                this.layout.append(this.title);\n                this.layout.append(this.itemsContainer);\n            }\n        }\n    });\n\n    setDefaultOptions(Legend, {\n        position: RIGHT,\n        items: [],\n        offsetX: 0,\n        offsetY: 0,\n        margin: getSpacing(5),\n        padding: getSpacing(5),\n        border: {\n            color: BLACK,\n            width: 0\n        },\n        item: {\n            cursor: POINTER,\n            spacing: 6\n        },\n        spacing: 6,\n        background: \"\",\n        zIndex: 1,\n        markers: {\n            border: {\n                width: 0\n            },\n            width: 15,\n            height: 3,\n            type: \"rect\",\n            align: LEFT,\n            vAlign: CENTER\n        }\n    });\n\n    var PlotAreaFactory = Class.extend({\n        init: function() {\n\n            this._registry = [];\n        },\n\n        register: function(type, seriesTypes) {\n            this._registry.push({\n                type: type,\n                seriesTypes: seriesTypes\n            });\n        },\n\n        create: function(srcSeries, options, chartService) {\n            var registry = this._registry;\n            var match = registry[0];\n            var series;\n\n            for (var idx = 0; idx < registry.length; idx++) {\n                var entry = registry[idx];\n                series = filterSeriesByType(srcSeries, entry.seriesTypes);\n                var trendlines = filterSeriesByType(srcSeries, TRENDLINE_SERIES);\n\n                if ((series.length - trendlines.length) > 0) {\n                    match = entry;\n                    break;\n                }\n            }\n\n            return new match.type(series, options, chartService);\n        }\n    });\n\n    PlotAreaFactory.current = new PlotAreaFactory();\n\n    var ZOOM_ACCELERATION = 3;\n    var SELECTOR_HEIGHT_ADJUST = 0.1;\n\n    function createDiv(classNames) {\n        var element = document.createElement(\"div\");\n        if (classNames) {\n            element.className = classNames;\n        }\n\n        return element;\n    }\n\n    function closestHandle(element) {\n        var current = element;\n        while (current && !dataviz.hasClasses(current, \"k-handle\")) {\n            current = current.parentNode;\n        }\n\n        return current;\n    }\n\n    var Selection = Class.extend({\n        init: function(chart, categoryAxis, options, observer) {\n\n            var chartElement = chart.element;\n\n            this.options = deepExtend({}, this.options, options);\n            this.chart = chart;\n            this.observer = observer;\n            this.chartElement = chartElement;\n            this.categoryAxis = categoryAxis;\n            this._dateAxis = this.categoryAxis instanceof dataviz.DateCategoryAxis;\n\n            this.initOptions();\n\n            this.visible = this.options.visible && chartElement.offsetHeight;\n\n            if (this.visible) {\n                this.createElements();\n\n                this.set(this._index(this.options.from), this._index(this.options.to));\n\n                this.bindEvents();\n            }\n        },\n\n        onPane: function(pane) {\n            return this.categoryAxis.pane === pane;\n        },\n\n        createElements: function() {\n            var options = this.options;\n            var wrapper = this.wrapper = createDiv(\"k-selector k-pointer-events-none\");\n            elementStyles(wrapper, {\n                top: options.offset.top,\n                left: options.offset.left,\n                width: options.width,\n                height: options.height,\n                direction: 'ltr'\n            });\n\n            var selection = this.selection = createDiv(\"k-selection k-pointer-events-none\");\n\n            this.leftMask = createDiv(\"k-mask k-pointer-events-none\");\n            this.rightMask = createDiv(\"k-mask k-pointer-events-none\");\n\n            wrapper.appendChild(this.leftMask);\n            wrapper.appendChild(this.rightMask);\n            wrapper.appendChild(selection);\n\n            var body = this.body = createDiv(\"k-selection-bg k-pointer-events-none\");\n            selection.appendChild(body);\n\n            var leftHandle = this.leftHandle = createDiv(\"k-handle k-left-handle k-pointer-events-auto\");\n            var rightHandle = this.rightHandle = createDiv(\"k-handle k-right-handle k-pointer-events-auto\");\n            leftHandle.appendChild(createDiv());\n            rightHandle.appendChild(createDiv());\n\n            selection.appendChild(leftHandle);\n            selection.appendChild(rightHandle);\n\n            this.chartElement.appendChild(wrapper);\n            var selectionStyles = elementStyles(selection, [ \"borderLeftWidth\", \"borderRightWidth\", \"height\" ]);\n            var leftHandleHeight = elementStyles(leftHandle, \"height\").height;\n            var rightHandleHeight = elementStyles(rightHandle, \"height\").height;\n\n            options.selection = {\n                border: {\n                    left: selectionStyles.borderLeftWidth,\n                    right: selectionStyles.borderRightWidth\n                }\n            };\n\n            elementStyles(leftHandle, {\n                top: (selectionStyles.height - leftHandleHeight) / 2\n            });\n\n            elementStyles(rightHandle, {\n                top: (selectionStyles.height - rightHandleHeight) / 2\n            });\n\n            /* eslint no-self-assign: \"off\" */\n            wrapper.style.cssText = wrapper.style.cssText;\n        },\n\n        bindEvents: function() {\n            if (this.options.mousewheel !== false) {\n                this._mousewheelHandler = this._mousewheel.bind(this);\n                var obj;\n                bindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n            }\n\n            this._domEvents = services.DomEventsBuilder.create(this.chartElement, {\n                stopPropagation: true, // applicable for the jQuery UserEvents\n                start: this._start.bind(this),\n                move: this._move.bind(this),\n                end: this._end.bind(this),\n                tap: this._tap.bind(this),\n                press: this._press.bind(this),\n                gesturestart: this._gesturestart.bind(this),\n                gesturechange: this._gesturechange.bind(this),\n                gestureend: this._gestureend.bind(this)\n            });\n        },\n\n        initOptions: function() {\n            var ref = this;\n            var options = ref.options;\n            var categoryAxis = ref.categoryAxis;\n            var box = categoryAxis.pane.chartsBox();\n            var intlService = this.chart.chartService.intl;\n\n            if (this._dateAxis) {\n                deepExtend(options, {\n                    min: parseDate(intlService, options.min),\n                    max: parseDate(intlService, options.max),\n                    from: parseDate(intlService, options.from),\n                    to: parseDate(intlService, options.to)\n                });\n            }\n\n            var ref$1 = elementStyles(this.chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref$1.paddingLeft;\n            var paddingTop = ref$1.paddingTop;\n\n            this.options = deepExtend({}, {\n                width: box.width(),\n                height: box.height() + SELECTOR_HEIGHT_ADJUST, //workaround for sub-pixel hover on the paths in chrome\n                padding: {\n                    left: paddingLeft,\n                    top: paddingTop\n                },\n                offset: {\n                    left: box.x1 + paddingLeft,\n                    top: box.y1 + paddingTop\n                },\n                from: options.min,\n                to: options.max\n            }, options);\n        },\n\n        destroy: function() {\n            if (this._domEvents) {\n                this._domEvents.destroy();\n                delete this._domEvents;\n            }\n\n            clearTimeout(this._mwTimeout);\n            this._state = null;\n\n            if (this.wrapper) {\n                if (this._mousewheelHandler) {\n                    var obj;\n                    unbindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n                    this._mousewheelHandler = null;\n                }\n\n                this.chartElement.removeChild(this.wrapper);\n                this.wrapper = null;\n            }\n        },\n\n        _rangeEventArgs: function(range) {\n\n            return {\n                axis: this.categoryAxis.options,\n                from: this._value(range.from),\n                to: this._value(range.to)\n            };\n        },\n\n        _pointInPane: function(x, y) {\n            var paneBox = this.categoryAxis.pane.box;\n            var modelCoords = this.chart._toModelCoordinates(x, y);\n            return paneBox.containsPoint(modelCoords);\n        },\n\n        _start: function(e) {\n            var options = this.options;\n            var target = eventElement(e);\n            if (this._state || !target) {\n                return;\n            }\n\n            var coords = dataviz.eventCoordinates(e);\n            var inPane = this._pointInPane(coords.x, coords.y);\n            if (!inPane) {\n                return;\n            }\n\n            var handle = closestHandle(target);\n            var bodyRect = this.body.getBoundingClientRect();\n            var inBody = !handle && coords.x >= bodyRect.x && coords.x <= bodyRect.x + bodyRect.width &&\n                           coords.y >= bodyRect.y && coords.y <= bodyRect.y + bodyRect.height;\n\n            this.chart._unsetActivePoint();\n            this._state = {\n                moveTarget: handle,\n                startLocation: e.x ? e.x.location : 0,\n                inBody: inBody,\n                range: {\n                    from: this._index(options.from),\n                    to: this._index(options.to)\n                }\n            };\n\n            var args = this._rangeEventArgs({\n                from: this._index(options.from),\n                to: this._index(options.to)\n            });\n\n            if (this.trigger(SELECT_START, args)) {\n                this._state = null;\n            }\n        },\n\n        _press: function(e) {\n            var handle;\n            if (this._state) {\n                handle = this._state.moveTarget;\n            } else {\n                handle = closestHandle(eventElement(e));\n            }\n            if (handle) {\n                dataviz.addClass(handle, \"k-handle-active\");\n            }\n        },\n\n        _move: function(e) {\n            if (!this._state) {\n                return;\n            }\n\n            var ref = this;\n            var state = ref._state;\n            var options = ref.options;\n            var categoryAxis = ref.categoryAxis;\n            var range = state.range;\n            var target = state.moveTarget;\n            var reverse = categoryAxis.options.reverse;\n            var from = this._index(options.from);\n            var to = this._index(options.to);\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var delta = state.startLocation - e.x.location;\n            var oldRange = { from: range.from, to: range.to };\n            var span = range.to - range.from;\n            var scale = elementStyles(this.wrapper, \"width\").width / (categoryAxis.categoriesCount() - 1);\n            var offset = Math.round(delta / scale) * (reverse ? -1 : 1);\n\n            if (!target && !state.inBody) {\n                return;\n            }\n\n            var leftHandle = target && dataviz.hasClasses(target, \"k-left-handle\");\n            var rightHandle = target && dataviz.hasClasses(target, \"k-right-handle\");\n\n            if (state.inBody) {\n                range.from = Math.min(\n                    Math.max(min, from - offset),\n                    max - span\n                );\n                range.to = Math.min(\n                    range.from + span,\n                    max\n                );\n            } else if ((leftHandle && !reverse) || (rightHandle && reverse)) {\n                range.from = Math.min(\n                    Math.max(min, from - offset),\n                    max - 1\n                );\n                range.to = Math.max(range.from + 1, range.to);\n            } else if ((leftHandle && reverse) || (rightHandle && !reverse)) {\n                range.to = Math.min(\n                    Math.max(min + 1, to - offset),\n                    max\n                );\n                range.from = Math.min(range.to - 1, range.from);\n            }\n\n            if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.move(range.from, range.to);\n                this.trigger(SELECT, this._rangeEventArgs(range));\n            }\n        },\n\n        _end: function() {\n            if (this._state) {\n                var moveTarget = this._state.moveTarget;\n                if (moveTarget) {\n                    dataviz.removeClass(moveTarget, \"k-handle-active\");\n                }\n\n                var range = this._state.range;\n                this.set(range.from, range.to);\n                this.trigger(SELECT_END, this._rangeEventArgs(range));\n\n                delete this._state;\n            }\n        },\n\n        _tap: function(e) {\n            var ref = this;\n            var options = ref.options;\n            var categoryAxis = ref.categoryAxis;\n            var coords = this.chart._eventCoordinates(e);\n            var categoryIx = categoryAxis.pointCategoryIndex(new Point(coords.x, categoryAxis.box.y1));\n            var from = this._index(options.from);\n            var to = this._index(options.to);\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var span = to - from;\n            var mid = from + span / 2;\n            var range = {};\n            var rightClick = e.event.which === 3;\n            var offset = Math.round(mid - categoryIx);\n\n            if (this._state || rightClick) {\n                return;\n            }\n\n            this.chart._unsetActivePoint();\n\n            if (!categoryAxis.options.justified) {\n                offset--;\n            }\n\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - span\n            );\n\n            range.to = Math.min(range.from + span, max);\n\n            this._start(e);\n\n            if (this._state) {\n                this._state.range = range;\n                this.trigger(SELECT, this._rangeEventArgs(range));\n                this._end();\n            }\n        },\n\n        _mousewheel: function(e) {\n            var this$1$1 = this;\n\n            var delta = dataviz.mousewheelDelta(e);\n\n            this._start(e);\n\n            if (this._state) {\n                var range = this._state.range;\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                if (Math.abs(delta) > 1) {\n                    delta *= ZOOM_ACCELERATION;\n                }\n\n                if (this.options.mousewheel.reverse) {\n                    delta *= -1;\n                }\n\n                if (this.expand(delta)) {\n                    this.trigger(SELECT, {\n                        axis: this.categoryAxis.options,\n                        delta: delta,\n                        originalEvent: e,\n                        from: this._value(range.from),\n                        to: this._value(range.to)\n                    });\n                }\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1$1._end();\n                }, MOUSEWHEEL_DELAY);\n            }\n        },\n\n        _gesturestart: function(e) {\n            var options = this.options;\n            var touch = e.touches[0];\n            var inPane = this._pointInPane(touch.pageX, touch.pageY);\n\n            if (!inPane) {\n                return;\n            }\n\n            this._state = {\n                range: {\n                    from: this._index(options.from),\n                    to: this._index(options.to)\n                }\n            };\n            var args = this._rangeEventArgs(this._state.range);\n\n            if (this.trigger(SELECT_START, args)) {\n                this._state = null;\n            } else {\n                e.preventDefault();\n            }\n        },\n\n        _gestureend: function() {\n            if (this._state) {\n                this.trigger(SELECT_END, this._rangeEventArgs(this._state.range));\n                delete this._state;\n            }\n        },\n\n        _gesturechange: function(e) {\n            if (!this._state) {\n                return;\n            }\n\n            var ref = this;\n            var chart = ref.chart;\n            var state = ref._state;\n            var options = ref.options;\n            var categoryAxis = ref.categoryAxis;\n            var range = state.range;\n            var p0 = chart._toModelCoordinates(e.touches[0].x.location).x;\n            var p1 = chart._toModelCoordinates(e.touches[1].x.location).x;\n            var left = Math.min(p0, p1);\n            var right = Math.max(p0, p1);\n\n            e.preventDefault();\n\n            range.from = categoryAxis.pointCategoryIndex(new Point(left)) || options.min;\n\n            range.to = categoryAxis.pointCategoryIndex(new Point(right)) || options.max;\n\n            this.move(range.from, range.to);\n\n            this.trigger(SELECT, this._rangeEventArgs(range));\n        },\n\n        _index: function(value) {\n            var index = value;\n\n            if (value instanceof Date) {\n                index = this.categoryAxis.categoryIndex(value);\n            }\n\n            return index;\n        },\n\n        _value: function(index) {\n            var value = index;\n            if (this._dateAxis) {\n                value = this.categoryAxis.categoryAt(index);\n                if (value > this.options.max) {\n                    value = this.options.max;\n                }\n            }\n\n            return value;\n        },\n\n        _slot: function(value) {\n            var categoryAxis = this.categoryAxis;\n            var index = this._index(value);\n\n            return categoryAxis.getSlot(index, index, true);\n        },\n\n        move: function(from, to) {\n            var options = this.options;\n            var reverse = this.categoryAxis.options.reverse;\n            var offset = options.offset;\n            var padding = options.padding;\n            var border = options.selection.border;\n            var left = reverse ? to : from;\n            var right = reverse ? from : to;\n            var edge = 'x' + (reverse ? 2 : 1);\n\n            var box = this._slot(left);\n            var leftMaskWidth = round(box[edge] - offset.left + padding.left);\n\n            elementStyles(this.leftMask, {\n                width: leftMaskWidth\n            });\n            elementStyles(this.selection, {\n                left: leftMaskWidth\n            });\n\n            box = this._slot(right);\n\n            var rightMaskWidth = round(options.width - (box[edge] - offset.left + padding.left));\n            elementStyles(this.rightMask, {\n                width: rightMaskWidth\n            });\n\n            var distance = options.width - rightMaskWidth;\n            if (distance !== options.width) {\n                distance += border.right;\n            }\n\n            elementStyles(this.rightMask, {\n                left: distance\n            });\n            elementStyles(this.selection, {\n                width: Math.max(options.width - (leftMaskWidth + rightMaskWidth) - border.right, 0)\n            });\n        },\n\n        set: function(from, to) {\n            var options = this.options;\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var fromValue = limitValue(this._index(from), min, max);\n            var toValue = limitValue(this._index(to), fromValue + 1, max);\n\n            if (options.visible) {\n                this.move(fromValue, toValue);\n            }\n\n            options.from = this._value(fromValue);\n            options.to = this._value(toValue);\n        },\n\n        expand: function(delta) {\n            var options = this.options;\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var zDir = options.mousewheel.zoom;\n            var from = this._index(options.from);\n            var to = this._index(options.to);\n            var range = { from: from, to: to };\n            var oldRange = deepExtend({}, range);\n\n            if (this._state) {\n                range = this._state.range;\n            }\n\n            if (zDir !== RIGHT) {\n                range.from = limitValue(\n                    limitValue(from - delta, 0, to - 1),\n                    min, max\n                );\n            }\n\n            if (zDir !== LEFT) {\n                range.to = limitValue(\n                    limitValue(to + delta, range.from + 1, max),\n                    min,\n                    max\n                );\n            }\n\n            if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.set(range.from, range.to);\n                return true;\n            }\n        },\n\n        zoom: function(delta, coords) {\n            var options = this.options;\n            var min = this._index(options.min);\n            var max = this._index(options.max);\n            var from = this._index(options.from);\n            var to = this._index(options.to);\n            var range = { from: from, to: to };\n            var oldRange = deepExtend({}, range);\n\n            var ref = this.categoryAxis.options;\n            var reverse = ref.reverse;\n            var origin = X + (reverse ? '2' : '1');\n            var lineBox = this.categoryAxis.lineBox();\n            var relative = Math.abs(lineBox[origin] - coords[X]);\n            var size = lineBox.width();\n            var position = round(relative / size, 2);\n            var minDelta = round(position * delta);\n            var maxDelta = round((1 - position) * delta);\n\n            if (this._state) {\n                range = this._state.range;\n            }\n\n            range.from = limitValue(\n                limitValue(from - minDelta, 0, to - 1),\n                min, max\n            );\n\n            range.to = limitValue(\n                limitValue(to + maxDelta, range.from + 1, max),\n                min,\n                max\n            );\n\n            if (range.from !== oldRange.from || range.to !== oldRange.to) {\n                this.set(range.from, range.to);\n                return true;\n            }\n        },\n\n        trigger: function(name, args) {\n            return (this.observer || this.chart).trigger(name, args);\n        }\n    });\n\n    setDefaultOptions(Selection, {\n        visible: true,\n        mousewheel: {\n            zoom: \"both\"\n        },\n        min: MIN_VALUE,\n        max: MAX_VALUE\n    });\n\n    var Tooltip = BaseTooltip.extend({\n        show: function(point) {\n            if (!point || !point.tooltipAnchor || (this._current && this._current === point)) {\n                return;\n            }\n\n            var options = deepExtend({}, this.options, point.options.tooltip);\n            var anchor = point.tooltipAnchor();\n\n            if (anchor) {\n                this._current = point;\n                BaseTooltip.fn.show.call(this, {\n                    point: point,\n                    anchor: anchor\n                }, options, point);\n            } else {\n                this.hide();\n            }\n        },\n\n        hide: function() {\n            delete this._current;\n            BaseTooltip.fn.hide.call(this);\n        }\n    });\n\n    var SharedTooltip = BaseTooltip.extend({\n        init: function(plotArea, options) {\n            BaseTooltip.fn.init.call(this, plotArea.chartService, options);\n\n            this.plotArea = plotArea;\n            this.formatService = plotArea.chartService.format;\n        },\n\n        showAt: function(points, coords) {\n            var tooltipPoints = grep(points, function(point) {\n                var tooltip = point.series.tooltip;\n                var excluded = tooltip && tooltip.visible === false;\n\n                return !excluded;\n            });\n\n            if (tooltipPoints.length > 0) {\n                var point = tooltipPoints[0];\n                var slot = this.plotArea.categoryAxis.getSlot(point.categoryIx);\n\n                var anchor = coords ? this._slotAnchor(coords, slot) : this._defaultAnchor(point, slot);\n\n                this.show({\n                    anchor: anchor,\n                    shared: true,\n                    points: points,\n                    category: point.category,\n                    categoryText: this.formatService.auto(this.options.categoryFormat, point.category),\n                    series: this.plotArea.series\n                }, this.options);\n            }\n        },\n\n        _slotAnchor: function(point, slot) {\n            var axis = this.plotArea.categoryAxis;\n            var align = {\n                horizontal: \"left\",\n                vertical: \"center\"\n            };\n\n            if (!axis.options.vertical) {\n                point.x = slot.center().x;\n            }\n\n            return {\n                point: point,\n                align: align\n            };\n        },\n\n        _defaultAnchor: function(point, slot) {\n            var box = point.owner.pane.chartsBox();\n            var vertical = this.plotArea.categoryAxis.options.vertical;\n            var center = box.center();\n            var slotCenter = slot.center();\n            var align = {\n                horizontal: \"center\",\n                vertical: \"center\"\n            };\n\n            var centerPoint;\n            if (vertical) {\n                centerPoint = new Point(center.x, slotCenter.y);\n            } else {\n                centerPoint = new Point(slotCenter.x, center.y);\n            }\n\n            return {\n                point: centerPoint,\n                align: align\n            };\n        }\n    });\n\n    setDefaultOptions(SharedTooltip, {\n        categoryFormat: '{0:d}'\n    });\n\n    var BarChartAnimation = Animation.extend({\n        setup: function() {\n            var ref = this;\n            var element = ref.element;\n            var options = ref.options;\n            var bbox = element.bbox();\n\n            if (bbox) {\n                this.origin = options.origin;\n                var axis = options.vertical ? Y : X;\n\n                var fromScale = this.fromScale = new GeometryPoint(1, 1);\n                fromScale[axis] = START_SCALE;\n\n                element.transform(transform()\n                    .scale(fromScale.x, fromScale.y)\n                );\n            } else {\n                this.abort();\n            }\n        },\n\n        step: function(pos) {\n            var scaleX = dataviz.interpolateValue(this.fromScale.x, 1, pos);\n            var scaleY = dataviz.interpolateValue(this.fromScale.y, 1, pos);\n\n            this.element.transform(transform()\n                .scale(scaleX, scaleY, this.origin)\n            );\n        },\n\n        abort: function() {\n            Animation.fn.abort.call(this);\n            this.element.transform(null);\n        }\n    });\n\n    setDefaultOptions(BarChartAnimation, {\n        duration: INITIAL_ANIMATION_DURATION\n    });\n\n    AnimationFactory.current.register(BAR, BarChartAnimation);\n\n    var BubbleAnimation = Animation.extend({\n        setup: function() {\n            var center = this.center = this.element.bbox().center();\n            this.element.transform(transform()\n                .scale(START_SCALE, START_SCALE, center)\n            );\n        },\n\n        step: function(pos) {\n            this.element.transform(transform()\n                .scale(pos, pos, this.center)\n            );\n        }\n    });\n\n    setDefaultOptions(BubbleAnimation, {\n        easing: \"easeOutElastic\"\n    });\n\n    AnimationFactory.current.register(BUBBLE, BubbleAnimation);\n\n    var FadeInAnimation = Animation.extend({\n        setup: function() {\n            this.fadeTo = this.element.opacity();\n            this.element.opacity(0);\n        },\n\n        step: function(pos) {\n            this.element.opacity(pos * this.fadeTo);\n        }\n    });\n\n    setDefaultOptions(FadeInAnimation, {\n        duration: 200,\n        easing: \"linear\"\n    });\n\n    AnimationFactory.current.register(FADEIN, FadeInAnimation);\n\n    var PieAnimation = Animation.extend({\n        setup: function() {\n            this.element.transform(transform()\n                .scale(START_SCALE, START_SCALE, this.options.center)\n            );\n        },\n\n        step: function(pos) {\n            this.element.transform(transform()\n                .scale(pos, pos, this.options.center)\n            );\n        }\n    });\n\n    setDefaultOptions(PieAnimation, {\n        easing: \"easeOutElastic\",\n        duration: INITIAL_ANIMATION_DURATION\n    });\n\n    AnimationFactory.current.register(PIE, PieAnimation);\n\n    var ScatterLineChart = ScatterChart.extend({\n        render: function() {\n            ScatterChart.fn.render.call(this);\n\n            this.renderSegments();\n        },\n\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = currentSeries.style;\n            var pointType;\n\n            if (style === SMOOTH) {\n                pointType = SplineSegment;\n            } else {\n                pointType = LineSegment;\n            }\n\n            return new pointType(linePoints, currentSeries, seriesIx);\n        },\n\n        animationPoints: function() {\n            var points = ScatterChart.fn.animationPoints.call(this);\n            return points.concat(this._segments);\n        },\n\n        createMissingValue: function(value, missingValues) {\n            if (missingValues === ZERO) {\n                var missingValue = {\n                    x: value.x,\n                    y: value.y\n                };\n                if (!hasValue(missingValue.x)) {\n                    missingValue.x = 0;\n                }\n                if (!hasValue(missingValue.y)) {\n                    missingValue.y = 0;\n                }\n                return missingValue;\n            }\n        }\n    });\n\n    deepExtend(ScatterLineChart.prototype, LineChartMixin);\n\n    function autoMajorUnit(min, max) {\n        var diff = round(max - min, DEFAULT_PRECISION - 1);\n\n        if (diff === 0) {\n            if (max === 0) {\n                return 0.1;\n            }\n\n            diff = Math.abs(max);\n        }\n\n        var scale = Math.pow(10, Math.floor(Math.log(diff) / Math.log(10)));\n        var relativeValue = round((diff / scale), DEFAULT_PRECISION);\n        var scaleMultiplier = 1;\n\n        if (relativeValue < 1.904762) {\n            scaleMultiplier = 0.2;\n        } else if (relativeValue < 4.761904) {\n            scaleMultiplier = 0.5;\n        } else if (relativeValue < 9.523809) {\n            scaleMultiplier = 1;\n        } else {\n            scaleMultiplier = 2;\n        }\n\n        return round(scale * scaleMultiplier, DEFAULT_PRECISION);\n    }\n\n    var scatterValueGetter = function (fieldName) { return function (ref) {\n            var valueFields = ref.valueFields;\n\n            return ({ xValue: valueFields.x, yValue: valueFields[fieldName] });\n     }    };\n\n    function scatterLinearTrendLine(context) {\n        var options = context.options;\n        var seriesValues = context.seriesValues;\n\n        var data = getData$2({ seriesValues: seriesValues, options: options });\n        if (data) {\n            return $.extend({}, options,\n\n                {type: 'scatterLine',\n                data: data});\n        }\n\n        return null;\n    }\n\n    function getData$2(ref) {\n        var seriesValues = ref.seriesValues;\n        var options = ref.options;\n\n        var ref$1 = calculateSlope(seriesValues(), scatterValueGetter(options.field));\n        var slope = ref$1.slope;\n        var intercept = ref$1.intercept;\n        var count = ref$1.count;\n        var xMin = ref$1.xMin;\n        var xMax = ref$1.xMax;\n\n        if (count > 0) {\n            var data = [];\n            var forecast = (options.trendline || {}).forecast;\n            if (forecast) {\n                if (forecast.before > 0) {\n                    xMin -= forecast.before;\n                }\n\n                if (forecast.after > 0) {\n                    xMax += forecast.after;\n                }\n            }\n\n            var samplingInterval = (options.trendline || {}).samplingInterval;\n            var delta = valueOrDefault(samplingInterval,  autoMajorUnit(xMin, xMax) / 10);\n            if (samplingInterval <= 0) {\n                delta = xMax - xMin;\n            }\n\n            for (var x = xMin; x <= xMax; x += delta) {\n                data.push([ x,\n                    slope * x + intercept\n                ]);\n            }\n\n            return data;\n        }\n\n        return null;\n    }\n\n    function scatterMovingAverageTrendline(context) {\n        var options = context.options;\n\n        var data = getData$3(context);\n        if (data) {\n            return $.extend({}, options,\n\n                {type: 'scatterLine',\n                data: data});\n        }\n\n        return null;\n    }\n\n    function getData$3(ref) {\n        var options = ref.options;\n        var seriesValues = ref.seriesValues;\n\n        var period = (options.trendline || {}).period || MIN_MOVING_AVERAGE_PERIOD;\n        var range = { before: period, after: period };\n        var data = calculateMovingAverage(seriesValues(range), scatterValueGetter(options.field), period);\n\n        if (data.length > 0) {\n            return data;\n        }\n\n        return null;\n    }\n\n    var scatterRegistry = {};\n    scatterRegistry[TRENDLINE_LINEAR] = scatterLinearTrendLine;\n    scatterRegistry[TRENDLINE_MOVING_AVERAGE] = scatterMovingAverageTrendline;\n\n    var XYPlotArea = PlotAreaBase.extend({\n        initFields: function() {\n            this.namedXAxes = {};\n            this.namedYAxes = {};\n\n            this.xAxisRangeTracker = new AxisGroupRangeTracker();\n            this.yAxisRangeTracker = new AxisGroupRangeTracker();\n        },\n\n        render: function(panes) {\n            var this$1$1 = this;\n            if (panes === void 0) { panes = this.panes; }\n\n            this.series = [].concat( this.originalSeries );\n            this.createTrendlineSeries();\n\n            var seriesByPane = this.groupSeriesByPane();\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1$1.addToLegend(paneSeries);\n                var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n                if (!filteredSeries) {\n                    continue;\n                }\n\n                this$1$1.createScatterChart(\n                    filterSeriesByType(filteredSeries, SCATTER),\n                    pane\n                );\n\n                this$1$1.createScatterLineChart(\n                    filterSeriesByType(filteredSeries, SCATTER_LINE),\n                    pane\n                );\n\n                this$1$1.createBubbleChart(\n                    filterSeriesByType(filteredSeries, BUBBLE),\n                    pane\n                );\n            }\n\n            this.createAxes(panes);\n        },\n\n        appendChart: function(chart, pane) {\n            this.xAxisRangeTracker.update(chart.xAxisRanges);\n            this.yAxisRangeTracker.update(chart.yAxisRanges);\n\n            PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        },\n\n        removeAxis: function(axis) {\n            var axisName = axis.options.name;\n\n            PlotAreaBase.fn.removeAxis.call(this, axis);\n\n            if (axis.options.vertical) {\n                this.yAxisRangeTracker.reset(axisName);\n                delete this.namedYAxes[axisName];\n            } else {\n                this.xAxisRangeTracker.reset(axisName);\n                delete this.namedXAxes[axisName];\n            }\n\n            if (axis === this.axisX) {\n                delete this.axisX;\n            }\n\n            if (axis === this.axisY) {\n                delete this.axisY;\n            }\n        },\n\n        seriesPaneName: function(series) {\n            var options = this.options;\n            var xAxisName = series.xAxis;\n            var xAxisOptions = [].concat(options.xAxis);\n            var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n            var yAxisName = series.yAxis;\n            var yAxisOptions = [].concat(options.yAxis);\n            var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n            var panes = options.panes || [ {} ];\n            var defaultPaneName = panes[0].name || \"default\";\n            var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n            return paneName;\n        },\n\n        createScatterChart: function(series, pane) {\n            if (series.length > 0) {\n                this.appendChart(\n                    new ScatterChart(this, { series: series, clip: pane.options.clip }),\n                    pane\n                );\n            }\n        },\n\n        createScatterLineChart: function(series, pane) {\n            if (series.length > 0) {\n                this.appendChart(\n                    new ScatterLineChart(this, { series: series, clip: pane.options.clip }),\n                    pane\n                );\n            }\n        },\n\n        createBubbleChart: function(series, pane) {\n            if (series.length > 0) {\n                this.appendChart(\n                    new BubbleChart(this, { series: series, clip: pane.options.clip }),\n                    pane\n                );\n            }\n        },\n\n        createXYAxis: function(options, vertical, axisIndex) {\n            var axisName = options.name;\n            var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n            var tracker = vertical ? this.yAxisRangeTracker : this.xAxisRangeTracker;\n            var axisOptions = deepExtend({ reverse: !vertical && this.chartService.rtl }, options, { vertical: vertical });\n            var isLog = equalsIgnoreCase(axisOptions.type, LOGARITHMIC);\n            var defaultRange = tracker.query();\n            var defaultAxisRange = isLog ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n            var range = tracker.query(axisName) || defaultRange || defaultAxisRange;\n            var typeSamples = [ axisOptions.min, axisOptions.max ];\n            var series = this.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n                if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                    var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                    typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                    break;\n                }\n            }\n\n            if (axisIndex === 0 && defaultRange) {\n                range.min = Math.min(range.min, defaultRange.min);\n                range.max = Math.max(range.max, defaultRange.max);\n            }\n\n            var inferredDate;\n\n            for (var i = 0; i < typeSamples.length; i++) {\n                if (typeSamples[i] instanceof Date) {\n                    inferredDate = true;\n                    break;\n                }\n            }\n\n            var axisType;\n            if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n                axisType = dataviz.DateValueAxis;\n            } else if (isLog) {\n                axisType = dataviz.LogarithmicAxis;\n            } else {\n                axisType = dataviz.NumericAxis;\n            }\n\n            var axis = new axisType(range.min, range.max, axisOptions, this.chartService);\n            axis.axisIndex = axisIndex;\n\n            if (axisName) {\n                if (namedAxes[axisName]) {\n                    throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n                }\n                namedAxes[axisName] = axis;\n            }\n\n            this.appendAxis(axis);\n\n            return axis;\n        },\n\n        createAxes: function(panes) {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var xAxesOptions = [].concat(options.xAxis);\n            var xAxes = [];\n            var yAxesOptions = [].concat(options.yAxis);\n            var yAxes = [];\n\n            for (var idx = 0; idx < xAxesOptions.length; idx++) {\n                var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n                if (inArray(axisPane, panes)) {\n                    xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n                }\n            }\n\n            for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n                var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n                if (inArray(axisPane$1, panes)) {\n                    yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n                }\n            }\n\n            this.axisX = this.axisX || xAxes[0];\n            this.axisY = this.axisY || yAxes[0];\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var allAxes = this.axes;\n            var length = allAxes.length;\n            var xValues = [];\n            var yValues = [];\n\n            for (var i = 0; i < length; i++) {\n                var axis = allAxes[i];\n                var values = axis.options.vertical ? yValues : xValues;\n                var currentValue = axis.getValue(point);\n                if (currentValue !== null) {\n                    values.push(currentValue);\n                }\n            }\n\n            if (xValues.length > 0 && yValues.length > 0) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    originalEvent: e,\n                    x: singleItemOrArray(xValues),\n                    y: singleItemOrArray(yValues)\n                });\n            }\n        },\n\n        updateAxisOptions: function(axis, options) {\n            var vertical = axis.options.vertical;\n            var axes = this.groupAxes(this.panes);\n            var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n            updateAxisOptions$1(this.options, index, vertical, options);\n            updateAxisOptions$1(this.originalOptions, index, vertical, options);\n        },\n\n        trendlineFactory: function(options, series) {\n            var seriesValues = this.seriesValues.bind(this, series.index);\n\n            var trendline = trendlineFactory(scatterRegistry, options.type, {\n                options: options,\n                seriesValues: seriesValues\n            });\n\n            if (trendline) {\n                // Inherit settings\n                trendline.xAxis = series.xAxis;\n                trendline.yAxis = series.yAxis;\n            }\n\n            return trendline;\n        },\n\n        seriesValues: function(seriesIx) {\n            var this$1$1 = this;\n\n            var result = [];\n            var currentSeries = this.series[seriesIx];\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var data = this$1$1.bindPoint(currentSeries, pointIx);\n                result.push({ pointIx: pointIx, valueFields: data.valueFields });\n            }\n\n            return result;\n        }\n    });\n\n    function updateAxisOptions$1(targetOptions, axisIndex, vertical, options) {\n        var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n        deepExtend(axisOptions, options);\n    }\n\n    setDefaultOptions(XYPlotArea, {\n        xAxis: {},\n        yAxis: {}\n    });\n\n    deepExtend(XYPlotArea.prototype, PlotAreaEventsMixin);\n\n    var PieSegment = ChartElement.extend({\n        init: function(value, sector, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.value = value;\n            this.sector = sector;\n        },\n\n        render: function() {\n            var labels = this.options.labels;\n            var chartService = this.owner.chartService;\n            var labelText = this.value;\n\n            if (this._rendered || this.visible === false) {\n                return;\n            }\n            this._rendered = true;\n\n            var labelTemplate = getTemplate(labels);\n            var pointData = this.pointData();\n\n            if (labelTemplate) {\n                labelText = labelTemplate(pointData);\n            } else if (labels.format) {\n                labelText = chartService.format.auto(labels.format, labelText);\n            }\n\n            if (labels.visible && (labelText || labelText === 0)) {\n                if (labels.position === CENTER || labels.position === INSIDE_END) {\n                    if (!labels.color) {\n                        labels.color = dataviz.autoTextColor(this.options.color);\n                    }\n                    if (!labels.background) {\n                        labels.background = this.options.color;\n                    }\n                } else {\n                    var themeLabels = chartService.theme.seriesDefaults.labels;\n                    labels.color = labels.color || themeLabels.color;\n                    labels.background = labels.background || themeLabels.background;\n                }\n\n                this.label = new TextBox(labelText, deepExtend({}, labels, {\n                    align: CENTER,\n                    vAlign: \"\",\n                    animation: {\n                        type: FADEIN,\n                        delay: this.animationDelay\n                    }\n                }), pointData);\n\n                this.append(this.label);\n            }\n        },\n\n        reflow: function(targetBox) {\n            this.render();\n            this.box = targetBox;\n            this.reflowLabel();\n        },\n\n        reflowLabel: function() {\n            var ref = this;\n            var labelsOptions = ref.options.labels;\n            var label = ref.label;\n            var sector = this.sector.clone();\n            var labelsDistance = labelsOptions.distance;\n            var angle = sector.middle();\n\n            if (label) {\n                var labelHeight = label.box.height();\n                var labelWidth = label.box.width();\n                var lp;\n\n                if (labelsOptions.position === CENTER) {\n                    sector.radius = Math.abs((sector.radius - labelHeight) / 2) + labelHeight;\n                    lp = sector.point(angle);\n                    label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else if (labelsOptions.position === INSIDE_END) {\n                    sector.radius = sector.radius - labelHeight / 2;\n                    lp = sector.point(angle);\n                    label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else {\n                    var x1;\n                    lp = sector.clone().expand(labelsDistance).point(angle);\n                    if (lp.x >= sector.center.x) {\n                        x1 = lp.x + labelWidth;\n                        label.orientation = RIGHT;\n                    } else {\n                        x1 = lp.x - labelWidth;\n                        label.orientation = LEFT;\n                    }\n                    label.reflow(new Box(x1, lp.y - labelHeight, lp.x, lp.y));\n                }\n            }\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var sector = ref.sector;\n            var options = ref.options;\n\n            ChartElement.fn.createVisual.call(this);\n\n            if (this.value) {\n                if (options.visual) {\n                    var startAngle = (sector.startAngle + 180) % 360;\n                    var visual = options.visual({\n                        category: this.category,\n                        dataItem: this.dataItem,\n                        value: this.value,\n                        series: this.series,\n                        percentage: this.percentage,\n                        center: new GeometryPoint(sector.center.x, sector.center.y),\n                        radius: sector.radius,\n                        innerRadius: sector.innerRadius,\n                        startAngle: startAngle,\n                        endAngle: startAngle + sector.angle,\n                        options: options,\n                        sender: this.getSender(),\n                        createVisual: function () {\n                            var group = new Group();\n                            this$1$1.createSegmentVisual(group);\n\n                            return group;\n                        }\n                    });\n\n                    if (visual) {\n                        this.visual.append(visual);\n                    }\n                } else {\n                    this.createSegmentVisual(this.visual);\n                }\n            }\n        },\n\n        createSegmentVisual: function(group) {\n            var ref = this;\n            var sector = ref.sector;\n            var options = ref.options;\n            var borderOptions = options.border || {};\n            var border = borderOptions.width > 0 ? {\n                stroke: {\n                    color: borderOptions.color,\n                    width: borderOptions.width,\n                    opacity: borderOptions.opacity,\n                    dashType: borderOptions.dashType\n                }\n            } : {};\n            var color = options.color;\n            var fill = {\n                color: color,\n                opacity: options.opacity\n            };\n            var visual = this.createSegment(sector, deepExtend({\n                fill: fill,\n                stroke: {\n                    opacity: options.opacity\n                },\n                zIndex: options.zIndex\n            }, border));\n\n            group.append(visual);\n\n            if (hasGradientOverlay(options)) {\n                group.append(this.createGradientOverlay(visual, {\n                    baseColor: color,\n                    fallbackFill: fill\n                }, deepExtend({\n                    center: [ sector.center.x, sector.center.y ],\n                    innerRadius: sector.innerRadius,\n                    radius: sector.radius,\n                    userSpace: true\n                }, options.overlay)));\n            }\n        },\n\n        createSegment: function(sector, options) {\n            if (options.singleSegment) {\n                return new drawing.Circle(new geometry.Circle(new GeometryPoint(sector.center.x, sector.center.y), sector.radius), options);\n            }\n\n            return dataviz.ShapeBuilder.current.createRing(sector, options);\n        },\n\n        createAnimation: function() {\n            var ref = this;\n            var options = ref.options;\n            var center = ref.sector.center;\n\n            deepExtend(options, {\n                animation: {\n                    center: [ center.x, center.y ],\n                    delay: this.animationDelay\n                }\n            });\n\n            ChartElement.fn.createAnimation.call(this);\n        },\n\n        createHighlight: function(options) {\n            var highlight = this.options.highlight || {};\n            var border = highlight.border || {};\n\n            return this.createSegment(this.sector, deepExtend({}, options, {\n                fill: {\n                    color: highlight.color,\n                    opacity: highlight.opacity\n                },\n                stroke: {\n                    opacity: border.opacity,\n                    width: border.width,\n                    color: border.color\n                }\n            }));\n        },\n\n        highlightVisual: function() {\n            return this.visual.children[0];\n        },\n\n        highlightVisualArgs: function() {\n            var sector = this.sector;\n\n            return {\n                options: this.options,\n                radius: sector.radius,\n                innerRadius: sector.innerRadius,\n                center: new GeometryPoint(sector.center.x, sector.center.y),\n                startAngle: sector.startAngle,\n                endAngle: sector.angle + sector.startAngle,\n                visual: this.visual\n            };\n        },\n\n        tooltipAnchor: function() {\n            var sector = this.sector.clone().expand(TOOLTIP_OFFSET);\n            var midAndle = sector.middle();\n            var midPoint = sector.point(midAndle);\n\n            return {\n                point: midPoint,\n                align: tooltipAlignment(midAndle + 180)\n            };\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        pointData: function() {\n            return {\n                dataItem: this.dataItem,\n                category: this.category,\n                value: this.value,\n                series: this.series,\n                percentage: this.percentage\n            };\n        }\n    });\n\n    var RAD_30 = round(dataviz.rad(30), DEFAULT_PRECISION);\n    var RAD_60 = round(dataviz.rad(60), DEFAULT_PRECISION);\n\n    function tooltipAlignment(angle) {\n        var radians = dataviz.rad(angle);\n        var sine = round(Math.sin(radians), DEFAULT_PRECISION);\n        var cosine = round(Math.cos(radians), DEFAULT_PRECISION);\n\n        var horizontal;\n        if (Math.abs(sine) > RAD_60) {\n            horizontal = CENTER;\n        } else if (cosine < 0) {\n            horizontal = RIGHT;\n        } else {\n            horizontal = LEFT;\n        }\n\n        var vertical;\n        if (Math.abs(sine) < RAD_30) {\n            vertical = CENTER;\n        } else if (sine < 0) {\n            vertical = BOTTOM;\n        } else {\n            vertical = TOP;\n        }\n\n        return {\n            horizontal: horizontal,\n            vertical: vertical\n        };\n    }\n\n    setDefaultOptions(PieSegment, {\n        color: WHITE,\n        overlay: {\n            gradient: \"roundedBevel\"\n        },\n        border: {\n            width: 0.5\n        },\n        labels: {\n            visible: false,\n            distance: 35,\n            font: datavizConstants.DEFAULT_FONT,\n            margin: getSpacing(0.5),\n            align: CIRCLE,\n            zIndex: 1,\n            position: OUTSIDE_END\n        },\n        animation: {\n            type: PIE\n        },\n        highlight: {\n            visible: true,\n            border: {\n                width: 1\n            }\n        },\n        visible: true\n    });\n\n    deepExtend(PieSegment.prototype, PointEventsMixin);\n\n    var PieChartMixin = {\n        createLegendItem: function(value, point, options) {\n            var legendOptions = this.options.legend || {};\n            var labelsOptions = legendOptions.labels || {};\n            var inactiveItems = legendOptions.inactiveItems || {};\n            var inactiveItemsLabels = inactiveItems.labels || {};\n\n            if (options && options.visibleInLegend !== false) {\n                var pointVisible = options.visible !== false;\n                var labelTemplate = pointVisible ? getTemplate(labelsOptions) :\n                    getTemplate(inactiveItemsLabels) || getTemplate(labelsOptions);\n                var text = options.category;\n\n                if (labelTemplate) {\n                    text = labelTemplate({\n                        text: text,\n                        series: options.series,\n                        dataItem: options.dataItem,\n                        percentage: options.percentage,\n                        value: value\n                    });\n                }\n\n                var itemLabelOptions, markerColor;\n                if (pointVisible) {\n                    itemLabelOptions = {};\n                    markerColor = point.color;\n                } else {\n                    itemLabelOptions = {\n                        color: inactiveItemsLabels.color,\n                        font: inactiveItemsLabels.font\n                    };\n                    markerColor = (inactiveItems.markers || {}).color;\n                }\n\n                if (hasValue(text) && text !== \"\") {\n                    this.legendItems.push({\n                        active: pointVisible,\n                        pointIndex: options.index,\n                        text: text,\n                        series: options.series,\n                        markerColor: markerColor,\n                        labels: itemLabelOptions\n                    });\n                }\n            }\n        }\n    };\n\n    var PIE_SECTOR_ANIM_DELAY = 70;\n\n    var PieChart = ChartElement.extend({\n        init: function(plotArea, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.chartService = plotArea.chartService;\n            this.points = [];\n            this.legendItems = [];\n            this.render();\n        },\n\n        render: function() {\n            this.traverseDataPoints(this.addValue.bind(this));\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n            var colorsCount = seriesColors.length;\n            var series = options.series;\n            var seriesCount = series.length;\n\n            for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var data = currentSeries.data;\n                var ref$1 = bindSegments(currentSeries);\n                var total = ref$1.total;\n                var points = ref$1.points;\n                var count = ref$1.count;\n                var anglePerValue = 360 / total;\n                var constantAngle = (void 0);\n                if (!isFinite(anglePerValue)) {\n                    constantAngle = 360 / count;\n                }\n                var currentAngle = (void 0);\n\n                if (defined(currentSeries.startAngle)) {\n                    currentAngle = currentSeries.startAngle;\n                } else {\n                    currentAngle = options.startAngle;\n                }\n\n                if (seriesIx !== seriesCount - 1) {\n                    if (currentSeries.labels.position === OUTSIDE_END) {\n                        currentSeries.labels.position = CENTER;\n                    }\n                }\n\n                for (var i = 0; i < points.length; i++) {\n                    var pointData = points[i];\n                    if (!pointData) {\n                        continue;\n                    }\n\n                    var fields = pointData.fields;\n                    var value = pointData.value;\n                    var visible = pointData.visible;\n                    var angle = value !== 0 ? (constantAngle || (value * anglePerValue)) : 0;\n                    var explode = data.length !== 1 && Boolean(fields.explode);\n\n                    if (!isFunction(currentSeries.color)) {\n                        currentSeries.color = fields.color || seriesColors[i % colorsCount];\n                    }\n\n                    callback(value, new dataviz.Ring(null, 0, 0, currentAngle, angle), {\n                        owner: this$1$1,\n                        category: defined(fields.category) ? fields.category : \"\",\n                        index: i,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        dataItem: data[i],\n                        percentage: total !== 0 ? value / total : 0,\n                        explode: explode,\n                        visibleInLegend: fields.visibleInLegend,\n                        visible: visible,\n                        zIndex: seriesCount - seriesIx,\n                        animationDelay: this$1$1.animationDelay(i, seriesIx, seriesCount)\n                    });\n\n                    if (visible !== false) {\n                        currentAngle += angle;\n                    }\n                }\n            }\n        },\n\n        evalSegmentOptions: function(options, value, fields) {\n            var series = fields.series;\n\n            evalOptions(options, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                category: fields.category,\n                percentage: fields.percentage\n            }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"visual\", \"toggle\" ] });\n        },\n\n        addValue: function(value, sector, fields) {\n            var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n            this.evalSegmentOptions(segmentOptions, value, fields);\n\n            this.createLegendItem(value, segmentOptions, fields);\n\n            if (fields.visible === false) {\n                return;\n            }\n\n            var segment = new PieSegment(value, sector, segmentOptions);\n            $.extend(segment, fields);\n            this.append(segment);\n            this.points.push(segment);\n        },\n\n        reflow: function(targetBox) {\n            var ref = this;\n            var options = ref.options;\n            var points = ref.points;\n            var seriesConfigs = ref.seriesConfigs; if (seriesConfigs === void 0) { seriesConfigs = []; }\n            var count = points.length;\n            var box = targetBox.clone();\n            var space = 5;\n            var minWidth = Math.min(box.width(), box.height());\n            var halfMinWidth = minWidth / 2;\n            var defaultPadding = minWidth - minWidth * 0.85;\n            var newBox = new Box(box.x1, box.y1, box.x1 + minWidth, box.y1 + minWidth);\n            var newBoxCenter = newBox.center();\n            var boxCenter = box.center();\n            var seriesCount = options.series.length;\n            var leftSideLabels = [];\n            var rightSideLabels = [];\n            var padding = valueOrDefault(options.padding, defaultPadding);\n\n            this.targetBox = targetBox;\n\n            padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n            newBox.translate(boxCenter.x - newBoxCenter.x, boxCenter.y - newBoxCenter.y);\n\n            var radius = halfMinWidth - padding;\n            var center = new Point(\n                radius + newBox.x1 + padding,\n                radius + newBox.y1 + padding\n            );\n\n            for (var i = 0; i < count; i++) {\n                var segment = points[i];\n                var sector = segment.sector;\n                var seriesIndex = segment.seriesIx;\n                sector.radius = radius;\n                sector.center = center;\n\n                if (seriesConfigs.length) {\n                    var seriesConfig = seriesConfigs[seriesIndex];\n                    sector.innerRadius = seriesConfig.innerRadius;\n                    sector.radius = seriesConfig.radius;\n                }\n\n                if (seriesIndex === seriesCount - 1 && segment.explode) {\n                    sector.center = sector.clone().setRadius(sector.radius * 0.15).point(sector.middle());\n                }\n\n                segment.reflow(newBox);\n\n                var label = segment.label;\n                if (label) {\n                    if (label.options.position === OUTSIDE_END) {\n                        if (seriesIndex === seriesCount - 1) {\n                            if (label.orientation === RIGHT) {\n                                rightSideLabels.push(label);\n                            } else {\n                                leftSideLabels.push(label);\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (leftSideLabels.length > 0) {\n                leftSideLabels.sort(this.labelComparator(true));\n                this.leftLabelsReflow(leftSideLabels);\n            }\n\n            if (rightSideLabels.length > 0) {\n                rightSideLabels.sort(this.labelComparator(false));\n                this.rightLabelsReflow(rightSideLabels);\n            }\n\n            this.box = newBox;\n        },\n\n        leftLabelsReflow: function(labels) {\n            var distances = this.distanceBetweenLabels(labels);\n\n            this.distributeLabels(distances, labels);\n        },\n\n        rightLabelsReflow: function(labels) {\n            var distances = this.distanceBetweenLabels(labels);\n\n            this.distributeLabels(distances, labels);\n        },\n\n        distanceBetweenLabels: function(labels) {\n            var segment = last(this.points);\n            var sector = segment.sector;\n            var count = labels.length - 1;\n            var lr = sector.radius + segment.options.labels.distance;\n            var distances = [];\n            var firstBox = labels[0].box;\n            var distance = round(firstBox.y1 - (sector.center.y - lr - firstBox.height() - firstBox.height() / 2));\n\n            distances.push(distance);\n\n            for (var i = 0; i < count; i++) {\n                var secondBox = labels[i + 1].box;\n\n                firstBox = labels[i].box;\n                distance = round(secondBox.y1 - firstBox.y2);\n                distances.push(distance);\n            }\n            distance = round(sector.center.y + lr - labels[count].box.y2 - labels[count].box.height() / 2);\n            distances.push(distance);\n\n            return distances;\n        },\n\n        distributeLabels: function(distances, labels) {\n            var this$1$1 = this;\n\n            var count = distances.length;\n            var left, right, remaining;\n\n            for (var i = 0; i < count; i++) {\n                remaining = -distances[i];\n                left = right = i;\n\n                while (remaining > 0 && (left >= 0 || right < count)) {\n                    remaining = this$1$1._takeDistance(distances, i, --left, remaining);\n                    remaining = this$1$1._takeDistance(distances, i, ++right, remaining);\n                }\n            }\n\n            this.reflowLabels(distances, labels);\n        },\n\n        _takeDistance: function(distances, anchor, position, amount) {\n            var result = amount;\n            if (distances[position] > 0) {\n                var available = Math.min(distances[position], result);\n                result -= available;\n                distances[position] -= available;\n                distances[anchor] += available;\n            }\n\n            return result;\n        },\n\n        reflowLabels: function(distances, labels) {\n            var this$1$1 = this;\n\n            var segment = last(this.points);\n            var sector = segment.sector;\n            var labelOptions = segment.options.labels;\n            var labelsCount = labels.length;\n            var labelDistance = labelOptions.distance;\n            var boxY = sector.center.y - (sector.radius + labelDistance) - labels[0].box.height();\n            var boxX;\n\n            distances[0] += 2;\n            for (var i = 0; i < labelsCount; i++) {\n                var label = labels[i];\n                var box = label.box;\n\n                boxY += distances[i];\n                boxX = this$1$1.hAlignLabel(\n                    box.x2,\n                    sector.clone().expand(labelDistance),\n                    boxY,\n                    boxY + box.height(),\n                    label.orientation === RIGHT);\n\n                if (label.orientation === RIGHT) {\n                    if (labelOptions.align !== CIRCLE) {\n                        boxX = sector.radius + sector.center.x + labelDistance;\n                    }\n                    label.reflow(new Box(boxX + box.width(), boxY, boxX, boxY));\n                } else {\n                    if (labelOptions.align !== CIRCLE) {\n                        boxX = sector.center.x - sector.radius - labelDistance;\n                    }\n                    label.reflow(new Box(boxX - box.width(), boxY, boxX, boxY));\n                }\n\n                boxY += box.height();\n            }\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var connectors = ref.options.connectors;\n            var points = ref.points;\n            var count = points.length;\n            var space = 4;\n\n            ChartElement.fn.createVisual.call(this);\n\n            this._connectorLines = [];\n\n            for (var i = 0; i < count; i++) {\n                var segment = points[i];\n                var sector = segment.sector;\n                var label = segment.label;\n                var angle = sector.middle();\n                var connectorsColor = (segment.options.connectors || {}).color || connectors.color;\n\n                if (label) {\n                    var connectorLine = new Path({\n                        stroke: {\n                            color: connectorsColor,\n                            width: connectors.width\n                        },\n                        animation: {\n                            type: FADEIN,\n                            delay: segment.animationDelay\n                        }\n                    });\n\n                    if (label.options.position === OUTSIDE_END) {\n                        var box = label.box;\n                        var centerPoint = sector.center;\n                        var start = sector.point(angle);\n                        var middle = new Point(box.x1, box.center().y);\n                        var sr = (void 0), end = (void 0), crossing = (void 0);\n\n                        start = sector.clone().expand(connectors.padding).point(angle);\n                        connectorLine.moveTo(start.x, start.y);\n                        // TODO: Extract into a method to remove duplication\n                        if (label.orientation === RIGHT) {\n                            end = new Point(box.x1 - connectors.padding, box.center().y);\n                            crossing = intersection(centerPoint, start, middle, end);\n                            middle = new Point(end.x - space, end.y);\n                            crossing = crossing || middle;\n                            crossing.x = Math.min(crossing.x, middle.x);\n\n                            if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                                crossing.x < sector.center.x) {\n                                sr = sector.center.x + sector.radius + space;\n                                if (segment.options.labels.align !== COLUMN) {\n                                    if (sr < middle.x) {\n                                        connectorLine.lineTo(sr, start.y);\n                                    } else {\n                                        connectorLine.lineTo(start.x + space * 2, start.y);\n                                    }\n                                } else {\n                                    connectorLine.lineTo(sr, start.y);\n                                }\n                                connectorLine.lineTo(middle.x, end.y);\n                            } else {\n                                crossing.y = end.y;\n                                connectorLine.lineTo(crossing.x, crossing.y);\n                            }\n                        } else {\n                            end = new Point(box.x2 + connectors.padding, box.center().y);\n                            crossing = intersection(centerPoint, start, middle, end);\n                            middle = new Point(end.x + space, end.y);\n                            crossing = crossing || middle;\n                            crossing.x = Math.max(crossing.x, middle.x);\n\n                            if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                                crossing.x > sector.center.x) {\n                                sr = sector.center.x - sector.radius - space;\n                                if (segment.options.labels.align !== COLUMN) {\n                                    if (sr > middle.x) {\n                                        connectorLine.lineTo(sr, start.y);\n                                    } else {\n                                        connectorLine.lineTo(start.x - space * 2, start.y);\n                                    }\n                                } else {\n                                    connectorLine.lineTo(sr, start.y);\n                                }\n                                connectorLine.lineTo(middle.x, end.y);\n                            } else {\n                                crossing.y = end.y;\n                                connectorLine.lineTo(crossing.x, crossing.y);\n                            }\n                        }\n\n                        connectorLine.lineTo(end.x, end.y);\n\n                        this$1$1._connectorLines.push(connectorLine);\n                        this$1$1.visual.append(connectorLine);\n                    }\n                }\n            }\n        },\n\n        renderVisual: function() {\n            ChartElement.fn.renderVisual.call(this);\n\n            if (dataviz.find(this.options.series, function (options) { return options.autoFit; })) {\n                var targetBox = this.targetBox;\n                var pieCenter = this.box.center();\n                var bbox = this.visual.bbox();\n                if (!bbox) {\n                    return;\n                }\n\n                var bboxBottom = bbox.bottomRight();\n\n                var scale = Math.min(\n                    (pieCenter.y - targetBox.y1) / (pieCenter.y - bbox.origin.y),\n                    (targetBox.y2 - pieCenter.y) / (bboxBottom.y - pieCenter.y),\n                    (pieCenter.x - targetBox.x1) / (pieCenter.x - bbox.origin.x),\n                    (targetBox.x2 - pieCenter.x) / (bboxBottom.x - pieCenter.x)\n                );\n\n                if (scale < 1) {\n                    this.visual.transform(transform().scale(scale, scale, [ pieCenter.x, pieCenter.y ]));\n                }\n            }\n        },\n\n        labelComparator: function(reverse) {\n            var reverseValue = reverse ? -1 : 1;\n\n            return function(a, b) {\n                var first = (a.parent.sector.middle() + 270) % 360;\n                var second = (b.parent.sector.middle() + 270) % 360;\n                return (first - second) * reverseValue;\n            };\n        },\n\n        hAlignLabel: function(originalX, sector, y1, y2, direction) {\n            var radius = sector.radius;\n            var sector_center = sector.center;\n            var cx = sector_center.x;\n            var cy = sector_center.y;\n            var t = Math.min(Math.abs(cy - y1), Math.abs(cy - y2));\n\n            if (t > radius) {\n                return originalX;\n            }\n\n            return cx + Math.sqrt((radius * radius) - (t * t)) * (direction ? 1 : -1);\n        },\n\n        pointInCircle: function(point, center, radius) {\n            return Math.pow(center.x - point.x, 2) + Math.pow(center.y - point.y, 2) < Math.pow(radius, 2);\n        },\n\n        formatPointValue: function(point, format) {\n            return this.chartService.format.auto(format, point.value);\n        },\n\n        animationDelay: function(categoryIndex) {\n            return categoryIndex * PIE_SECTOR_ANIM_DELAY;\n        },\n\n        stackRoot: function() {\n            return this;\n        }\n    });\n\n    function intersection(a1, a2, b1, b2) {\n        var uat = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n        var ub = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n\n        var result;\n        if (ub !== 0) {\n            var ua = (uat / ub);\n\n            result = new Point(\n                a1.x + ua * (a2.x - a1.x),\n                a1.y + ua * (a2.y - a1.y)\n            );\n        }\n\n        return result;\n    }\n\n    setDefaultOptions(PieChart, {\n        startAngle: 90,\n        connectors: {\n            width: 2,\n            color: \"#939393\",\n            padding: 8\n        },\n        inactiveItems: {\n            markers: {},\n            labels: {}\n        }\n    });\n\n    deepExtend(PieChart.prototype, PieChartMixin);\n\n    PieChart.prototype.isStackRoot = true;\n\n    var PiePlotArea = PlotAreaBase.extend({\n        render: function() {\n            this.createPieChart(this.series);\n        },\n\n        createPieChart: function(series) {\n            var firstSeries = series[0];\n            var pieChart = new PieChart(this, {\n                series: series,\n                padding: firstSeries.padding,\n                startAngle: firstSeries.startAngle,\n                connectors: firstSeries.connectors,\n                legend: this.options.legend\n            });\n\n            this.appendChart(pieChart);\n        },\n\n        appendChart: function(chart, pane) {\n            PlotAreaBase.fn.appendChart.call(this, chart, pane);\n            append(this.options.legend.items, chart.legendItems);\n        }\n    });\n\n    var DonutSegment = PieSegment.extend({\n        reflowLabel: function() {\n            var ref = this;\n            var labelsOptions = ref.options.labels;\n            var label = ref.label;\n            var sector = this.sector.clone();\n            var angle = sector.middle();\n\n            if (label) {\n                var labelHeight = label.box.height();\n                if (labelsOptions.position === CENTER) {\n                    sector.radius -= (sector.radius - sector.innerRadius) / 2;\n\n                    var lp = sector.point(angle);\n\n                    label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n                } else {\n                    PieSegment.fn.reflowLabel.call(this);\n                }\n            }\n        },\n\n        createSegment: function(sector, options) {\n            return dataviz.ShapeBuilder.current.createRing(sector, options);\n        }\n    });\n\n    setDefaultOptions(DonutSegment, {\n        overlay: {\n            gradient: \"roundedGlass\"\n        },\n        labels: {\n            position: CENTER\n        },\n        animation: {\n            type: PIE\n        }\n    });\n\n    deepExtend(DonutSegment.prototype, PointEventsMixin);\n\n    var DONUT_SECTOR_ANIM_DELAY = 50;\n\n    var DonutChart = PieChart.extend({\n        addValue: function(value, sector, fields) {\n            var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n            this.evalSegmentOptions(segmentOptions, value, fields);\n\n            this.createLegendItem(value, segmentOptions, fields);\n\n            if (fields.visible === false) {\n                return;\n            }\n\n            var segment = new DonutSegment(value, sector, segmentOptions);\n\n            $.extend(segment, fields);\n            this.append(segment);\n            this.points.push(segment);\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var box = targetBox.clone();\n            var space = 5;\n            var minWidth = Math.min(box.width(), box.height());\n            var halfMinWidth = minWidth / 2;\n            var defaultPadding = minWidth - minWidth * 0.85;\n            var series = options.series;\n            var seriesCount = series.length;\n\n            var padding = valueOrDefault(options.padding, defaultPadding);\n            padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n\n            var totalSize = halfMinWidth - padding;\n            var seriesWithoutSize = 0;\n            var holeSize;\n\n            for (var i = 0; i < seriesCount; i++) {\n                var currentSeries = series[i];\n                if (i === 0) {\n                    if (defined(currentSeries.holeSize)) {\n                        holeSize = currentSeries.holeSize;\n                        totalSize -= currentSeries.holeSize;\n                    }\n                }\n\n                if (defined(currentSeries.size)) {\n                    totalSize -= currentSeries.size;\n                } else {\n                    seriesWithoutSize++;\n                }\n\n                if (defined(currentSeries.margin) && i !== seriesCount - 1) {\n                    totalSize -= currentSeries.margin;\n                }\n            }\n\n            if (!defined(holeSize)) {\n                var currentSize = (halfMinWidth - padding) / (seriesCount + 0.75);\n                holeSize = currentSize * 0.75;\n                totalSize -= holeSize;\n            }\n\n            var innerRadius = holeSize;\n            var margin = 0;\n            var size, radius;\n\n            this.seriesConfigs = [];\n\n            for (var i$1 = 0; i$1 < seriesCount; i$1++) {\n                var currentSeries$1 = series[i$1];\n                size = valueOrDefault(currentSeries$1.size, totalSize / seriesWithoutSize);\n                innerRadius += margin;\n                radius = innerRadius + size;\n                this$1$1.seriesConfigs.push({ innerRadius: innerRadius, radius: radius });\n                margin = currentSeries$1.margin || 0;\n                innerRadius = radius;\n            }\n\n            PieChart.fn.reflow.call(this, targetBox);\n        },\n\n        animationDelay: function(categoryIndex, seriesIndex, seriesCount) {\n            return categoryIndex * DONUT_SECTOR_ANIM_DELAY +\n                (INITIAL_ANIMATION_DURATION * (seriesIndex + 1) / (seriesCount + 1));\n        }\n    });\n\n    setDefaultOptions(DonutChart, {\n        startAngle: 90,\n        connectors: {\n            width: 2,\n            color: \"#939393\",\n            padding: 8\n        }\n    });\n\n    var DonutPlotArea = PiePlotArea.extend({\n        render: function() {\n            this.createDonutChart(this.series);\n        },\n\n        createDonutChart: function(series) {\n            var firstSeries = series[0];\n            var donutChart = new DonutChart(this, {\n                series: series,\n                padding: firstSeries.padding,\n                connectors: firstSeries.connectors,\n                legend: this.options.legend\n            });\n\n            this.appendChart(donutChart);\n        }\n    });\n\n    var DEFAULT_PADDING = 0.15;\n\n    var PolarPlotAreaBase = PlotAreaBase.extend({\n        initFields: function() {\n            this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n        },\n\n        render: function() {\n            this.addToLegend(this.series);\n            this.createPolarAxis();\n            this.createCharts();\n            this.createValueAxis();\n        },\n\n        alignAxes: function() {\n            var axis = this.valueAxis;\n            var range = axis.range();\n            var crossingValue = axis.options.reverse ? range.max : range.min;\n            var slot = axis.getSlot(crossingValue);\n            var center = this.polarAxis.getSlot(0).center;\n            var axisBox = axis.box.translate(\n                center.x - slot.x1,\n                center.y - slot.y1\n            );\n\n            axis.reflow(axisBox);\n        },\n\n        createValueAxis: function() {\n            var tracker = this.valueAxisRangeTracker;\n            var defaultRange = tracker.query();\n            var axisOptions = this.valueAxisOptions({\n                roundToMajorUnit: false,\n                zIndex: -1\n            });\n            var axisType, axisDefaultRange;\n\n            if (axisOptions.type === LOGARITHMIC) {\n                axisType = dataviz.RadarLogarithmicAxis;\n                axisDefaultRange = { min: 0.1, max: 1 };\n            } else {\n                axisType = dataviz.RadarNumericAxis;\n                axisDefaultRange = { min: 0, max: 1 };\n            }\n\n            var range = tracker.query(name) || defaultRange || axisDefaultRange;\n\n            if (range && defaultRange) {\n                range.min = Math.min(range.min, defaultRange.min);\n                range.max = Math.max(range.max, defaultRange.max);\n            }\n\n            var valueAxis = new axisType(\n                range.min, range.max,\n                axisOptions,\n                this.chartService\n            );\n\n            this.valueAxis = valueAxis;\n            this.appendAxis(valueAxis);\n        },\n\n        reflowAxes: function() {\n            var ref = this;\n            var options = ref.options.plotArea;\n            var valueAxis = ref.valueAxis;\n            var polarAxis = ref.polarAxis;\n            var box = ref.box;\n            var defaultPadding = Math.min(box.width(), box.height()) * DEFAULT_PADDING;\n            var padding = getSpacing(options.padding || {}, defaultPadding);\n            var paddingBox = box.clone().unpad(padding);\n            var axisBox = paddingBox.clone();\n\n            axisBox.y2 = axisBox.y1 + Math.min(axisBox.width(), axisBox.height());\n            axisBox.align(paddingBox, Y, CENTER);\n\n            var valueAxisBox = axisBox.clone().shrink(0, axisBox.height() / 2);\n\n            polarAxis.reflow(axisBox);\n            valueAxis.reflow(valueAxisBox);\n            var heightDiff = valueAxis.lineBox().height() - valueAxis.box.height();\n            valueAxis.reflow(valueAxis.box.unpad({ top: heightDiff }));\n\n            this.axisBox = axisBox;\n            this.alignAxes(axisBox);\n        },\n\n        backgroundBox: function() {\n            return this.box;\n        },\n\n        detachLabels: function() {}\n    });\n\n    var PolarScatterChart = ScatterChart.extend({\n        pointSlot: function(slotX, slotY) {\n            var valueRadius = slotX.center.y - slotY.y1;\n            var slot = Point.onCircle(slotX.center, slotX.startAngle, valueRadius);\n\n            return new Box(slot.x, slot.y, slot.x, slot.y);\n        }\n    });\n\n    setDefaultOptions(PolarScatterChart, {\n        clip: false\n    });\n\n    var PolarLineChart = ScatterLineChart.extend({\n\n    });\n\n    PolarLineChart.prototype.pointSlot = PolarScatterChart.prototype.pointSlot;\n\n    setDefaultOptions(PolarLineChart, {\n        clip: false\n    });\n\n    var SplinePolarAreaSegment = SplineAreaSegment.extend({\n        fillToAxes: function(fillPath) {\n            var center = this._polarAxisCenter();\n            fillPath.lineTo(center.x, center.y);\n        },\n\n        _polarAxisCenter: function() {\n            var polarAxis = this.parent.plotArea.polarAxis;\n            var center = polarAxis.box.center();\n            return center;\n        },\n\n        strokeSegments: function() {\n            var segments = this._strokeSegments;\n\n            if (!segments) {\n                var center = this._polarAxisCenter();\n                var curveProcessor = new CurveProcessor(false);\n                var linePoints = this.points();\n\n                linePoints.push(center);\n                segments = this._strokeSegments = curveProcessor.process(linePoints);\n                segments.pop();\n            }\n\n            return segments;\n        }\n    });\n\n    var PolarAreaSegment = AreaSegment.extend({\n        fillToAxes: function(fillPath) {\n            var polarAxis = this.parent.plotArea.polarAxis;\n            var center = polarAxis.box.center();\n            var centerSegment = new geometry.Segment([ center.x, center.y ]);\n\n            fillPath.segments.unshift(centerSegment);\n            fillPath.segments.push(centerSegment);\n        }\n    });\n\n    var PolarAreaChart = PolarLineChart.extend({\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = (currentSeries.line || {}).style;\n            var segment;\n\n            if (style === SMOOTH) {\n                segment = new SplinePolarAreaSegment(linePoints, currentSeries, seriesIx);\n            } else {\n                segment = new PolarAreaSegment(linePoints, currentSeries, seriesIx);\n            }\n            return segment;\n        },\n\n        createMissingValue: function(value, missingValues) {\n            var missingValue;\n\n            if (hasValue(value.x) && missingValues !== INTERPOLATE) {\n                missingValue = {\n                    x: value.x,\n                    y: value.y\n                };\n                if (missingValues === ZERO) {\n                    missingValue.y = 0;\n                }\n            }\n\n            return missingValue;\n        },\n\n        seriesMissingValues: function(series) {\n            return series.missingValues || ZERO;\n        },\n\n        _hasMissingValuesGap: function() {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n\n            for (var idx = 0; idx < series.length; idx++) {\n                if (this$1$1.seriesMissingValues(series[idx]) === GAP) {\n                    return true;\n                }\n            }\n        },\n\n        sortPoints: function(points) {\n            var this$1$1 = this;\n\n            points.sort(xComparer);\n\n            if (this._hasMissingValuesGap()) {\n                for (var idx = 0; idx < points.length; idx++) {\n                    var point = points[idx];\n                    if (point) {\n                        var value = point.value;\n                        if (!hasValue(value.y) && this$1$1.seriesMissingValues(point.series) === GAP) {\n                            delete points[idx];\n                        }\n                    }\n                }\n            }\n\n            return points;\n        }\n    });\n\n    function xComparer(a, b) {\n        return a.value.x - b.value.x;\n    }\n\n    var PolarPlotArea = PolarPlotAreaBase.extend({\n        createPolarAxis: function() {\n            var polarAxis = new dataviz.PolarAxis(this.options.xAxis, this.chartService);\n\n            this.polarAxis = polarAxis;\n            this.axisX = polarAxis;\n            this.appendAxis(polarAxis);\n        },\n\n        render: function() {\n            this.series = [].concat( this.originalSeries );\n            this.createTrendlineSeries();\n\n            PolarPlotAreaBase.fn.render.call(this);\n        },\n\n        valueAxisOptions: function(defaults) {\n            return deepExtend(defaults, {\n                majorGridLines: { type: ARC },\n                minorGridLines: { type: ARC }\n            }, this.options.yAxis);\n        },\n\n        createValueAxis: function() {\n            PolarPlotAreaBase.fn.createValueAxis.call(this);\n            this.axisY = this.valueAxis;\n        },\n\n        trendlineFactory: function(options, series) {\n            var trendline = XYPlotArea.prototype.trendlineFactory.call(this, options, series);\n            if (trendline) {\n                trendline.type = POLAR_LINE;\n            }\n\n            return trendline;\n        },\n\n        appendChart: function(chart, pane) {\n            this.valueAxisRangeTracker.update(chart.yAxisRanges);\n\n            PlotAreaBase.prototype.appendChart.call(this, chart, pane);\n        },\n\n        createCharts: function() {\n            var series = this.filterVisibleSeries(this.series);\n            var pane = this.panes[0];\n\n            this.createLineChart(\n                filterSeriesByType(series, [ POLAR_LINE ]),\n                pane\n            );\n\n            this.createScatterChart(\n                filterSeriesByType(series, [ POLAR_SCATTER ]),\n                pane\n            );\n\n            this.createAreaChart(\n                filterSeriesByType(series, [ POLAR_AREA ]),\n                pane\n            );\n        },\n\n        createLineChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var lineChart = new PolarLineChart(this, { series: series });\n\n            this.appendChart(lineChart, pane);\n        },\n\n        createScatterChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var scatterChart = new PolarScatterChart(this, { series: series });\n\n            this.appendChart(scatterChart, pane);\n        },\n\n        createAreaChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var areaChart = new PolarAreaChart(this, { series: series });\n\n            this.appendChart(areaChart, pane);\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var xValue = this.axisX.getValue(point);\n            var yValue = this.axisY.getValue(point);\n\n            if (xValue !== null && yValue !== null) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    x: xValue,\n                    y: yValue\n                });\n            }\n        },\n\n        createCrosshairs: function() {}\n    });\n\n    setDefaultOptions(PolarPlotArea, {\n        xAxis: {},\n        yAxis: {}\n    });\n\n    deepExtend(PolarPlotArea.prototype, PlotAreaEventsMixin, {\n        seriesValues: XYPlotArea.prototype.seriesValues\n    });\n\n    function groupBySeriesIx(segments) {\n        var seriesSegments = [];\n        for (var idx = 0; idx < segments.length; idx++) {\n            var segment = segments[idx];\n            seriesSegments[segment.seriesIx] = seriesSegments[segment.seriesIx] || [];\n            seriesSegments[segment.seriesIx].push(segment);\n        }\n\n        return seriesSegments;\n    }\n\n    var RadarLineChart = LineChart.extend({\n        pointSlot: function(categorySlot, valueSlot) {\n            var valueRadius = categorySlot.center.y - valueSlot.y1;\n            var slot = Point.onCircle(categorySlot.center, categorySlot.middle(), valueRadius);\n\n            return new Box(slot.x, slot.y, slot.x, slot.y);\n        },\n\n        renderSegments: function() {\n            LineChart.fn.renderSegments.call(this);\n\n            if (this._segments && this._segments.length > 1) {\n                var seriesSegments = groupBySeriesIx(this._segments);\n\n                for (var idx = 0; idx < seriesSegments.length; idx++) {\n                    var segments = seriesSegments[idx];\n                    if (segments && segments.length > 1) {\n                        var firstPoint = segments[0].linePoints[0];\n                        var lastSegment = last(segments);\n                        var lastPoint = last(lastSegment.linePoints);\n                        var isFirstDataPoint = firstPoint.categoryIx === 0;\n                        var isLastDataPoint = lastPoint.categoryIx === lastPoint.categoriesCount - 1;\n                        if (isFirstDataPoint && isLastDataPoint) {\n                            last(segments).linePoints.push(firstPoint);\n                        }\n                    }\n                }\n            }\n        },\n\n        createSegment: function(linePoints, currentSeries, seriesIx) {\n            var style = currentSeries.style;\n            var pointType;\n\n            if (style === SMOOTH) {\n                pointType = SplineSegment;\n            } else {\n                pointType = LineSegment;\n            }\n\n            var segment = new pointType(linePoints, currentSeries, seriesIx);\n            var missingValues = this.seriesMissingValues(currentSeries);\n\n            if (linePoints.length === currentSeries.data.length || missingValues === INTERPOLATE) {\n                segment.options.closed = true;\n            }\n\n            return segment;\n        }\n    });\n\n    setDefaultOptions(RadarLineChart, {\n        clip: false,\n        limitPoints: false\n    });\n\n    var SplineRadarAreaSegment = SplineAreaSegment.extend({\n        fillToAxes: function() {}\n    });\n\n    var RadarAreaSegment = AreaSegment.extend({\n        fillToAxes: function() {}\n    });\n\n    var RadarAreaChart = RadarLineChart.extend({\n        createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n            var isStacked = this.options.isStacked;\n            var style = (currentSeries.line || {}).style;\n            var previousSegment;\n            var stackPoints;\n            var segment;\n\n            if (isStacked && seriesIx > 0 && prevSegment) {\n                stackPoints = prevSegment.linePoints.slice(0);\n                previousSegment = prevSegment;\n            }\n\n            if (style === SMOOTH) {\n                segment = new SplineRadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n                segment.options.closed = true;\n            } else {\n                linePoints.push(linePoints[0]);\n                segment = new RadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n            }\n\n            return segment;\n        },\n\n        seriesMissingValues: function(series) {\n            return series.missingValues || ZERO;\n        }\n    });\n\n    var RadarSegment = DonutSegment.extend({\n        init: function(value, options) {\n            DonutSegment.fn.init.call(this, value, null, options);\n        }\n    });\n\n    setDefaultOptions(RadarSegment, {\n        overlay: {\n            gradient: \"none\"\n        },\n        labels: {\n            distance: 10\n        }\n    });\n\n    var RadarClusterLayout = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.forEach = options.rtl ? forEachReverse : forEach;\n        },\n\n        reflow: function(sector) {\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var gap = options.gap;\n            var spacing = options.spacing;\n            var count = children.length;\n            var slots = count + gap + (spacing * (count - 1));\n            var slotAngle = sector.angle / slots;\n            var angle = sector.startAngle + slotAngle * (gap / 2);\n\n            this.forEach(children, function (child) {\n                var slotSector = sector.clone();\n                slotSector.startAngle = angle;\n                slotSector.angle = slotAngle;\n\n                if (child.sector) {\n                    slotSector.radius = child.sector.radius;\n                }\n\n                child.reflow(slotSector);\n                child.sector = slotSector;\n\n                angle += slotAngle + (slotAngle * spacing);\n            });\n        }\n    });\n\n    setDefaultOptions(RadarClusterLayout, {\n        gap: 1,\n        spacing: 0\n    });\n\n    var RadarStackLayout = ChartElement.extend({\n        reflow: function(sector) {\n            var ref = this;\n            var reverse = ref.options.reverse;\n            var children = ref.children;\n            var childrenCount = children.length;\n            var first = reverse ? childrenCount - 1 : 0;\n            var step = reverse ? -1 : 1;\n\n            this.box = new Box();\n\n            for (var i = first; i >= 0 && i < childrenCount; i += step) {\n                var childSector = children[i].sector;\n                childSector.startAngle = sector.startAngle;\n                childSector.angle = sector.angle;\n            }\n        }\n    });\n\n    var RadarBarChart = BarChart.extend({\n        pointType: function() {\n            return RadarSegment;\n        },\n\n        clusterType: function() {\n            return RadarClusterLayout;\n        },\n\n        stackType: function() {\n            return RadarStackLayout;\n        },\n\n        categorySlot: function(categoryAxis, categoryIx) {\n            return categoryAxis.getSlot(categoryIx);\n        },\n\n        pointSlot: function(categorySlot, valueSlot) {\n            var slot = categorySlot.clone();\n            var y = categorySlot.center.y;\n\n            slot.radius = y - valueSlot.y1;\n            slot.innerRadius = y - valueSlot.y2;\n\n            return slot;\n        },\n\n        reflowPoint: function(point, pointSlot) {\n            point.sector = pointSlot;\n            point.reflow();\n        },\n\n        createAnimation: function() {\n            this.options.animation.center = this.box.toRect().center();\n            BarChart.fn.createAnimation.call(this);\n        }\n    });\n\n    RadarBarChart.prototype.reflow = CategoricalChart.prototype.reflow;\n\n    setDefaultOptions(RadarBarChart, {\n        clip: false,\n        limitPoints: false,\n        animation: {\n            type: \"pie\"\n        }\n    });\n\n    var RadarPlotArea = PolarPlotAreaBase.extend({\n        createPolarAxis: function() {\n            var categoryAxis = new dataviz.RadarCategoryAxis(this.options.categoryAxis, this.chartService);\n\n            this.polarAxis = categoryAxis;\n            this.categoryAxis = categoryAxis;\n            this.appendAxis(categoryAxis);\n            this.aggregateCategories();\n            this.createTrendlineSeries();\n            this.createCategoryAxesLabels();\n        },\n\n        valueAxisOptions: function(defaults) {\n            if (this._hasBarCharts) {\n                deepExtend(defaults, {\n                    majorGridLines: { type: ARC },\n                    minorGridLines: { type: ARC }\n                });\n            }\n\n            if (this._isStacked100) {\n                deepExtend(defaults, {\n                    roundToMajorUnit: false,\n                    labels: { format: \"P0\" }\n                });\n            }\n\n            return deepExtend(defaults, this.options.valueAxis);\n        },\n\n        aggregateCategories: function() {\n            // No separate panes in radar charts\n            CategoricalPlotArea.prototype.aggregateCategories.call(this, this.panes);\n        },\n\n        createCategoryAxesLabels: function() {\n            CategoricalPlotArea.prototype.createCategoryAxesLabels.call(this, this.panes);\n        },\n\n        filterSeries: function(currentSeries) {\n            // Not supported for radar charts\n            return currentSeries;\n        },\n\n        trendlineFactory: function(options, series) {\n            var trendline = CategoricalPlotArea.prototype.trendlineFactory.call(this, options, series);\n            if (trendline) {\n                trendline.type = RADAR_LINE;\n            }\n\n            return trendline;\n        },\n\n        createCharts: function() {\n            var series = this.filterVisibleSeries(this.series);\n            var pane = this.panes[0];\n\n            this.createAreaChart(\n                filterSeriesByType(series, [ RADAR_AREA ]),\n                pane\n            );\n\n            this.createLineChart(\n                filterSeriesByType(series, [ RADAR_LINE ]),\n                pane\n            );\n\n            this.createBarChart(\n                filterSeriesByType(series, [ RADAR_COLUMN ]),\n                pane\n            );\n        },\n\n        chartOptions: function(series) {\n            var options = { series: series };\n            var firstSeries = series[0];\n            if (firstSeries) {\n                var filteredSeries = this.filterVisibleSeries(series);\n                var stack = firstSeries.stack;\n                options.isStacked = stack && filteredSeries.length > 1;\n                options.isStacked100 = stack && stack.type === \"100%\" && filteredSeries.length > 1;\n\n                if (options.isStacked100) {\n                    this._isStacked100 = true;\n                }\n            }\n\n            return options;\n        },\n\n        createAreaChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var areaChart = new RadarAreaChart(this, this.chartOptions(series));\n            this.appendChart(areaChart, pane);\n        },\n\n        createLineChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var lineChart = new RadarLineChart(this, this.chartOptions(series));\n            this.appendChart(lineChart, pane);\n        },\n\n        createBarChart: function(series, pane) {\n            if (series.length === 0) {\n                return;\n            }\n\n            var firstSeries = series[0];\n            var options = this.chartOptions(series);\n            options.gap = firstSeries.gap;\n            options.spacing = firstSeries.spacing;\n\n            var barChart = new RadarBarChart(this, options);\n            this.appendChart(barChart, pane);\n\n            this._hasBarCharts = true;\n        },\n\n        seriesCategoryAxis: function() {\n            return this.categoryAxis;\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var category = this.categoryAxis.getCategory(point);\n            var value = this.valueAxis.getValue(point);\n\n            if (category !== null && value !== null) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    category: category,\n                    value: value\n                });\n            }\n        },\n\n        createCrosshairs: function() {}\n    });\n\n    deepExtend(RadarPlotArea.prototype, PlotAreaEventsMixin, {\n        appendChart: CategoricalPlotArea.prototype.appendChart,\n        aggregateSeries: CategoricalPlotArea.prototype.aggregateSeries,\n        seriesSourcePoints: CategoricalPlotArea.prototype.seriesSourcePoints,\n        seriesValues: CategoricalPlotArea.prototype.seriesValues\n    });\n\n    setDefaultOptions(RadarPlotArea, {\n        categoryAxis: {\n            categories: []\n        },\n        valueAxis: {}\n    });\n\n    var FunnelSegment = ChartElement.extend({\n        init: function(value, options, segmentOptions) {\n            ChartElement.fn.init.call(this, options);\n\n            this.value = value;\n            this.options.index = segmentOptions.index;\n        },\n\n        reflow: function(chartBox) {\n            var points = this.points;\n            var label = this.children[0];\n\n            this.box = new Box(points[0].x, points[0].y, points[1].x, points[2].y);\n\n            if (label) {\n                label.reflow(new Box(chartBox.x1, points[0].y, chartBox.x2, points[2].y));\n            }\n        },\n\n        createVisual: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var visual;\n\n            ChartElement.fn.createVisual.call(this);\n\n            if (options.visual) {\n                visual = options.visual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    series: this.series,\n                    percentage: this.percentage,\n                    points: this.points,\n                    options: options,\n                    sender: this.getSender(),\n                    createVisual: function () { return this$1$1.createPath(); }\n                });\n            } else {\n                visual = this.createPath();\n            }\n\n            if (visual) {\n                this.visual.append(visual);\n            }\n        },\n\n        createPath: function() {\n            var options = this.options;\n            var border = options.border;\n            var path = Path.fromPoints(this.points, {\n                fill: {\n                    color: options.color,\n                    opacity: options.opacity\n                },\n                stroke: {\n                    color: border.color,\n                    opacity: border.opacity,\n                    width: border.width\n                }\n            }).close();\n\n            return path;\n        },\n\n        createHighlight: function(style) {\n            return Path.fromPoints(this.points, style);\n        },\n\n        highlightVisual: function() {\n            return this.visual.children[0];\n        },\n\n        highlightVisualArgs: function() {\n            var path = Path.fromPoints(this.points).close();\n\n            return {\n                options: this.options,\n                path: path\n            };\n        },\n\n        tooltipAnchor: function() {\n            var box = this.box;\n            return {\n                point: new Point(box.center().x, box.y1),\n                align: {\n                    horizontal: \"center\",\n                    vertical: \"top\"\n                }\n            };\n        },\n\n        formatValue: function(format) {\n            var point = this;\n            return point.owner.formatPointValue(point, format);\n        }\n    });\n\n    setDefaultOptions(FunnelSegment, {\n        color: WHITE,\n        border: {\n            width: 1\n        }\n    });\n\n    deepExtend(FunnelSegment.prototype, PointEventsMixin);\n\n    var FunnelChart = ChartElement.extend({\n        init: function(plotArea, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.points = [];\n            this.labels = [];\n            this.legendItems = [];\n            this.render();\n        },\n\n        formatPointValue: function(point, format) {\n            return this.chartService.format.auto(format,point.value);\n        },\n\n        render: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n            var series = options.series[0];\n            var data = series.data;\n\n            if (!data) {\n                return;\n            }\n\n            var ref$1 = bindSegments(series);\n            var total = ref$1.total;\n            var points = ref$1.points;\n\n            for (var i = 0; i < points.length; i++) {\n                var pointData = points[i];\n\n                if (!pointData) {\n                    continue;\n                }\n\n                var fields = pointData.fields;\n\n                if (!isFunction(series.color)) {\n                    series.color = fields.color || seriesColors[i % seriesColors.length];\n                }\n\n                fields = deepExtend({\n                    index: i,\n                    owner: this$1$1,\n                    series: series,\n                    dataItem: data[i],\n                    percentage: pointData.value / total\n                }, fields, { visible: pointData.visible });\n\n                var value = pointData.valueFields.value;\n                var segment = this$1$1.createSegment(value, fields);\n                var label = this$1$1.createLabel(value, fields);\n\n                if (segment && label) {\n                    segment.append(label);\n                }\n            }\n        },\n\n        evalSegmentOptions: function(options, value, fields) {\n            var series = fields.series;\n\n            evalOptions(options, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                index: fields.index\n            }, { defaults: series._defaults, excluded: [ \"data\", \"content\", \"template\", \"toggle\", \"visual\" ] });\n        },\n\n        createSegment: function(value, fields) {\n            var seriesOptions = deepExtend({}, fields.series);\n            this.evalSegmentOptions(seriesOptions, value, fields);\n\n            this.createLegendItem(value, seriesOptions, fields);\n\n            if (fields.visible !== false) {\n\n                var segment = new FunnelSegment(value, seriesOptions, fields);\n                $.extend(segment, fields);\n\n                this.append(segment);\n                this.points.push(segment);\n\n                return segment;\n            }\n        },\n\n        createLabel: function(value, fields) {\n            var series = fields.series;\n            var dataItem = fields.dataItem;\n            var labels = deepExtend({}, this.options.labels, series.labels);\n            var text = value;\n\n            if (labels.visible) {\n                var labelTemplate = getTemplate(labels);\n                var data = {\n                    dataItem: dataItem,\n                    value: value,\n                    percentage: fields.percentage,\n                    category: fields.category,\n                    series: series\n                };\n                if (labelTemplate) {\n                    text = labelTemplate(data);\n                } else if (labels.format) {\n                    text = this.plotArea.chartService.format.auto(labels.format, text);\n                }\n\n                if (!labels.color) {\n                    labels.color = dataviz.autoTextColor(series.color);\n                    if (!labels.background) {\n                        labels.background = series.color;\n                    }\n                }\n\n                this.evalSegmentOptions(labels, value, fields);\n                var textBox = new TextBox(text, deepExtend({\n                    vAlign: labels.position\n                }, labels), data);\n\n                this.labels.push(textBox);\n\n                return textBox;\n            }\n        },\n\n        labelPadding: function() {\n            var labels = this.labels;\n            var padding = { left: 0, right: 0 };\n\n            for (var i = 0; i < labels.length; i++) {\n                var label = labels[i];\n                var align = label.options.align;\n                if (align !== CENTER) {\n                    var width = labels[i].box.width();\n\n                    if (align === LEFT) {\n                        padding.left = Math.max(padding.left, width);\n                    } else {\n                        padding.right = Math.max(padding.right, width);\n                    }\n                }\n            }\n\n            return padding;\n        },\n\n        dynamicSlopeReflow: function(box, width, totalHeight) {\n            var ref = this;\n            var options = ref.options;\n            var segments = ref.points;\n            var count = segments.length;\n            var firstSegment = segments[0];\n            var maxSegment = firstSegment;\n\n            for (var idx = 0; idx < segments.length; idx++) {\n                if (segments[idx].percentage > maxSegment.percentage) {\n                    maxSegment = segments[idx];\n                }\n            }\n\n            var lastUpperSide = (firstSegment.percentage / maxSegment.percentage) * width;\n            var previousOffset = (width - lastUpperSide) / 2;\n            var previousHeight = 0;\n\n            for (var idx$1 = 0; idx$1 < count; idx$1++) {\n                var percentage = segments[idx$1].percentage;\n                var nextSegment = segments[idx$1 + 1];\n                var nextPercentage = (nextSegment ? nextSegment.percentage : percentage);\n                var points = segments[idx$1].points = [];\n                var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n                var offset = (void 0);\n\n                if (!percentage) {\n                    offset = nextPercentage ? 0 : width / 2;\n                } else {\n                    offset = (width - lastUpperSide * (nextPercentage / percentage)) / 2;\n                }\n\n                offset = limitValue(offset, 0, width);\n\n                points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - offset, box.y1 + height + previousHeight));\n                points.push(new GeometryPoint(box.x1 + offset, box.y1 + height + previousHeight));\n\n                previousOffset = offset;\n                previousHeight += height + options.segmentSpacing;\n                lastUpperSide = limitValue(width - 2 * offset, 0, width);\n            }\n        },\n\n        constantSlopeReflow: function(box, width, totalHeight) {\n            var ref = this;\n            var options = ref.options;\n            var segments = ref.points;\n            var count = segments.length;\n            var decreasingWidth = options.neckRatio <= 1;\n            var neckRatio = decreasingWidth ? options.neckRatio * width : width;\n            var previousOffset = decreasingWidth ? 0 : (width - width / options.neckRatio) / 2;\n            var topMostWidth = decreasingWidth ? width : width - previousOffset * 2;\n            var finalNarrow = (topMostWidth - neckRatio) / 2;\n            var previousHeight = 0;\n\n            for (var idx = 0; idx < count; idx++) {\n                var points = segments[idx].points = [];\n                var percentage = segments[idx].percentage;\n                var offset = (options.dynamicHeight) ? (finalNarrow * percentage) : (finalNarrow / count);\n                var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n\n                points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n                points.push(new GeometryPoint(box.x1 + width - previousOffset - offset, box.y1 + height + previousHeight));\n                points.push(new GeometryPoint(box.x1 + previousOffset + offset,box.y1 + height + previousHeight));\n                previousOffset += offset;\n                previousHeight += height + options.segmentSpacing;\n            }\n        },\n\n        reflow: function(chartBox) {\n            var points = this.points;\n            var count = points.length;\n\n            if (!count) {\n                return;\n            }\n\n            var options = this.options;\n            var box = chartBox.clone().unpad(this.labelPadding());\n            var totalHeight = box.height() - options.segmentSpacing * (count - 1);\n            var width = box.width();\n\n            if (options.dynamicSlope) {\n                this.dynamicSlopeReflow(box, width, totalHeight);\n            } else {\n                this.constantSlopeReflow(box, width, totalHeight);\n            }\n\n            for (var idx = 0; idx < count; idx++) {\n                points[idx].reflow(chartBox);\n            }\n        }\n    });\n\n    setDefaultOptions(FunnelChart, {\n        neckRatio: 0.3,\n        width: 300,\n        dynamicSlope: false,\n        dynamicHeight: true,\n        segmentSpacing: 0,\n        labels: {\n            visible: false,\n            align: CENTER,\n            position: CENTER,\n            zIndex: 1\n        }\n    });\n\n    deepExtend(FunnelChart.prototype, PieChartMixin);\n\n    var MAX_NECK_RATIO = 1e6;\n\n    var PyramidChart = FunnelChart.extend({\n        init: function(plotArea, options) {\n            options.dynamicSlope = false;\n            options.neckRatio = MAX_NECK_RATIO;\n\n            FunnelChart.fn.init.call(this, plotArea, options);\n        }\n    });\n\n    var FunnelPlotArea = PlotAreaBase.extend({\n        render: function() {\n            this.createChart(FunnelChart, filterSeriesByType(this.series, [ FUNNEL ]));\n            this.createChart(PyramidChart, filterSeriesByType(this.series, [ PYRAMID ]));\n        },\n\n        createChart: function(chartType, series) {\n            var firstSeries = series[0];\n            if (!firstSeries) {\n                return;\n            }\n\n            var chart = new chartType(this, {\n                series: series,\n                legend: this.options.legend,\n                neckRatio: firstSeries.neckRatio,\n                dynamicHeight: firstSeries.dynamicHeight,\n                dynamicSlope: firstSeries.dynamicSlope,\n                segmentSpacing: firstSeries.segmentSpacing,\n                highlight: firstSeries.highlight\n            });\n\n            this.appendChart(chart);\n        },\n\n        appendChart: function(chart, pane) {\n            PlotAreaBase.fn.appendChart.call(this, chart, pane);\n            append(this.options.legend.items, chart.legendItems);\n        }\n    });\n\n    // Linear color scale from the given color to white minus minimum lightness offset.\n    var colorScale = function (color, minLightnessOffset) {\n        if (minLightnessOffset === void 0) { minLightnessOffset = 0.05; }\n\n        var baseColor = kendo.parseColor(color);\n        var offset = 1 - minLightnessOffset;\n\n        return function (value) {\n            var hsl = baseColor.toHSL();\n            var range = 100 - hsl.l;\n            var point = offset - value;\n            hsl.l += Math.min(point * range, range);\n\n            return hsl.toCss();\n        };\n    };\n\n    var HeatmapPoint = ChartElement.extend({\n        init: function(value, options) {\n            ChartElement.fn.init.call(this);\n\n            this.options = options;\n            this.color = options.color || WHITE;\n            this.value = value;\n        },\n\n        render: function() {\n            if (this._rendered) {\n                return;\n            }\n\n            this._rendered = true;\n\n            this.createMarker();\n            this.createLabel();\n            this.createNote();\n        },\n\n        createLabel: function() {\n            var options = this.options;\n            var labels = options.labels;\n\n            if (labels.visible) {\n                var pointData = this.pointData();\n                var labelTemplate = getTemplate(labels);\n                var labelText;\n                var labelColor = labels.color;\n\n                if (labelTemplate) {\n                    labelText = labelTemplate(pointData);\n                } else {\n                    labelText = this.formatValue(labels.format);\n                }\n\n                if (!labelColor) {\n                    labelColor = dataviz.autoTextColor(this.color);\n                }\n\n                this.label = new TextBox(labelText,\n                    deepExtend({\n                        align: CENTER,\n                        vAlign: CENTER,\n                        margin: {\n                            left: 5,\n                            right: 5\n                        },\n                        zIndex: valueOrDefault(labels.zIndex, this.series.zIndex)\n                    },\n                    labels, {\n                        color: labelColor\n                    }),\n                    pointData\n                );\n                this.append(this.label);\n            }\n        },\n\n        formatValue: function(format) {\n            return this.owner.formatPointValue(this, format);\n        },\n\n        reflow: function(targetBox) {\n            this.render();\n\n            var label = this.label;\n\n            this.box = targetBox;\n\n            if (label) {\n                label.reflow(this.markerBox());\n            }\n\n            if (this.note) {\n                this.note.reflow(targetBox);\n            }\n\n            this.marker.reflow(this.markerBox());\n        },\n\n        markerBox: function() {\n            var options = this.options;\n            var markers = options.markers;\n            var border = markers.border;\n            var rect = this.box.toRect();\n            var type = valueOrDefault(markers.type, 'rect');\n            var isRoundRect = type === datavizConstants.ROUNDED_RECT;\n            var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n            var halfBorderWidth = Math.round(borderWidth / 2);\n\n            if (markers.size) {\n                var center = rect.center();\n                rect.size.width = rect.size.height = markers.size;\n                rect.origin.x = Math.round(center.x - rect.size.width / 2);\n                rect.origin.y = Math.round(center.y - rect.size.height / 2);\n            }\n\n            rect.size.width -= borderWidth;\n            rect.size.height -= borderWidth;\n            rect.origin.y += halfBorderWidth + 0.5;\n            rect.origin.x += halfBorderWidth + 0.5;\n\n            return dataviz.rectToBox(rect);\n        },\n\n        markerBorder: function() {\n            var options = this.options;\n            var markers = options.markers;\n            var border = markers.border;\n            var opacity = valueOrDefault(border.opacity, options.opacity);\n\n            return {\n                color: border.color || this.color,\n                width: border.width,\n                opacity: opacity,\n                dashType: border.dashType\n            };\n        },\n\n        createMarker: function() {\n            var options = this.options;\n            var markerOptions = options.markers;\n            var marker = new ShapeElement({\n                type: valueOrDefault(markerOptions.type, 'rect'),\n                width: markerOptions.size,\n                height: markerOptions.size,\n                rotation: markerOptions.rotation,\n                background: this.color,\n                border: this.markerBorder(),\n                borderRadius: markerOptions.borderRadius,\n                opacity: this.series.opacity || options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n                animation: options.animation,\n                visual: options.visual\n            }, {\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                category: this.category\n            });\n\n            this.marker = marker;\n            this.append(marker);\n        },\n\n        createHighlight: function(style) {\n            var options = this.options;\n            var markerOptions = this.options.highlight.markers || this.options.markers;\n\n            var highlight = new ShapeElement({\n                type: valueOrDefault(markerOptions.type, 'rect'),\n                width: markerOptions.size,\n                height: markerOptions.size,\n                rotation: markerOptions.rotation,\n                background: markerOptions.color || this.color,\n                border: this.markerBorder(),\n                borderRadius: markerOptions.borderRadius,\n                opacity: this.series.opacity || options.opacity,\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n            });\n\n            highlight.reflow(this.markerBox());\n            var visual = highlight.getElement();\n\n            visual.options.fill = style.fill;\n            visual.options.stroke = style.stroke;\n\n            return visual;\n        },\n\n        highlightVisual: function() {\n            return this.rectVisual;\n        },\n\n        highlightVisualArgs: function() {\n            return {\n                options: this.options,\n                rect: this.box.toRect(),\n                visual: this.rectVisual\n            };\n        },\n\n        tooltipAnchor: function() {\n            var left = this.box.center().x;\n            var top = this.box.y1 - TOOLTIP_OFFSET;\n\n            return {\n                point: new Point(left, top),\n                align: {\n                    horizontal: CENTER,\n                    vertical: BOTTOM\n                }\n            };\n        },\n\n        overlapsBox: function(box) {\n            return this.box.overlaps(box);\n        },\n\n        unclipElements: function() {\n            /* noop, clip labels */\n        },\n\n        pointData: function() {\n            return {\n                x: this.value.x,\n                y: this.value.y,\n                value: this.value.value,\n                dataItem: this.dataItem,\n                series: this.series\n            };\n        }\n    });\n\n    deepExtend(HeatmapPoint.prototype, PointEventsMixin);\n    deepExtend(HeatmapPoint.prototype, NoteMixin);\n\n    HeatmapPoint.prototype.defaults = {\n        markers: {\n            type: 'rect',\n            borderRadius: 4,\n            border: {\n                color: 'transparent'\n            }\n        },\n        padding: { top: 1 },\n        labels: {\n            visible: false,\n            padding: 3\n        },\n        opacity: 1,\n        notes: {\n            label: {}\n        }\n    };\n\n    var HeatmapChart = ChartElement.extend({\n        init: function(plotArea, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.plotArea = plotArea;\n            this.chartService = plotArea.chartService;\n            this._initFields();\n\n            this.render();\n        },\n\n        _initFields: function() {\n            this.points = [];\n            this.seriesOptions = [];\n            this.valueRange = { min: MAX_VALUE, max: MIN_VALUE };\n            this._evalSeries = [];\n        },\n\n        render: function() {\n            this.setRange();\n            this.traverseDataPoints(this.addValue.bind(this));\n        },\n\n        setRange: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref.options.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                    var ref$1 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                    var valueFields = ref$1.valueFields;\n                    if (defined(valueFields.value) && valueFields.value !== null) {\n                        this$1$1.valueRange.min = Math.min(this$1$1.valueRange.min, valueFields.value);\n                        this$1$1.valueRange.max = Math.max(this$1$1.valueRange.max, valueFields.value);\n                    }\n                }\n            }\n        },\n\n        addValue: function(value, fields) {\n            var point;\n            if (value && defined(value.value) && value.value !== null) {\n                point = this.createPoint(value, fields);\n                if (point) {\n                    $.extend(point, fields);\n                }\n            }\n\n            this.points.push(point);\n        },\n\n        evalPointOptions: function(options, value, fields) {\n            var series = fields.series;\n            var seriesIx = fields.seriesIx;\n            var state = {\n                defaults: series._defaults,\n                excluded: [\n                    \"data\", \"tooltip\", \"content\", \"template\",\n                    \"visual\", \"toggle\", \"drilldownSeriesFactory\"\n                ]\n            };\n\n            var doEval = this._evalSeries[seriesIx];\n            if (!defined(doEval)) {\n                this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n            }\n\n            var pointOptions = options;\n            if (doEval) {\n                pointOptions = deepExtend({}, options);\n                evalOptions(pointOptions, {\n                    value: value,\n                    series: series,\n                    dataItem: fields.dataItem,\n                    min: this.valueRange.min,\n                    max: this.valueRange.max\n                }, state);\n            }\n\n            return pointOptions;\n        },\n\n        pointType: function() {\n            return HeatmapPoint;\n        },\n\n        pointOptions: function(series, seriesIx) {\n            var options = this.seriesOptions[seriesIx];\n            if (!options) {\n                var defaults = this.pointType().prototype.defaults;\n                this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                    markers: {\n                        opacity: series.opacity\n                    },\n                    tooltip: {\n                        format: this.options.tooltip.format\n                    },\n                    labels: {\n                        format: this.options.labels.format\n                    }\n                }, series);\n            }\n\n            return options;\n        },\n\n        createPoint: function(value, fields) {\n            var series = fields.series;\n            var pointOptions = this.pointOptions(series, fields.seriesIx);\n            var color = fields.color || series.color;\n\n            pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n            if (isFunction(series.color)) {\n                color = pointOptions.color;\n            } else if (this.valueRange.max !== 0) {\n                var scale = colorScale(color);\n                color = scale(value.value / this.valueRange.max);\n            }\n\n            var point = new HeatmapPoint(value, pointOptions);\n            point.color = color;\n\n            this.append(point);\n\n            return point;\n        },\n\n        seriesAxes: function(series) {\n            var xAxisName = series.xAxis;\n            var yAxisName = series.yAxis;\n            var plotArea = this.plotArea;\n            var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n            var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n            if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n            }\n\n            if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n            }\n\n            return { xAxis: xAxis, yAxis: yAxis };\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var chartPoints = this.points;\n            var limit = !this.options.clip;\n            var pointIx = 0;\n\n            this.traverseDataPoints(function (value, fields) {\n                var point = chartPoints[pointIx++];\n                var ref = this$1$1.seriesAxes(fields.series);\n                var xAxis = ref.xAxis;\n                var yAxis = ref.yAxis;\n                var indexX = xAxis.categoryIndex(value.x);\n                var indexY = yAxis.categoryIndex(value.y);\n                var slotX = xAxis.getSlot(indexX, indexX, limit);\n                var slotY = yAxis.getSlot(indexY, indexY, limit);\n\n                if (point) {\n                    if (slotX && slotY) {\n                        var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                        point.reflow(pointSlot);\n                    } else {\n                        point.visible = false;\n                    }\n                }\n            });\n\n            this.box = targetBox;\n        },\n\n        pointSlot: function(slotX, slotY) {\n            return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n        },\n\n        traverseDataPoints: function(callback) {\n            var this$1$1 = this;\n\n            var ref = this;\n            var series = ref.options.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var ref$1 = this$1$1.seriesAxes(currentSeries);\n                var xAxis = ref$1.xAxis;\n                var yAxis = ref$1.yAxis;\n                var xRange = xAxis.currentRangeIndices();\n                var yRange = yAxis.currentRangeIndices();\n\n                for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                    var ref$2 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                    var value = ref$2.valueFields;\n                    var fields = ref$2.fields;\n                    var xIndex = xAxis.totalIndex(value.x);\n                    var yIndex = yAxis.totalIndex(value.y);\n                    var xIn = xRange.min <= xIndex && xIndex <= xRange.max;\n                    var yIn = yRange.min <= yIndex && yIndex <= yRange.max;\n\n                    if (xIn && yIn) {\n                        callback(value, deepExtend({\n                            pointIx: pointIx,\n                            series: currentSeries,\n                            seriesIx: seriesIx,\n                            dataItem: currentSeries.data[pointIx],\n                            owner: this$1$1\n                        }, fields));\n                    }\n                }\n            }\n        },\n\n        formatPointValue: function(point, format) {\n            var value = point.value;\n            return this.chartService.format.auto(format, value.x, value.y, value.value);\n        },\n\n        animationPoints: function() {\n            var points = this.points;\n            var result = [];\n            for (var idx = 0; idx < points.length; idx++) {\n                result.push((points[idx] || {}).marker);\n            }\n            return result;\n        }\n    });\n    setDefaultOptions(HeatmapChart, {\n        series: [],\n        tooltip: {\n            format: \"{0}, {1}: {2}\"\n        },\n        labels: {\n            format: \"{2}\"\n        },\n        clip: true\n    });\n\n    var HeatmapPlotArea = PlotAreaBase.extend({\n        initFields: function() {\n            this.namedXAxes = {};\n            this.namedYAxes = {};\n        },\n\n        render: function(panes) {\n            if (panes === void 0) { panes = this.panes; }\n\n            this.bindCategories();\n            this.createAxes(panes);\n            this.createCharts(panes);\n            this.createAxisLabels();\n        },\n\n        bindCategories: function() {\n            var this$1$1 = this;\n\n            var series = this.srcSeries || this.series;\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var data = currentSeries.data || [];\n                var ref = this$1$1.seriesAxes(currentSeries);\n                var xAxis = ref.xAxis;\n                var yAxis = ref.yAxis;\n\n                var xCategories = dataviz.createHashSet(xAxis.categories || []);\n                var yCategories = dataviz.createHashSet(yAxis.categories || []);\n\n                for (var pointIndex = 0; pointIndex < data.length; pointIndex++) {\n                    var ref$1 = SeriesBinder.current.bindPoint(currentSeries, pointIndex).valueFields;\n                    var x = ref$1.x;\n                    var y = ref$1.y;\n\n                    if (!xCategories.has(x)) {\n                        xCategories.add(x);\n                    }\n\n                    if (!yCategories.has(y)) {\n                        yCategories.add(y);\n                    }\n                }\n\n                xAxis.categories = xCategories.values();\n                yAxis.categories = yCategories.values();\n            }\n        },\n\n        createCharts: function(panes) {\n            var this$1$1 = this;\n\n            var seriesByPane = this.groupSeriesByPane();\n\n            for (var i = 0; i < panes.length; i++) {\n                var pane = panes[i];\n                var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n                this$1$1.addToLegend(paneSeries);\n                var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n                if (!filteredSeries) {\n                    continue;\n                }\n\n                this$1$1.createHeatmapChart(\n                    filterSeriesByType(filteredSeries, [ HEATMAP ]),\n                    pane\n                );\n            }\n        },\n\n        createHeatmapChart: function(series, pane) {\n            var chart = new HeatmapChart(this, {\n                series: series\n            });\n\n            this.appendChart(chart, pane);\n        },\n\n        seriesPaneName: function(series) {\n            var options = this.options;\n            var xAxisName = series.xAxis;\n            var xAxisOptions = [].concat(options.xAxis);\n            var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n            var yAxisName = series.yAxis;\n            var yAxisOptions = [].concat(options.yAxis);\n            var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n            var panes = options.panes || [ {} ];\n            var defaultPaneName = panes[0].name || \"default\";\n            var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n            return paneName;\n        },\n\n        seriesAxes: function(series) {\n            var xAxis;\n            var yAxis;\n\n            var options = this.options;\n\n            var xAxisOptions = [].concat(options.xAxis);\n            var xAxisName = series.xAxis;\n            if (xAxisName) {\n                xAxis = xAxisOptions.find(function (axis) { return axis.name === xAxisName; });\n            } else {\n                xAxis = xAxisOptions[0];\n            }\n\n            var yAxisOptions = [].concat(options.yAxis);\n            var yAxisName = series.yAxis;\n            if (yAxisName) {\n                yAxis = yAxisOptions.find(function (axis) { return axis.name === yAxisName; });\n            } else {\n                yAxis = yAxisOptions[0];\n            }\n\n            if (!xAxis) {\n                throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n            }\n\n            if (!yAxis) {\n                throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n            }\n\n            return { xAxis: xAxis, yAxis: yAxis };\n        },\n\n        createAxisLabels: function() {\n            var axes = this.axes;\n            for (var i = 0; i < axes.length; i++) {\n                axes[i].createLabels();\n            }\n        },\n\n        createXYAxis: function(options, vertical, axisIndex) {\n            var axisName = options.name;\n            var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n            var axisOptions = $.extend({\n                axisCrossingValue: 0\n            }, options, {\n                vertical: vertical,\n                reverse: (vertical || this.chartService.rtl) ? !options.reverse : options.reverse,\n                justified: false\n            });\n            var firstCategory = axisOptions.categories ? axisOptions.categories[0] : null;\n            var typeSamples = [ axisOptions.min, axisOptions.max, firstCategory ];\n            var series = this.series;\n\n            for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n                var currentSeries = series[seriesIx];\n                var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n                if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                    var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                    typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                    break;\n                }\n            }\n\n            var inferredDate;\n\n            for (var i = 0; i < typeSamples.length; i++) {\n                if (typeSamples[i] instanceof Date) {\n                    inferredDate = true;\n                    break;\n                }\n            }\n\n            var axisType;\n            if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n                axisType = dataviz.DateCategoryAxis;\n            } else {\n                axisType = CategoryAxis;\n            }\n\n            var axis = new axisType(axisOptions, this.chartService);\n            axis.axisIndex = axisIndex;\n\n            if (axisName) {\n                if (namedAxes[axisName]) {\n                    throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n                }\n                namedAxes[axisName] = axis;\n            }\n\n            this.appendAxis(axis);\n            axis.mapCategories();\n\n            return axis;\n        },\n\n        createAxes: function(panes) {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var xAxesOptions = [].concat(options.xAxis);\n            var xAxes = [];\n            var yAxesOptions = [].concat(options.yAxis);\n            var yAxes = [];\n\n            for (var idx = 0; idx < xAxesOptions.length; idx++) {\n                var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n                if (inArray(axisPane, panes)) {\n                    xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n                }\n            }\n\n            for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n                var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n                if (inArray(axisPane$1, panes)) {\n                    yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n                }\n            }\n\n            this.axisX = this.axisX || xAxes[0];\n            this.axisY = this.axisY || yAxes[0];\n        },\n\n        removeAxis: function(axis) {\n            var axisName = axis.options.name;\n\n            PlotAreaBase.fn.removeAxis.call(this, axis);\n\n            if (axis.options.vertical) {\n                delete this.namedYAxes[axisName];\n            } else {\n                delete this.namedXAxes[axisName];\n            }\n\n            if (axis === this.axisX) {\n                delete this.axisX;\n            }\n\n            if (axis === this.axisY) {\n                delete this.axisY;\n            }\n        },\n\n        _dispatchEvent: function(chart, e, eventType) {\n            var coords = chart._eventCoordinates(e);\n            var point = new Point(coords.x, coords.y);\n            var allAxes = this.axes;\n            var length = allAxes.length;\n            var xValues = [];\n            var yValues = [];\n\n            for (var i = 0; i < length; i++) {\n                var axis = allAxes[i];\n                var values = axis.options.vertical ? yValues : xValues;\n                appendIfNotNull(values, axis.getCategory(point));\n            }\n\n            if (xValues.length > 0 && yValues.length > 0) {\n                chart.trigger(eventType, {\n                    element: eventElement(e),\n                    originalEvent: e,\n                    x: singleItemOrArray(xValues),\n                    y: singleItemOrArray(yValues)\n                });\n            }\n        },\n\n        updateAxisOptions: function(axis, options) {\n            var vertical = axis.options.vertical;\n            var axes = this.groupAxes(this.panes);\n            var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n            updateAxisOptions$2(this.options, index, vertical, options);\n            updateAxisOptions$2(this.originalOptions, index, vertical, options);\n        },\n\n        crosshairOptions: function(axis) {\n            // Stack the crosshair above the series points.\n            return $.extend({}, axis.options.crosshair, { zIndex: 0 });\n        }\n    });\n\n    function updateAxisOptions$2(targetOptions, axisIndex, vertical, options) {\n        var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n        deepExtend(axisOptions, options);\n    }\n\n    setDefaultOptions(HeatmapPlotArea, {\n        xAxis: {},\n        yAxis: {}\n    });\n\n    deepExtend(HeatmapPlotArea.prototype, PlotAreaEventsMixin);\n\n    var COLOR = \"color\";\n    var FIRST = \"first\";\n    var FROM = \"from\";\n    var MAX = \"max\";\n    var MIN = \"min\";\n    var NOTE_TEXT = \"noteText\";\n    var SUMMARY_FIELD = \"summary\";\n    var TO = \"to\";\n\n    PlotAreaFactory.current.register(CategoricalPlotArea, [\n        BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA,\n        CANDLESTICK, OHLC, BULLET, VERTICAL_BULLET, BOX_PLOT, VERTICAL_BOX_PLOT,\n        RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL, RANGE_AREA, VERTICAL_RANGE_AREA ].concat( TRENDLINE_SERIES\n    ));\n\n    PlotAreaFactory.current.register(XYPlotArea, [\n        SCATTER, SCATTER_LINE, BUBBLE ].concat( TRENDLINE_SERIES\n    ));\n\n    PlotAreaFactory.current.register(PiePlotArea, [ PIE ]);\n    PlotAreaFactory.current.register(DonutPlotArea, [ DONUT ]);\n    PlotAreaFactory.current.register(FunnelPlotArea, [ FUNNEL, PYRAMID ]);\n\n    PlotAreaFactory.current.register(PolarPlotArea, [\n        POLAR_AREA, POLAR_LINE, POLAR_SCATTER ].concat( TRENDLINE_SERIES\n    ));\n\n    PlotAreaFactory.current.register(RadarPlotArea, [\n        RADAR_AREA, RADAR_COLUMN, RADAR_LINE ].concat( TRENDLINE_SERIES\n    ));\n\n    PlotAreaFactory.current.register(HeatmapPlotArea, [ HEATMAP ]);\n\n    SeriesBinder.current.register(\n        [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA ],\n        [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, ERROR_LOW_FIELD, ERROR_HIGH_FIELD, DRILLDOWN_FIELD ]\n    );\n\n    SeriesBinder.current.register(\n        [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n        [ FROM, TO ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n    );\n\n    SeriesBinder.current.register(\n        [ WATERFALL, HORIZONTAL_WATERFALL ],\n        [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, SUMMARY_FIELD, DRILLDOWN_FIELD ]\n    );\n\n    SeriesBinder.current.register([ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ], [ X, Y ], [ COLOR, DRILLDOWN_FIELD ]);\n    SeriesBinder.current.register([ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ], [ VALUE ], [ COLOR, DRILLDOWN_FIELD ]);\n\n    SeriesBinder.current.register(\n        [ FUNNEL, PYRAMID ],\n        [ VALUE ], [ CATEGORY, COLOR, \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n    );\n\n    DefaultAggregates.current.register(\n        [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA, WATERFALL, HORIZONTAL_WATERFALL ],\n        { value: MAX, color: FIRST, noteText: FIRST, errorLow: MIN, errorHigh: MAX }\n    );\n\n    DefaultAggregates.current.register(\n        [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n        { from: MIN, to: MAX, color: FIRST, noteText: FIRST }\n    );\n\n    DefaultAggregates.current.register(\n        [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ],\n        { value: MAX, color: FIRST }\n    );\n\n    SeriesBinder.current.register(\n        [ SCATTER, SCATTER_LINE, BUBBLE ],\n        [ X, Y ], [ COLOR, NOTE_TEXT, X_ERROR_LOW_FIELD, X_ERROR_HIGH_FIELD, Y_ERROR_LOW_FIELD, Y_ERROR_HIGH_FIELD ]\n    );\n\n    SeriesBinder.current.register(\n        [ BUBBLE ], [ X, Y, \"size\" ], [ COLOR, CATEGORY, NOTE_TEXT ]\n    );\n\n    SeriesBinder.current.register(\n        [ HEATMAP ],\n        [ X, Y, VALUE ], [ COLOR, NOTE_TEXT ]\n    );\n\n    SeriesBinder.current.register(\n        [ CANDLESTICK, OHLC ],\n        [ \"open\", \"high\", \"low\", \"close\" ], [ CATEGORY, COLOR, \"downColor\", NOTE_TEXT ]\n    );\n\n    DefaultAggregates.current.register(\n        [ CANDLESTICK, OHLC ],\n        { open: MAX, high: MAX, low: MIN, close: MAX,\n          color: FIRST, downColor: FIRST, noteText: FIRST }\n    );\n\n    SeriesBinder.current.register(\n        [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n        [ \"lower\", \"q1\", \"median\", \"q3\", \"upper\", \"mean\", \"outliers\" ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n    );\n\n    DefaultAggregates.current.register(\n        [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n        { lower: MAX, q1: MAX, median: MAX, q3: MAX, upper: MAX, mean: MAX, outliers: FIRST,\n          color: FIRST, noteText: FIRST }\n    );\n\n    SeriesBinder.current.register(\n        [ BULLET, VERTICAL_BULLET ],\n        [ \"current\", \"target\" ], [ CATEGORY, COLOR, \"visibleInLegend\", NOTE_TEXT, DRILLDOWN_FIELD ]\n    );\n\n    DefaultAggregates.current.register(\n        [ BULLET, VERTICAL_BULLET ],\n        { current: MAX, target: MAX, color: FIRST, noteText: FIRST }\n    );\n\n    SeriesBinder.current.register(\n        [ PIE, DONUT ],\n        [ VALUE ], [ CATEGORY, COLOR, \"explode\", \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n    );\n\n    var AXIS_NAMES = [ CATEGORY, VALUE, X, Y ];\n\n    var MOUSEMOVE = \"mousemove\";\n    var CONTEXTMENU = \"contextmenu\";\n    var MOUSELEAVE = \"mouseleave\";\n    var MOUSEMOVE_DELAY = 20;\n\n    var Chart = Class.extend({\n        init: function(element, userOptions, themeOptions, context) {\n            var this$1$1 = this;\n            if (context === void 0) { context = {}; }\n\n            this.observers = [];\n            this.addObserver(context.observer);\n            this.chartService = new services.ChartService(this, context);\n            this.chartService.theme = themeOptions;\n\n            this._initElement(element);\n\n            var options = deepExtend({}, this.options, userOptions);\n            this._originalOptions = deepExtend({}, options);\n            this._theme = themeOptions;\n            this._initTheme(options, themeOptions);\n\n            this._initHandlers();\n            this._initSurface();\n\n            this.bindCategories();\n            dataviz.FontLoader.preloadFonts(userOptions, function () {\n                this$1$1.fontLoaded = true;\n                if (!this$1$1._destroyed) {\n                    this$1$1.trigger('init');\n                    this$1$1._redraw();\n                    this$1$1._attachEvents();\n                }\n            });\n        },\n\n        _initElement: function(element) {\n            this._setElementClass(element);\n            element.style.position = \"relative\";\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n            this.element = element;\n        },\n\n        _setElementClass: function(element) {\n            dataviz.addClass(element, \"k-chart\");\n        },\n\n        _initTheme: function(options, themeOptions) {\n            var seriesCopies = [];\n            var series = options.series || [];\n\n            for (var i = 0; i < series.length; i++) {\n                seriesCopies.push($.extend({}, series[i]));\n            }\n            options.series = seriesCopies;\n\n            resolveAxisAliases(options);\n            this.applyDefaults(options, themeOptions);\n\n            // Clean up default if not overriden by data attributes\n            if (options.seriesColors === null) {\n                delete options.seriesColors;\n            }\n\n            this.options = deepExtend({}, themeOptions, options);\n            this.applySeriesColors();\n        },\n\n        getSize: function() {\n            var chartArea = this.options.chartArea || {};\n            var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n            var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n\n            return {\n                width: width,\n                height: height\n            };\n        },\n\n        resize: function(force) {\n            var size = this.getSize();\n            var currentSize = this._size;\n            var hasSize = size.width > 0 || size.height > 0;\n\n            if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n                this._size = size;\n                this._resize(size, force);\n                this.trigger(\"resize\", size);\n            } else if (hasSize && this._selections && dataviz.find(this._selections, function (s) { return !s.visible; })) {\n                this._destroySelections();\n                this._setupSelection();\n            }\n        },\n\n        _resize: function() {\n            this._noTransitionsRedraw();\n        },\n\n        redraw: function(paneName) {\n            this.applyDefaults(this.options);\n            this.applySeriesColors();\n\n            if (paneName) {\n                var plotArea = this._model._plotArea;\n                var pane = plotArea.findPane(paneName);\n                plotArea.redraw(pane);\n            } else {\n                this._redraw();\n            }\n        },\n\n        getAxis: function(name) {\n            return findAxisByName(name, this._plotArea.axes);\n        },\n\n        findAxisByName: function(name) {\n            return this.getAxis(name);\n        },\n\n        findPaneByName: function(name) {\n            var panes = this._plotArea.panes;\n\n            for (var idx = 0; idx < panes.length; idx++) {\n                if (panes[idx].options.name === name) {\n                    return new ChartPane(panes[idx]);\n                }\n            }\n        },\n\n        findPaneByIndex: function(idx) {\n            var panes = this._plotArea.panes;\n            if (panes[idx]) {\n                return new ChartPane(panes[idx]);\n            }\n        },\n\n        plotArea: function() {\n            return new ChartPlotArea(this._plotArea);\n        },\n\n        toggleHighlight: function(show, filter) {\n            var plotArea = this._plotArea;\n            var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n            var points;\n\n            if (isFunction(filter)) {\n                points = plotArea.filterPoints(filter);\n            } else {\n                var seriesName, categoryName;\n                if (isObject(filter)) {\n                    seriesName = filter.series;\n                    categoryName = filter.category;\n                } else {\n                    seriesName = categoryName = filter;\n                }\n\n                if (firstSeries.type === DONUT) {\n                    points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n                } else if (inArray(firstSeries.type, [ PIE, FUNNEL, PYRAMID ])) {\n                    points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n                } else {\n                    points = plotArea.pointsBySeriesName(seriesName);\n                }\n            }\n\n            if (points) {\n                this.togglePointsHighlight(show, points);\n            }\n        },\n\n        togglePointsHighlight: function(show, points) {\n            var highlight = this._highlight;\n            for (var idx = 0; idx < points.length; idx++) {\n                highlight.togglePointHighlight(points[idx], show);\n            }\n        },\n\n        showTooltip: function(filter) {\n            var shared = this._sharedTooltip();\n            var ref = this;\n            var tooltip = ref._tooltip;\n            var plotArea = ref._plotArea;\n            var point, categoryIndex;\n\n            if (isFunction(filter)) {\n                point = plotArea.findPoint(filter);\n                if (point && shared) {\n                    categoryIndex = point.categoryIx;\n                }\n            } else if (shared && defined(filter)) {\n                categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n            }\n\n            if (shared) {\n                if (categoryIndex >= 0) {\n                    var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n                    tooltip.showAt(points);\n                }\n            } else if (point) {\n                tooltip.show(point);\n            }\n        },\n\n        hideTooltip: function() {\n            this._tooltip.hide();\n        },\n\n        _initSurface: function() {\n            var surface = this.surface;\n            var wrap = this._surfaceWrap();\n\n            var chartArea = this.options.chartArea || {};\n            if (chartArea.width) {\n                dataviz.elementSize(wrap, { width: chartArea.width });\n            }\n            if (chartArea.height) {\n                dataviz.elementSize(wrap, { height: chartArea.height });\n            }\n\n            if (!surface || surface.options.type !== this.options.renderAs) {\n                this._destroySurface();\n\n                this.surface = drawing.Surface.create(wrap, {\n                    type: this.options.renderAs\n                });\n\n                this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n                this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n\n            } else {\n                this.surface.clear();\n                this.surface.resize();\n            }\n        },\n\n        _surfaceWrap: function() {\n            return this.element;\n        },\n\n        _redraw: function() {\n            var model = this._getModel();\n            this._size = {\n                width: model.options.width,\n                height: model.options.height\n            };\n\n            this._destroyView();\n\n            this._model = model;\n            this._plotArea = model._plotArea;\n\n            model.renderVisual();\n\n            if (this.options.transitions !== false) {\n                model.traverse(function(element) {\n                    if (element.animation) {\n                        element.animation.setup();\n                    }\n                });\n            }\n\n            this._initSurface();\n            this.surface.draw(model.visual);\n\n            if (this.options.transitions !== false) {\n                model.traverse(function(element) {\n                    if (element.animation) {\n                        element.animation.play();\n                    }\n                });\n            }\n\n            this._tooltip = this._createTooltip();\n            this._highlight = new Highlight();\n            this._setupSelection();\n            this._createPannable();\n            this._createZoomSelection();\n            this._createMousewheelZoom();\n\n            this.trigger(RENDER);\n            triggerPaneRender(this._plotArea.panes);\n\n            if (!this._navState) {\n                this._cancelDomEvents();\n            }\n        },\n\n        exportVisual: function(exportOptions) {\n            var visual;\n            if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n                var currentOptions = this.options;\n                var options = deepExtend({}, exportOptions.options, {\n                    chartArea: {\n                        width: exportOptions.width,\n                        height: exportOptions.height\n                    }\n                });\n\n                clearMissingValues(this._originalOptions, options);\n                this.options = deepExtend({}, this._originalOptions, options);\n                this._initTheme(this.options, this._theme);\n                this.bindCategories();\n\n                var model = this._getModel();\n\n                model.renderVisual();\n                triggerPaneRender(model._plotArea.panes);\n\n                visual = model.visual;\n\n                this.options = currentOptions;\n            } else {\n                visual = this.surface.exportVisual();\n            }\n\n            return visual;\n        },\n\n        _sharedTooltip: function() {\n            return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n        },\n\n        _createPannable: function() {\n            var options = this.options;\n            if (options.pannable !== false) {\n                this._pannable = new Pannable(this._plotArea, options.pannable);\n            }\n        },\n\n        _createZoomSelection: function() {\n            var zoomable = this.options.zoomable;\n            var selection = (zoomable || {}).selection;\n            if (zoomable !== false && selection !== false) {\n                this._zoomSelection = new ZoomSelection(this, selection);\n            }\n        },\n\n        _createMousewheelZoom: function() {\n            var zoomable = this.options.zoomable;\n            var mousewheel = (zoomable || {}).mousewheel;\n            if (zoomable !== false && mousewheel !== false) {\n                this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n            }\n        },\n\n        _toggleDragZoomEvents: function() {\n            var pannable = this.options.pannable;\n            var zoomable = this.options.zoomable;\n            var selection = (zoomable || {}).selection;\n            var mousewheel = (zoomable || {}).mousewheel;\n            var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ]);\n            var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ ZOOM_START, ZOOM, ZOOM_END ]);\n            var element = this.element;\n\n            if (this._dragZoomEnabled && allowDrag && allowZoom) {\n                element.style.touchAction = this._touchAction || '';\n                this._dragZoomEnabled = false;\n            } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n                element.style.touchAction = \"none\";\n\n                this._dragZoomEnabled = true;\n            }\n\n            this._toggleDomEvents(!allowDrag, !allowZoom);\n        },\n\n        _toggleDomEvents: function(drag, zoom) {\n            var domEvents = this.domEvents;\n            if (!domEvents) {\n                return;\n            }\n\n            if (domEvents.toggleDrag) {\n                domEvents.toggleDrag(drag);\n            }\n\n            if (domEvents.toggleZoom) {\n                domEvents.toggleZoom(zoom);\n            }\n        },\n\n        _createTooltip: function() {\n            var ref = this;\n            var tooltipOptions = ref.options.tooltip;\n            var tooltip;\n\n            if (this._sharedTooltip()) {\n                tooltip = this._createSharedTooltip(tooltipOptions);\n            } else {\n                tooltip = new Tooltip(this.chartService, tooltipOptions);\n            }\n\n            return tooltip;\n        },\n\n        _createSharedTooltip: function(options) {\n            return new SharedTooltip(this._plotArea, options);\n        },\n\n        applyDefaults: function(options, themeOptions) {\n            applyAxisDefaults(options, themeOptions);\n            applySeriesDefaults(options, themeOptions);\n        },\n\n        applySeriesColors: function() {\n            var options = this.options;\n            var series = options.series;\n            var colors = options.seriesColors || [];\n\n            for (var i = 0; i < series.length; i++) {\n                var currentSeries = series[i];\n                var seriesColor = colors[i % colors.length];\n                var defaults = currentSeries._defaults;\n\n                currentSeries.color = currentSeries.color || seriesColor;\n                if (defaults) {\n                    defaults.color = defaults.color || seriesColor;\n                }\n            }\n        },\n\n        _getModel: function() {\n            var options = this.options;\n            var plotArea = this._createPlotArea();\n            var model = new dataviz.RootElement(this._modelOptions());\n            model.chart = this;\n            model._plotArea = plotArea;\n\n            var title = Title.buildTitle(options.title);\n            var subtitle = Title.buildTitle(options.subtitle, {\n                align: options.title.align,\n                position: options.title.position\n            });\n            model.append.apply(model, Title.orderTitles([title, subtitle]));\n\n            if (options.legend && options.legend.visible) {\n                model.append(new Legend(plotArea.options.legend, this.chartService));\n            }\n            model.append(plotArea);\n            model.reflow();\n\n            return model;\n        },\n\n        _modelOptions: function() {\n            var options = this.options;\n            var size = this.getSize();\n\n            return deepExtend({\n                transitions: options.transitions,\n                width: size.width || datavizConstants.DEFAULT_WIDTH,\n                height: size.height || datavizConstants.DEFAULT_HEIGHT\n            }, options.chartArea);\n        },\n\n        _createPlotArea: function(skipSeries) {\n            var options = this.options;\n\n            var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n\n            return plotArea;\n        },\n\n        _setupSelection: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var axes = ref._plotArea.axes;\n            var selections = this._selections = [];\n\n            for (var i = 0; i < axes.length; i++) {\n                var axis = axes[i];\n                var options = axis.options;\n                if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n                    var range = axis.range();\n\n                    var selection = new Selection(this$1$1, axis,\n                        deepExtend({ min: range.min, max: range.max }, options.select)\n                    );\n\n                    selections.push(selection);\n                }\n            }\n        },\n\n        _selectStart: function(e) {\n            return this.trigger(SELECT_START, e);\n        },\n\n        _select: function(e) {\n            return this.trigger(SELECT, e);\n        },\n\n        _selectEnd: function(e) {\n            return this.trigger(SELECT_END, e);\n        },\n\n        _initHandlers: function() {\n            this._clickHandler = this._click.bind(this);\n            this._mousewheelHandler = this._mousewheel.bind(this);\n            this._mouseleaveHandler = this._mouseleave.bind(this);\n            this._surfaceMouseenterHandler = this._mouseover.bind(this);\n            this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n\n            this._mousemove = kendo.throttle(\n                this._mousemove.bind(this),\n                MOUSEMOVE_DELAY\n            );\n        },\n\n        addObserver: function(observer) {\n            if (observer) {\n                this.observers.push(observer);\n            }\n        },\n\n        removeObserver: function(observer) {\n            var index = this.observers.indexOf(observer);\n            if (index >= 0) {\n                this.observers.splice(index, 1);\n            }\n        },\n\n        requiresHandlers: function(eventNames) {\n            var observers = this.observers;\n            for (var idx = 0; idx < observers.length; idx++) {\n                if (observers[idx].requiresHandlers(eventNames)) {\n                    return true;\n                }\n            }\n        },\n\n        trigger: function(name, args) {\n            if (args === void 0) { args = {}; }\n\n            args.sender = this;\n\n            if (name === SHOW_TOOLTIP) {\n                args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n            } else if (name === SERIES_OVER) {\n                this._updateDrilldownPoint(args.point);\n            } else if (name === SERIES_LEAVE) {\n                this._resetDrilldownPoint();\n            } else if (name === SERIES_CLICK) {\n                this._startDrilldown(args.point);\n            }\n\n            var observers = this.observers;\n            var isDefaultPrevented = false;\n            for (var idx = 0; idx < observers.length; idx++) {\n                if (observers[idx].trigger(name, args)) {\n                    isDefaultPrevented = true;\n                }\n            }\n\n            return isDefaultPrevented;\n        },\n\n        _attachEvents: function() {\n            var element = this.element;\n\n            this._touchAction = element.style.touchAction;\n\n            var obj;\n            bindEvents(element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n            if (this._shouldAttachMouseMove()) {\n                var obj$1;\n                bindEvents(element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n            }\n\n            this.domEvents = services.DomEventsBuilder.create(this.element, {\n                start: this._start.bind(this),\n                move: this._move.bind(this),\n                end: this._end.bind(this),\n                tap: this._tap.bind(this),\n                gesturestart: this._gesturestart.bind(this),\n                gesturechange: this._gesturechange.bind(this),\n                gestureend: this._gestureend.bind(this)\n            });\n\n            this._toggleDragZoomEvents();\n        },\n\n        _mouseleave: function(e) {\n            if (this._hoveredPoint) {\n                this._hoveredPoint.out(this, e);\n                this._hoveredPoint = null;\n            }\n\n            if (this._plotAreaHovered) {\n                this._plotAreaHovered = false;\n                this.trigger(PLOT_AREA_LEAVE);\n            }\n\n            if (this._hasInactiveOpacity() && this._activeChartInstance) {\n                this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n                this._updateSeriesOpacity(null, true);\n            }\n        },\n\n        _cancelDomEvents: function() {\n            if (this.domEvents && this.domEvents.cancel) {\n                this.domEvents.cancel();\n            }\n        },\n\n        _gesturestart: function(e) {\n            if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n                this._gestureDistance = e.distance;\n                this._unsetActivePoint();\n                this.surface.suspendTracking();\n            }\n        },\n\n        _gestureend: function(e) {\n            if (this._zooming && !this._stopChartHandlers(e)) {\n                if (this.surface) {\n                    this.surface.resumeTracking();\n                }\n                this._zooming = false;\n                this.trigger(ZOOM_END, {});\n            }\n        },\n\n        _gesturechange: function(e) {\n            var mousewheelZoom = this._mousewheelZoom;\n\n            if (mousewheelZoom && !this._stopChartHandlers(e)) {\n                e.preventDefault();\n                var previousGestureDistance = this._gestureDistance;\n                var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n                if (Math.abs(scaleDelta) >= 0.1) {\n                    scaleDelta = Math.round(scaleDelta * 10);\n\n                    this._gestureDistance = e.distance;\n                    var args = { delta: scaleDelta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                    if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                        var coords = this._eventCoordinates(e);\n\n                        if (!this._zooming) {\n                            this._zooming = true;\n                        }\n\n                        var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n                        if (ranges && !this.trigger(ZOOM, args)) {\n                            mousewheelZoom.zoom();\n                        }\n                    }\n                }\n            }\n        },\n\n        _mouseout: function(e) {\n            if (e.element) {\n                var element = this._drawingChartElement(e.element, e);\n\n                if (element && element.leave) {\n                    element.leave(this, e.originalEvent);\n                }\n            }\n        },\n\n        _start: function(e) {\n            var coords = this._eventCoordinates(e);\n\n            if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n                return;\n            }\n\n            if (this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ])) {\n                this._startNavigation(e, coords, DRAG_START);\n            }\n\n            if (this._pannable && this._pannable.start(e)) {\n                this.surface.suspendTracking();\n                this._unsetActivePoint();\n                this._suppressHover = true;\n                this.chartService.panning = true;\n            }\n\n            if (this._zoomSelection) {\n                if (this._zoomSelection.start(e)) {\n                    this.trigger(ZOOM_START, { axisRanges: axisRanges(this._plotArea.axes), originalEvent: e });\n                }\n            }\n        },\n\n        _move: function(e) {\n            var ref = this;\n            var state = ref._navState;\n            var pannable = ref._pannable;\n\n            if (this._stopChartHandlers(e)) {\n                return;\n            }\n\n            if (pannable) {\n                var ranges = pannable.move(e);\n\n                if (ranges && !this.trigger(DRAG, { axisRanges: ranges, originalEvent: e })) {\n                    pannable.pan();\n                }\n            } else if (state) {\n                var ranges$1 = {};\n                var axes = state.axes;\n\n                for (var i = 0; i < axes.length; i++) {\n                    var currentAxis = axes[i];\n                    var axisName = currentAxis.options.name;\n                    if (axisName) {\n                        var axis = currentAxis.options.vertical ? e.y : e.x;\n                        var delta = axis.startLocation - axis.location;\n\n                        if (delta !== 0) {\n                            ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n                        }\n                    }\n                }\n\n                state.axisRanges = ranges$1;\n                this.trigger(DRAG, {\n                    axisRanges: ranges$1,\n                    originalEvent: e\n                });\n            }\n\n            if (this._zoomSelection) {\n                this._zoomSelection.move(e);\n            }\n        },\n\n        _end: function(e) {\n            if (this._stopChartHandlers(e)) {\n                return;\n            }\n\n            var pannable = this._pannable;\n            if (pannable && pannable.end(e)) {\n                this.surface.resumeTracking();\n                this.trigger(DRAG_END, {\n                    axisRanges: axisRanges(this._plotArea.axes),\n                    originalEvent: e\n                });\n                this._suppressHover = false;\n                this.chartService.panning = false;\n            } else {\n                this._endNavigation(e, DRAG_END);\n            }\n\n            if (this._zoomSelection) {\n                var ranges = this._zoomSelection.end(e);\n                if (ranges && !this.trigger(ZOOM, { axisRanges: ranges, originalEvent: e })) {\n                    this._zoomSelection.zoom();\n                    this.trigger(ZOOM_END, { axisRanges: ranges, originalEvent: e });\n                }\n            }\n        },\n\n        _stopChartHandlers: function(e) {\n            var selections = this._selections || [];\n            if (!selections.length) {\n                return false;\n            }\n\n            var coords = this._eventCoordinates(e);\n            var pane = this._plotArea.paneByPoint(coords);\n            if (pane) {\n                for (var idx = 0; idx < selections.length; idx++) {\n                    if (selections[idx].onPane(pane)) {\n                        return true;\n                    }\n                }\n            }\n        },\n\n        _mousewheelZoomRate: function() {\n            var zoomable = this.options.zoomable;\n            var mousewheel = (zoomable || {}).mousewheel || {};\n            return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n        },\n\n        _mousewheel: function(e) {\n            var this$1$1 = this;\n\n            var delta = dataviz.mousewheelDelta(e);\n            var mousewheelZoom = this._mousewheelZoom;\n            var coords = this._eventCoordinates(e);\n\n            if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n                return;\n            }\n\n            if (mousewheelZoom) {\n                var args = { delta: delta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                    e.preventDefault();\n\n                    if (!this._zooming) {\n                        this._unsetActivePoint();\n                        this.surface.suspendTracking();\n                        this._zooming = true;\n                    }\n\n                    if (this._mwTimeout) {\n                        clearTimeout(this._mwTimeout);\n                    }\n\n                    args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n                    if (args.axisRanges && !this.trigger(ZOOM, args)) {\n                        mousewheelZoom.zoom();\n                    }\n\n                    this._mwTimeout = setTimeout(function () {\n                        this$1$1.trigger(ZOOM_END, args);\n                        this$1$1._zooming = false;\n                        if (this$1$1.surface) {\n                            this$1$1.surface.resumeTracking();\n                        }\n                    }, MOUSEWHEEL_DELAY);\n                }\n            } else {\n                var state = this._navState;\n                if (!state) {\n                    var prevented = this._startNavigation(e, coords, ZOOM_START);\n                    if (!prevented) {\n                        state = this._navState;\n                    }\n                }\n\n                if (state) {\n                    var totalDelta = state.totalDelta || delta;\n                    state.totalDelta = totalDelta + delta;\n\n                    var axes = this._navState.axes;\n                    var ranges = {};\n\n                    for (var i = 0; i < axes.length; i++) {\n                        var currentAxis = axes[i];\n                        var axisName = currentAxis.options.name;\n                        if (axisName) {\n                            ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1$1._mousewheelZoomRate(), coords);\n                        }\n                    }\n\n                    this.trigger(ZOOM, {\n                        delta: delta,\n                        axisRanges: ranges,\n                        originalEvent: e\n                    });\n\n                    if (this._mwTimeout) {\n                        clearTimeout(this._mwTimeout);\n                    }\n\n                    this._mwTimeout = setTimeout(function () {\n                        this$1$1._endNavigation(e, ZOOM_END);\n                    }, MOUSEWHEEL_DELAY);\n                }\n            }\n        },\n\n        _startNavigation: function(e, coords, chartEvent) {\n            var plotArea = this._model._plotArea;\n            var pane = plotArea.findPointPane(coords);\n            var axes = plotArea.axes.slice(0);\n\n            if (!pane) {\n                return;\n            }\n\n            var ranges = axisRanges(axes);\n\n            var prevented = this.trigger(chartEvent, {\n                axisRanges: ranges,\n                originalEvent: e\n            });\n\n            if (prevented) {\n                this._cancelDomEvents();\n            } else {\n                this._suppressHover = true;\n                this._unsetActivePoint();\n                this._navState = {\n                    axisRanges: ranges,\n                    pane: pane,\n                    axes: axes\n                };\n            }\n        },\n\n        _endNavigation: function(e, chartEvent) {\n            if (this._navState) {\n                this.trigger(chartEvent, {\n                    axisRanges: this._navState.axisRanges,\n                    originalEvent: e\n                });\n                this._suppressHover = false;\n                this._navState = null;\n            }\n        },\n\n        _getChartElement: function(e, match) {\n            var element = this.surface.eventTarget(e);\n            if (element) {\n                return this._drawingChartElement(element, e, match);\n            }\n        },\n\n        _drawingChartElement: function(element, e, match) {\n            var current = element;\n            var chartElement;\n            while (current && !chartElement) {\n                chartElement = current.chartElement;\n                current = current.parent;\n            }\n\n            if (chartElement) {\n                if (chartElement.aliasFor) {\n                    chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n                }\n\n                if (match) {\n                    chartElement = chartElement.closest(match);\n                    if (chartElement && chartElement.aliasFor) {\n                        chartElement = chartElement.aliasFor();\n                    }\n                }\n\n                return chartElement;\n            }\n        },\n\n        _eventCoordinates: function(e) {\n            var coordinates = dataviz.eventCoordinates(e);\n            return this._toModelCoordinates(coordinates.x, coordinates.y);\n        },\n\n        _elementPadding: function() {\n            if (!this._padding) {\n                var ref = elementStyles(this.element, [ \"paddingLeft\", \"paddingTop\" ]);\n                var paddingLeft = ref.paddingLeft;\n                var paddingTop = ref.paddingTop;\n                this._padding = {\n                    top: paddingTop,\n                    left: paddingLeft\n                };\n            }\n\n            return this._padding;\n        },\n\n        _toDocumentCoordinates: function(point) {\n            var padding = this._elementPadding();\n            var offset = dataviz.elementOffset(this.element);\n\n            return {\n                left: round(point.x + padding.left + offset.left),\n                top: round(point.y + padding.top + offset.top)\n            };\n        },\n\n        _toModelCoordinates: function(clientX, clientY) {\n            var element = this.element;\n            var offset = dataviz.elementOffset(element);\n            var padding = this._elementPadding();\n            var inverseTransform = dataviz.elementScale(element).invert();\n            var point = new GeometryPoint(\n                clientX - offset.left - padding.left,\n                clientY - offset.top - padding.top\n            ).transform(inverseTransform);\n\n            return new Point(point.x, point.y);\n        },\n\n        _tap: function(e) {\n            var this$1$1 = this;\n\n            var drawingElement = this.surface.eventTarget(e);\n            var element = this._drawingChartElement(drawingElement, e);\n            var sharedTooltip = this._sharedTooltip();\n\n            if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n                this._unsetActivePoint();\n            }\n\n            if (sharedTooltip) {\n                this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n            }\n\n            this._propagateClick(element, e);\n\n            //part of fix for hover issue on windows touch\n            this.handlingTap = true;\n            setTimeout(function () {\n                this$1$1.handlingTap = false;\n            }, 0);\n        },\n\n        _click: function(e) {\n            var element = this._getChartElement(e);\n            this._propagateClick(element, e);\n        },\n\n        _propagateClick: function(element, e) {\n            var this$1$1 = this;\n\n            var current = element;\n            while (current) {\n                if (current.click) {\n                    current.click(this$1$1, e);\n                }\n\n                current = current.parent;\n            }\n        },\n\n        _startHover: function(element, e) {\n            if (this._suppressHover) {\n                return false;\n            }\n\n            var point = this._drawingChartElement(element, e, function(element) {\n                return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n            });\n\n            this._showInactiveOpacity(point, e);\n\n            return point;\n        },\n\n        _displayTooltip: function(point) {\n            var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n            if (tooltipOptions.visible) {\n                this._tooltip.show(point);\n            }\n        },\n\n        _displayInactiveOpacity: function(activePoint, multipleSeries, highlightPoints) {\n            var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n            if (!chartInstance) {\n                return;\n            }\n\n            if (multipleSeries) {\n                this._updateSeriesOpacity(activePoint);\n                this._applySeriesOpacity(chartInstance.children, null, true);\n                this._applySeriesOpacity(chartInstance.children, activePoint.series);\n                this._highlight.show(highlightPoints || activePoint);\n            } else {\n                var inactivePoints;\n\n                if (!chartInstance.supportsPointInactiveOpacity()) {\n                    this._highlight.show(activePoint);\n                    return;\n                }\n\n                inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n                if (inactivePoints && inactivePoints.length) {\n                    this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n                }\n            }\n        },\n\n        _getInactivePoints: function(activePoint, chartInstance) {\n            var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n            return allPoints.filter(function (point) { return point !== activePoint; });\n        },\n\n        _getAllPointsOfType: function(container, type) {\n            var this$1$1 = this;\n\n            var points = [];\n\n            for (var i = 0; i < container.children.length; i++) {\n                var element = container.children[i];\n\n                if (element.constructor === type) {\n                    points.push(element);\n                } else if (element.children && element.children.length) {\n                    points = points.concat(this$1$1._getAllPointsOfType(element, type));\n                }\n            }\n\n            return points;\n        },\n\n        _updateHoveredPoint: function(point, e) {\n            var hoveredPoint = this._hoveredPoint;\n\n            if (hoveredPoint && hoveredPoint !== point) {\n                hoveredPoint.out(this, e);\n                this._hoveredPoint = null;\n            }\n\n            if (point && hoveredPoint !== point && point.over) {\n                this._hoveredPoint = point;\n                point.over(this, e);\n            }\n        },\n\n        _updateDrilldownPoint: function(point) {\n            if (!point || !point.series) {\n                return;\n            }\n\n            var ref = SeriesBinder.current.bindPoint(point.series, null, point.dataItem);\n            var fields = ref.fields;\n            if (fields.drilldown) {\n                this._drilldownState = { cursor: this.element.style.cursor };\n                this.element.style.cursor = 'pointer';\n            }\n        },\n\n        _resetDrilldownPoint: function() {\n            if (this._drilldownState) {\n                this.element.style.cursor = this._drilldownState.cursor;\n                this._drilldownState = null;\n            }\n        },\n\n        _startDrilldown: function(point) {\n            if (!point || !point.series) {\n                return;\n            }\n\n            var series = point.series;\n            var ref = SeriesBinder.current.bindPoint(series, null, point.dataItem);\n            var fields = ref.fields;\n            var value = fields.drilldown;\n            if (value) {\n                var args = { series: series, point: point, value: value, sender: this };\n                this.trigger(DRILLDOWN, args);\n            }\n        },\n\n        _updateSeriesOpacity: function(point, resetOpacity) {\n            var this$1$1 = this;\n\n            var plotArea = this._plotArea;\n            var length = plotArea.series.length;\n\n            for (var i = 0; i < length; i++) {\n                var currSeries = plotArea.series[i];\n                var defaultOpacity = this$1$1._getDefaultOpacityForSeries(currSeries);\n                var inactiveOpacity = this$1$1._getInactiveOpacityForSeries(currSeries);\n\n                if (!resetOpacity && currSeries !== point.series) {\n                    currSeries.defaultOpacity = defaultOpacity;\n                    currSeries.opacity = inactiveOpacity;\n\n                    if (currSeries.line) {\n                        currSeries.line.opacity = inactiveOpacity;\n                    }\n                } else {\n                    currSeries.opacity = defaultOpacity;\n\n                    if (currSeries.line) {\n                        currSeries.line.opacity = defaultOpacity;\n                    }\n                }\n            }\n        },\n\n        _applySeriesOpacity: function(elements, activeSeries, reset, series) {\n            var this$1$1 = this;\n\n            for (var i = 0; i < elements.length; i++) {\n                var element = elements[i];\n                var currSeries = element.series || series;\n                var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n                if (shouldHighlight && element.visual) {\n                    var opacity = series ? series.opacity : element.series.opacity;\n                    if (currSeries !== activeSeries || reset) {\n                        element.visual.opacity(reset ? 1 : opacity);\n                    }\n                }\n\n                if (element.children && element.children.length) {\n                    this$1$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n                }\n            }\n        },\n\n        _chartInstanceFromPoint: function(point) {\n            var chartInstance = point.parent;\n\n            while (chartInstance && !chartInstance.plotArea) {\n                chartInstance = chartInstance.parent;\n            }\n\n            return chartInstance;\n        },\n\n        _showInactiveOpacity: function(point, e) {\n            var activePoint = this._activePoint;\n            var multipleSeries = this._plotArea.series.length > 1;\n            var hasInactiveOpacity = this._hasInactiveOpacity();\n\n            this._updateHoveredPoint(point, e);\n\n            if (point && activePoint !== point && point.hover) {\n                this._activePoint = point;\n\n                if (!this._sharedTooltip() && !point.hover(this, e)) {\n                    this._displayTooltip(point);\n\n                    if (hasInactiveOpacity) {\n                        this._displayInactiveOpacity(point, multipleSeries);\n                    } else {\n                        this._highlight.show(point);\n                    }\n                }\n            }\n\n            return point;\n        },\n\n        _hideInactiveOpacity: function(point) {\n            var multipleSeries = this._plotArea.series.length > 1;\n            var hasInactiveOpacity = this._hasInactiveOpacity();\n            if (hasInactiveOpacity) {\n                if (multipleSeries && this._activeChartInstance) {\n                    this._updateSeriesOpacity(point, true);\n                    this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n                    this._activeChartInstance = null;\n                }\n                this._highlight && this._highlight.hide();\n                this._activePoint = null;\n            }\n        },\n\n        _hasInactiveOpacity: function() {\n            var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n            var hasInactiveOpacity = this.options.series.filter(function (s) { return s.highlight.inactiveOpacity !== undefined; } ).length > 0;\n            return hasDefaultInactiveOpacity || hasInactiveOpacity;\n        },\n\n        _getInactiveOpacityForSeries: function(series) {\n            var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n            var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n            return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n        },\n\n        _getDefaultOpacityForSeries: function(series) {\n            return series.defaultOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n        },\n\n        _mouseover: function(e) {\n            var point = this._startHover(e.element, e.originalEvent);\n\n            if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n                this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n                var obj;\n                bindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n            }\n        },\n\n        _mouseMoveTracking: function(e) {\n            var ref = this;\n            var options = ref.options;\n            var tooltip = ref._tooltip;\n            var highlight = ref._highlight;\n            var point = ref._activePoint;\n            var coords = this._eventCoordinates(e);\n\n            if (this._plotArea.box.containsPoint(coords)) {\n                if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n                    var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n                    if (seriesPoint && seriesPoint !== point) {\n                        this._activePoint = seriesPoint;\n\n                        if (!seriesPoint.hover(this, e)) {\n                            var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n                            if (tooltipOptions.visible) {\n                                tooltip.show(seriesPoint);\n                            }\n\n                            highlight.show(seriesPoint);\n                        }\n                    }\n                }\n            } else {\n                var obj;\n                unbindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n                this._unsetActivePoint();\n                this._mouseMoveTrackHandler = null;\n\n                this._hideInactiveOpacity(point);\n            }\n        },\n\n        _mousemove: function(e) {\n            var coords = this._eventCoordinates(e);\n            var plotArea = this._plotArea;\n\n            this._trackCrosshairs(coords);\n\n            if (plotArea.hover) {\n                var overPlotArea = plotArea.backgroundContainsPoint(coords);\n                if (overPlotArea) {\n                    this._plotAreaHovered = true;\n                    this._plotArea.hover(this, e);\n                } else if (this._plotAreaHovered && !overPlotArea) {\n                    this._plotAreaHovered = false;\n                    this.trigger(PLOT_AREA_LEAVE);\n                }\n            }\n\n            if (this._sharedTooltip()) {\n                this._trackSharedTooltip(coords, e);\n            }\n        },\n\n        _trackCrosshairs: function(coords) {\n            var crosshairs = this._plotArea.crosshairs;\n\n            for (var i = 0; i < crosshairs.length; i++) {\n                var current = crosshairs[i];\n\n                if (current.box.containsPoint(coords)) {\n                    current.showAt(coords);\n                } else {\n                    current.hide();\n                }\n            }\n        },\n\n        _trackSharedTooltip: function(coords, e, toggle) {\n            if (this._suppressHover) {\n                return;\n            }\n\n            var ref = this;\n            var tooltipOptions = ref.options.tooltip;\n            var plotArea = ref._plotArea;\n            var categoryAxis = ref._plotArea.categoryAxis;\n            var tooltip = ref._tooltip;\n            var highlight = ref._highlight;\n\n            if (plotArea.backgroundContainsPoint(coords)) {\n                var index = categoryAxis.pointCategoryIndex(coords);\n                if (index !== this._tooltipCategoryIx || (!this._sharedHighlight && toggle)) {\n                    var points = plotArea.pointsByCategoryIndex(index);\n                    var pointArgs = points.map(function(point) {\n                        return point.eventArgs(e);\n                    });\n                    var hoverArgs = pointArgs[0] || {};\n                    hoverArgs.categoryPoints = pointArgs;\n\n                    if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n                        if (tooltipOptions.visible) {\n                            tooltip.showAt(points, coords);\n                        }\n\n                        highlight.show(points);\n\n                        this._sharedHighlight = true;\n                    } else {\n                        tooltip.hide();\n                    }\n\n                    this._tooltipCategoryIx = index;\n                } else if (toggle && this._sharedHighlight) {\n                    highlight.hide();\n                    tooltip.hide();\n                    this._sharedHighlight = false;\n                }\n            } else if (this._sharedHighlight) {\n                highlight.hide();\n                tooltip.hide();\n                this._tooltipCategoryIx = null;\n                this._sharedHighlight = false;\n            }\n        },\n\n        hideElements: function(options) {\n            var plotArea = this._plotArea;\n            this._mousemove.cancel();\n\n            plotArea.hideCrosshairs();\n\n            this._unsetActivePoint(options);\n        },\n\n        _unsetActivePoint: function(options) {\n            var ref = this;\n            var tooltip = ref._tooltip;\n            var highlight = ref._highlight;\n\n            this._activePoint = null;\n            this._hoveredPoint = null;\n\n            if (tooltip && !(options && options.keepTooltipOpen)) {\n                tooltip.hide();\n            }\n\n            this._tooltipCategoryIx = null;\n            this._sharedHighlight = false;\n\n            if (highlight) {\n                highlight.hide();\n            }\n        },\n\n        _deferRedraw: function() {\n            this._redraw();\n        },\n\n        _clearRedrawTimeout: function() {\n            if (this._redrawTimeout) {\n                clearInterval(this._redrawTimeout);\n                this._redrawTimeout = null;\n            }\n        },\n\n        bindCategories: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var definitions = [].concat(options.categoryAxis);\n\n            for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n                var axis = definitions[axisIx];\n                if (axis.autoBind !== false) {\n                    this$1$1.bindCategoryAxisFromSeries(axis, axisIx);\n                }\n            }\n        },\n\n        bindCategoryAxisFromSeries: function(axis, axisIx) {\n            var this$1$1 = this;\n\n            var series = this.options.series;\n            var seriesLength = series.length;\n            var uniqueCategories = new dataviz.HashMap();//perf improvement in case type category with dates\n            var items = [];\n            var bindable = false;\n            var dateAxis;\n\n            for (var seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                var s = series[seriesIx];\n                var onAxis = s.categoryAxis === axis.name || (!s.categoryAxis && axisIx === 0);\n                var data = s.data;\n                var dataLength = data.length;\n                var bind = s.categoryField && onAxis;\n                bindable = bind || bindable;\n\n                if (bind && dataLength > 0) {\n                    dateAxis = isDateAxis(axis, getField(s.categoryField, data[0]));\n\n                    var getFn = dateAxis ? getDateField : getField;\n\n                    for (var dataIx = 0; dataIx < dataLength; dataIx++) {\n                        var dataRow = data[dataIx];\n                        var category = getFn(s.categoryField, dataRow, this$1$1.chartService.intl);\n\n                        if (dateAxis || !uniqueCategories.get(category)) {\n                            items.push([ category, dataRow ]);\n\n                            if (!dateAxis) {\n                                uniqueCategories.set(category, true);\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (items.length > 0) {\n                if (dateAxis) {\n                    items = uniqueDates(items, function(a, b) {\n                        return dataviz.dateComparer(a[0], b[0]);\n                    });\n                }\n\n                var result = transpose(items);\n                axis.categories = result[0];\n            } else if (bindable) {\n                axis.categories = [];\n            }\n        },\n\n        _isBindable: function(series) {\n            var valueFields = SeriesBinder.current.valueFields(series);\n            var result = true;\n\n            for (var i = 0; i < valueFields.length; i++) {\n                var field = valueFields[i];\n                if (field === VALUE) {\n                    field = \"field\";\n                } else {\n                    field = field + \"Field\";\n                }\n\n                if (!defined(series[field])) {\n                    result = false;\n                    break;\n                }\n            }\n\n            return result;\n        },\n\n        _noTransitionsRedraw: function() {\n            var options = this.options;\n            var transitionsState;\n\n            if (options.transitions !== false) {\n                options.transitions = false;\n                transitionsState = true;\n            }\n\n            this._redraw();\n\n            if (transitionsState) {\n                options.transitions = true;\n            }\n        },\n\n        _legendItemHover: function(seriesIndex, pointIndex) {\n            var ref = this;\n            var plotArea = ref._plotArea;\n            var highlight = ref._highlight;\n            var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n            var items;\n\n            if (inArray(currentSeries.type, [ PIE, DONUT, FUNNEL, PYRAMID ])) {\n                items = plotArea.findPoint(function(point) {\n                    return point.series.index === seriesIndex && point.index === pointIndex;\n                });\n            } else {\n                items = plotArea.pointsBySeriesIndex(seriesIndex);\n            }\n\n            if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n                var multipleSeries = plotArea.series.length > 1;\n                var point = items.length ? items[0] : items;\n\n                this._displayInactiveOpacity(point, multipleSeries, items);\n            } else {\n                highlight.show(items);\n            }\n        },\n\n        _shouldAttachMouseMove: function() {\n            return this._plotArea.crosshairs.length || (this._tooltip && this._sharedTooltip()) || this.requiresHandlers([ PLOT_AREA_HOVER, PLOT_AREA_LEAVE ]);\n        },\n\n        updateMouseMoveHandler: function() {\n            var obj;\n            unbindEvents(this.element, ( obj = {}, obj[ MOUSEMOVE ] = this._mousemove, obj ));\n\n            if (this._shouldAttachMouseMove()) {\n                var obj$1;\n                bindEvents(this.element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n            }\n        },\n\n        applyOptions: function(options, theme) {\n            clearMissingValues(this._originalOptions, options);\n            this._originalOptions = deepExtend(this._originalOptions, options);\n            this.options = deepExtend({}, this._originalOptions);\n\n            if (theme) {\n                this._theme = theme;\n                this.chartService.theme = theme;\n            }\n            this._initTheme(this.options, this._theme);\n\n            this._toggleDragZoomEvents();\n        },\n\n        setOptions: function(options, theme) {\n            this.applyOptions(options, theme);\n            this.bindCategories();\n            this.redraw();\n            this.updateMouseMoveHandler();\n        },\n\n        setDirection: function(rtl) {\n            this.chartService.rtl = Boolean(rtl);\n            if (this.surface && this.surface.type === 'svg') {\n                this._destroySurface();\n            }\n        },\n\n        setIntlService: function(intl) {\n            this.chartService.intl = intl;\n        },\n\n        noTransitionsRedraw: function() {\n            this._noTransitionsRedraw();\n        },\n\n        destroy: function() {\n            this._destroyed = true;\n\n            var obj;\n            unbindEvents(this.element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSEMOVE ] = this._mousemove, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj ));\n\n            if (this.domEvents) {\n                this.domEvents.destroy();\n                delete this.domEvents;\n            }\n\n            if (this._mouseMoveTrackHandler) {\n                var obj$1;\n                unbindEvents(document, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj$1 ));\n            }\n\n            this._destroyView();\n\n            this._destroySurface();\n\n            this._clearRedrawTimeout();\n        },\n\n        _destroySurface: function() {\n            var surface = this.surface;\n            if (surface) {\n                surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n                surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n                surface.destroy();\n\n                this.surface = null;\n            }\n        },\n\n        _destroySelections: function() {\n            var selections = this._selections;\n\n            if (selections) {\n                while (selections.length > 0) {\n                    selections.shift().destroy();\n                }\n            }\n        },\n\n        _destroyView: function() {\n            var model = this._model;\n\n            if (model) {\n                model.destroy();\n                this._model = null;\n            }\n\n            this._unsetActivePoint();\n            this._resetDrilldownPoint();\n            this._destroySelections();\n\n            if (this._tooltip) {\n                this._tooltip.destroy();\n            }\n\n            if (this._highlight) {\n                this._highlight.destroy();\n            }\n\n            if (this._zoomSelection) {\n                this._zoomSelection.destroy();\n                delete this._zoomSelection;\n            }\n\n            if (this._pannable) {\n                this._pannable.destroy();\n                delete this._pannable;\n            }\n\n            if (this._mousewheelZoom) {\n                this._mousewheelZoom.destroy();\n                delete this._mousewheelZoom;\n            }\n        }\n    });\n\n    function resolveAxisAliases(options) {\n        var aliases = AXIS_NAMES;\n\n        for (var idx = 0; idx < aliases.length; idx++) {\n            var alias = aliases[idx] + \"Axes\";\n            if (options[alias]) {\n                options[aliases[idx] + \"Axis\"] = options[alias];\n                delete options[alias];\n            }\n        }\n    }\n\n    function pointByCategoryName(points, name) {\n        if (points) {\n            for (var idx = 0; idx < points.length; idx++) {\n                if (points[idx].category === name) {\n                    return [ points[idx] ];\n                }\n            }\n        }\n    }\n\n    function applyAxisDefaults(options, themeOptions) {\n        var themeAxisDefaults = ((themeOptions || {}).axisDefaults) || {};\n        var axisName, axisDefaults, axes;\n\n        function mapAxisOptions(axisOptions) {\n            var axisColor = (axisOptions || {}).color || axisDefaults.color;\n            var result = deepExtend({},\n                themeAxisDefaults,\n                themeAxisDefaults[axisName],\n                axisDefaults,\n                axisDefaults[axisName], {\n                    line: { color: axisColor },\n                    labels: { color: axisColor },\n                    title: { color: axisColor }\n                },\n                axisOptions\n            );\n\n            delete result[axisName];\n\n            return result;\n        }\n\n        for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n            axisName = AXIS_NAMES[idx] + \"Axis\";\n            axisDefaults = options.axisDefaults || {};\n            axes = [].concat(options[axisName]);\n\n            axes = axes.map(mapAxisOptions);\n\n            options[axisName] = axes.length > 1 ? axes : axes[0];\n        }\n    }\n\n    function applySeriesDefaults(options, themeOptions) {\n        var series = options.series;\n        var seriesLength = series.length;\n        var seriesDefaults = options.seriesDefaults;\n        var commonDefaults = deepExtend({}, options.seriesDefaults);\n        var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n        var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n\n        cleanupNestedSeriesDefaults(commonDefaults);\n        cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n        for (var i = 0; i < seriesLength; i++) {\n            var seriesType = series[i].type || options.seriesDefaults.type;\n\n            var baseOptions = deepExtend(\n                { data: [] },\n                commonThemeDefaults,\n                themeSeriesDefaults[seriesType],\n                { tooltip: options.tooltip },\n                commonDefaults,\n                seriesDefaults[seriesType]\n            );\n\n            series[i]._defaults = baseOptions;\n            series[i] = deepExtend({}, baseOptions, series[i]);\n            series[i].data = series[i].data || [];\n        }\n    }\n\n    function cleanupNestedSeriesDefaults(seriesDefaults) {\n        delete seriesDefaults.bar;\n        delete seriesDefaults.column;\n        delete seriesDefaults.rangeColumn;\n        delete seriesDefaults.line;\n        delete seriesDefaults.verticalLine;\n        delete seriesDefaults.pie;\n        delete seriesDefaults.donut;\n        delete seriesDefaults.area;\n        delete seriesDefaults.verticalArea;\n        delete seriesDefaults.scatter;\n        delete seriesDefaults.scatterLine;\n        delete seriesDefaults.bubble;\n        delete seriesDefaults.candlestick;\n        delete seriesDefaults.ohlc;\n        delete seriesDefaults.boxPlot;\n        delete seriesDefaults.bullet;\n        delete seriesDefaults.verticalBullet;\n        delete seriesDefaults.polarArea;\n        delete seriesDefaults.polarLine;\n        delete seriesDefaults.radarArea;\n        delete seriesDefaults.radarLine;\n        delete seriesDefaults.waterfall;\n    }\n\n    function axisRanges(axes) {\n        var ranges = {};\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var axisName = axis.options.name;\n            if (axisName) {\n                ranges[axisName] = axis.range();\n            }\n        }\n\n        return ranges;\n    }\n\n    function sortDates(dates, comparer) {\n        if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n        for (var i = 1, length = dates.length; i < length; i++) {\n            if (comparer(dates[i], dates[i - 1]) < 0) {\n                dates.sort(comparer);\n                break;\n            }\n        }\n\n        return dates;\n    }\n\n    function uniqueDates(srcDates, comparer) {\n        if (comparer === void 0) { comparer = dataviz.dateComparer; }\n\n        var dates = sortDates(srcDates, comparer);\n        var length = dates.length;\n        var result = length > 0 ? [ dates[0] ] : [];\n\n        for (var i = 1; i < length; i++) {\n            if (comparer(dates[i], last(result)) !== 0) {\n                result.push(dates[i]);\n            }\n        }\n\n        return result;\n    }\n\n    function transpose(rows) {\n        var rowCount = rows.length;\n        var result = [];\n\n        for (var rowIx = 0; rowIx < rowCount; rowIx++) {\n            var row = rows[rowIx];\n            var colCount = row.length;\n\n            for (var colIx = 0; colIx < colCount; colIx++) {\n                result[colIx] = result[colIx] || [];\n                result[colIx].push(row[colIx]);\n            }\n        }\n\n        return result;\n    }\n\n    var DATA_FIELDS = [ 'data', 'categories' ];\n\n    function clearMissingValues(originalOptions, options) {\n        for (var field in options) {\n            if (!inArray(field, DATA_FIELDS) && options.hasOwnProperty(field)) {\n                var fieldValue = options[field];\n                var originalValue = originalOptions[field];\n                if (defined(originalValue)) {\n                    var nullValue = fieldValue === null;\n                    if ((nullValue || !defined(fieldValue))) {\n                        delete originalOptions[field];\n                        if (nullValue) {\n                            delete options[field];\n                        }\n                    } else if (originalValue && isObject(fieldValue)) {\n                        if (isObject(originalValue)) {\n                            clearMissingValues(originalValue, fieldValue);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    function triggerPaneRender(panes) {\n        for (var idx = 0; idx < panes.length; idx++) {\n            panes[idx].notifyRender();\n        }\n    }\n\n    setDefaultOptions(Chart, {\n        renderAs: \"\",\n        chartArea: {},\n        legend: {\n            visible: true,\n            labels: {}\n        },\n        categoryAxis: {},\n        seriesDefaults: {\n            type: COLUMN,\n            data: [],\n            highlight: {\n                visible: true\n            },\n            labels: {},\n            negativeValues: {\n                visible: false\n            }\n        },\n        series: [],\n        seriesColors: null,\n        tooltip: {\n            visible: false\n        },\n        transitions: true,\n        valueAxis: {},\n        plotArea: {},\n        title: {},\n        xAxis: {},\n        yAxis: {},\n        panes: [ {} ],\n        pannable: false,\n        zoomable: false\n    });\n\n    kendo.deepExtend(kendo.dataviz, {\n        constants: constants,\n        Aggregates: Aggregates,\n        AreaChart: AreaChart,\n        AreaSegment: AreaSegment,\n        AxisGroupRangeTracker: AxisGroupRangeTracker,\n        Bar: Bar,\n        BarChart: BarChart,\n        BarLabel: BarLabel,\n        BoxPlotChart: BoxPlotChart,\n        BoxPlot: BoxPlot,\n        BubbleChart: BubbleChart,\n        Bullet: Bullet,\n        BulletChart: BulletChart,\n        CandlestickChart: CandlestickChart,\n        Candlestick: Candlestick,\n        CategoricalChart: CategoricalChart,\n        CategoricalErrorBar: CategoricalErrorBar,\n        CategoricalPlotArea: CategoricalPlotArea,\n        Chart: Chart,\n        ChartContainer: ChartContainer,\n        ClipAnimation: ClipAnimation,\n        ClusterLayout: ClusterLayout,\n        Crosshair: Crosshair,\n        CrosshairTooltip: CrosshairTooltip,\n        DefaultAggregates: DefaultAggregates,\n        DonutChart: DonutChart,\n        DonutPlotArea: DonutPlotArea,\n        DonutSegment: DonutSegment,\n        ErrorBarBase: ErrorBarBase,\n        ErrorRangeCalculator: ErrorRangeCalculator,\n        Highlight: Highlight,\n        SharedTooltip: SharedTooltip,\n        Legend: Legend,\n        LegendItem: LegendItem,\n        LegendLayout: LegendLayout,\n        LineChart: LineChart,\n        LinePoint: LinePoint,\n        LineSegment: LineSegment,\n        Pane: Pane,\n        PieAnimation: PieAnimation,\n        PieChart: PieChart,\n        PieChartMixin: PieChartMixin,\n        PiePlotArea: PiePlotArea,\n        PieSegment: PieSegment,\n        PlotAreaBase: PlotAreaBase,\n        PlotAreaEventsMixin: PlotAreaEventsMixin,\n        PlotAreaFactory: PlotAreaFactory,\n        PointEventsMixin: PointEventsMixin,\n        RangeBar: RangeBar,\n        RangeBarChart: RangeBarChart,\n        RangeAreaPoint: RangeAreaPoint,\n        RangeAreaChart: RangeAreaChart,\n        ScatterChart: ScatterChart,\n        ScatterErrorBar: ScatterErrorBar,\n        ScatterLineChart: ScatterLineChart,\n        Selection: Selection,\n        SeriesAggregator: SeriesAggregator,\n        SeriesBinder: SeriesBinder,\n        SplineSegment: SplineSegment,\n        SplineAreaSegment: SplineAreaSegment,\n        StackWrap: StackWrap,\n        Tooltip: Tooltip,\n        OHLCChart: OHLCChart,\n        OHLCPoint: OHLCPoint,\n        WaterfallChart: WaterfallChart,\n        WaterfallSegment: WaterfallSegment,\n        XYPlotArea: XYPlotArea,\n        MousewheelZoom: MousewheelZoom,\n        ZoomSelection: ZoomSelection,\n        Pannable: Pannable,\n        ChartAxis: ChartAxis,\n        ChartPane: ChartPane,\n        ChartPlotArea: ChartPlotArea,\n        findAxisByName: findAxisByName,\n        anyHasZIndex: anyHasZIndex,\n        appendIfNotNull: appendIfNotNull,\n        areNumbers: areNumbers,\n        bindSegments: bindSegments,\n        categoriesCount: categoriesCount,\n        countNumbers: countNumbers,\n        equalsIgnoreCase: equalsIgnoreCase,\n        evalOptions: evalOptions,\n        filterSeriesByType: filterSeriesByType,\n        getDateField: getDateField,\n        getField: getField,\n        hasGradientOverlay: hasGradientOverlay,\n        hasValue: hasValue,\n        isDateAxis: isDateAxis,\n        segmentVisible: segmentVisible,\n        singleItemOrArray: singleItemOrArray,\n        createOutOfRangePoints: createOutOfRangePoints\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n        var kendo = window.kendo;\n        var dataviz = kendo.dataviz;\n        var Widget = kendo.ui.Widget;\n\n        var ChartBreadcrumb = Widget.extend({\n            init: function(element, options) {\n                Widget.fn.init.call(this, element, options);\n\n                if (!options.chart) {\n                    throw new Error('ChartBreadcrumb: No Chart instance supplied as `options.chart`');\n                }\n\n                this._attachChartEvents();\n                this._renderBreadcrumb();\n\n                kendo.notify(this, dataviz.ui);\n            },\n\n            events: [],\n\n            options: {\n                name: \"ChartBreadcrumb\",\n                rootItem: {\n                    type: 'rootitem',\n                    icon: 'home',\n                    text: 'Home',\n                    showIcon: true\n                }\n            },\n\n            destroy: function() {\n                if (this.breadcrumb) {\n                    this.breadcrumb.destroy();\n                    this.breadcrumb = null;\n                }\n\n                if (this.chart) {\n                    this.chart.unbind('drilldown', this._onChartDrilldown);\n                    this.chart.unbind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n                    this.chart = null;\n                }\n\n                Widget.fn.destroy.call(this);\n            },\n\n            _attachChartEvents: function _attachChartEvents(deferred) {\n                var this$1$1 = this;\n\n                var options = this.options;\n\n                if (typeof options.chart.resetDrilldownLevel === 'function') {\n                    this.chart = options.chart;\n                } else if (typeof options.chart === 'string') {\n                    this.chart = $(options.chart).getKendoChart() || $('#' + options.chart).getKendoChart();\n\n                    if (!this.chart && !deferred) {\n                        setTimeout(function () { return this$1$1._attachChartEvents(true); });\n                        return;\n                    }\n                } else {\n                    throw new Error('ChartBreadcrumb: `options.chart` must be a Chart instance, element ID or a selector');\n                }\n\n                this._onChartDrilldown = this._onChartDrilldown.bind(this);\n                this.chart.bind('drilldown', this._onChartDrilldown);\n\n                this._onChartDrilldownLevelChange = this._onChartDrilldownLevelChange.bind(this);\n                this.chart.bind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n            },\n\n            _renderBreadcrumb: function() {\n                var this$1$1 = this;\n\n                var breadcrumbElement = $('<nav />');\n                this.element.append(breadcrumbElement);\n                this.breadcrumb = new kendo.ui.Breadcrumb(breadcrumbElement, {\n                    items: [this.options.rootItem]\n                });\n\n                this.breadcrumb.bind('click', function (e) { return this$1$1._onBreadcrumbClick(e); });\n            },\n\n            _onBreadcrumbClick: function(e) {\n                if (!this.breadcrumb || !this.chart) {\n                    return;\n                }\n\n                var items = this.breadcrumb.items();\n                var level = items.findIndex(function (item) { return item === e.item; });\n\n                var chart = this.chart;\n                chart.resetDrilldownLevel(level);\n            },\n\n            _onChartDrilldown: function(e) {\n                if (!this.breadcrumb || e.isDefaultPrevented()) {\n                    return;\n                }\n\n                this.breadcrumb.items(this.breadcrumb.items().concat( [{ type: 'item', text: e.point.category }]\n                ));\n            },\n\n            _onChartDrilldownLevelChange: function(e) {\n                if (!this.breadcrumb) {\n                    return;\n                }\n\n                var items = this.breadcrumb.items();\n                items = items.slice(0, e.level + 1);\n                this.breadcrumb.items(items);\n            }\n        });\n\n        dataviz.ui.plugin(ChartBreadcrumb);\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n        var NS = \".kendoChart\";\n        var kendo = window.kendo;\n        var Class = kendo.Class;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var dataviz = kendo.dataviz;\n        var constants = dataviz.constants;\n        var KendoChart = dataviz.Chart;\n        var SeriesBinder = dataviz.SeriesBinder;\n        var Widget = kendo.ui.Widget;\n        var DataSource = kendo.data.DataSource;\n        var deepExtend = kendo.deepExtend;\n        var defined = dataviz.defined;\n        var getField = dataviz.getField;\n        var InstanceObserver = dataviz.InstanceObserver;\n        var inArray = dataviz.inArray;\n        var services = dataviz.services;\n        var isArray = Array.isArray;\n        var extend = $.extend;\n        var template = kendo.template;\n        var encode = kendo.htmlEncode;\n\n        var MOUSELEAVE_NS = \"mouseleave\" + NS;\n        var AXIS_LABEL_CLICK = constants.AXIS_LABEL_CLICK;\n        var LEGEND_ITEM_CLICK = constants.LEGEND_ITEM_CLICK;\n        var LEGEND_ITEM_HOVER = constants.LEGEND_ITEM_HOVER;\n        var LEGEND_ITEM_LEAVE = constants.LEGEND_ITEM_LEAVE;\n        var SERIES_CLICK = constants.SERIES_CLICK;\n        var SERIES_HOVER = constants.SERIES_HOVER;\n        var SERIES_OVER = constants.SERIES_OVER;\n        var SERIES_LEAVE = constants.SERIES_LEAVE;\n        var PANE_RENDER = constants.PANE_RENDER;\n        var PLOT_AREA_CLICK = constants.PLOT_AREA_CLICK;\n        var PLOT_AREA_HOVER = constants.PLOT_AREA_HOVER;\n        var PLOT_AREA_LEAVE = constants.PLOT_AREA_LEAVE;\n        var DRAG = constants.DRAG;\n        var DRAG_END = constants.DRAG_END;\n        var DRAG_START = constants.DRAG_START;\n        var DRILLDOWN = constants.DRILLDOWN;\n        var DRILLDOWN_LEVEL_CHANGE = \"drilldownLevelChange\";\n        var ZOOM_START = constants.ZOOM_START;\n        var ZOOM = constants.ZOOM;\n        var ZOOM_END = constants.ZOOM_END;\n        var SELECT_START = constants.SELECT_START;\n        var SELECT = constants.SELECT;\n        var SELECT_END = constants.SELECT_END;\n        var RENDER = constants.RENDER;\n        var NOTE_CLICK = constants.NOTE_CLICK;\n        var NOTE_HOVER = constants.NOTE_HOVER;\n        var NOTE_LEAVE = constants.NOTE_LEAVE;\n        var DOCUMENT_ELEMENT = $(document.documentElement);\n\n        var CHANGE = \"change\";\n        var DATABOUND = \"dataBound\";\n        var LEAVE = \"leave\";\n        var MOUSEDOWN = \"down\";\n\n        var VALUE = constants.VALUE;\n        var PIE = constants.PIE;\n        var DONUT = constants.DONUT;\n        var FUNNEL = constants.FUNNEL;\n\n        var Observable = kendo.Observable;\n        var TOOLTIP_ANIMATION_DURATION = 150;\n        var TOOLTIP_SHOW_DELAY = 100;\n        var TOOLTIP_INVERSE = \"k-chart-tooltip-inverse\";\n        var SHARED_TOOLTIP_CLASS = \"k-chart-shared-tooltip\";\n        var RTL = \"rtl\";\n\n        services.DomEventsBuilder.register({\n            create: function(element, events) {\n                 return new kendo.UserEvents(element, deepExtend({\n                     global: true,\n                     multiTouch: true,\n                     fastTap: true\n                 }, events));\n            }\n        });\n\n        var ChartInstanceObserver = InstanceObserver.extend({\n            handlerMap: {\n                showTooltip: '_showTooltip',\n                hideTooltip: '_hideTooltip',\n                legendItemClick: '_onLegendItemClick',\n                render: '_onRender',\n                init: '_onInit',\n                drilldown: '_onDrilldown'\n            }\n        });\n\n        var Chart = Widget.extend({\n            init: function(element, userOptions) {\n                var dataSource;\n\n                kendo.destroy(element);\n\n                Widget.fn.init.call(this, element);\n\n                if (userOptions) {\n                    dataSource = userOptions.dataSource;\n                    delete userOptions.dataSource;\n                }\n\n                this.options = deepExtend({}, this.options, userOptions);\n\n                this.wrapper = this.element;\n                this._attachEvents();\n\n                if (userOptions) {\n                    userOptions.dataSource = dataSource;\n                }\n\n                this._seriesVisibility = new SeriesVisibilityState();\n\n                this.bind(this.events, this.options);\n                this._initDataSource(userOptions);\n\n                this._drilldownState = [];\n\n                kendo.notify(this, dataviz.ui);\n\n                if (this._showWatermarkOverlay) {\n                    this._showWatermarkOverlay(this.wrapper[0]);\n                }\n            },\n\n            events: [\n                DATABOUND,\n                DRILLDOWN,\n                DRILLDOWN_LEVEL_CHANGE,\n                SERIES_CLICK,\n                SERIES_HOVER,\n                SERIES_OVER,\n                SERIES_LEAVE,\n                AXIS_LABEL_CLICK,\n                LEGEND_ITEM_CLICK,\n                LEGEND_ITEM_HOVER,\n                LEGEND_ITEM_LEAVE,\n                PANE_RENDER,\n                PLOT_AREA_CLICK,\n                PLOT_AREA_HOVER,\n                PLOT_AREA_LEAVE,\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                ZOOM_START,\n                ZOOM,\n                ZOOM_END,\n                SELECT_START,\n                SELECT,\n                SELECT_END,\n                NOTE_CLICK,\n                NOTE_HOVER,\n                NOTE_LEAVE,\n                RENDER\n            ],\n\n            options: {\n                name: \"Chart\",\n                renderAs: \"\",\n                theme: \"default\",\n                axisDefaults: {},\n                chartArea: {},\n                legend: {},\n                categoryAxis: {},\n                autoBind: true,\n                seriesDefaults: {},\n                series: [],\n                seriesColors: null,\n                tooltip: {},\n                transitions: true,\n                valueAxis: {},\n                plotArea: {},\n                title: {},\n                xAxis: {},\n                yAxis: {},\n                panes: [{}],\n                pannable: false,\n                zoomable: false\n            },\n\n            items: function() {\n                return $();\n            },\n\n            refresh: function() {\n                var chart = this;\n                var instance = chart._instance;\n                instance.applyDefaults(chart.options);\n                instance.applySeriesColors();\n\n                chart._bindSeries();\n                chart._bindCategories();\n\n                chart.trigger(DATABOUND);\n                chart._redraw();\n            },\n\n            getSize: function() {\n                return kendo.dimensions(this.element);\n            },\n\n            redraw: function(paneName) {\n                this._size = null;\n                this._instance.redraw(paneName);\n            },\n\n            setOptions: function(options) {\n                var chart = this,\n                    dataSource = options.dataSource;\n\n                delete options.dataSource;\n\n                Widget.fn._setEvents.call(chart, options);\n\n                this._instance.applyOptions(options, this._getThemeOptions(options));\n                this.options = this._instance.options;\n                this._tooltip.setOptions(this.options.tooltip);\n                this._seriesVisibility.setOptions(this.options);\n                this._sourceSeries = null;\n\n                if (dataSource) {\n                    chart.setDataSource(dataSource);\n                }\n\n                if (chart._hasDataSource) {\n                    chart._onDataChanged();\n                } else {\n                    chart._bindCategories();\n                    chart.redraw();\n                }\n\n                chart._instance.updateMouseMoveHandler();\n\n            },\n\n            setDataSource: function(dataSource) {\n                var chart = this;\n\n                chart.dataSource.unbind(CHANGE, chart._dataChangeHandler);\n                chart.dataSource = dataSource = DataSource.create(dataSource);\n                chart._hasDataSource = true;\n                chart._hasData = false;\n\n                dataSource.bind(CHANGE, chart._dataChangeHandler);\n\n                if (chart.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n\n            destroy: function() {\n                var chart = this,\n                    dataSource = chart.dataSource;\n\n                chart.element.off(NS);\n\n                if (dataSource) {\n                    dataSource.unbind(CHANGE, chart._dataChangeHandler);\n                }\n\n                if (chart._instance) {\n                    chart._instance.destroy();\n                    delete this._instance;\n                }\n\n                if (this._tooltip) {\n                    this._tooltip.destroy();\n                    delete this._tooltip;\n                }\n\n                this._destroyCrosshairTooltips();\n\n                Widget.fn.destroy.call(chart);\n            },\n\n            findPaneByName: function(name) {\n                var panes = this._plotArea.panes;\n\n                for (var idx = 0; idx < panes.length; idx++) {\n                    if (panes[idx].options.name === name) {\n                        return new ChartPane(this, panes[idx]);\n                    }\n                }\n            },\n\n            findPaneByIndex: function(idx) {\n                var panes = this._plotArea.panes;\n                if (panes[idx]) {\n                    return new ChartPane(this, panes[idx]);\n                }\n            },\n\n            findSeries: function(callback) {\n                var plotArea = this._plotArea;\n                var series = plotArea.srcSeries || plotArea.series;\n                for (var idx = 0; idx < series.length; idx++) {\n                    if (callback(series[idx])) {\n                        return new ChartSeries(this, series[idx]);\n                    }\n                }\n            },\n\n            findSeriesByName: function(name) {\n                return this._createSeries({ name: name });\n            },\n\n            findSeriesByIndex: function(index) {\n                return this._createSeries({ index: index });\n            },\n\n            exportVisual: function(options) {\n                var instance = this._instance;\n                if (!instance) {\n                    return;\n                }\n\n                var visual;\n\n                //TO DO: support for setting any options. already available in kendo-charts\n                if (options && (options.width || options.height)) {\n                    var chartArea = instance.options.chartArea;\n                    var originalChartArea = instance._originalOptions.chartArea;\n\n                    deepExtend(chartArea, options);\n\n                    var model = instance._getModel();\n\n                    chartArea.width = originalChartArea.width;\n                    chartArea.height = originalChartArea.height;\n\n                    model.renderVisual();\n\n                    triggerPaneRender(model._plotArea.panes);\n\n                    visual = model.visual;\n                } else {\n                    visual = instance.exportVisual();\n                }\n\n                return visual;\n            },\n\n            resetDrilldownLevel: function resetDrilldownLevel(level) {\n                level = level || 0;\n                var state = this._drilldownState;\n                if (!state || level < 0 || level > state.length - 1) {\n                    return;\n                }\n\n                var args = {\n                    level: level,\n                    sender: this\n                };\n                this.trigger(DRILLDOWN_LEVEL_CHANGE, args);\n\n                this.options.series = this._drilldownState[level];\n                this._drilldownState = this._drilldownState.slice(0, level);\n\n                this._bindCategories();\n                this._redraw();\n            },\n\n            _createSeries: function(options) {\n                var seriesOptions = this._seriesOptions(options);\n                if (seriesOptions) {\n                    return new ChartSeries(this, seriesOptions);\n                }\n            },\n\n            _seriesOptions: function(options) {\n                var plotArea = this._plotArea;\n                var series = plotArea.srcSeries || plotArea.series;\n                var seriesOptions;\n\n                if (defined(options.index)) {\n                    seriesOptions = series[options.index];\n                } else if (defined(options.name)) {\n                    for (var idx = 0; idx < series.length; idx++) {\n                        if (series[idx].name === options.name) {\n                            seriesOptions = series[idx];\n                            break;\n                        }\n                    }\n                }\n\n                return seriesOptions;\n            },\n\n            _attachEvents: function() {\n                 this.element.on(MOUSELEAVE_NS, this._mouseleave.bind(this));\n            },\n\n            _mouseleave: function(e) {\n                var instance = this._instance;\n                var tooltip = this._tooltip;\n                var target = e.relatedTarget;\n\n                if (!(target && $(target).closest(tooltip.element).length) && instance && !instance.handlingTap) {\n                    instance.hideElements({\n                        keepTooltipOpen: !tooltip.options.autoHide\n                    });\n                }\n            },\n\n            _getThemeOptions: function(userOptions) {\n                var themeName = (userOptions || {}).theme;\n\n                if (themeName && dataviz.SASS_THEMES.indexOf(themeName.toLowerCase()) !== -1) {\n                    return dataviz.autoTheme().chart;\n                }\n\n                if (defined(themeName)) {\n                    var themes = dataviz.ui.themes || {};\n                    var theme = themes[themeName] || themes[themeName.toLowerCase()] || {};\n                    return theme.chart || {};\n                }\n            },\n\n            _initChart: function() {\n                this._createChart(this.options, this._getThemeOptions(this.options));\n                this.options = this._instance.options;\n                this._seriesVisibility.setOptions(this.options);\n            },\n\n            _createChart: function(options, themeOptions) {\n                this._instance = new KendoChart(this.element[0], options, themeOptions, {\n                    observer: new ChartInstanceObserver(this),\n                    sender: this,\n                    rtl: this._isRtl()\n                });\n            },\n\n            _onInit: function(e) {\n                this._instance = e.sender;\n            },\n\n            _initDataSource: function(userOptions) {\n                var chart = this,\n                    dataSource = (userOptions || {}).dataSource;\n\n                chart._dataChangeHandler = chart._onDataChanged.bind(chart);\n\n                chart.dataSource = DataSource\n                    .create(dataSource)\n                    .bind(\"change\", chart._dataChangeHandler);\n\n                chart._bindCategories();\n\n                if (dataSource) {\n                    chart._hasDataSource = true;\n                }\n\n                this._initChart();\n                this._initTooltip();\n\n                if (dataSource) {\n                    if (chart.options.autoBind) {\n                        chart.dataSource.fetch();\n                    }\n                }\n            },\n\n            _destroyCrosshairTooltips: function() {\n                var tooltips = this._crosshairTooltips;\n                if (tooltips) {\n                    for (var key in tooltips) {\n                        tooltips[key].destroy();\n                    }\n                }\n                this._crosshairTooltips = {};\n            },\n\n            _getCrosshairTooltip: function(name, index) {\n                var tooltips = this._crosshairTooltips = this._crosshairTooltips || {};\n                var key = name + index;\n                var tooltip = tooltips[key];\n                if (!tooltip) {\n                    tooltip = tooltips[key] = new CrosshairTooltip(this.element);\n                }\n                return tooltip;\n            },\n\n            _showTooltip: function(e) {\n                if (e.crosshair) {\n                    var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                    tooltip.show(e);\n                } else if (this._tooltip) {\n                    this._tooltip.show(e);\n                }\n            },\n\n            _hideTooltip: function(e) {\n                if (e.crosshair) {\n                     var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                     tooltip.hide();\n                } else if (this._tooltip) {\n                    this._tooltip.hide();\n                }\n            },\n\n            _onRender: function(e) {\n                this._destroyCrosshairTooltips();\n                this._copyMembers(e.sender);\n                if (!this._hasDataSource || this._hasData || !this.options.autoBind) {\n                    this.trigger(RENDER);\n                }\n            },\n\n            _copyMembers: function(instance) {\n                this.options = instance.options;\n                this._originalOptions = instance._originalOptions;\n                this.surface = instance.surface;\n                this._plotArea = instance._plotArea;\n                this._model = instance._model;\n                this._highlight = instance._highlight;\n                this._selections = instance._selections;\n                this._pannable = instance._pannable;\n                this._zoomSelection = instance._zoomSelection;\n                this._mousewheelZoom = instance._mousewheelZoom;\n            },\n\n            requiresHandlers: function(names) {\n               var events = this._events;\n               for (var idx = 0; idx < names.length; idx++) {\n                   if (defined(events[names[idx]])) {\n                       return true;\n                   }\n               }\n            },\n\n            _initTooltip: function() {\n                this._tooltip = this._createTooltip();\n\n                this._tooltip.bind(LEAVE, this._tooltipleave.bind(this));\n            },\n\n            _onLegendItemClick: function(e) {\n                if (!this.trigger(LEGEND_ITEM_CLICK, e)) {\n                    this._legendItemClick(e.seriesIndex, e.pointIndex);\n                }\n            },\n\n            _legendItemClick: function(seriesIndex, pointIndex) {\n                var chart = this._instance,\n                    plotArea = chart._plotArea,\n                    currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n\n                if (chart._hasInactiveOpacity() && chart._activeChartInstance) {\n                    chart._updateSeriesOpacity(null, true);\n                    chart._applySeriesOpacity(chart._activeChartInstance.children, null, true);\n                    chart._activeChartInstance = null;\n                }\n\n                if ($.inArray(currentSeries.type, [PIE, DONUT, FUNNEL]) >= 0) {\n                    var point = currentSeries.data[pointIndex];\n                    if (point && defined(point.visible)) {\n                        point.visible = !point.visible;\n                    } else {\n                        var pointVisibility = currentSeries.pointVisibility = currentSeries.pointVisibility || {};\n                        var visible = pointVisibility[pointIndex];\n                        pointVisibility[pointIndex] = defined(visible) ? !visible : false;\n                    }\n                } else {\n                    currentSeries.visible = !currentSeries.visible;\n                    this._seriesVisibility.save(currentSeries);\n                }\n\n                chart._noTransitionsRedraw();\n            },\n\n            _createTooltip: function() {\n                return new Tooltip(this.element, extend({}, this.options.tooltip, {\n                    rtl: this._isRtl()\n                }));\n            },\n\n            _tooltipleave: function() {\n                if (this._instance) {\n                    this._instance.hideElements();\n                }\n            },\n\n            _onDrilldown: function(e) {\n                var this$1$1 = this;\n\n                var series = e.series;\n                var value = e.value;\n\n                if (series.drilldownSeriesFactory) {\n                    var result = series.drilldownSeriesFactory(value);\n\n                    if (!result) {\n                        return;\n                    } else if (result instanceof Promise) {\n                        result.then(function (resolved) { return this$1$1._onDrilldownData(e, resolved); });\n                    } else {\n                        this._onDrilldownData(e, result);\n                    }\n                } else if (typeof value === 'object') {\n                    this._onDrilldownData(e, value);\n                }\n            },\n\n            _onDrilldownData: function(e, data) {\n                var drilldownSeries = Object.assign({}, e.series, data);\n                var args = {\n                    point: e.point,\n                    series: e.series,\n                    drilldownSeries: drilldownSeries,\n                    sender: this\n                };\n\n                var prevented = this.trigger(DRILLDOWN, args);\n                if (!prevented) {\n                    this._drilldownState.push(this.options.series);\n\n                    this.options.series = [drilldownSeries];\n                    this._bindCategories();\n                    this._redraw();\n                }\n            },\n\n            _bindData: function(e) {\n                var chart = this,\n                    options = chart.options,\n                    series = chart._sourceSeries || options.series,\n                    seriesIx,\n                    seriesLength = series.length,\n                    data = chart.dataSource.view(),\n                    grouped = (chart.dataSource.group() || []).length > 0,\n                    processedSeries = [],\n                    seriesVisibility = this._seriesVisibility,\n                    currentSeries,\n                    groupedSeries;\n\n                seriesVisibility.read();\n\n                for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                    currentSeries = series[seriesIx];\n\n                    if (chart._isBindable(currentSeries) && grouped) {\n                        groupedSeries = groupSeries(currentSeries, data);\n                        processedSeries = processedSeries.concat(groupedSeries);\n\n                        seriesVisibility.applyByGroup(groupedSeries, e);\n                    } else {\n                        currentSeries = extend({}, currentSeries);\n                        processedSeries.push(currentSeries);\n\n                        seriesVisibility.applyByIndex(currentSeries, e);\n                    }\n                }\n\n                chart._sourceSeries = series;\n                options.series = processedSeries;\n                this._instance.applySeriesColors();\n\n                chart._bindSeries();\n                chart._bindCategories();\n\n                this._hasData = true;\n            },\n\n            _onDataChanged: function(e) {\n                this._bindData(e);\n\n                this.trigger(DATABOUND);\n                if (this._instance && this._instance.fontLoaded) {\n                    this._redraw();\n                }\n            },\n\n            _bindSeries: function() {\n                var chart = this,\n                    data = chart.dataSource.view(),\n                    series = chart.options.series,\n                    seriesIx,\n                    seriesLength = series.length,\n                    currentSeries,\n                    groupIx,\n                    seriesData;\n\n                for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                    currentSeries = series[seriesIx];\n\n                    if (chart._isBindable(currentSeries)) {\n                        groupIx = currentSeries._groupIx;\n                        seriesData = defined(groupIx) ? (data[groupIx] || {}).items : data;\n\n                        if (currentSeries.autoBind !== false) {\n                            currentSeries.data = seriesData;\n                        }\n                    }\n                }\n            },\n\n            _bindCategories: function() {\n                var chart = this,\n                    data = chart.dataSource.view() || [],\n                    grouped = (chart.dataSource.group() || []).length > 0,\n                    categoriesData = data,\n                    options = chart.options,\n                    definitions = [].concat(options.categoryAxis),\n                    axisIx,\n                    axis;\n\n                if (grouped) {\n                    if (data.length) {\n                        categoriesData = data[0].items;\n                    }\n                }\n\n                for (axisIx = 0; axisIx < definitions.length; axisIx++) {\n                    axis = definitions[axisIx];\n                    if (axis.autoBind !== false) {\n                        chart._bindCategoryAxis(axis, categoriesData, axisIx);\n                    }\n                }\n            },\n\n            _bindCategoryAxis: function(axis, data, axisIx) {\n                var count = (data || []).length,\n                    categoryIx,\n                    category,\n                    row;\n\n                if (axis.field) {\n                    axis.categories = [];\n                    for (categoryIx = 0; categoryIx < count; categoryIx++) {\n                        row = data[categoryIx];\n\n                        category = getField(axis.field, row);\n                        if (categoryIx === 0) {\n                            axis.categories = [category];\n                            axis.dataItems = [row];\n                        } else {\n                            axis.categories.push(category);\n                            axis.dataItems.push(row);\n                        }\n                    }\n                } else if (this._instance) {\n                    this._instance.bindCategoryAxisFromSeries(axis, axisIx);\n                }\n            },\n\n            _isBindable: function(series) {\n                var valueFields = SeriesBinder.current.valueFields(series),\n                    result = true,\n                    field, i;\n\n                for (i = 0; i < valueFields.length; i++) {\n                    field = valueFields[i];\n                    if (field === VALUE) {\n                        field = \"field\";\n                    } else {\n                        field = field + \"Field\";\n                    }\n\n                    if (!defined(series[field])) {\n                        result = false;\n                        break;\n                    }\n                }\n\n                return result;\n            },\n\n            _isRtl: function() {\n                return kendo.support.isRtl(this.element) && this.element.css(\"direction\") === RTL;\n            }\n        });\n\n        var proxyMembers = [\"getAxis\", \"findAxisByName\", \"plotArea\", \"toggleHighlight\", \"showTooltip\",\n            \"hideTooltip\", \"_resize\", \"_redraw\", \"_noTransitionsRedraw\", \"_legendItemHover\", \"_eventCoordinates\"];\n\n        function createProxyMember(name) {\n            Chart.fn[name] = function() {\n                var instance = this._instance;\n                if (instance) {\n                    return instance[name].apply(instance, arguments);\n                }\n            };\n        }\n\n        for (var idx = 0; idx < proxyMembers.length; idx++) {\n            createProxyMember(proxyMembers[idx]);\n        }\n\n        function groupSeries(series, data) {\n            var result = [],\n                nameTemplate,\n                legacyTemplate = series.groupNameTemplate,\n                groupIx,\n                dataLength = data.length,\n                seriesClone,\n                defaultNameTemplate = function (ref) {\n                    var group = ref.group;\n\n                    return (\"\" + (defined(series.name) ? group.value + \": \" + series.name : group.value));\n            };\n\n            if (dataLength === 0) {\n                seriesClone = deepExtend({}, series);\n                seriesClone.visibleInLegend = false;\n                return [seriesClone];\n            }\n\n            if (defined(legacyTemplate)) {\n                kendo.logToConsole(\n                    \"'groupNameTemplate' is obsolete and will be removed in future versions. \" +\n                    \"Specify the group name template as 'series.name'\"\n                );\n\n                if (legacyTemplate) {\n                    nameTemplate = template(legacyTemplate);\n                }\n            } else {\n                nameTemplate = template(series.name || defaultNameTemplate);\n            }\n\n            for (groupIx = 0; groupIx < dataLength; groupIx++) {\n                seriesClone = deepExtend({}, series);\n\n                if (!kendo.isFunction(seriesClone.color)) {\n                    seriesClone.color = undefined$1;\n                }\n\n                seriesClone._groupIx = groupIx;\n                seriesClone._groupValue = data[groupIx].value;\n                result.push(seriesClone);\n\n                if (nameTemplate) {\n                    seriesClone.name = nameTemplate({\n                        series: seriesClone, group: data[groupIx]\n                    });\n                }\n            }\n\n            return result;\n        }\n\n        dataviz.ExportMixin.extend(Chart.fn);\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Chart.fn);\n        }\n\n        dataviz.ui.plugin(Chart);\n\n        var SeriesVisibilityState = Class.extend({\n            init: function() {\n                this.groups = {};\n                this.index = {};\n                this.options = {};\n            },\n\n            applyByGroup: function(series, e) {\n                if ((e && e.action) || this.options.persistSeriesVisibility) {\n                    for (var idx = 0; idx < series.length; idx++) {\n                        if (this.groups[series[idx]._groupValue] === false) {\n                            series[idx].visible = false;\n                        }\n                    }\n                } else {\n                    this.groups = {};\n                }\n            },\n\n            applyByIndex: function(series, e) {\n                if ((e && e.action) || this.options.persistSeriesVisibility) {\n                    if (this.index[series.index] === false) {\n                        series.visible = false;\n                    }\n                } else {\n                    this.index = {};\n                }\n            },\n\n            save: function(series) {\n                if (!series) {\n                    return;\n                }\n\n                if (this.options.persistSeriesVisibility) {\n                    this.options.series[series.index].visible = series.visible;\n                } else {\n                    this.saveState(series);\n                }\n            },\n\n            setOptions: function(options) {\n                this.options = options;\n                this.groups = {};\n                this.index = {};\n            },\n\n            read: function() {\n                var options = this.options;\n                if (options.persistSeriesVisibility) {\n                    var series = options.series;\n                    for (var idx = 0; idx < series.length; idx++) {\n                        this.saveState(series[idx]);\n                    }\n                }\n            },\n\n            saveState: function(series) {\n                if (defined(series._groupValue)) {\n                    this.groups[series._groupValue] = series.visible;\n                } else {\n                    this.index[series.index] = series.visible;\n                }\n            }\n        });\n\n        var geom = kendo.geometry;\n\n        function normalizeStyle(style) {\n            for (var field in style) {\n                if (style[field] === undefined$1) {\n                    style[field] = '';\n                }\n            }\n\n            return style;\n        }\n\n        var Tooltip = Observable.extend({\n            init: function(chartElement, options) {\n                var tooltip = this;\n\n                Observable.fn.init.call(tooltip);\n\n                this.setOptions(options);\n\n                tooltip.chartElement = chartElement;\n\n                tooltip.template = Tooltip.template;\n                if (!tooltip.template) {\n                    tooltip.template = Tooltip.template = function (ref) {\n                            var autoHide = ref.autoHide;\n                            var rtl = ref.rtl;\n                            var font = ref.font;\n                            var border = ref.border;\n                            var opacity = ref.opacity;\n\n                            return \"<div class='k-tooltip \" + (autoHide ? \"k-tooltip-closable\" : \"\") + \" k-chart-tooltip \" + (rtl ? \"k-rtl\" : \"\") + \"' \" +\n                        (kendo.attr(\"style-display\")) + \"=\\\"none\\\" \" + (kendo.attr(\"style-position\")) + \"=\\\"absolute\\\" \" +\n                        (kendo.attr(\"style-font\")) + \"=\\\"\" + font + \"\\\" \" + (kendo.attr(\"style-opacity\")) + \"=\\\"\" + opacity + \"\\\" \" +\n                        \"\" + (border ? ((kendo.attr(\"style-border\")) + \"=\\\"\" + (border.width) + \"px solid\\\" \") : \"\") +\n                        \">\" +\n                        '<div class=\"k-tooltip-content\"></div>' +\n                        \"\" + (autoHide ? '' : '<div class=\"k-tooltip-button\">' + kendo.ui.icon($('<a href=\"#\" title=\"Close\"></a>'), { icon: \"x\" }) + '</div>') +\n                        \"</div>\";\n                    };\n                }\n\n                tooltip.element = $(tooltip.template(tooltip.options));\n                kendo.applyStylesFromKendoAttributes(tooltip.element, [\"display\", \"position\", \"font\", \"border\", \"opacity\"]);\n\n                tooltip.move = tooltip.move.bind(tooltip);\n                tooltip._mouseleave = tooltip._mouseleave.bind(tooltip);\n\n                var mobileScrollerSelector = kendo.format(\"[{0}='content'],[{0}='scroller']\", kendo.attr(\"role\"));\n                tooltip._mobileScroller = chartElement.closest(mobileScrollerSelector).data(\"kendoMobileScroller\");\n                tooltip.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n                tooltip._closeTooltipHandler = tooltip._closeTooltip.bind(tooltip);\n            },\n\n            destroy: function() {\n                var tooltip = this;\n\n                this._clearShowTimeout();\n                DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n                if (this.element) {\n                    this.element.off(MOUSELEAVE_NS).remove();\n                    this.element = null;\n                }\n            },\n\n            setOptions: function(options) {\n                this.options = deepExtend({}, this.options, options);\n            },\n\n            options: {\n                opacity: 1,\n                animation: {\n                    duration: TOOLTIP_ANIMATION_DURATION\n                },\n                sharedTemplate: function (ref) {\n                        var colspan = ref.colspan;\n                        var categoryText = ref.categoryText;\n                        var points = ref.points;\n                        var content = ref.content;\n                        var colorMarker = ref.colorMarker;\n                        var nameColumn = ref.nameColumn;\n\n                        return \"<table>\" +\n                    \"<th colspan='\" + colspan + \"'>\" + categoryText + \"</th>\" +\n                        sharedTemplateIterator(points, colorMarker, nameColumn, content) +\n                    \"</table>\";\n        },\n                categoryFormat: \"{0:d}\",\n                autoHide: true\n            },\n\n            move: function() {\n                var tooltip = this,\n                    options = tooltip.options,\n                    element = tooltip.element,\n                    offset;\n\n                if (!tooltip.anchor || !tooltip.element) {\n                    return;\n                }\n\n                offset = tooltip._offset();\n                if (!tooltip.visible) {\n                    element.css({ top: offset.top, left: offset.left });\n                }\n\n                tooltip.visible = true;\n                tooltip._ensureElement(document.body);\n                element\n                    .stop(true, true)\n                    .show()\n                    .animate({\n                        left: offset.left,\n                        top: offset.top\n                    }, options.animation.duration);\n            },\n\n            _clearShowTimeout: function() {\n                if (this.showTimeout) {\n                    clearTimeout(this.showTimeout);\n                    this.showTimeout = null;\n                }\n            },\n\n            getAnchor: function(size) {\n                var anchor = this.anchor;\n                var point = anchor.point;\n                var align = anchor.align;\n                var x = point.left;\n                var y = point.top;\n                if (align.horizontal === \"center\") {\n                    x -= size.width / 2;\n                } else if (align.horizontal === \"right\") {\n                    x -= size.width;\n                }\n\n                if (align.vertical === \"center\") {\n                    y -= size.height / 2;\n                } else if (align.vertical === \"bottom\") {\n                    y -= size.height;\n                }\n\n                return {\n                    x: x,\n                    y: y\n                };\n            },\n\n            _offset: function() {\n                var tooltip = this,\n                    size = tooltip._measure(),\n                    anchor = tooltip.getAnchor(size),\n                    top = anchor.y,\n                    left = anchor.x,\n                    zoomLevel = kendo.support.zoomLevel(),\n                    viewport = $(window),\n                    scrollTop = window.pageYOffset || document.documentElement.scrollTop || 0,\n                    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || 0,\n                    movable = (this._mobileScroller || {}).movable;\n\n                if (!movable || movable.scale === 1) {\n                    top += tooltip._fit(top - scrollTop, size.height, outerHeight(viewport) / zoomLevel);\n                    left += tooltip._fit(left - scrollLeft, size.width, outerWidth(viewport) / zoomLevel);\n                } else {\n                    var transform = geom.transform().scale(movable.scale, movable.scale, [movable.x, movable.y]);\n                    var point = new geom.Point(left, top).transform(transform);\n                    left = point.x;\n                    top = point.y;\n                }\n\n                return {\n                    top: top,\n                    left: left\n                };\n            },\n\n            show: function(e) {\n                var tooltip = this;\n                var fakeContainer = $(\"<div></div>\");\n                this.anchor = e.anchor;\n                this.element.css(normalizeStyle(e.style));\n                this.element.toggleClass(TOOLTIP_INVERSE, !!e.className);\n                this.element.toggleClass(SHARED_TOOLTIP_CLASS, !!e.shared);\n\n                var content = e.shared ? this._sharedContent(e) : this._pointContent(e.point);\n                fakeContainer.html(content);\n                kendo.applyStylesFromKendoAttributes(fakeContainer, [\"background-color\"]);\n                this.element.find('.k-tooltip-content').empty().append(fakeContainer);\n\n                if (!tooltip.options.autoHide) {\n                    tooltip.element.off(\"click\" + NS).on(\"click\" + NS, \".k-tooltip-button\", tooltip._closeTooltipHandler);\n                    DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler)\n                        .on(tooltip.downEvent, tooltip._closeTooltipHandler);\n                }\n\n                this._clearShowTimeout();\n                this.showTimeout = setTimeout(this.move, TOOLTIP_SHOW_DELAY);\n            },\n\n            hide: function(forceHide) {\n                var tooltip = this;\n\n                if (!tooltip.options.autoHide && !forceHide) {\n                    return;\n                }\n\n                clearTimeout(tooltip.showTimeout);\n                tooltip._hideElement();\n\n                if (tooltip.visible) {\n                    tooltip.point = null;\n                    tooltip.visible = false;\n                    tooltip.index = null;\n                    DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n                }\n            },\n\n            _closeTooltip: function(e) {\n                var target = $(e.target);\n\n                if (!target.is(\".k-chart-tooltip, .k-tooltip-content\")) {\n                    e.preventDefault();\n                    this.chartElement.data(\"kendoChart\")._instance.hideElements();\n                    this.hide(true);\n                }\n            },\n\n            _sharedContent: function(e) {\n                var points = e.points;\n                var that = this;\n\n                var nameColumn = dataviz.grep(points, function(point) {\n                    return defined(point.series.name);\n                }).length;\n\n                var colorMarker = e.series.length > 1;\n                var colspan = 1;\n                if (nameColumn) {\n                    colspan++;\n                }\n                if (colorMarker) {\n                    colspan++;\n                }\n\n                var template = kendo.template(this.options.sharedTemplate);\n                var content = template({\n                    points: points,\n                    category: e.category,\n                    categoryText: e.categoryText,\n                    content: this._pointContent.bind(that),\n                    colorMarker: colorMarker,\n                    nameColumn: nameColumn,\n                    colspan: colspan\n                });\n\n                return content;\n            },\n\n            _measure: function() {\n                this._ensureElement();\n\n                var size = {\n                    width: outerWidth(this.element),\n                    height: outerHeight(this.element)\n                };\n\n                return size;\n            },\n\n            _ensureElement: function() {\n                if (this.element) {\n                    this.element\n                        .appendTo(document.body)\n                        .on(MOUSELEAVE_NS, this._mouseleave);\n                }\n            },\n\n            _mouseleave: function(e) {\n                var target = e.relatedTarget;\n                var chart = this.chartElement[0];\n                if (target && target !== chart && !$.contains(chart, target)) {\n                    this.trigger(LEAVE);\n                }\n            },\n\n            _hideElement: function() {\n                var tooltip = this;\n                var element = this.element;\n                if (element) {\n                    element.fadeOut({\n                        always: function() {\n                            if (!tooltip.visible) {\n                                element.off(MOUSELEAVE_NS).remove();\n                            }\n                        }\n                    });\n                }\n            },\n\n            _pointContent: function(point) {\n                var tooltip = this,\n                    options = deepExtend({}, tooltip.options, point.options.tooltip),\n                    content, tooltipTemplate;\n\n                if (defined(point.value)) {\n                    content = point.value.toString();\n                }\n\n                if (options.template) {\n                    tooltipTemplate = template(options.template);\n                    content = tooltipTemplate({\n                        value: point.value,\n                        category: point.category,\n                        series: point.series,\n                        dataItem: point.dataItem,\n                        percentage: point.percentage,\n                        runningTotal: point.runningTotal,\n                        total: point.total,\n                        low: point.low,\n                        high: point.high,\n                        xLow: point.xLow,\n                        xHigh: point.xHigh,\n                        yLow: point.yLow,\n                        yHigh: point.yHigh\n                    });\n                } else if (options.format) {\n                    content = point.formatValue(options.format);\n                }\n\n                return content;\n            },\n\n            _fit: function(offset, size, viewPortSize) {\n                var output = 0;\n\n                if (offset + size > viewPortSize) {\n                    output = viewPortSize - (offset + size);\n                }\n\n                if (offset < 0) {\n                    output = -offset;\n                }\n\n                return output;\n            }\n        });\n\n        var CrosshairTooltip = Tooltip.extend({\n            init: function(chartElement, options) {\n                Tooltip.fn.init.call(this, chartElement, options);\n                this.element.addClass(\"k-chart-crosshair-tooltip\");\n            },\n\n            show: function(e) {\n                var element = this.element;\n\n                if (element) {\n                    this.anchor = e.anchor;\n                    this.element.css(e.style);\n                    this.element.html(this.content(e));\n\n                    this.move();\n                }\n            },\n\n            move: function() {\n                var tooltip = this,\n                    element = tooltip.element,\n                    offset = tooltip._offset();\n\n                tooltip._ensureElement();\n                element.css({ top: offset.top, left: offset.left }).show();\n            },\n\n            content: function(e) {\n                var content = e.value,\n                    options = e.crosshair.options.tooltip;\n\n                if (options.template) {\n                    content = template(options.template)({\n                        value: content\n                    });\n                }\n\n                return content;\n            },\n\n            hide: function() {\n                this.element.hide();\n            }\n        });\n\n        var ChartPane = Class.extend({\n            init: function(chart, pane) {\n                this._chart = chart;\n                this._pane = pane;\n                this.visual = pane.visual;\n                this.chartsVisual = pane.chartContainer.visual;\n                this.name = pane.options.name;\n            },\n\n            series: function() {\n                var chart = this._chart;\n                var seriesByPane = chart._plotArea.groupSeriesByPane();\n                var series = seriesByPane[this.name || \"default\"];\n\n                var result = [];\n                if (series) {\n                    for (var idx = 0; idx < series.length; idx++) {\n                        result.push(new ChartSeries(chart, series[idx]));\n                    }\n                }\n\n                return result;\n            }\n        });\n\n        var ChartSeries = Class.extend({\n            init: function(chart, options) {\n                this._chart = chart;\n                this._options = options;\n            },\n\n            points: function(filter) {\n                var points = this._points;\n                if (!points) {\n                    var series = this._seriesOptions();\n                    var plotArea = this._chart._plotArea;\n                    this._points = points = plotArea.pointsBySeriesIndex(series.index);\n                }\n                if (kendo.isFunction(filter)) {\n                    points = this._filterPoints(points, filter);\n                }\n\n\n                return points;\n            },\n\n            data: function(data) {\n                var series = this._seriesOptions();\n                if (data) {\n                    var chart = this._chart;\n                    var plotArea = chart._plotArea;\n\n                    series.data = data;\n\n                    if (series.categoryField) {\n                        var axis = plotArea.seriesCategoryAxis(series);\n                        var options = [].concat(chart.options.categoryAxis);\n\n                        chart._instance.bindCategoryAxisFromSeries(options[axis.axisIndex], axis.axisIndex);\n                    }\n\n                    chart._noTransitionsRedraw();\n                    this._clearFields();\n                }\n\n                return series.data;\n            },\n\n            findPoint: function(filter) {\n                var points = this.points();\n                for (var idx = 0; idx < points.length; idx++) {\n                    if (filter(points[idx])) {\n                        return points[idx];\n                    }\n                }\n            },\n\n            toggleHighlight: function(show, elements) {\n                if (!elements) {\n                    elements = this.points();\n                } else if (kendo.isFunction(elements)) {\n                    elements = this.points(elements);\n                } else {\n                    elements = isArray(elements) ? elements : [elements];\n                }\n\n                this._chart._instance.togglePointsHighlight(show, elements);\n            },\n\n            toggleVisibility: function(visible, filter) {\n                var chart = this._chart;\n                var seriesOptions = this._seriesOptions();\n                var hasFilter = kendo.isFunction(filter);\n                if (!hasFilter) {\n                    seriesOptions.visible = visible;\n                    chart._seriesVisibility.save(seriesOptions);\n                } else {\n                    if (inArray(seriesOptions.type, [PIE, DONUT, FUNNEL])) {\n                        var data = this._filterData(filter);\n                        for (var idx = 0; idx < data.length; idx++) {\n                            data[idx].visible = visible;\n                        }\n                    } else {\n                        seriesOptions.visible = function(data) {\n                            return filter(data.dataItem) ? visible : true;\n                        };\n                    }\n                }\n\n                chart._noTransitionsRedraw();\n\n                this._clearFields();\n            },\n\n            _filterData: function(filter) {\n                var data = this._seriesOptions().data;\n                var length = data.length;\n                var result = [];\n\n                for (var idx = 0; idx < length; idx++) {\n                    if (filter(data[idx])) {\n                        result.push(data[idx]);\n                    }\n                }\n                return result;\n            },\n\n            _filterPoints: function(points, filter) {\n                var result = [];\n                var length = points.length;\n                for (var idx = 0; idx < length; idx++) {\n                    if (filter(points[idx])) {\n                        result.push(points[idx]);\n                    }\n                }\n                return result;\n            },\n\n            _seriesOptions: function() {\n                var series = this._series;\n                if (!series) {\n                    series = this._series = this._chart._seriesOptions(this._options);\n                }\n                return series;\n            },\n\n            _clearFields: function() {\n                delete this._points;\n                delete this._series;\n            }\n        });\n\n        function triggerPaneRender(panes) {\n            for (var idx = 0; idx < panes.length; idx++) {\n                panes[idx].notifyRender();\n            }\n        }\n\n        function sharedTemplateIterator(points, colorMarker, nameColumn, content) {\n            var result = \"\";\n\n            for (var i = 0; i < points.length; i++) {\n                var point = points[i];\n                result += \"<tr>\";\n\n                if (colorMarker) {\n                    result += \"<td><span class='k-chart-shared-tooltip-marker' \" + (kendo.attr(\"style-background-color\")) + \"=\\\"\" + (encode(point.series.color)) + \"\\\"></span></td>\";\n                }\n\n                if (nameColumn) {\n                    result += \"<td> \" + (point.series.name ? point.series.name + \":\" : \"&nbsp;\") + \"</td>\";\n                }\n\n                result += \"<td>\" + (content(point)) + \"</td>\";\n                result += \"</tr>\";\n            }\n\n            return result;\n        }\n\n        dataviz.Tooltip = Tooltip;\n        dataviz.CrosshairTooltip = CrosshairTooltip;\n        dataviz.ChartInstanceObserver = ChartInstanceObserver;\n        dataviz.ChartPane = ChartPane;\n        dataviz.ChartSeries = ChartSeries;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"dataviz.chart\",\n        name: \"Chart\",\n        category: \"dataviz\",\n        description: \"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.\",\n        depends: [ \"data\", \"userevents\", \"drawing\", \"dataviz.core\", \"dataviz.themes\" ],\n        features: [{\n            id: \"dataviz.chart-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Chart as PDF\",\n            depends: [ \"pdf\" ]\n        }]\n    };\n\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}