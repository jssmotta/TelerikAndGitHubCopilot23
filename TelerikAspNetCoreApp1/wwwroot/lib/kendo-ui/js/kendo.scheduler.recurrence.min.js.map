{"version":3,"file":"kendo.scheduler.recurrence.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendoscheduler","recurrence","js","this","$","undefined$1","kendo","window","encode","htmlEncode","timezone","Class","ui","Widget","DropDownList","ButtonGroup","kendoDate","date","setTime","setDayOfWeek","adjustDST","firstDayOfMonth","getMilliseconds","DAYS_IN_LEAPYEAR","DAYS_IN_YEAR","MONTHS","WEEK_DAYS","WEEK_DAYS_IDX","SU","MO","TU","WE","TH","FR","SA","DATE_FORMATS","RULE_NAMES","RULE_NAMES_LENGTH","length","RECURRENCE_DATE_FORMAT","limitation","months","end","rule","monthRules","ruleValues","getMonth","changed","setMonth","setFullYear","getFullYear","monthDays","monthLength","month","days","hours","getHours","normalize","monthDay","getMonthLength","getDate","sort","numberSortPredicate","yearDays","year","yearDay","leapYear","dayInYear","weeks","day","weekStart","week","weekInYear","weekDays","weekDayRule","offsetDate","Date","getTime","offsets","start","normalizeDay","getDay","weekDayRules","ruleWeekOffset","weekDay","weekNumber","currentDay","normalizeDayIndex","result","idx","weekInMonth","normalizeOffset","push","ruleWeekValues","freq","positions","position","forEach","nextMonthFirstDay","ruleDay","offset","isInWeek","numberOfWeeks","setDate","hourRules","startTime","_startTime","startHours","setHours","minutes","setMinutes","getMinutes","minuteRules","seconds","setSeconds","getSeconds","secondRules","BaseFrequency","extend","next","options","_hour","limit","ruleName","firstRule","modified","interval","current","diff","startTimeHours","_startPeriod","frequency","excess","getTimezoneOffset","MS_PER_HOUR","MS_PER_MINUTE","intervalExcess","Math","floor","round","MS_PER_DAY","_date","_getNumberOfWeeksBetweenDates","_hasRuleValue","first","second","exactWeeks","HourlyFrequency","fn","DailyFrequency","WeeklyFrequency","setup","eventStartDate","MonthlyFrequency","YearlyFrequency","frequencies","hourly","daily","weekly","monthly","yearly","CLICK","CHANGE","firstWeekLength","ceil","lastDate","weeksInMonth","skipFirst","skipLast","rules","value","ruleValue","availableRules","parseArray","list","range","parseInt","isNaN","parseWeekDayList","valueLength","substring","toUpperCase","a","b","parseExceptions","exceptions","zone","dates","split","indexOf","parseUTCDate","isException","Array","isArray","dateTime","toExceptionString","concat","convert","toString","join","endPeriodByFreq","eventsByPosition","periodEvents","until","event","inPeriod","periodEventsLength","events","removeExceptionDates","exceptionDates","getZoneOffset","parseDate","apply","parseDateRule","dateRule","pair","property","tzid","valueIdx","pairs","parseRule","recur","splits","part","parts","instance","trim","exdates","toLowerCase","count","culture","calendar","firstDay","day1","day2","serializeDateRule","val","serialize","ruleString","valueString","serializeWeekDayList","parse","expand","endTime","endDate","durationMS","startPeriod","ruleStart","ruleEnd","useEventStart","freqName","eventStartTime","eventStartMS","eventStart","currentIdx","shiftedStart","shiftedEnd","shiftedStartTime","shifterEndTime","recurrenceRule","startTimezone","endTimezone","clone","recurrenceException","set","startPeriodByFreq","_endPeriod","duration","dateOffset","dateMinusHour","dateMinusHourOffset","allDayCompensation","isAllDay","toInvariantTime","inPeriodCheckEndDate","toUtcTime","startZone","endZone","startOffsetDiff","endOffsetDiff","startTZOffsetDiff","endTZOffsetDiff","offsetTicksStart","offsetTicksEnd","toOccurrence","_endTime","slice","isMissingDSTHour","RECURRENCE_VIEW_TEMPLATE","template","ref","messages","repeatEvery","repeatOn","attr","of","label","never","after","occurrence","on","DAY_RULE","WEEKDAY_RULE","WEEKEND_RULE","BaseRecurrenceEditor","init","element","that","call","wrapper","today","firstWeekDay","_namespace","name","spinners","mobile","repeat","recurrenceEditorTitle","mobileLabel","offsetPositions","third","fourth","last","weekdays","weekday","weekend","_initInterval","_value","_container","find","kendoNumericTextBox","decimals","format","min","change","_trigger","_weekDayButtons","names","abbreviated","namesAbbr","values","items","text","attributes","_weekDayButtonGroup","selection","select","selectedDays","map","i","Number","getAttribute","_weekDayRule","clear","_weekDay","_weekDayOffset","_weekDayView","weekDayOffset","weekDayValue","method","weekDayOffsetWidget","_initWeekDay","data","weekdayMessage","offsetMessage","weekDayInput","autoWidth","dataTextField","dataValueField","dataSource","dayName","_initWeekDays","weekDayButtonGroup","selectedWeekDayButtons","ruleDays","ruleDaysLength","selectors","_initMonthDay","monthDayInput","_monthDay","NumericTextBox","max","_initCount","input","_count","_initUntil","startInput","closest","validDateValidationMessage","Validator","prototype","dateCompareValidationMessage","dateCompare","initialValue","_until","kendoDatePicker","untilEl","readonly","Boolean","enable","is","parents","setOptions","trigger","RecurrenceEditor","_initFrequency","_initContainer","destroy","_frequency","off","freqButton","_initView","container","editContainer","parent","insertAfter","append","buttonGroupElement","title","recurrenceViewHtml","empty","applyStylesFromKendoAttributes","html","_initMonth","_period","_end","monthInputs","monthName","_month1","_month2","endRule","namespace","click","e","_toggleEnd","currentTarget","_buttonNever","_buttonCount","_buttonUntil","toggleRule","_toggleMonthDay","_toggleYear","selector","radioButtons","_buttonMonthDay","eq","_buttonWeekDay","enableCount","enableUntil","prop","monthRule","enableMonthDay","enableWeekDay","yearRule","enableMonth1","enableMonth2","plugin","RECURRENCE_HEADER_TEMPLATE","headerTitle","RECURRENCE_REPEAT_PATTERN_TEMPLATE","repeatBy","every","RECURRENCE_END_PATTERN_TEMPLATE","endPattern","RECURRENCE_GROUP_BUTTON_TEMPLATE","item","MobileRecurrenceEditor","_optionTemplate","_pane","pane","_initRepeatButton","_initParentRepeatEnd","_defaultValue","animations","left","right","cancel","update","endTitle","repeatTitle","patterns","dayOfMonth","dayOfWeek","_destroyView","_endFields","target","_chevronButton","icon","_repeatValue","preventDefault","_createView","navigate","_view","_endLiItem","endLabelField","endEditField","appendTo","_navigateToView","_endParentLabelField","toggle","_endParentEndButton","_endText","_initRepeatEnd","_endLabelField","toggleClass","_endButton","viewName","frequencyMessages","ns","_initRepeatView","_initEndNavigation","endMessages","_initEndView","viewType","returnViewId","view","id","stopPropagation","hasClass","one","remove","$html","content","hide","show","ev","weekDaySelect","_options","monthSelect","monthNames","_monthSelect","repeatRuleGroupButton","weekDayView","monthDayView","currentValue","weekDayName","support","optionLabel","jQuery"],"sources":["kendo.scheduler.recurrence.js"],"mappings":"CAAA,SAAWA,EAAQC,GACI,iBAAZC,SAA0C,oBAAXC,OAAyBA,OAAOD,QAAUD,EAAQG,QAAQ,yBAA0BA,QAAQ,uBAAwBA,QAAQ,2BAA4BA,QAAQ,wBAAyBA,QAAQ,mBACrN,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAO,CAAC,yBAA0B,uBAAwB,2BAA4B,wBAAyB,mBAAoBJ,KAC/KD,EAA+B,oBAAfO,WAA6BA,WAAaP,GAAUQ,MAAcC,eAAiBT,EAAOS,gBAAkB,CAAC,EAAGT,EAAOS,eAAeC,WAAaV,EAAOS,eAAeC,YAAc,CAAC,EAAGV,EAAOS,eAAeC,WAAWC,GAAKV,IACrP,CAJD,CAIGW,MAAM,WA2oGL,OAloGA,SAAUC,EAAGC,GACT,IAAIC,EAAQC,OAAOD,MACfE,EAASF,EAAMG,WACfC,EAAWJ,EAAMI,SACjBC,EAAQL,EAAMK,MACdC,EAAKN,EAAMM,GACXC,EAASD,EAAGC,OACZC,EAAeF,EAAGE,aAClBC,EAAcH,EAAGG,YACjBC,EAAYV,EAAMW,KAClBC,EAAUF,EAAUE,QACpBC,EAAeH,EAAUG,aACzBC,EAAYJ,EAAUI,UACtBC,EAAkBL,EAAUK,gBAC5BC,EAAkBN,EAAUM,gBAC5BC,EAAmB,CAAC,EAAE,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC/DC,EAAe,CAAC,EAAE,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAC3DC,EAAS,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACtDC,EAAY,CACR,EAAG,KACH,EAAG,KACH,EAAG,KACH,EAAG,KACH,EAAG,KACH,EAAG,KACH,EAAG,MAEPC,EAAgB,CACZC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,EACNC,GAAM,GAEVC,EAAe,CACX,6BACA,yBACA,sBACA,mBACA,gBACA,aACA,wBACA,qBACA,kBACA,gBACA,cACA,YAEJC,EAAa,CAAC,SAAU,QAAS,WAAY,YAAa,WAAY,QAAS,UAAW,WAC1FC,EAAoBD,EAAWE,OAC/BC,EAAyB,mBACzBC,EAAa,CACTC,OAAQ,SAASxB,EAAMyB,EAAKC,GACxB,IAAIC,EAAaD,EAAKF,OAClBA,EAASI,EAAWD,EAAY3B,EAAK6B,WAAa,GAClDC,GAAU,EAYd,OAVe,OAAXN,IACIA,EAAOH,OACPrB,EAAK+B,SAASP,EAAO,GAAK,EAAG,GAE7BxB,EAAKgC,YAAYhC,EAAKiC,cAAgB,EAAGN,EAAW,GAAK,EAAG,GAGhEG,GAAU,GAGPA,CACX,EAEAI,UAAW,SAASlC,EAAMyB,EAAKC,GAW3B,IAVA,IAAIS,EAAaC,EAAOC,EACpBP,GAAU,EACVQ,EAAQtC,EAAKuC,WACbC,EAAY,SAASC,GAIjB,OAHIA,EAAW,IACXA,EAAWN,EAAcM,EAAW,GAEjCA,CACX,EAEGzC,GAAQyB,GAAK,CAKhB,GAJAW,EAAQpC,EAAK6B,WACbM,EAAcO,EAAe1C,GAGhB,QAFbqC,EAAOT,EAAWF,EAAKQ,UAAWlC,EAAK2C,UAAWH,IAG9C,OAAOV,EAKX,GAFAA,GAAU,EAENO,EAAKhB,QAIL,GAHArB,EAAK+B,SAASK,EAAOC,EAAKO,KAAKC,GAAqB,IACpD1C,EAAUH,EAAMsC,GAEZF,IAAUpC,EAAK6B,WACf,WAGJ7B,EAAK+B,SAASK,EAAQ,EAAG,EAEjC,CAEA,OAAON,CACX,EAEAgB,SAAU,SAAS9C,EAAMyB,EAAKC,GAW1B,IAVA,IAAIqB,EAAMD,EACNhB,GAAU,EACVQ,EAAQtC,EAAKuC,WACbC,EAAY,SAASQ,GAIjB,OAHIA,EAAU,IACVA,EAAUD,EAAOC,GAEdA,CACX,EAEGhD,EAAOyB,GAAK,CAIf,GAHAsB,EAAOE,EAASjD,GAAQ,IAAM,IAGb,QAFjB8C,EAAWlB,EAAWF,EAAKoB,SAAUI,EAAUlD,GAAOwC,IAGlD,OAAOV,EAMX,GAHAA,GAAU,EACViB,EAAO/C,EAAKiC,cAERa,EAASzB,OAAQ,CACjBrB,EAAKgC,YAAYe,EAAM,EAAGD,EAASF,KAAKC,GAAqB,IAC7D1C,EAAUH,EAAMsC,GAChB,KACJ,CACItC,EAAKgC,YAAYe,EAAO,EAAG,EAAG,EAEtC,CAEA,OAAOjB,CACX,EAEAqB,MAAO,SAASnD,EAAMyB,EAAKC,GAYvB,IAXA,IACIqB,EAAMI,EAAOC,EADbC,EAAY3B,EAAK2B,UAEjBvB,GAAU,EACVQ,EAAQtC,EAAKuC,WACbC,EAAY,SAASc,GAIjB,OAHIA,EAAO,IACPA,EAAO,GAAKA,GAETA,CACX,EAEGtD,EAAOyB,GAAK,CAGf,GAAc,QAFd0B,EAAQvB,EAAWF,EAAKyB,MAAOI,EAAWvD,EAAMqD,GAAYb,IAGxD,OAAOV,EAMX,GAHAA,GAAU,EACViB,EAAO/C,EAAKiC,cAERkB,EAAM9B,OAAQ,CACd+B,EAA4C,EAArCD,EAAMP,KAAKC,GAAqB,GAAU,EAEjD7C,EAAKgC,YAAYe,EAAM,EAAGK,GAC1BlD,EAAaF,EAAMqD,GAAY,GAE/BlD,EAAUH,EAAMsC,GAChB,KACJ,CACItC,EAAKgC,YAAYe,EAAO,EAAG,EAAG,EAEtC,CAEA,OAAOjB,CACX,EAEA0B,SAAU,SAASxD,EAAMyB,EAAKC,GAC1B,IAgBI+B,EAAaL,EAhBbM,EAAa,IAAIC,KAAK3D,EAAK4D,UAAYlC,EAAKmC,QAAQC,OACpDC,EAAeL,EAAWM,SAAWhE,EAAKgE,SAC1CR,EAAW9B,EAAK8B,SAChBH,EAAY3B,EAAK2B,UACjBY,EAwjBhB,SAAwBT,EAAUxD,EAAMqD,GASpC,IARA,IAEIa,EACAC,EAASf,EACTgB,EAJAC,EAAaC,EAAkBtE,EAAKgE,SAAUX,GAC9ChC,EAASmC,EAASnC,OAIlBkD,EAAS,GACTC,EAAM,EAEJA,EAAMnD,EAAQmD,IAMhB,GALAL,EAAUX,EAASgB,GAEnBJ,EAAaK,EAAYzE,EAAMqD,GAGR,QAFvBa,EAAiBQ,EAAgB1E,EAAMmE,EAASd,IAMhD,GAAIe,EAAaF,EACbK,EAAOI,KAAKR,QACT,GAAIC,IAAeF,EAGtB,GAAIG,GAFJjB,EAAMkB,EAAkBH,EAAQf,IAAKC,IAGjCkB,EAAOI,KAAKR,QACT,GAAIE,IAAejB,EACtB,OAAO,KAKnB,OAAOmB,CACX,CAzlB+BK,CAAepB,EAAUE,EAAYL,GACpDf,EAAQtC,EAAKuC,WAcjB,GAAqB,OAAjB0B,EACA,OAAO,EAkBX,IAfAR,EAAcQ,EAAa,OAGL,YAAdvC,EAAKmD,OAAuBnD,EAAKoD,WAAapD,EAAKqD,SAAW,IAC9DvB,EAASwB,SArBa,SAAStD,GACnC,IAAIuD,EAAoB,IAAItB,KAAK3D,EAAKiC,cAAejC,EAAK6B,WAAa,EAAG,GACtEqD,EAAUZ,EAAkB5C,EAAK0B,IAAKC,GAEtC4B,EAAkBjB,UAAYkB,KACzBzB,GAAea,EAAkBb,EAAYL,IAAKC,GAAa6B,KAChEzB,EAAc/B,EAG1B,IAcS+B,IACDA,EAAcD,EAAS,IAE3BtD,EAAaF,EAAMqD,IAGvBD,EAAMK,EAAYL,IAClBA,GAAOW,EAEHN,EAAY0B,OACZ,KAAOnF,GAAQyB,IAAQ2D,EAASpF,EAAMyD,EAAaJ,IAC3CoB,EAAYzE,EAAMqD,KAAegC,EAAcrF,EAAMqD,IACrDrD,EAAK+B,SAAS/B,EAAK6B,WAAa,EAAG,GACnC1B,EAAUH,EAAMsC,KAEhBtC,EAAKsF,QAAQtF,EAAK2C,UAAY,GAC9BxC,EAAUH,EAAMsC,GAEhBpC,EAAaF,EAAMqD,GAAY,IAS3C,OAJIrD,EAAKgE,WAAaZ,GAClBlD,EAAaF,EAAMoD,IAGhB,CACX,EAEAd,MAAO,SAAStC,EAAMyB,EAAKC,GACvB,IAAI6D,EAAY7D,EAAKY,MACjBkD,EAAY9D,EAAK+D,WACjBC,EAAaF,EAAUjD,WACvBD,EAAQV,EAAW2D,EAAWG,GAC9B5D,GAAU,EA4Bd,OA1Bc,OAAVQ,IACAR,GAAU,EAEV9B,EAAK2F,SAASD,GACdvF,EAAUH,EAAM0F,GAEZpD,EAAMjB,QACNiB,EAAQA,EAAM,GACdtC,EAAK2F,SAASrD,KAEdA,EAAQtC,EAAKuC,WACbvC,EAAKsF,QAAQtF,EAAK2C,UAAY,GAC9BxC,EAAUH,EAAMsC,GAEhBA,EAAQiD,EAAU,GAClBvF,EAAK2F,SAASrD,GACdnC,EAAUH,EAAMsC,IAGhBZ,EAAKkE,SACL5F,EAAK6F,WAAW,GAGpBL,EAAUG,SAASrD,EAAOtC,EAAK8F,eAG5BhE,CACX,EAEA8D,QAAS,SAAS5F,EAAMyB,EAAKC,GACzB,IAAIqE,EAAcrE,EAAKkE,QAEnBA,EAAUhE,EAAWmE,EADJ/F,EAAK8F,cAEtBxD,EAAQZ,EAAK+D,WAAWlD,WACxBT,GAAU,EAuBd,OArBgB,OAAZ8D,IACA9D,GAAU,EAEN8D,EAAQvE,OACRuE,EAAUA,EAAQ,IAElBtD,GAAS,EACTsD,EAAUG,EAAY,IAGtBrE,EAAKsE,SACLhG,EAAKiG,WAAW,GAGpBjG,EAAK2F,SAASrD,EAAOsD,GAGrBzF,EAAUH,EADVsC,GAAgB,IAEhBZ,EAAK+D,WAAWE,SAASrD,EAAOsD,EAAS5F,EAAKkG,eAG3CpE,CACX,EAEAkE,QAAS,SAAShG,EAAMyB,EAAKC,GACzB,IAAIyE,EAAczE,EAAKsE,QACnB1D,EAAQZ,EAAK+D,WAAWlD,WACxByD,EAAUpE,EAAWuE,EAAanG,EAAKkG,cACvCN,EAAU5F,EAAK8F,aACfhE,GAAU,EAoBd,OAlBgB,OAAZkE,IACAlE,GAAU,EAENkE,EAAQ3E,OACRrB,EAAKiG,WAAWD,EAAQ,KAExBJ,GAAW,EACX5F,EAAK6F,WAAWD,EAASO,EAAY,IAEjCP,EAAU,KACVA,GAAoB,GACpBtD,GAASA,EAAQ,GAAK,KAI9BZ,EAAK+D,WAAWE,SAASrD,EAAOsD,EAAS5F,EAAKkG,eAG3CpE,CACX,GAEJsE,EAAgB1G,EAAM2G,OAAO,CACzBC,KAAM,SAAStG,EAAM0B,GACjB,IAEIkE,EAASI,EAFTR,EAAY9D,EAAK+D,WACjBrC,EAAMoC,EAAU7C,UAGpB,GAAIjB,EAAKsE,QACLA,EAAUhG,EAAKkG,aAAe,EAE9BlG,EAAKiG,WAAWD,GAChBR,EAAUS,WAAWD,GACrBR,EAAUF,QAAQlC,OAEf,KAAI1B,EAAKkE,QAOZ,OAAO,EANPA,EAAU5F,EAAK8F,aAAe,EAE9B9F,EAAK6F,WAAWD,GAChBJ,EAAUK,WAAWD,GACrBJ,EAAUF,QAAQlC,EAGtB,CAEA,OAAO,CACX,EAEAZ,UAAW,SAAS+D,GAChB,IAAI7E,EAAO6E,EAAQ7E,KAEC,IAAhB6E,EAAQ/B,KAAa9C,EAAKY,QAC1BZ,EAAK+D,WAAWE,SAAS,GACzBzG,KAAKsH,MAAMD,EAAQvG,KAAM0B,GAEjC,EAEA+E,MAAO,SAASzG,EAAMyB,EAAKC,GAMvB,IALA,IACIgF,EAAUC,EACVC,EACApC,EAAKpB,EAHLyD,EAAWnF,EAAKmF,SAKb7G,GAAQyB,GAAK,CAIhB,IAHAmF,EAAWD,EAAYvH,EACvBgE,EAAMpD,EAAK2C,UAEN6B,EAAM,EAAGA,EAAMpD,EAAmBoD,IAAO,CAG1C,GAAI9C,EAFJgF,EAAWvF,EAAWqD,IAEF,CAEhB,GADAoC,EAAWrF,EAAWmF,GAAU1G,EAAMyB,EAAKC,GACvCiF,IAAcvH,GAAewH,EAC7B,MAEAD,EAAYC,CAEpB,CAEIA,GACA1H,KAAKsD,UAAU,CAAExC,KAAMA,EAAM0B,KAAMA,EAAM0B,IAAKA,EAAKoB,IAAKA,GAEhE,CAEA,IAAkB,IAAbqC,IAAmB3H,KAAK2H,SAASnF,EAAM1B,KAAUwE,IAAQpD,EAC1D,KAER,CACJ,EAEAyF,SAAU,SAASnF,EAAMoF,GACrB,IAUIC,EAEAC,EAZAlD,EAAQ,IAAIH,KAAKjC,EAAKuF,cACtBjH,EAAO,IAAI2D,KAAKmD,GAChBxE,EAAQwE,EAAQvE,WAChBc,EAAY3B,EAAK2B,UACjBwD,EAAWnF,EAAKmF,SAChBK,EAAYxF,EAAKmD,KACjB+B,GAAW,EACXO,EAAS,EACT/E,EAAQ,EACRgB,EAAM,EAKV,GAAkB,WAAd8D,EACAH,EAAO/G,EAAKoH,oBAAsBtD,EAAMsD,oBACxCJ,EAAiBtF,EAAK+D,WAAWlD,WAEjCvC,EAAOA,EAAK4D,UACRtB,IAAU0E,IACVhH,IAASgH,EAAiB1E,GAASvC,EAAUsH,aAEjDrH,GAAQ8D,EAEJiD,IACA/G,GAAQ+G,EAAOhH,EAAUuH,eAMd,KAFfH,EAASI,EADTR,EAAOS,KAAKC,MAAMzH,EAAOD,EAAUsH,aACLR,MAG1B3H,KAAKsH,MAAMM,EAASpF,EAAMyF,GAC1BP,GAAW,QAEZ,GAAkB,UAAdM,EACPnH,EAAUE,QAAQD,GAAO8D,GAAO,GAKjB,KAFfqD,EAASI,EADTR,EAAOS,KAAKE,MAAM1H,EAAOD,EAAU4H,YACLd,MAG1B3H,KAAK0I,MAAMd,EAASpF,EAAMyF,GAC1BP,GAAW,QAGZ,GAAkB,WAAdM,EAAwB,CAC/BC,EAASjI,KAAK2I,8BAA8B/D,EAAOgD,GAEtBxC,EAAkBwC,EAAQ9C,SAAUX,GACtCiB,EAAkBR,EAAME,SAAUX,KAGzD8D,GAAU,GAIC,KADfA,EAASI,EAAeJ,EAAQN,MAE5B9G,EAAUG,aAAa4G,EAASpF,EAAK2B,WAAY,GAEjDyD,EAAQxB,QAAQwB,EAAQnE,UAAsB,EAATwE,GACrChH,EAAU2G,EAASxE,GAEnBsE,GAAW,EAEnB,KAAyB,YAAdM,GACPH,EAAOD,EAAQ7E,cAAgB6B,EAAM7B,cAKtB,KAFfkF,EAASI,EAFTR,EAAOD,EAAQjF,WAAaiC,EAAMjC,WAAqB,GAAPkF,EAElBF,MAG1BzD,EAAM1B,EAAKoG,cAAgB,EAAIhB,EAAQnE,UAEvCmE,EAAQ9E,YAAY8E,EAAQ7E,cAAe6E,EAAQjF,WAAasF,EAAQ/D,GACxEjD,EAAU2G,EAASxE,GAEnBsE,GAAW,IAEM,WAAdM,IAEPC,EAASI,EADTR,EAAOD,EAAQ7E,cAAgB6B,EAAM7B,cACP4E,GAEzBnF,EAAKF,SACNY,EAAQ0E,EAAQjF,YAGfH,EAAKoB,UAAapB,EAAKQ,WAAcR,EAAK8B,WAC3CJ,EAAM0D,EAAQnE,WAGH,IAAXwE,IACAL,EAAQ9E,YAAY8E,EAAQ7E,cAAgBkF,EAAQ/E,EAAOgB,GAC3DjD,EAAU2G,EAASxE,GAEnBsE,GAAW,IAInB,OAAOA,CACX,EAEAiB,8BAA+B,SAASE,EAAOC,GAC1C,IAAI7E,GAAS6E,EAASD,GAAS,OAC3BE,EAAaT,KAAKC,MAAMtE,GAM7B,OAHIA,EAAQ8E,EAAa,MACrBA,EAAaT,KAAKE,MAAMvE,IAErB8E,CACX,EAEAzB,MAAO,SAASxG,EAAM0B,EAAMmF,GACxB,IAAIrB,EAAY9D,EAAK+D,WACjBnD,EAAQkD,EAAUjD,WAElBsE,IACAvE,GAASuE,GAGb7G,EAAK2F,SAASrD,GAEdA,GAAgB,GAChBkD,EAAUG,SAASrD,GACnBnC,EAAUH,EAAMsC,EACpB,EAEAsF,MAAO,SAAS5H,EAAM0B,EAAMmF,GACxB,IAAIvE,EAAQtC,EAAKuC,WAEjBvC,EAAKsF,QAAQtF,EAAK2C,UAAYkE,GACzB1G,EAAUH,EAAMsC,IACjBpD,KAAKsH,MAAMxG,EAAM0B,EAEzB,IAEJwG,EAAkB9B,EAAcC,OAAO,CACnCC,KAAM,SAAStG,EAAM0B,GACZ0E,EAAc+B,GAAG7B,KAAKtG,EAAM0B,IAC7BxC,KAAKsH,MAAMxG,EAAM0B,EAAM,EAE/B,EAEAc,UAAW,SAAS+D,GAChB,IAAI7E,EAAO6E,EAAQ7E,KAEC,IAAhB6E,EAAQ/B,MACR9C,EAAK+D,WAAWE,SAAS,GACzBzG,KAAKsH,MAAMD,EAAQvG,KAAM0B,GAEjC,IAEJ0G,EAAiBhC,EAAcC,OAAO,CAClCC,KAAM,SAAStG,EAAM0B,GACZ0E,EAAc+B,GAAG7B,KAAKtG,EAAM0B,IAC7BxC,KAAKwC,EAAKY,MAAQ,QAAU,SAAStC,EAAM0B,EAAM,EAEzD,IAEJ2G,EAAkBD,EAAe/B,OAAO,CACpCiC,MAAO,SAAS5G,EAAM6G,GACb7G,EAAK8B,WACN9B,EAAK8B,SAAW,CAAC,CACbJ,IAAKmF,EAAevE,SACpBmB,OAAQ,IAGpB,IAEJqD,EAAmBpC,EAAcC,OAAO,CACpCC,KAAM,SAAStG,EAAM0B,GACjB,IAAI0B,EAAKd,EACT,IAAK8D,EAAc+B,GAAG7B,KAAKtG,EAAM0B,GAC7B,GAAIA,EAAKY,MACLpD,KAAKsH,MAAMxG,EAAM0B,EAAM,QACpB,GAAIA,EAAKQ,WAAaR,EAAK8B,UAAY9B,EAAKoB,UAAYpB,EAAKyB,MAChEjE,KAAK0I,MAAM5H,EAAM0B,EAAM,OACpB,CAOH,IANA0B,EAAMpD,EAAK2C,UACXL,EAAQtC,EAAKuC,WAEbvC,EAAK+B,SAAS/B,EAAK6B,WAAa,GAChC1B,EAAUH,EAAMsC,GAETtC,EAAK2C,YAAcS,GACtBpD,EAAKsF,QAAQlC,GACbjD,EAAUH,EAAMsC,GAGpBpD,KAAKsH,MAAMxG,EAAM0B,EACrB,CAER,EACAc,UAAW,SAAS+D,GAChB,IAAI7E,EAAO6E,EAAQ7E,KACf1B,EAAOuG,EAAQvG,KACfsC,EAAQtC,EAAKuC,WAEG,IAAhBgE,EAAQ/B,KAAc9C,EAAKQ,WAAcR,EAAK8B,SAI9C4C,EAAc+B,GAAG3F,UAAU+D,IAH3BvG,EAAKsF,QAAQiB,EAAQnD,KACrBjD,EAAUH,EAAMsC,GAIxB,EACAgG,MAAO,SAAS5G,EAAM6G,EAAgBvI,GAC7B0B,EAAKQ,WAAcR,EAAK8B,UACzBxD,EAAKsF,QAAQiD,EAAe5F,UAEpC,IAEJ8F,EAAkBD,EAAiBnC,OAAO,CACtCC,KAAM,SAAStG,EAAM0B,GACjB,IAAI0B,EACAd,EAAQtC,EAAKuC,WAEjB,IAAK6D,EAAc+B,GAAG7B,KAAKtG,EAAM0B,GAC7B,GAAIA,EAAKY,MACLpD,KAAKsH,MAAMxG,EAAM0B,EAAM,QACpB,GAAIA,EAAKQ,WAAaR,EAAK8B,UAAY9B,EAAKoB,UAAYpB,EAAKyB,MAChEjE,KAAK0I,MAAM5H,EAAM0B,EAAM,QACpB,GAAIA,EAAKF,OAAQ,CAMpB,IALA4B,EAAMpD,EAAK2C,UAEX3C,EAAK+B,SAAS/B,EAAK6B,WAAa,GAChC1B,EAAUH,EAAMsC,GAETtC,EAAK2C,YAAcS,GACtBpD,EAAKsF,QAAQlC,GACbjD,EAAUH,EAAMsC,GAGpBpD,KAAKsH,MAAMxG,EAAM0B,EACrB,MACI1B,EAAKgC,YAAYhC,EAAKiC,cAAgB,GACtC9B,EAAUH,EAAMsC,GAEhBpD,KAAKsH,MAAMxG,EAAM0B,EAG7B,EACA4G,MAAO,WAAY,IAEvBI,EAAc,CACVC,OAAU,IAAIT,EACdU,MAAS,IAAIR,EACbS,OAAU,IAAIR,EACdS,QAAW,IAAIN,EACfO,OAAU,IAAIN,GAElBO,EAAQ,QACRC,EAAS,SAEb,SAAS1B,EAAeR,EAAMF,GAC1B,IAAIM,EAUJ,OATa,IAATJ,GAAcA,EAAOF,EACrBM,EAASN,EAAWE,GAEpBI,EAASJ,EAAOF,KAEZM,EAASN,EAAWM,GAIrBA,CACX,CAEA,SAASjE,EAAUlD,GACf,IAAIoC,EAAQpC,EAAK6B,WAGjB,OAFWoB,EAASjD,GAAQM,EAAiB8B,GAAS7B,EAAa6B,IAErDpC,EAAK2C,SACvB,CAEA,SAASY,EAAWvD,EAAMqD,GACtB,IAAIN,EAAMV,EAiBV,OAfArC,EAAO,IAAI2D,KAAK3D,EAAKiC,cAAejC,EAAK6B,WAAY7B,EAAK2C,WAC1DxC,EAAUH,EAAM,GAEhB+C,EAAO/C,EAAKiC,cAERoB,IAAcjE,GACdc,EAAaF,EAAMqD,GAAY,GAC/BrD,EAAKsF,QAAQtF,EAAK2C,UAAY,IAE9B3C,EAAKsF,QAAQtF,EAAK2C,WAAa,GAAK3C,EAAKgE,UAAY,KAGzD7D,EAAUH,EAAM,GAChBqC,EAAOmF,KAAKC,OAAOzH,EAAK4D,UAAY,IAAID,KAAKZ,EAAM,EAAG,GAAI,IAAM,OAEzD,EAAIyE,KAAKC,MAAMpF,EAAO,EACjC,CAEA,SAASoC,EAAYzE,EAAMqD,GACvB,IACI6F,EAAkB,GADH9I,EAAgBJ,GAAMgE,SACC,GAAKX,GAAa,KAAO,EAMnE,OAJI6F,EAAkB,IAClBA,GAAmB,GAGhB1B,KAAK2B,MAAMnJ,EAAK2C,UAAYuG,GAAmB,GAAK,CAC/D,CAEA,SAAS5E,EAAkBH,EAASd,GAChC,OAAOc,GAAWA,EAAUd,EAAY,EAAI,EAChD,CAEA,SAASqB,EAAgB1E,EAAM0B,EAAM2B,GACjC,IAAI8B,EAASzD,EAAKyD,OAElB,IAAKA,EACD,OAAOV,EAAYzE,EAAMqD,GAG7B,IAAI+F,EAAW,IAAIzF,KAAK3D,EAAKiC,cAAejC,EAAK6B,WAAa,EAAG,GAC7DwH,EAAe5E,EAAY2E,EAAU/F,GAErCD,EAAMkB,EAAkB5C,EAAK0B,IAAKC,GAElCiG,EAAYlG,EAAMkB,EAAkB,IAAIX,KAAK3D,EAAKiC,cAAejC,EAAK6B,WAAY,GAAGmC,SAAUX,GAC/FkG,EAAWnG,EAAMkB,EAAkB8E,EAASpF,SAAUX,GAU1D,OARI8B,EAAS,EACTA,EAASkE,GAAgBlE,EAAS,GAAKoE,EAAW,EAAI,IAC/CD,IACPnE,GAAU,GAGdkE,GAAiBE,EAAW,EAAI,EAE5BpE,GAAUmE,EAAY,EAAI,IAAMnE,EAASkE,EAClC,KAGJlE,CACX,CAEA,SAASE,EAAcrF,EAAMqD,GACzB,OAAOoB,EAAY,IAAId,KAAK3D,EAAKiC,cAAejC,EAAK6B,WAAa,EAAG,GAAIwB,EAC7E,CAEA,SAAS+B,EAASpF,EAAM0B,EAAM2B,GAC1B,OAAOoB,EAAYzE,EAAMqD,KAAeqB,EAAgB1E,EAAM0B,EAAM2B,EACxE,CAqCA,SAASzB,EAAW4H,EAAOC,EAAOjH,GAM9B,IALA,IAGIkH,EAHAlF,EAAM,EACNnD,EAASmI,EAAMnI,OACfsI,EAAiB,GAGdnF,EAAMnD,EAAQmD,IAAO,CAOxB,GANAkF,EAAYF,EAAMhF,GAEdhC,IACAkH,EAAYlH,EAAUkH,IAGtBD,IAAUC,EACV,OAAO,KACAD,EAAQC,GACfC,EAAehF,KAAK+E,EAE5B,CAEA,OAAOC,CACX,CAEA,SAASC,EAAWC,EAAMC,GAKtB,IAJA,IAEIL,EAFAjF,EAAM,EACNnD,EAASwI,EAAKxI,OAGXmD,EAAMnD,EAAQmD,IAAO,CAExB,GADAiF,EAAQM,SAASF,EAAKrF,GAAM,IACxBwF,MAAMP,IAAUA,EAAQK,EAAMhG,OAAS2F,EAAQK,EAAMrI,KAAkB,IAAVgI,GAAeK,EAAMhG,MAAQ,EAC1F,OAAO,KAGX+F,EAAKrF,GAAOiF,CAChB,CAEA,OAAOI,EAAKjH,KAAKC,EACrB,CAEA,SAASoH,EAAiBJ,GAItB,IAHA,IACIJ,EAAOS,EAAa9G,EADpBoB,EAAM,EAAGnD,EAASwI,EAAKxI,OAGpBmD,EAAMnD,EAAQmD,IAAO,CAMxB,GAJA0F,GADAT,EAAQI,EAAKrF,IACOnD,OACpB+B,EAAMqG,EAAMU,UAAUD,EAAc,GAAGE,eAEvChH,EAAM1C,EAAc0C,MACRhE,EACR,OAAO,KAGXyK,EAAKrF,GAAO,CACRW,OAAQ4E,SAASN,EAAMU,UAAU,EAAGD,EAAc,GAAI,KAAO,EAC7D9G,IAAKA,EAEb,CACA,OAAOyG,CACX,CAuBA,SAASnH,EAAe1C,GACpB,IAAIoC,EAAQpC,EAAK6B,WAEjB,OAAc,IAAVO,EACuD,IAAnD,IAAIuB,KAAK3D,EAAKiC,cAAe,EAAG,IAAIJ,WAC7B,GAEJ,GAEJrB,EAAO4B,EAClB,CAEA,SAASa,EAASF,GAEd,OADAA,EAAOA,EAAKd,eACI,GAAM,GAAOc,EAAO,KAAQ,GAAQA,EAAO,KAAQ,CACvE,CAEA,SAASF,EAAoBwH,EAAGC,GAC5B,OAAOD,EAAIC,CACf,CAEA,SAASC,EAAgBC,EAAYC,GACjC,IAAapJ,EAAQrB,EAAjBwE,EAAM,EACNkG,EAAQ,GAEZ,GAAIF,EAIA,IAFAnJ,GADAmJ,EAAaA,EAAWG,OAAmC,IAA7BH,EAAWI,QAAQ,KAAc,IAAM,MACjDvJ,OAEbmD,EAAMnD,EAAQmD,KACjBxE,EAAO6K,GAAaL,EAAWhG,GAAMiG,KAGjCC,EAAM/F,KAAK3E,GAKvB,OAAO0K,CACX,CAEA,SAASI,EAAYN,EAAYxK,EAAMyK,GAKnC,IAJA,IAAIC,EAAQK,MAAMC,QAAQR,GAAcA,EAAaD,EAAgBC,EAAYC,GAC7EQ,EAAWjL,EAAK4D,UAAY5D,EAAKK,kBACjCmE,EAAM,EAAGnD,EAASqJ,EAAMrJ,OAErBmD,EAAMnD,EAAQmD,IACjB,GAAIkG,EAAMlG,GAAKZ,YAAcqH,EACzB,OAAO,EAIf,OAAO,CACX,CAEA,SAASC,EAAkBR,EAAOD,GAC9B,IACIpJ,EACArB,EAFAwE,EAAM,EAGND,EAAS,GAAG4G,OAAOT,GAEvB,IAAKrJ,EAASkD,EAAOlD,OAAQmD,EAAMnD,EAAQmD,IACvCxE,EAAOuE,EAAOC,GACdxE,EAAOX,EAAMI,SAAS2L,QAAQpL,EAAMyK,GAAQzK,EAAKoH,oBAAqB,WACtE7C,EAAOC,GAAOnF,EAAMgM,SAASrL,EAAMsB,GAGvC,OAAOiD,EAAO+G,KAAK,IACvB,CAqCA,SAASC,EAAgBzH,EAAOpC,GAC5B,IAAI1B,EAAO,IAAI2D,KAAKG,GAEpB,OAAQpC,EAAKmD,MACT,IAAK,SACD7E,EAAKgC,YAAYhC,EAAKiC,cAAe,GAAI,IACzC,MAEJ,IAAK,UACDjC,EAAKgC,YAAYhC,EAAKiC,cAAejC,EAAK6B,WAAa,EAAG,GAC1D,MAEJ,IAAK,SACD3B,EAAaF,EAAM0B,EAAK2B,WAAY,GACpCrD,EAAKsF,QAAQtF,EAAK2C,UAAY,GAmBtC,OAZIjB,EAAKY,OACLtC,EAAK2F,SAAS,IAGdjE,EAAKkE,SACL5F,EAAK6F,WAAW,IAGhBnE,EAAKsE,SACLhG,EAAKiG,WAAW,IAGbjG,CACX,CAEA,SAASwL,EAAiBC,EAAc3H,EAAOgB,EAAW4G,GAOtD,IANA,IAEI3G,EACA4G,EACAC,EAJAC,EAAqBJ,EAAapK,OAClCyK,EAAS,GAKJtH,EAAM,EAAGnD,EAASyD,EAAUzD,OAAQmD,EAAMnD,EAAQmD,KACvDO,EAAWD,EAAUN,IAEN,EACXO,EAAW8G,EAAqB9G,EAEhCA,GAAY,EAGhB4G,EAAQF,EAAa1G,GACrB6G,GAAWF,GAAQC,EAAM7H,MAAQ4H,EAE7BC,GAASA,EAAM7H,OAASA,GAAS8H,GACjCE,EAAOnH,KAAKgH,GAIpB,OAAOG,CACX,CAEA,SAASC,GAAqBN,EAAcO,EAAgBvB,GAIxD,IAHA,IACIkB,EADAG,EAAS,GAGJtH,EAAM,EAAGA,EAAMiH,EAAapK,OAAQmD,IAEpCsG,EAAYkB,GADjBL,EAAQF,EAAajH,IACkBV,MAAO2G,IAC1CqB,EAAOnH,KAAKgH,GAIpB,OAAOG,CACX,CA2NA,SAASG,GAAcjM,EAAMyK,GACzB,OAAOA,EAAOpL,EAAMI,SAAS0F,OAAOnF,EAAMyK,GAAQzK,EAAKoH,mBAC3D,CAEA,SAASyD,GAAapB,EAAOgB,GAOzB,OANAhB,EAAQpK,EAAM6M,UAAUzC,EAAOvI,KAElBuJ,IACThB,EAAQhK,EAAS0M,MAAM1C,EAAOgB,IAG3BhB,CACX,CAEA,SAAS2C,GAAcC,EAAU5B,GAQ7B,IAPA,IACI6B,EACAC,EACA9C,EACA+C,EACAC,EAAUvC,EALVwC,EAAQL,EAAS1B,MAAM,KAOlBnG,EAAM,EAAGnD,EAASqL,EAAMrL,OAAQmD,EAAMnD,EAAQmD,IASnD,GAPA+H,GADAD,EAAOI,EAAMlI,GAAKmG,MAAM,MACR,GAChBlB,EAAQ6C,EAAK,IAEqB,IAA9BC,EAAS3B,QAAQ,UACjB4B,EAAOD,EAASpC,UAAUoC,EAAS3B,QAAQ,SAASD,MAAM,KAAK,IAG/DlB,EAGA,IAAKgD,EAAW,EAAGvC,GAFnBT,EAAQA,EAAMkB,MAAM,MAEmBtJ,OAAQoL,EAAWvC,EAAauC,IACnEhD,EAAMgD,GAAY5B,GAAapB,EAAMgD,GAAWD,GAAQ/B,GAKpE,GAAIhB,EACA,MAAO,CACHA,MAAOA,EACP+C,KAAMA,EAGlB,CAEA,SAASG,GAAUC,EAAOnC,EAAM5G,GAC5B,IACIgJ,EAAQpD,EACCpI,EAETK,EAAMoL,EAAMC,EACF1J,EAAWG,EALrBwJ,EAAW,CAAC,EAEZxI,EAAM,EACNkF,GAAY,EAkBhB,IAAKkD,EACD,OAAO,KASX,KANAG,EAAQH,EAAMjC,MAAM,OAET,KAAqC,IAA9BiC,EAAMhC,QAAQ,aAAiD,IAA5BgC,EAAMhC,QAAQ,WAAgD,IAA7BgC,EAAMhC,QAAQ,YAChGmC,EAAQH,EAAMjC,MAAM,MAGnBnG,EAAM,EAAGnD,EAAS0L,EAAM1L,OAAQmD,EAAMnD,EAAQmD,KAGd,KAFjCsI,EAAOzN,EAAM4N,KAAKF,EAAMvI,KAEfoG,QAAQ,WACboC,EAASlJ,MAAQsI,GAAcU,EAAMrC,IACH,IAA3BqC,EAAKlC,QAAQ,SACpBoC,EAASvL,IAAM2K,GAAcU,EAAMrC,IACA,IAA5BqC,EAAKlC,QAAQ,UACpBoC,EAASE,QAAUd,GAAcU,EAAMrC,IACL,IAA3BqC,EAAKlC,QAAQ,SACpBlJ,EAAOoL,EAAK3C,UAAU,GACf9K,EAAM4N,KAAKH,KAClBpL,EAAOoL,GAMf,IAAKtI,EAAM,EAAGnD,GAFdK,EAAOA,EAAKiJ,MAAM,MAEUtJ,OAAQmD,EAAMnD,EAAQmD,IAK9C,OAHAqI,EADWnL,EAAK8C,GACEmG,MAAM,KACxBlB,EAAQpK,EAAM4N,KAAKJ,EAAO,IAAIlC,MAAM,KAE5BtL,EAAM4N,KAAKJ,EAAO,IAAIzC,eAC1B,IAAK,OACD4C,EAASnI,KAAO4E,EAAM,GAAG0D,cACzB,MACJ,IAAK,QACDH,EAAStB,MAAQb,GAAapB,EAAM,GAAIgB,GACxC,MACJ,IAAK,QACDuC,EAASI,MAAQrD,SAASN,EAAM,GAAI,IACpC,MACJ,IAAK,WACDuD,EAASnG,SAAWkD,SAASN,EAAM,GAAI,IACvC,MACJ,IAAK,WACDuD,EAAShH,QAAU4D,EAAWH,EAAO,CAAE3F,MAAO,EAAGrC,IAAK,KACtDiI,GAAY,EACZ,MACJ,IAAK,WACDsD,EAASpH,QAAUgE,EAAWH,EAAO,CAAE3F,MAAO,EAAGrC,IAAK,KACtDiI,GAAY,EACZ,MACJ,IAAK,SACDsD,EAAS1K,MAAQsH,EAAWH,EAAO,CAAE3F,MAAO,EAAGrC,IAAK,KACpDiI,GAAY,EACZ,MACJ,IAAK,aACDsD,EAAS9K,UAAY0H,EAAWH,EAAO,CAAE3F,OAAQ,GAAIrC,IAAK,KAC1DiI,GAAY,EACZ,MACJ,IAAK,YACDsD,EAASlK,SAAW8G,EAAWH,EAAO,CAAE3F,OAAQ,IAAKrC,IAAK,MAC1DiI,GAAY,EACZ,MACJ,IAAK,UACDsD,EAASxL,OAASoI,EAAWH,EAAO,CAAE3F,MAAO,EAAGrC,IAAK,KACrDiI,GAAY,EACZ,MACJ,IAAK,QACDsD,EAASxJ,SAAWA,EAAWyG,EAAiBR,GAChDC,GAAY,EACZ,MACJ,IAAK,WACDsD,EAAS7J,MAAQyG,EAAWH,EAAO,CAAE3F,OAAQ,GAAIrC,IAAK,KACtDiI,GAAY,EACZ,MACJ,IAAK,WACDsD,EAASlI,UAAY8E,EAAWH,EAAO,CAAE3F,OAAQ,IAAKrC,IAAK,MAC3D,MACJ,IAAK,OACDuL,EAAS3J,UAAYA,EAAY3C,EAAc+I,EAAM,IAKjE,OAAIuD,EAASnI,OAASzF,GAAgB4N,EAASI,QAAUhO,GAAe4N,EAAStB,MACtE,MAGNsB,EAASnG,WACVmG,EAASnG,SAAW,GAGpBxD,IAAcjE,IACd4N,EAAS3J,UAAYA,EAAYhE,EAAMgO,UAAUC,SAASC,UAG1D/J,IACAwJ,EAASxJ,SAAWA,EAASZ,MAnHjB,SAASyH,EAAGC,GACxB,IAAIkD,EAAOnD,EAAEjH,IACTqK,EAAOnD,EAAElH,IAUb,OARIoK,EAAOnK,IACRmK,GAAQ,GAGPC,EAAOpK,IACPoK,GAAQ,GAGLD,EAAOC,CAClB,KAyGIT,EAASlI,YAAc4E,IACvBsD,EAASlI,UAAY,MAGzBkI,EAASlF,cAAgB4B,EACzBsD,EAASnJ,QAAUA,EAEZmJ,EACX,CAEA,SAASU,GAAkBrB,EAAU5B,GAOjC,IANA,IAIIkD,EAJAlE,EAAQ4C,EAAS5C,MACjB+C,EAAOH,EAASG,MAAQ,GACxBnL,EAASoI,EAAMpI,OACfmD,EAAM,EAGHA,EAAMnD,EAAQmD,IACjBmJ,EAAMlE,EAAMjF,GACZmJ,EAAMlO,EAAS2L,QAAQuC,EAAKnB,GAAQ/B,GAAQkD,EAAIvG,oBAAqB,WACrEqC,EAAMjF,GAAOnF,EAAMgM,SAASsC,EAAK,oBAOrC,OAJInB,IACAA,EAAO,SAAWA,GAGfA,EAAO,IAAM/C,EAAM6B,KAAK,KAAO,GAC1C,CAEA,SAASsC,GAAUlM,EAAM+I,GACrB,IAAIpH,EAAY3B,EAAK2B,UACjBwK,EAAa,QAAUnM,EAAKmD,KAAKuF,cACjC8C,EAAUxL,EAAKwL,SAAW,GAC1BpJ,EAAQpC,EAAKoC,OAAS,GACtBrC,EAAMC,EAAKD,KAAO,GAClBiK,EAAQhK,EAAKgK,MA4EjB,OA1EIrI,IAAcjE,IACdiE,EAAYhE,EAAMgO,UAAUC,SAASC,UAGrC7L,EAAKmF,SAAW,IAChBgH,GAAc,aAAenM,EAAKmF,UAGlCnF,EAAK0L,QACLS,GAAc,UAAYnM,EAAK0L,OAG/B1B,IACAA,EAAQjM,EAAS2L,QAAQM,EAAOjB,GAAQiB,EAAMtE,oBAAqB,WAEnEyG,GAAc,UAAYxO,EAAMgM,SAASK,EAAO,qBAGhDhK,EAAKF,SACLqM,GAAc,YAAcnM,EAAKF,QAGjCE,EAAKyB,QACL0K,GAAc,aAAenM,EAAKyB,OAGlCzB,EAAKoB,WACL+K,GAAc,cAAgBnM,EAAKoB,UAGnCpB,EAAKQ,YACL2L,GAAc,eAAiBnM,EAAKQ,WAGpCR,EAAK8B,WACLqK,GAAc,UA1pBtB,SAA8BhE,GAI1B,IAHA,IACIJ,EAAOqE,EADPtJ,EAAM,EAAGnD,EAASwI,EAAKxI,OACHkD,EAAS,GAE1BC,EAAMnD,EAAQmD,IAEI,iBADrBiF,EAAQI,EAAKrF,IAETsJ,EAAcrE,GAEdqE,EAAc,GAAKrN,EAAUgJ,EAAMrG,KAE/BqG,EAAMtE,SACN2I,EAAcrE,EAAMtE,OAAS2I,IAIrCvJ,EAAOI,KAAKmJ,GAEhB,OAAOvJ,EAAO8G,UAClB,CAuoBkC0C,CAAqBrM,EAAK8B,WAGpD9B,EAAKY,QACLuL,GAAc,WAAanM,EAAKY,OAGhCZ,EAAKkE,UACLiI,GAAc,aAAenM,EAAKkE,SAGlClE,EAAKsE,UACL6H,GAAc,aAAenM,EAAKsE,SAGlCtE,EAAKoD,YACL+I,GAAc,aAAenM,EAAKoD,WAGlCzB,IAAcjE,IACdyO,GAAc,SAAWpN,EAAU4C,IAGnCS,IACAA,EAAQ,UAAY4J,GAAkB5J,EAAO2G,IAG7ChJ,IACAA,EAAM,QAAUiM,GAAkBjM,EAAKgJ,IAGvCyC,IACAA,EAAU,SAAWQ,GAAkBR,EAASzC,KAGhD3G,GAASrC,GAAOyL,KAChBW,EAAa/J,EAAQrC,EAAMyL,EAAU,SAAWW,GAG7CA,CACX,CAEAxO,EAAML,WAAa,CACf0C,KAAM,CACFsM,MAAOrB,GACPiB,UAAWA,IAEfK,OA9fJ,SAAgBtC,EAAO7H,EAAOrC,EAAKgJ,GAC/B,IAAI/I,EACA8D,EAAW0I,EAASC,EACpB7L,EAAOsD,EAASI,EAChBoI,EAAYC,EACZC,EAAWC,EACXC,EAAeC,EACfzC,EACA0C,EACAC,EACAC,EACAxB,EAAOvI,EACPC,EACA+J,EACApD,EAEAqD,EACAC,EACAC,EACAC,EAJAnD,EAAS,GAWb,KALApK,EAAOiL,GAAUhB,EAAMuD,eAAgBzE,EAAM,CACzC3G,OAAQmI,GAAcN,EAAM7H,MAAO2G,GAAQwB,GAAcN,EAAM7H,MAAO6H,EAAMwD,eAAiB1E,IAASpL,EAAMW,KAAKsH,cACjH7F,KAAMwK,GAAcN,EAAMlK,IAAKgJ,GAAQwB,GAAcN,EAAMlK,IAAKkK,EAAMyD,aAAe3E,IAASpL,EAAMW,KAAKsH,iBAIzG,MAAO,CAACqE,GAIZkD,GADA/J,EAAYpD,EAAKoD,WACQ,EAAI,EAE7BwJ,EAAY5M,EAAKoC,MACjByK,EAAU7M,EAAKD,KAEX6M,GAAaC,KACb5C,EAAQA,EAAM0D,MAAM,CAChBvL,MAAOwK,EAAY,IAAI3K,KAAK2K,EAAU7E,MAAM,IAAMrK,EAClDqC,IAAK8M,EAAU,IAAI5K,KAAK4K,EAAQ9E,MAAM,IAAMrK,KAKpDuP,GADAC,EAAajD,EAAM7H,OACOF,UAC1B8K,EAAiBrO,EAAgBuO,KAEjC5C,EAAiBzB,EAAgBoB,EAAM2D,oBAAqB7E,IAExC,IAAM/I,EAAKwL,UAC3BlB,EAAiBtK,EAAKwL,QAAQzD,MAC9BkC,EAAM4D,IAAI,sBAAuBrE,EAAkBc,EAAgBvB,KAGvE4D,EAAcvK,EAAQ,IAAIH,KAAKG,GAC/BrC,EAAM,IAAIkC,KAAKlC,GAEfgN,EAAW/M,EAAKmD,KAChBA,EAAO6D,EAAY+F,GACnBrB,EAAQ1L,EAAK0L,MAET1L,EAAKgK,OAAShK,EAAKgK,MAAQjK,IAC3BA,EAAM,IAAIkC,KAAKjC,EAAKgK,QAGxB8C,EAA6B,WAAbC,GAAsC,YAAbA,GAAuC,WAAbA,EAE/D3K,EAAQ6K,GAAgBvB,GAAS1L,EAAKmF,SAAW,GAAK2H,IACtC,UAAbC,GAAqC,WAAbA,KAA2B/M,EAAKsE,QACnDlC,EAAQ,IAAIH,KAAKgL,IAEzBrM,EAAQwB,EAAMvB,WACdqD,EAAU9B,EAAMgC,aAChBE,EAAUlC,EAAMoC,aAEXxE,EAAKY,QACNA,EAAQsM,EAAWrM,YAGlBb,EAAKkE,UACNA,EAAUgJ,EAAW9I,cAGpBpE,EAAKsE,UACNA,EAAU4I,EAAW1I,cAGzBpC,EAAM6B,SAASrD,EAAOsD,EAASI,EAAS4I,EAAWvO,oBAGvDqB,EAAKuF,aAAe,IAAItD,KAAKG,GAEzBgB,IACAhB,EA7MR,SAA2BA,EAAOpC,GAC9B,IAAI1B,EAAO,IAAI2D,KAAKG,GAEpB,OAAQpC,EAAKmD,MACT,IAAK,SACD7E,EAAKgC,YAAYhC,EAAKiC,cAAe,EAAG,GACxC,MAEJ,IAAK,UACDjC,EAAKgC,YAAYhC,EAAKiC,cAAejC,EAAK6B,WAAY,GACtD,MAEJ,IAAK,SACD3B,EAAaF,EAAM0B,EAAK2B,WAAY,GAmB5C,OAZI3B,EAAKY,OACLtC,EAAK2F,SAAS,GAGdjE,EAAKkE,SACL5F,EAAK6F,WAAW,GAGhBnE,EAAKsE,SACLhG,EAAKiG,WAAW,GAGbjG,CACX,CA4KgBwP,CAAkB1L,EAAOpC,GACjCD,EAAM8J,EAAgB9J,EAAKC,GAEhBrB,EAAgBoB,GAAOpB,EAAgByD,GACvC,IACPxB,EAAQwB,EAAMvB,WACdd,EAAIkE,SAASrD,EAAOwB,EAAMgC,aAAchC,EAAMoC,aAAcpC,EAAMzD,mBAClEN,EAAUI,UAAUsB,EAAKa,IAG7BZ,EAAKuF,aAAe,IAAItD,KAAKG,GAC7BpC,EAAK+N,WAAalE,EAAgBzH,EAAOpC,IAG7C0M,EAAazC,EAAM+D,WACnB,IAqGsB1P,EAClB2P,EACAC,EACAC,EAxGAC,EAAqBnE,EAAMoE,SAAW,MAAW,EASrD,IARArO,EAAK+D,WAAaD,EAAYzF,EAAUiQ,gBAAgBlM,GAEpDe,EAAKyD,OACLzD,EAAKyD,MAAM5G,EAAMkN,EAAY9K,GAGjCe,EAAK4B,MAAM3C,EAAOrC,EAAKC,GAEhBoC,GAASrC,GAAK,CACjB0M,EAAU,IAAIxK,KAAKG,GACnB7D,EAAQkO,EAASC,GACjB,IAAI6B,EAAuB,IAAItM,KAAKG,GAKpC,GAJA7D,EAAQgQ,EAAsB7B,EAAa0B,IAEhChM,GAASuK,GAAe4B,EAAuB5B,KAEzCvD,EAAYkB,EAAgBlI,EAAO2G,IAAS3F,EAIzD,GAFAoJ,GADA1I,EAAYzF,EAAUmQ,UAAUnQ,EAAU4C,QAAQmB,IAAUzD,EAAgBqB,EAAK+D,aAC3D2I,EAElBO,IAAiB7K,EAAMF,WAAa8K,IAAmBrO,EAAgBqB,EAAK+D,YAAa,CACzF,IAAI0K,EAAYxE,EAAMwD,eAAiBxD,EAAMyD,YACzCgB,EAAUzE,EAAMyD,aAAezD,EAAMwD,cAEzC,IAAKxD,EAAMoE,WACFtF,GAAQ0F,IAAgB1F,IAAS0F,GAAY,CAC9C,IAAIE,EAAkBpE,GAAcnI,EAAO2G,GAAQwB,GAAcN,EAAM7H,MAAO2G,GAC1E6F,EAAgBrE,GAAckC,EAAS1D,GAAQwB,GAAcN,EAAMlK,IAAKgJ,GACxE8F,EAAoBtE,GAAcnI,EAAOqM,GAAalE,GAAcN,EAAM7H,MAAOqM,GACjFK,GAAkBvE,GAAckC,EAASiC,GAAWnE,GAAcN,EAAMlK,IAAK2O,GAEjF,GAAIC,IAAoBE,EAAmB,CACvC,IAAIE,GAA2D,KAAvCJ,EAAkBE,GAC1CzB,EAAe,IAAInL,KAAKG,EAAMF,UAAY6M,IAC1CzB,EAAmBxJ,EAAYiL,EACnC,CAEA,GAAIH,IAAkBE,GAAiB,CACnC,IAAIE,GAAqD,KAAnCJ,EAAgBE,IACtCzB,EAAa,IAAIpL,KAAKwK,EAAQvK,UAAY8M,IAC1CzB,EAAiBf,EAAUwC,EAC/B,CACJ,CAIJ5E,EAAOnH,KAAKgH,EAAMgF,aAAa,CAC3B7M,MAAOgL,GAAgB,IAAInL,KAAKG,GAChCrC,IAAKsN,GAAcZ,EACnB1I,WAAYuJ,GAAoBxJ,EAChCoL,SAAU3B,GAAkBf,KAGhCY,EAAeC,EAAaC,EAAmBC,EAAiB,IACpE,MACItD,EAAMlG,WAAaD,EACnBmG,EAAMiF,SAAW1C,EACjBpC,EAAOnH,KAAKgH,GAIpB,GAAI7G,GAcA,GAbAD,EAAKyB,KAAKxC,EAAOpC,GACjBmD,EAAK4B,MAAM3C,EAAOrC,EAAKC,GAEnBoC,EAAQpC,EAAK+N,aAEbhE,EAAeM,GADfN,EAAeD,EAAiBM,EAAO+E,MAAMhC,GAAaD,EAAY9J,EAAWpD,EAAKgK,OACpCM,EAAgBvB,GAClEqB,EAASA,EAAO+E,MAAM,EAAGhC,GAAY1D,OAAOM,GAE5C/J,EAAK+N,WAAalE,EAAgBzH,EAAOpC,GAEzCmN,EAAa/C,EAAOzK,QAGpB+L,GAASA,IAAUyB,EACnB,UAGD,CACH,GAAIzB,GAASA,IAAUyB,EACnB,MAGJA,GAAc,EAEd,IAAIiC,IAeRnB,SACAC,SACAC,SAFAF,GADkB3P,EAd0B8D,GAe1BsD,oBAClBwI,EAAgB,IAAIjM,KAAK3D,EAAK4D,UAAY,MAC1CiM,EAAsBD,EAAcxI,oBAEjCuI,EAAaE,GAlBZhL,EAAKyB,KAAKxC,EAAOpC,GAEboP,IAAkC,WAAdpP,EAAKmD,MAAqB9E,EAAUiQ,gBAAgBrE,EAAM7H,OAAOF,YAAc7D,EAAUiQ,gBAAgBlM,GAAOF,YACpIlC,EAAK+D,WAAaD,EAAY,IAAI7B,KAAKG,EAAMF,UAAY,OAG7DiB,EAAK4B,MAAM3C,EAAOrC,EAAKC,EAC3B,CACJ,CAEA,OAAOoK,CACX,EAgTI5I,UAAWA,EACXK,WAAYA,EACZkB,YAAaA,EACbY,cAAeA,EACfyF,YAAaA,EACbI,kBAAmBA,GAGvB,IAAI6F,GAA2B1R,EAAM2R,UAAS,SAAUC,GACjD,IAAI/J,EAAY+J,EAAI/J,UAChBgK,EAAWD,EAAIC,SACfzP,EAAMwP,EAAIxP,IAEd,OAAsB,UAAdyF,EACP,gHACmG3H,EAAO2R,EAASC,aADnH,qGAG8E5R,EAAO2R,EAASC,aAAgB,IAAO5R,EAAO2R,EAASrK,UAAa,4CAAkDtH,EAAO2R,EAASrK,UAHpN,eAKW,KAED,WAAdK,EACI,iEACgD3H,EAAO2R,EAASE,UADhE,+GAGsF7R,EAAO2R,EAASE,UAHtG,6BAKW,KAEA,YAAdlK,EACG,iEAAwE3H,EAAO2R,EAASE,UAAxF,uOAIsK7R,EAAO2R,EAASE,UAAa,OAAW7R,EAAO2R,EAASlR,MAJ9N,wDAKqET,EAAO2R,EAASlR,MAAS,YAAiBT,EAAO2R,EAASlR,MAL/H,iJAQ2IT,EAAO2R,EAASE,UAAa,IAAO7R,EAAO2R,EAAS9N,KAAQ,YAAiB7D,EAAO2R,EAASE,UAAa,IAAO7R,EAAO2R,EAAS9N,KAR5Q,oDASsE7D,EAAO2R,EAASE,UAAa,KAAS/R,EAAMgS,KAAK,eATvH,kDAU+D9R,EAAO2R,EAAS9N,KAAQ,KAAS/D,EAAMgS,KAAK,eAV3G,kCAcW,KAED,WAAdnK,EACI,iEAAwE3H,EAAO2R,EAASE,UAAxF,kMAIqI7R,EAAO2R,EAASE,UAAa,IAAO7R,EAAO2R,EAAS9O,OAJzL,gDAKkE7C,EAAO2R,EAAS9O,OAAU,YAAiB7C,EAAO2R,EAAS9O,OAAU,KAAS/C,EAAMgS,KAAK,eAL3J,wDAMqE9R,EAAO2R,EAASlR,MAAS,YAAiBT,EAAO2R,EAASlR,MAN/H,0IASoIT,EAAO2R,EAASE,UAAa,IAAO7R,EAAO2R,EAAS9N,KATxL,oDAUsE7D,EAAO2R,EAASE,UAAa,KAAS/R,EAAMgS,KAAK,eAAkB,iDAAyD9R,EAAO2R,EAAS9N,KAAQ,KAAS/D,EAAMgS,KAAK,eAAkB,WAAgB9R,EAAO2R,EAASI,IAAO,uCAA6C/R,EAAO2R,EAASI,GAAKJ,EAAS9O,OAAU,KAAS/C,EAAMgS,KAAK,eAVhZ,iCAcW,KAED,UAAdnK,EACI,iEAAwE3H,EAAOkC,EAAI8P,OAAnF,0NAI+JhS,EAAOkC,EAAI8P,OAAU,OAAWhS,EAAOkC,EAAI+P,OAJ1M,uKAO+JjS,EAAOkC,EAAI8P,OAAU,OAAWhS,EAAOkC,EAAIgQ,OAP1M,oDAQkElS,EAAOkC,EAAIiQ,YAAe,YAAiBnS,EAAOkC,EAAIiQ,YAAe,OAAWnS,EAAOkC,EAAIiQ,YAR7J,+JAW+JnS,EAAOkC,EAAI8P,OAAU,OAAWhS,EAAOkC,EAAIkQ,IAX1M,+CAY6DpS,EAAOkC,EAAIkQ,IAAO,iBAAsBpS,EAAOkC,EAAIkQ,IAZhH,gDAgBW,GAEnB,IAGIC,GAAW,CACX,CAAExO,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,IAGlB0M,GAAe,CACf,CAAEzO,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,IAGlB2M,GAAe,CACf,CAAE1O,IAAK,EAAG+B,OAAQ,GAClB,CAAE/B,IAAK,EAAG+B,OAAQ,IAGlB4M,GAAuBnS,EAAOyG,OAAO,CACrC2L,KAAM,SAASC,EAAS1L,GACpB,IAAIzC,EACAoO,EAAOhT,KACPwJ,EAAcnC,GAAWA,EAAQmC,YAErC9I,EAAOuI,GAAG6J,KAAKG,KAAKD,EAAMD,EAAS1L,GAEnC2L,EAAKE,QAAUF,EAAKD,SAEpB1L,EAAU2L,EAAK3L,SACPzC,MAAQA,EAAQyC,EAAQzC,OAAS/D,EAAUsS,QAE/C3J,IACAnC,EAAQmC,YAAcA,GAGL,iBAAV5E,IACPyC,EAAQzC,MAAQzE,EAAM6M,UAAUpI,EAAO,oBAGd,OAAzByC,EAAQ+L,eACR/L,EAAQ+L,aAAejT,EAAMgO,UAAUC,SAASC,UAGpD2E,EAAKK,WAAa,IAAMhM,EAAQiM,IACpC,EAEAjM,QAAS,CACLkD,MAAO,GACP3F,MAAO,GACPrE,SAAU,GACVgT,UAAU,EACVH,aAAc,KACd5J,YAAa,CACT,QACA,QACA,SACA,UACA,UAEJgK,QAAQ,EACRxB,SAAU,CACNyB,OAAQ,SACRC,sBAAuB,oBACvBlK,YAAa,CACT8I,MAAO,QACP7I,OAAQ,SACRC,MAAO,QACPC,OAAQ,SACRC,QAAS,UACTC,OAAQ,UAEZJ,OAAQ,CACJwI,YAAa,iBACbtK,SAAU,YAEd+B,MAAO,CACHuI,YAAa,iBACbtK,SAAU,WAEdgC,OAAQ,CACJhC,SAAU,WACVsK,YAAa,iBACbC,SAAU,eAEdtI,QAAS,CACLqI,YAAa,iBACbC,SAAU,cACVvK,SAAU,YACVzD,IAAK,OACLpD,KAAM,QAEV+I,OAAQ,CACJoI,YAAa,iBACbC,SAAU,cACVvK,SAAU,WACVyK,GAAI,OACJlP,MAAO,QACPgB,IAAK,MACLpD,KAAM,QAEVyB,IAAK,CACD8P,MAAO,OACPsB,YAAa,OACbrB,MAAO,QACPC,MAAO,SACPC,WAAY,iBACZC,GAAI,OAERmB,gBAAiB,CACb/K,MAAO,QACPC,OAAQ,SACR+K,MAAO,QACPC,OAAQ,SACRC,KAAM,QAEVC,SAAU,CACN9P,IAAK,MACL+P,QAAS,UACTC,QAAS,iBAKrBtH,OAAQ,CAAC,UAETuH,cAAe,WACX,IAAInB,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OAEhBpB,EAAKqB,WACAC,KAAK,qBACLC,oBAAoB,CACjBhB,SAAUP,EAAK3L,QAAQkM,SACvBhJ,MAAO/H,EAAKmF,UAAY,EACxB6M,SAAU,EACVC,OAAQ,IACRC,IAAK,EACLC,OAAQ,WACJnS,EAAKmF,SAAW3H,KAAKuK,QACrByI,EAAK4B,UACT,GAEZ,EAEAC,gBAAiB,SAASxG,GAUtB,IATA,IAAI2E,EAAOhT,KACP8U,EAAQ3U,EAAMgO,UAAUC,SAASjL,KAAK2R,MACtCC,EAAc5U,EAAMgO,UAAUC,SAASjL,KAAK6R,UAC5C9C,EAAWc,EAAK3L,QAAQ2K,SAASrI,OAAOuI,SACxC/P,EAAS2S,EAAM3S,OACfmD,EAAM,EACN2P,EAAS,GACTC,EAAQ,GAEL5P,EAAMnD,EAAQmD,IACjB2P,EAAOxP,KAAKH,GAOhB,IAJAwP,EAAQA,EAAMnD,MAAMtD,GAAUpC,OAAO6I,EAAMnD,MAAM,EAAGtD,IACpD0G,EAAcA,EAAYpD,MAAMtD,GAAUpC,OAAO8I,EAAYpD,MAAM,EAAGtD,IACtE4G,EAASA,EAAOtD,MAAMtD,GAAUpC,OAAOgJ,EAAOtD,MAAM,EAAGtD,IAElD/I,EAAM,EAAGA,EAAMnD,EAAQmD,IACxB4P,EAAMzP,KAAK,CACP0P,KAAMJ,EAAYzP,GAClB8P,WAAY,CACR,aAAcH,EAAO3P,GACrB,aAAc4M,EAAW,IAAM4C,EAAMxP,MAK7C0N,EAAKqB,WAAWC,KAAK,4BAA4BnS,OAAS,IAC1D6Q,EAAKqC,oBAAsB,IAAIzU,EAAYoS,EAAKqB,WAAWC,KAAK,4BAA6B,CACzFY,MAAOA,EACPI,UAAW,WACXC,OAAQ,WACJ,IAAI/S,EAAOwQ,EAAKoB,OACZoB,EAAexC,EAAKqC,oBAAoBzN,UAE5CpF,EAAK8B,SAAWkR,EAAaC,KAAI,SAASC,EAAGxR,GACzC,MAAO,CACHA,IAAKyR,OAAOzR,EAAI0R,aAAa,eAC7B3P,OAAQ,EAEhB,IAEK+M,EAAK3L,QAAQmM,QACdR,EAAK4B,UAEb,IAGZ,EAEAiB,aAAc,SAASC,GACnB,IAAI9C,EAAOhT,KACPiU,GAAWjB,EAAK+C,SAAShD,SAAWC,EAAK+C,UAAUtH,MACnDxI,EAAS0P,QAAQ3C,EAAKgD,eAAejD,SAAWC,EAAKgD,gBAAgBvH,OACrEnK,EAAW,KACXsB,EAAY,KAEXkQ,IACe,QAAZ7B,GACA3P,EAAWoO,GACX9M,EAAYK,GACO,YAAZgO,GACP3P,EAAWqO,GACX/M,EAAYK,GACO,YAAZgO,GACP3P,EAAWsO,GACXhN,EAAYK,GAEZ3B,EAAW,CAAC,CACR2B,OAAQA,EACR/B,IAAKyR,OAAO1B,MAKxBjB,EAAKoB,OAAO9P,SAAWA,EACvB0O,EAAKoB,OAAOxO,UAAYA,CAC5B,EAEAqQ,aAAc,WACV,IAIIC,EACAC,EACAhU,EACAiU,EAPApD,EAAOhT,KACPsE,EAAW0O,EAAKoB,OAAO9P,SACvBsB,EAAYoN,EAAKoB,OAAOxO,UACxByQ,EAAsBrD,EAAKgD,eAM3B1R,IACAnC,EAASmC,EAASnC,OAEdyD,IACe,IAAXzD,GACAgU,EAAe,MACfD,EAAgBtQ,GACE,IAAXzD,GACPgU,EAAe,UACfD,EAAgBtQ,GACE,IAAXzD,IACPgU,EAAe,UACfD,EAAgBtQ,IAInBuQ,IAEDA,GADA7R,EAAWA,EAAS,IACIJ,IACxBgS,EAAgB5R,EAAS2B,QAAU,IAKvCoQ,EAFAD,EAASC,EAAoB9L,MAAQ,QAAU,OAEnB2L,GAC5BlD,EAAK+C,SAASK,GAAQD,GAE9B,EAEAG,aAAc,WACV,IAAiBC,EAAbvD,EAAOhT,KAEPwW,EAAiBxD,EAAK3L,QAAQ2K,SAASgC,SACvCyC,EAAgBzD,EAAK3L,QAAQ2K,SAAS4B,gBAEtC8C,EAAe1D,EAAKqB,WAAWC,KAAK,oBAEpCK,EAAS,WACT3B,EAAK6C,eACL7C,EAAK4B,UACT,EAEI8B,EAAa,KACb1D,EAAKgD,eAAiB,IAAIrV,EAAaqS,EAAKqB,WAAWC,KAAK,2BAA4B,CACpFqC,WAAW,EACXhC,OAAQA,EACRiC,cAAe,OACfC,eAAgB,QAChBC,WAAY,CACR,CAAE3B,KAAMsB,EAAc5N,MAAO0B,MAAO,KACpC,CAAE4K,KAAMsB,EAAc3N,OAAQyB,MAAO,KACrC,CAAE4K,KAAMsB,EAAc5C,MAAOtJ,MAAO,KACpC,CAAE4K,KAAMsB,EAAc3C,OAAQvJ,MAAO,KACrC,CAAE4K,KAAMsB,EAAc1C,KAAMxJ,MAAO,SAI3CgM,EAAO,CACH,CAAEpB,KAAMqB,EAAetS,IAAKqG,MAAO,OACnC,CAAE4K,KAAMqB,EAAevC,QAAS1J,MAAO,WACvC,CAAE4K,KAAMqB,EAAetC,QAAS3J,MAAO,YAG3CyI,EAAK+C,SAAW,IAAIpV,EAAa+V,EAAc,CAC3CC,WAAW,EACXpM,MAAOyI,EAAK3L,QAAQzC,MAAME,SAC1B6P,OAAQA,EACRiC,cAAe,OACfC,eAAgB,QAChBC,WAAYP,EAAKtK,OAAOhM,EAAEwV,IAAItV,EAAMgO,UAAUC,SAASjL,KAAK2R,OAAO,SAASiC,EAASzR,GACjF,MAAO,CACH6P,KAAM4B,EACNxM,MAAOjF,EAEf,OAGJ0N,EAAKiD,eAEb,EAEAe,cAAe,WACX,IACIxU,EADOxC,KACKoU,OACZ6C,EAFOjX,KAEmBqV,oBAE9B,GAAI4B,GAAsBzU,EAAK8B,UAAY9B,EAAK8B,SAASnC,OAAQ,CAO7D,IANA,IAII+U,EAJAC,EAAW3U,EAAK8B,SAChB8S,EAAiBD,EAAShV,OAC1BkV,EAAY,GACZ3B,EAAI,EAGDA,EAAI0B,EAAgB1B,IACvB2B,EAAU5R,KAAK,gBAAkB0R,EAASzB,GAAGxR,IAAM,MAGvDgT,EAAyBD,EAAmBlE,QAAQuB,KAAK+C,EAAUjL,KAAK,MACxE6K,EAAmB1B,OAAO2B,EAC9B,CACJ,EAEAI,cAAe,WACX,IAAItE,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OACZmD,EAAgBvE,EAAKqB,WAAWC,KAAK,qBAErCiD,EAAc,KACdvE,EAAKwE,UAAY,IAAIrX,EAAMM,GAAGgX,eAAeF,EAAe,CACxDhE,SAAUP,EAAK3L,QAAQkM,SACvBmB,IAAK,EACLgD,IAAK,GACLlD,SAAU,EACVC,OAAQ,IACRlK,MAAO/H,EAAKQ,UAAYR,EAAKQ,UAAU,GAAKgQ,EAAK3L,QAAQzC,MAAMnB,UAC/DkR,OAAQ,WACJ,IAAIpK,EAAQvK,KAAKuK,QAEjB/H,EAAKQ,UAAYuH,EAAQ,CAACA,GAASA,EACnCyI,EAAK4B,UACT,IAGZ,EAEA+C,WAAY,WACR,IAAI3E,EAAOhT,KACP4X,EAAQ5E,EAAKqB,WAAWC,KAAK,kBAC7B9R,EAAOwQ,EAAKoB,OAEhBpB,EAAK6E,OAASD,EAAMrD,oBAAoB,CACpChB,SAAUP,EAAK3L,QAAQkM,SACvBhJ,MAAO/H,EAAK0L,OAAS,EACrBsG,SAAU,EACVC,OAAQ,IACRC,IAAK,EACLC,OAAQ,WACJnS,EAAK0L,MAAQlO,KAAKuK,QAClByI,EAAK4B,UACT,IACD2B,KAAK,sBACZ,EAEAuB,WAAY,WACR,IAAI9E,EAAOhT,KACP4X,EAAQ5E,EAAKqB,WAAWC,KAAK,kBAC7B1P,EAAQoO,EAAK3L,QAAQzC,MACrBpC,EAAOwQ,EAAKoB,OACZ5H,EAAQhK,EAAKgK,MACbkI,EAAMlI,GAASA,EAAQ5H,EAAQ4H,EAAQ5H,EACvCmT,EAAa/E,EAAKE,QAAQ8E,QAAQ,0BAA0B1D,KAAK,wBACjE2D,EAA6B9X,EAAMsU,OAAOtU,EAAMM,GAAGyX,UAAUC,UAAU9Q,QAAQ2K,SAASlR,KAAMkS,EAAK3L,QAAQ2K,SAASzP,IAAIkQ,IACxH2F,EAA+BjY,EAAMM,GAAGyX,UAAUC,UAAU9Q,QAAQ2K,SAASqG,YAC7EC,EAAe,IAAI7T,KAAKG,EAAM7B,cAAe6B,EAAMjC,WAAYiC,EAAMnB,UAAW,GAAI,GAAI,IAE5FmU,EAAMzF,KAAK,qBAAsB8F,GACjCL,EAAMzF,KAAK,4BAA6BiG,GAEd,IAAtBL,EAAW5V,SACX4V,EAAa/E,EAAKE,QAAQ8E,QAAQ,0BAA0B1D,KAAK,iBAGjEyD,EAAW5V,OAAS,GAAK4V,EAAWtJ,OAGhC6J,GAFJ5D,EAAMvU,EAAM6M,UAAU+K,EAAWtJ,UAG7B6J,EAAe5D,GAIvB1B,EAAKuF,OAASX,EAAMY,gBAAgB,CAChC9D,IAAKA,EACLnK,MAAOiC,GAAS8L,EAChB3D,OAAQ,WACJ,IAAI7T,EAAOd,KAAKuK,QACZzJ,IACA0B,EAAKgK,MAAQ,IAAI/H,KAAK3D,EAAKiC,cAAejC,EAAK6B,WAAY7B,EAAK2C,UAAW,GAAI,GAAI,KAEvFuP,EAAK4B,UACT,IACD2B,KAAK,mBAEJwB,GACAA,EAAWtF,GAAG,UAAU,WACpB,IAAIgG,EAAUzF,EAAKuF,OAAOxF,QACtB2F,EAAWC,QAAQF,EAAQtG,KAAK,aAChCyG,GAAWD,QAAQF,EAAQI,GAAG,eAAiBJ,EAAQK,QAAQ,YAAYD,GAAG,cAElF7F,EAAKuF,OAAOQ,WAAW,CACnBrE,IAAKqD,EAAWtJ,MAChBiK,SAAUA,EACVE,OAAQA,GAEhB,GAER,EAEAhE,SAAU,WACD5U,KAAKqH,QAAQmM,QACdxT,KAAKgZ,QAAQ,SAErB,IAGAC,GAAmBpG,GAAqB1L,OAAO,CAC/C2L,KAAM,SAASC,EAAS1L,GACpB,IAAI2L,EAAOhT,KAEX6S,GAAqB5J,GAAG6J,KAAKG,KAAKD,EAAMD,EAAS1L,GAEjD2L,EAAKkG,iBAELlG,EAAKmG,iBAELnG,EAAKzI,MAAMyI,EAAK3L,QAAQkD,MAC5B,EAEAlD,QAAS,CACLiM,KAAM,oBAGV1G,OAAQ,CAAE,UAEVwM,QAAS,WACL,IAAIpG,EAAOhT,KAEXgT,EAAKqG,WAAWD,UAEZpZ,KAAKqV,qBACLrV,KAAKqV,oBAAoB+D,UAG7BpG,EAAKqB,WAAWC,KAAK,0CAA0CgF,IAAIxP,EAAQkJ,EAAKK,YAEhFlT,EAAMiZ,QAAQpG,EAAKqB,YAEnBxB,GAAqB5J,GAAGmQ,QAAQnG,KAAKD,EACzC,EAEAzI,MAAO,SAASA,GACZ,IAEI5E,EAAM4T,EAFNvG,EAAOhT,KACPO,EAAWyS,EAAK3L,QAAQ9G,SAG5B,GAAIgK,IAAUrK,EACV,OAAK8S,EAAKoB,OAAOzO,KAIV+I,GAAUsE,EAAKoB,OAAQ7T,GAHnB,GAMfyS,EAAKoB,OAAS3G,GAAUlD,EAAOhK,IAAa,CAAC,GAE7CoF,EAAOqN,EAAKoB,OAAOzO,OAGf4T,EAAavG,EAAKqG,WAAWtG,QAAQuB,KAAK,gBAAkB3O,EAAO,MACnEqN,EAAKqG,WAAW9D,OAAOgE,IAEvBvG,EAAKqG,WAAW9D,OAAO,GAG3BvC,EAAKwG,UAAUxG,EAAKqG,WAAWzR,UAAU2O,KAAK,SAClD,EAEA4C,eAAgB,WACZ,IAAIpG,EAAU/S,KAAK+S,QACf0G,EAAYxZ,EAAE,gCACdyZ,EAAgB3G,EAAQ4G,OAAO,iBAE/BD,EAAc,GACdD,EAAUG,YAAYF,GAEtB3G,EAAQ8G,OAAOJ,GAGnBzZ,KAAKqU,WAAaoF,CACtB,EAEAP,eAAgB,WACZ,IAKIlR,EALAgL,EAAOhT,KACPqH,EAAU2L,EAAK3L,QACfmC,EAAcnC,EAAQmC,YACtBwI,EAAW3K,EAAQ2K,SAASxI,YAC5BsQ,EAAqB7Z,EAAE,oDAAoDkS,KAAK,CAAE4H,MAAO1S,EAAQ2K,SAAS0B,wBAG9GlK,EAAcvJ,EAAEwV,IAAIjM,GAAa,SAASxB,GACtC,MAAO,CACHmN,KAAMnD,EAAShK,GACfoN,WAAY,CAAE,aAAcpN,EAAW,aAAcX,EAAQ2K,SAASyB,OAASzB,EAAShK,IAEhG,KAEAA,EAAYwB,EAAY,KACPxB,EAAUoN,YAAqD,UAAvCpN,EAAUoN,WAAW,gBAC1DpN,EAAUoN,WAAW,cAAgB,IAGzCpC,EAAKD,QAAQ8G,OAAOC,GACpB9G,EAAKqG,WAAa,IAAIzY,EAAYkZ,EAAoB,CAClD5E,MAAO1L,EACP+L,OAAQ,WACJvC,EAAKoB,OAAS,CAAC,EACfpB,EAAKwG,UAAUxG,EAAKqG,WAAWzR,UAAU2O,KAAK,UAC9CvD,EAAKgG,QAAQ,SACjB,GAER,EAEAQ,UAAW,SAASxR,GAChB,IAGIgS,EAHAhH,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OACZ/M,EAAU2L,EAAK3L,QAGfkP,EAAO,CACNvO,UAAWA,GAAa,QACxBoL,aAAc/L,EAAQ+L,aACtBpB,SAAU3K,EAAQ2K,SAAShK,GAC3BzF,IAAK8E,EAAQ2K,SAASzP,KAGvByQ,EAAKqC,sBACLrC,EAAKqC,oBAAoB+D,UACzBpG,EAAKqB,WAAWC,KAAK,4BAA4B2F,QACjDjH,EAAKqC,oBAAsB,MAG/BlV,EAAMiZ,QAAQpG,EAAKqB,YAEnB2F,EAAqB/Z,EAAE4R,GAAyB0E,IAChDpW,EAAM+Z,+BAA+BF,EAAoB,CAAC,UAE1DhH,EAAKqB,WAAW8F,KAAKH,GAEhBhS,GAKLxF,EAAKmD,KAAOqC,EAEM,WAAdA,GAA2BxF,EAAK8B,WAChC9B,EAAK8B,SAAW,CAAC,CACbJ,IAAKmD,EAAQzC,MAAME,SACnBmB,OAAQ,KAIhB+M,EAAK6B,gBAAgBxN,EAAQ+L,cAE7BJ,EAAKmB,gBACLnB,EAAKgE,gBACLhE,EAAKsE,gBACLtE,EAAKsD,eACLtD,EAAKoH,aACLpH,EAAK2E,aACL3E,EAAK8E,aAEL9E,EAAKqH,UACLrH,EAAKsH,QAxBDtH,EAAKoB,OAAS,CAAC,CAyBvB,EAEAgG,WAAY,WACR,IAII/S,EAJA2L,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OACZlR,EAAQV,EAAKF,QAAU,CAAC0Q,EAAK3L,QAAQzC,MAAMjC,WAAa,GACxD4X,EAAcvH,EAAKqB,WAAWC,KAAK,kBAGnCiG,EAAY,KACZlT,EAAU,CACNsP,WAAW,EACXhC,OAAQ,WACJnS,EAAKF,OAAS,CAACqT,OAAO3V,KAAKuK,UAC3ByI,EAAKgG,QAAQ,SACjB,EACApC,cAAe,OACfC,eAAgB,QAChBC,WAAY7W,EAAEwV,IAAItV,EAAMgO,UAAUC,SAAS9L,OAAOwS,OAAO,SAAS0F,EAAWlV,GACzE,MAAO,CACH6P,KAAMqF,EACNjQ,MAAOjF,EAAM,EAErB,KAGJ0N,EAAKyH,QAAU,IAAI9Z,EAAa4Z,EAAY,GAAIlT,GAChD2L,EAAK0H,QAAU,IAAI/Z,EAAa4Z,EAAY,GAAIlT,GAE5CnE,IACAA,EAAQA,EAAM,GACd8P,EAAKyH,QAAQlQ,MAAMrH,GACnB8P,EAAK0H,QAAQnQ,MAAMrH,IAI/B,EAEAoX,KAAM,WACF,IAQIK,EARA3H,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OACZqF,EAAYzG,EAAKqB,WACjBuG,EAAY5H,EAAKK,WACjBwH,EAAQ,SAASC,GACjB9H,EAAK+H,WAAWD,EAAEE,cAAczQ,OAChCyI,EAAKgG,QAAQ,SACjB,EAGAhG,EAAKiI,aAAexB,EAAUnF,KAAK,sBAAsB7B,GAAG3I,EAAQ8Q,EAAWC,GAC/E7H,EAAKkI,aAAezB,EAAUnF,KAAK,sBAAsB7B,GAAG3I,EAAQ8Q,EAAWC,GAC/E7H,EAAKmI,aAAe1B,EAAUnF,KAAK,sBAAsB7B,GAAG3I,EAAQ8Q,EAAWC,GAE3ErY,EAAK0L,MACLyM,EAAU,QACHnY,EAAKgK,QACZmO,EAAU,SAGd3H,EAAK+H,WAAWJ,EACpB,EAEAN,QAAS,WACL,IAAIrH,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OACZxK,EAAwB,YAAdpH,EAAKmD,KAEfyV,EAAaxR,EAAUoJ,EAAKqI,gBAAkBrI,EAAKsI,YAEnDC,EAAW,aAAe3R,EAAU,QAAU,QAAU,SACxD4R,EAAexI,EAAKqB,WAAWC,KAAKiH,IAEnC3R,GAAyB,WAAdpH,EAAKmD,QAIrB6V,EAAa/I,GAAG3I,EAAQkJ,EAAKK,YAAY,SAASyH,GAC9CM,EAAWnI,KAAKD,EAAM8H,EAAEE,cAAczQ,OACtCyI,EAAKgG,QAAQ,SACjB,IAEAhG,EAAKyI,gBAAkBD,EAAaE,GAAG,GACvC1I,EAAK2I,eAAiBH,EAAaE,GAAG,GAEtCN,EAAWnI,KAAKD,EAAMxQ,EAAK8B,SAAW,UAAY,YACtD,EAEAyW,WAAY,SAASJ,GACjB,IACIzM,EAAO1B,EACPoP,EAAaC,EAFb7I,EAAOhT,KAIK,UAAZ2a,GACA3H,EAAKkI,aAAaY,KAAK,WAAW,GAElCF,GAAc,EACdC,GAAc,EAEd3N,EAAQ8E,EAAK6E,OAAOtN,QACpBiC,EAAQ,MACW,UAAZmO,GACP3H,EAAKmI,aAAaW,KAAK,WAAW,GAElCF,GAAc,EACdC,GAAc,EAEd3N,EAAQ,KACR1B,EAAQwG,EAAKuF,OAAOhO,UAEpByI,EAAKiI,aAAaa,KAAK,WAAW,GAElCF,EAAcC,GAAc,EAC5B3N,EAAQ1B,EAAQ,MAGhBwG,EAAK6E,QACL7E,EAAK6E,OAAOe,OAAOgD,GAGnB5I,EAAKuF,QACLvF,EAAKuF,OAAOK,OAAOiD,GAGvB7I,EAAKoB,OAAOlG,MAAQA,EACpB8E,EAAKoB,OAAO5H,MAAQA,CACxB,EAEA6O,gBAAiB,SAASU,GACtB,IAII/Y,EAJAgQ,EAAOhT,KACPgc,GAAiB,EACjBC,GAAgB,EAChBnG,GAAQ,EAGM,aAAdiG,GACA/I,EAAKyI,gBAAgBK,KAAK,WAAW,GAErC9Y,EAAY,CAACgQ,EAAKwE,UAAUjN,SAE5ByR,GAAiB,EACjBC,GAAgB,EAChBnG,GAAQ,IAER9C,EAAK2I,eAAeG,KAAK,WAAW,GACpC9Y,EAAY,MAGhBgQ,EAAK+C,SAAS6C,OAAOqD,GACrBjJ,EAAKgD,eAAe4C,OAAOqD,GAC3BjJ,EAAKwE,UAAUoB,OAAOoD,GAEtBhJ,EAAKoB,OAAOpR,UAAYA,EAExBgQ,EAAK6C,aAAaC,EACtB,EAEAwF,YAAa,SAASY,GAClB,IAGIhZ,EAHA8P,EAAOhT,KACPmc,GAAe,EACfC,GAAe,EAGF,aAAbF,GACAC,GAAe,EACfC,GAAe,EAEflZ,EAAQ8P,EAAKyH,QAAQlQ,SAErBrH,EAAQ8P,EAAK0H,QAAQnQ,QAGzByI,EAAKyH,QAAQ7B,OAAOuD,GACpBnJ,EAAK0H,QAAQ9B,OAAOwD,GAEpBpJ,EAAKoB,OAAO9R,OAAS,CAACY,GACtB8P,EAAKqI,gBAAgBa,EACzB,IAGJzb,EAAG4b,OAAOpD,IAGV,IAAIqD,GAA6Bnc,EAAM2R,UAAS,SAAUC,GAGlD,MAAO,8MAFWA,EAAIwK,YAEf,yJAWf,IAGIC,GAAqCrc,EAAM2R,UAAS,SAAUC,GAC1D,IAAI/J,EAAY+J,EAAI/J,UAChBgK,EAAWD,EAAIC,SAEnB,OAAsB,UAAdhK,EACR,uGACoE3H,EAAO2R,EAASC,aADpF,yIAISD,EAASrK,SAASxF,OAAU,qCAA0C9B,EAAO2R,EAASrK,UAAa,UAAa,IAJzH,iBAMa,KAEF,WAAdK,EACG,mNAG4E3H,EAAO2R,EAASE,UAH5F,4FAMkF7R,EAAO2R,EAASE,UANlG,UAOU,KACC,YAAdlK,EACG,wMAG4E3H,EAAO2R,EAASyK,UAH5F,2IAOgEtc,EAAMgS,KAAK,iBAP3E,+GAS4E9R,EAAO2R,EAAS9N,KAT5F,gHAU+H7D,EAAO2R,EAASlR,MAAS,YAAiBT,EAAO2R,EAAS9N,KAVzL,2FAa+D/D,EAAMgS,KAAK,iBAb1E,+GAe4E9R,EAAO2R,EAAS0K,OAf5F,oGAgBiHrc,EAAO2R,EAAS0K,OAhBjI,oFAmB+Dvc,EAAMgS,KAAK,iBAnB1E,+GAqB4E9R,EAAO2R,EAAS9N,KArB5F,6FAsB0G7D,EAAO2R,EAAS9N,KAtB1H,sCAyBU,KACC,WAAd8D,EACG,wMAG4E3H,EAAO2R,EAASyK,UAH5F,2IAOgEtc,EAAMgS,KAAK,iBAP3E,+GAS4E9R,EAAO2R,EAAS9N,KAT5F,gHAU+H7D,EAAO2R,EAASlR,MAAS,YAAiBT,EAAO2R,EAAS9N,KAVzL,2FAa+D/D,EAAMgS,KAAK,iBAb1E,+GAe4E9R,EAAO2R,EAAS0K,OAf5F,oGAgBiHrc,EAAO2R,EAAS0K,OAhBjI,oFAmB+Dvc,EAAMgS,KAAK,iBAnB1E,+GAqB4E9R,EAAO2R,EAAS9N,KArB5F,6FAsB0G7D,EAAO2R,EAAS9N,KAtB1H,gLA2B4E7D,EAAO2R,EAAS9O,OA3B5F,2FA4BwG7C,EAAO2R,EAAS9O,OA5BxH,sCA+BS,GACjB,IAGIyZ,GAAkCxc,EAAM2R,UAAS,SAAUC,GAC3D,IAAI6K,EAAa7K,EAAI6K,WACjB5K,EAAWD,EAAIC,SAEnB,MAAmB,UAAf4K,EACO,uGAC6Dvc,EAAO2R,EAASO,OAD7E,+FAE6FlS,EAAO2R,EAASQ,YAF7G,kDAIe,UAAfoK,EACA,uGAC6Dvc,EAAO2R,EAASS,IAD7E,2GAE2GpS,EAAO2R,EAASS,IAF3H,4CADJ,CAMX,IAEIoK,GAAmC1c,EAAM2R,UAAS,SAAUC,GACxD,IAAI+E,EAAa/E,EAAI+E,WACjBvM,EAAQwH,EAAIxH,MAEhB,MAAO,sCACPuM,EAAWrB,KAAI,SAAUqH,GAAQ,MAAQ,kBAAsBA,EAAU,MAAI,MAASvS,IAAUuS,EAAKvS,MAAQ,WAAa,IAAM,IAAOlK,EAAOyc,EAAK3H,MAAS,WAAc,IAAG/I,KAAK,IACtL,WACJ,IAGI2Q,GAAyBlK,GAAqB1L,OAAO,CACrD2L,KAAM,SAASC,EAAS1L,GACpB,IAAI2L,EAAOhT,KAEX6S,GAAqB5J,GAAG6J,KAAKG,KAAKD,EAAMD,EAAS1L,GAEjDA,EAAU2L,EAAK3L,QAEf2L,EAAKgK,gBAAkB7c,EAAM2R,UAAS,SAAUC,GAC5C,IAAIxH,EAAQwH,EAAIxH,MACZ4K,EAAOpD,EAAIoD,KAEf,MAAQ,kBAAsB9U,EAAOkK,GAAU,KAASlK,EAAO8U,GAAS,WAC5E,IAEAnC,EAAKzI,MAAMlD,EAAQkD,OAEnByI,EAAKiK,MAAQ5V,EAAQ6V,MAAQlK,EAAKE,QAAQ8E,QAAQ,oBAAoBzB,KAAK,aAE3EvD,EAAKmK,oBAELnK,EAAKoK,uBAELpK,EAAKqK,cAAgBrK,EAAKoB,MAC9B,EAEA/M,QAAS,CACLiM,KAAM,yBACNgK,WAAY,CACRC,KAAM,QACNC,MAAO,eAEXhK,QAAQ,EACRxB,SAAU,CACNyL,OAAQ,SACRC,OAAQ,OACRC,SAAU,cACVC,YAAa,iBACbrB,YAAa,eACbha,IAAK,CACDsb,SAAU,CACNvL,MAAO,QACPC,MAAO,WACPE,GAAI,SAERH,MAAO,QACPC,MAAO,mBACPE,GAAI,iBAER/I,MAAO,CACH/B,SAAU,IAEd8B,OAAQ,CACJ9B,SAAU,IAEdgC,OAAQ,CACJhC,SAAU,IAEdiC,QAAS,CACLjC,SAAU,GACV8U,SAAU,cACVqB,WAAY,mBACZC,UAAW,kBACX9L,YAAa,eACbyK,MAAO,QACPxY,IAAK,QAET2F,OAAQ,CACJlC,SAAU,GACV8U,SAAU,cACVqB,WAAY,mBACZC,UAAW,kBACX9L,YAAa,iBACbyK,MAAO,QACPxZ,MAAO,QACPgB,IAAK,SAKjB0I,OAAQ,CAAE,UAEVrC,MAAO,SAASA,GACZ,IAAIyI,EAAOhT,KACPO,EAAWyS,EAAK3L,QAAQ9G,SAE5B,GAAIgK,IAAUrK,EACV,OAAK8S,EAAKoB,OAAOzO,KAIV+I,GAAUsE,EAAKoB,OAAQ7T,GAHnB,GAMfyS,EAAKoB,OAAS3G,GAAUlD,EAAOhK,IAAa,CAAC,CACjD,EAEA6Y,QAAS,WACLpZ,KAAKge,eAEL7d,EAAMiZ,QAAQpZ,KAAKie,YAEnBje,KAAK+S,QAAQuG,IAAIxP,EAAQ9J,KAAKqT,YAE9BR,GAAqB5J,GAAGmQ,QAAQnG,KAAKjT,KACzC,EAEAmU,cAAe,WACX,IAAInB,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OAEhBpB,EAAKqB,WAAWC,KAAK,qBAChB7F,IAAIuE,EAAKoB,OAAOzM,UAAY,GAC5B8K,GAAG1I,EAASiJ,EAAKK,YAAY,SAASyH,GACnCtY,EAAKmF,SAAWmT,EAAEoD,OAAO3T,MACzByI,EAAK4B,UACT,GACR,EAEAuI,kBAAmB,WACf,IAAInK,EAAOhT,KACP2F,EAAOqN,EAAK3L,QAAQ2K,SAASxI,YAAYxJ,KAAKoU,OAAOzO,MAAQ,SAEjEqN,EAAKmL,eAAiBle,EAAEE,EAAMM,GAAG2d,KAAK,kBACtCpL,EAAKqL,aAAepe,EAAE,kBAAoB0F,EAAO,WAEjDqN,EAAKD,QAAQ8G,OAAO7G,EAAKqL,cAAcxE,OAAO7G,EAAKmL,gBAEnDnL,EAAKD,QAAQ+F,QAAQ,aAAarG,GAAG3I,EAAQkJ,EAAKK,YAAY,SAASyH,GACnEA,EAAEwD,iBACFtL,EAAKuL,YAAY,UACjBvL,EAAKiK,MAAMuB,SAASxL,EAAKyL,MAAOzL,EAAK3L,QAAQiW,WAAWC,KAC5D,GACJ,EAEAmB,WAAY,WAER,MAAO,2IADI1e,KAC8IqH,QAAQ2K,SAASzP,IAAIoR,YAAc,sBAChM,EAEAyJ,qBAAsB,WAClB,IAAIpK,EAAOhT,KAEP2e,EAAgB1e,EAAE+S,EAAK0L,cAAc9E,YAAY5G,EAAKD,QAAQ+F,QAAQ,cAEtE8F,EAAe3e,EAAE,4HAChB4e,SAASF,EAAcrK,KAAK,aAEjCqK,EAAclM,GAAG3I,EAAQkJ,EAAKK,YAAY,SAASyH,GAC/CA,EAAEwD,iBACFtL,EAAK8L,gBAAgB,SACzB,IAEA9L,EAAK+L,qBAAuBJ,EAAcK,SAAShM,EAAKoB,OAAOzO,MAC/DqN,EAAKiM,oBAAsBL,EAAatK,KAAK,0BAA0Ba,KAAKnC,EAAKkM,WACrF,EAEAC,eAAgB,WACZ,IAAInM,EAAOhT,KAEP2e,EAAgB1e,EAAE+S,EAAK0L,cAAc9E,YAAY5G,EAAKqB,YAEtDuK,EAAe3e,EAAG,qHAA4HE,EAAMM,GAAG2d,KAAK,iBAAoB,UAC/KS,SAASF,EAAcrK,KAAK,aAEjCqK,EAAclM,GAAG3I,EAAQkJ,EAAKK,YAAY,SAASyH,GAC/CA,EAAEwD,iBACFtL,EAAK8L,gBAAgB,MACzB,IAEA9L,EAAKoM,eAAiBT,EAAcU,YAAY,cAAerM,EAAKoB,OAAOzO,MAC3EqN,EAAKsM,WAAaV,EAAatK,KAAK,0BAA0Ba,KAAKnC,EAAKkM,WAC5E,EAEAJ,gBAAiB,SAASS,GACtB,IAAIvM,EAAOhT,KACXgT,EAAKuL,YAAYgB,GACjBvM,EAAKiK,MAAMuB,SAASxL,EAAKyL,MAAOzL,EAAK3L,QAAQiW,WAAWC,KAC5D,EAEA2B,SAAU,WACN,IAAI1c,EAAOxC,KAAKoU,OACZpC,EAAWhS,KAAKqH,QAAQ2K,SAASzP,IAEjC4S,EAAOnD,EAASM,MAQpB,OANI9P,EAAK0L,MACLiH,EAAOhV,EAAMsU,OAAO,UAAWzC,EAASO,MAAO/P,EAAK0L,OAC7C1L,EAAKgK,QACZ2I,EAAOhV,EAAMsU,OAAO,YAAazC,EAASS,GAAIjQ,EAAKgK,QAGhD2I,CACX,EAEA+D,eAAgB,WACZ,IAAIlG,EAAOhT,KACPwf,EAAoBxM,EAAK3L,QAAQ2K,SAASxI,YAE1C2Q,EAAO0C,GAAiC,CACxC/F,WAAY7W,EAAEwV,IAAIzV,KAAKqH,QAAQmC,aAAa,SAASxB,GACjD,MAAO,CACHmN,KAAMqK,EAAkBxX,GACxBuC,MAAqB,UAAdvC,EAAwBA,EAAY,GAEnD,IACAuC,MAAOyI,EAAKoB,OAAOzO,MAAQ,GAC3B8Z,GAAItf,EAAMsf,KAGdzM,EAAKyL,MAAM1L,QACNuB,KAAK,oBACLuF,OAAOM,GAEZnH,EAAKyL,MAAM1L,QAAQuB,KAAK,uBACnB7B,GAAG1I,EAASiJ,EAAKK,YAAY,SAASyH,GACnC,IAAIvQ,EAAQuQ,EAAEoD,OAAO3T,MACrByI,EAAKoB,OAAS,CAAEzO,KAAM4E,GACtByI,EAAKqK,cAAgBpd,EAAEkH,OAAO,CAAC,EAAG6L,EAAKoB,QACvCpB,EAAK0M,kBACL1M,EAAKsM,WAAWnK,KAAKnC,EAAKkM,YAC1BlM,EAAKiM,oBAAoB9J,KAAKnC,EAAKkM,WACvC,GACR,EAEAS,mBAAoB,WAChB,IAAI3M,EAAOhT,KACP4f,EAAc5M,EAAK3L,QAAQ2K,SAASzP,IAAIsb,SACxCrb,EAAOwQ,EAAKoB,OACZ7J,EAAQ,GAER/H,EAAK0L,MACL3D,EAAQ,QACD/H,EAAKgK,QACZjC,EAAQ,SAGZ,IAAI4P,EAAO0C,GAAiC,CACxC/F,WAAY,CACR,CAAE3B,KAAMyK,EAAYtN,MAAO/H,MAAO,IAClC,CAAE4K,KAAMyK,EAAYrN,MAAOhI,MAAO,SAClC,CAAE4K,KAAMyK,EAAYnN,GAAIlI,MAAO,UAEnCA,MAAOA,EACPkV,GAAItf,EAAMsf,KAGdzM,EAAKyL,MAAM1L,QACNuB,KAAK,oBACLuF,OAAOM,GAEZnH,EAAKyL,MAAM1L,QAAQuB,KAAK,uBACnB7B,GAAG1I,EAASiJ,EAAKK,YAAY,SAASyH,GACnC,IAAIvQ,EAAQuQ,EAAEoD,OAAO3T,MACjB2D,EAAQ,KACR1B,EAAQ,KAEZwG,EAAK6M,aAAatV,GAEdyI,EAAK6E,OAAO1V,QACZ+L,EAAQ8E,EAAK6E,OAAOpJ,MACpBjC,EAAQ,MACDwG,EAAKuF,OAAOpW,SACnB+L,EAAQ,KACR1B,EAAQwG,EAAKuF,OAAO9J,IAAMtO,EAAM6M,UAAUgG,EAAKuF,OAAO9J,MAAO,cAAgBuE,EAAKuF,OAAOhO,SAG7F/H,EAAK0L,MAAQA,EACb1L,EAAKgK,MAAQA,CACjB,GACR,EAEA+R,YAAa,SAASuB,GAClB,IAAI9M,EAAOhT,KAEPgS,EADUgB,EAAK3L,QACI2K,SACnBuK,EAAcvK,EAAsB,WAAb8N,EAAwB,cAAgB,YAE/D3F,EAAO,uMAE8EnI,EAASyL,OAFvF,gBAGuBzL,EAAe,OAAI,KAAS7R,EAAMM,GAAG2d,KAAK,gBAAmB,OAC5EpM,EAASuK,YACb,sEAAwEvK,EAAS0L,OALrF,iBAMuB1L,EAAe,OAAI,KAAS7R,EAAMM,GAAG2d,KAAK,SANjE,aASP2B,EAAe/M,EAAKiK,MAAM+C,OAAOC,GAErCjN,EAAKyL,MAAQzL,EAAKiK,MAAMpD,OAAOM,EAAOmC,GAA2B,CAAEC,YAAaA,KAEhFvJ,EAAKyL,MAAM1L,QAAQN,GAAG3I,EAAQkJ,EAAKK,WAAY,8CAA8C,SAASyH,GAClGA,EAAEwD,iBACFxD,EAAEoF,kBAEEjgB,EAAED,MAAMmgB,SAAS,uBACjBnN,EAAKgG,QAAQ,UACbhG,EAAKqK,cAAgBpd,EAAEkH,OAAO,CAAC,EAAG6L,EAAKoB,SAEvCpB,EAAKoB,OAASpB,EAAKqK,cAGvB,IAAIrV,EAAYgL,EAAKoB,OAAOzO,KAE5BqN,EAAKiM,oBAAoB9J,KAAKnC,EAAKkM,YACnClM,EAAK+L,qBAAqBC,SAAShX,GAA2B,UAAdA,GAChDgL,EAAKsM,WAAWnK,KAAKnC,EAAKkM,YAE1BlM,EAAKqL,aAAalJ,KAAKnD,EAASxI,YAAYxB,GAAa,UAEzDgL,EAAKiK,MAAMmD,IAAI,YAAY,WACvBpN,EAAKgL,cACT,IAEAhL,EAAKiK,MAAMuB,SAASuB,EAAc/M,EAAK3L,QAAQiW,WAAWE,MAC9D,IAEAxK,EAAKqB,WAAarB,EAAKyL,MAAM1L,QAAQuB,KAAK,iBAEzB,WAAbwL,GACA9M,EAAKkG,iBACLlG,EAAK0M,kBACL1M,EAAKmM,mBAELnM,EAAK2M,qBACL3M,EAAK6M,eAEb,EAEA7B,aAAc,WACNhe,KAAKye,QAELze,KAAKye,MAAMrF,UACXpZ,KAAKye,MAAM1L,QAAQsN,SACnBrgB,KAAKqU,WAAa,MAItBrU,KAAKye,MAAQ,IACjB,EAEAiB,gBAAiB,WACb,IAAI1M,EAAOhT,KACPgI,EAAYgL,EAAKoB,OAAOzO,MAAQ,QAEhC4Q,EAAO,CACNvO,UAAWA,EACXoL,aAAcJ,EAAK3L,QAAQ+L,aAC3BpB,SAAUgB,EAAK3L,QAAQ2K,SAAShK,IAGjCmS,EAAOqC,GAAmCjG,GAC1C+J,EAAQrgB,EAAEka,GACdha,EAAM+Z,+BAA+BoG,EAAO,CAAC,YAE7C,IAAI7G,EAAYzG,EAAKqB,WAAarB,EAAKqB,YAAcrU,KAAKid,MAAM+C,OAAOO,QAAQjM,KAAK,mBAChF9R,EAAOwQ,EAAKoB,OAShB,GAPIpB,EAAKoM,gBACLpM,EAAKoM,eAAeC,YAAY,aAA4B,UAAdrX,GAGlD7H,EAAMiZ,QAAQK,GACdA,EAAUU,KAAKmG,IAEVnG,EAGD,OAFAnH,EAAKoB,OAAS,CAAC,OACfqF,EAAU+G,OAGV/G,EAAUgH,OAGI,WAAdzY,GAA2BxF,EAAK8B,WAC/B9B,EAAK8B,SAAW,CAAC,CACdJ,IAAK8O,EAAK3L,QAAQzC,MAAME,SACxBmB,OAAQ,KAIhB+M,EAAK6B,gBAAgB7B,EAAK3L,QAAQ+L,cAElCJ,EAAKmB,gBACLnB,EAAKsE,gBACLtE,EAAKgE,gBACLhE,EAAKsD,eACLtD,EAAKoH,aAELpH,EAAKqH,SACT,EAEA/C,cAAe,WACX,IAAItE,EAAOhT,KACPwC,EAAOwQ,EAAKoB,QACIpB,EAAKwE,UAAYxE,EAAKqB,WAAWC,KAAK,sBAE5CnC,KAAK,CACfuC,IAAK,EACLgD,IAAK,KAERjJ,IAAIjM,EAAKQ,UAAYR,EAAKQ,UAAU,GAAKgQ,EAAK3L,QAAQzC,MAAMnB,WAC5DgP,GAAG1I,EAASiJ,EAAKK,YAAY,SAASyH,GACnCtY,EAAK0L,MAAQ4M,EAAEoD,OAAO3T,MACtByI,EAAK4B,UACT,GACJ,EAEA+C,WAAY,WACR,IAAI3E,EAAOhT,KACP4X,EAAQ5E,EAAK6E,OAAS7E,EAAKqB,WAAWC,KAAK,kBAC3C9R,EAAOwQ,EAAKoB,OAEhBwD,EAAMnJ,IAAIjM,EAAK0L,OAAS,GACnBuE,GAAG1I,EAASiJ,EAAKK,YAAY,SAASqN,GACnCle,EAAK0L,MAAQwS,EAAGxC,OAAO3T,MACvByI,EAAK4B,UACT,GACR,EAEAiL,aAAc,SAASjD,GACnB,IAAI5J,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OAEZwI,IAAe1c,IACXsC,EAAK0L,MACL0O,EAAa,QACNpa,EAAKgK,QACZoQ,EAAa,UAIrB,IAAIrG,EAAO,CACNqG,WAAYA,EACZ5K,SAAUgB,EAAK3L,QAAQ2K,SAASzP,KAGrCpC,EAAMiZ,QAAQpG,EAAKqB,YACnBrB,EAAKqB,WAAW8F,KAAKwC,GAAgCpG,IAErDvD,EAAK2E,aACL3E,EAAK8E,YACT,EAEAxB,aAAc,WACV,IAAiBC,EAAbvD,EAAOhT,KAEPwW,EAAiBxD,EAAK3L,QAAQ2K,SAASgC,SACvCyC,EAAgBzD,EAAK3L,QAAQ2K,SAAS4B,gBAEtC+M,EAAgB3N,EAAKqB,WAAWC,KAAK,oBAErCK,EAAS,WACT3B,EAAK6C,eACL7C,EAAKgG,QAAQ,SACjB,EAEI2H,EAAc,KACd3N,EAAKgD,eAAiBhD,EAAKqB,WAAWC,KAAK,2BAChB6F,KAAKnH,EAAK4N,SAAS,CAClB,CAAEzL,KAAMsB,EAAc5N,MAAO0B,MAAO,KACpC,CAAE4K,KAAMsB,EAAc3N,OAAQyB,MAAO,KACrC,CAAE4K,KAAMsB,EAAc5C,MAAOtJ,MAAO,KACpC,CAAE4K,KAAMsB,EAAc3C,OAAQvJ,MAAO,KACrC,CAAE4K,KAAMsB,EAAc1C,KAAMxJ,MAAO,SAEpCkI,GAAG,SAAUkC,GAQxC4B,GANAA,EAAO,CACH,CAAEpB,KAAMqB,EAAetS,IAAKqG,MAAO,OACnC,CAAE4K,KAAMqB,EAAevC,QAAS1J,MAAO,WACvC,CAAE4K,KAAMqB,EAAetC,QAAS3J,MAAO,aAG/B0B,OAAOhM,EAAEwV,IAAItV,EAAMgO,UAAUC,SAASjL,KAAK2R,OAAO,SAASiC,EAASzR,GAC5E,MAAO,CACH6P,KAAM4B,EACNxM,MAAOjF,EAEf,KAEA0N,EAAK+C,SAAW4K,EAAcxG,KAAKnH,EAAK4N,SAASrK,IACnB9D,GAAG,SAAUkC,GACblG,IAAIuE,EAAK3L,QAAQzC,MAAME,UAErDkO,EAAKiD,eAEb,EAEAmE,WAAY,WACR,IAAIpH,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OACZxP,EAAQoO,EAAK3L,QAAQzC,MACrB1B,EAAQV,EAAKF,QAAU,CAACsC,EAAMjC,WAAa,GAC3Cke,EAAc7N,EAAKqB,WAAWC,KAAK,kBACnCwM,EAAa3gB,EAAMgO,UAAUC,SAAS9L,OAAOwS,MAEjD,GAAI+L,EAAY,GAAI,CAChB,IAAItK,EAAOtW,EAAEwV,IAAIqL,GAAY,SAAStG,EAAWlV,GAC7C,MAAO,CACH6P,KAAMqF,EACNjQ,MAAOjF,EAAM,EAErB,IAEAub,EAAY1G,KAAKnH,EAAK4N,SAASrK,IACnB9D,GAAG,UAAU,WACVjQ,EAAKF,OAAS,CAACqT,OAAO3V,KAAKuK,OAC/B,IAEXyI,EAAK+N,aAAeF,EAEhB3d,GACA2d,EAAYpS,IAAIvL,EAAM,GAE9B,CAEJ,EAEAmX,QAAS,WACL,IAAIrH,EAAOhT,KACPwC,EAAOwQ,EAAKoB,OACZqF,EAAYzG,EAAKqB,WACjBrC,EAAWgB,EAAK3L,QAAQ2K,SAASxP,EAAKmD,MACtCqb,EAAwBvH,EAAUnF,KAAK,kBACvC2M,EAAcxH,EAAUnF,KAAK,mBAC7B4M,EAAezH,EAAUnF,KAAK,oBAElC,GAAI0M,EAAsB,GAAI,CAC1B,IAAIG,EAAe3e,EAAK8B,SAAW,UAAY,WAE3C6V,EAAO0C,GAAiC,CACxCtS,MAAO4W,EACPrK,WAAY,CACR,CAAE3B,KAAMnD,EAAS8L,WAAYvT,MAAO,YACpC,CAAE4K,KAAMnD,EAAS+L,UAAWxT,MAAO,YAEvCkV,GAAItf,EAAMsf,KAGV3M,EAAO,SAASrE,GAChB,IAAI2S,EAAcpO,EAAK+C,SAAStH,MAC5ByH,EAAgBlD,EAAKgD,eAAevH,MACpClL,EAAWyP,EAAKwE,UAAU/I,MAC1BvL,EAAQ8P,EAAK+N,aAAe/N,EAAK+N,aAAatS,MAAQ,KAE9C,aAARA,GACAjM,EAAK8B,SAAW,KAChB9B,EAAKQ,UAAYO,EAAW,CAACA,GAAYA,EACzCf,EAAKF,OAASY,EAAQ,CAACyS,OAAOzS,IAAUA,EAExC+d,EAAYT,OACZU,EAAaT,SAEbje,EAAKQ,UAAY,KACjBR,EAAKF,OAASY,EAAQ,CAACyS,OAAOzS,IAAUA,EAExCV,EAAK8B,SAAW,CAAC,CACb2B,OAAQ0P,OAAOO,GACfhS,IAAKyR,OAAOyL,KAGhBH,EAAYR,OACZS,EAAaV,OAErB,EAEAQ,EACKnH,OAAOM,GAEZ6G,EAAsB1M,KAAK,uBACtB7B,GAAG1I,EAASiJ,EAAKK,YAAY,SAASyH,GACnChI,EAAKgI,EAAEoD,OAAO3T,MAClB,IAEJuI,EAAKqO,EACT,CACJ,EAEArJ,WAAY,WACR,IAAI9E,EAAOhT,KACP4X,EAAQ5E,EAAKqB,WAAWC,KAAK,kBAC7B1P,EAAQoO,EAAK3L,QAAQzC,MACrBpC,EAAOwQ,EAAKoB,OACZ5H,EAAQhK,EAAKgK,MACbkI,EAAMlI,GAASA,EAAQ5H,EAAQ4H,EAAQ5H,EACvCqT,EAA6B9X,EAAMsU,OAAOtU,EAAMM,GAAGyX,UAAUC,UAAU9Q,QAAQ2K,SAASlR,KAAMkS,EAAK3L,QAAQ2K,SAASzP,IAAIkQ,IACxH2F,EAA+BjY,EAAMM,GAAGyX,UAAUC,UAAU9Q,QAAQ2K,SAASqG,YAEjFT,EAAMzF,KAAK,qBAAsB8F,GACjCL,EAAMzF,KAAK,4BAA6BiG,GAEpCjY,EAAMkhB,QAAQzJ,MAAM9W,KACpBkS,EAAKuF,OAASX,EAAMzF,KAAK,MAAOhS,EAAMgM,SAASuI,EAAK,eAChCjG,IAAItO,EAAMgM,SAASK,GAAS5H,EAAO,eACnC6N,GAAG,UAAU,WACT,IAAI3R,EAAOX,EAAM6M,UAAUhN,KAAKuK,MAAO,cACnCzJ,IACA0B,EAAKgK,MAAQ1L,GAEjBkS,EAAK4B,UACV,IAEnB5B,EAAKuF,OAASX,EAAMY,gBAAgB,CAChC9D,IAAKA,EACLnK,MAAOiC,GAAS5H,EAChB+P,OAAQ,WACJ,IAAI7T,EAAOd,KAAKuK,QACZzJ,IACA0B,EAAKgK,MAAQ1L,GAEjBkS,EAAK4B,UACT,IACD2B,KAAK,kBAEhB,EAEAqK,SAAU,SAASrK,EAAM+K,GACrB,IAAIhc,EAAM,EACN6U,EAAO,GACPhY,EAASoU,EAAKpU,OACd2P,EAAW9R,KAAKgd,gBAMpB,IAJIsE,IACAnH,GAAQrI,EAAS,CAAEvH,MAAO,GAAI4K,KAAMmM,KAGjChc,EAAMnD,EAAQmD,IACjB6U,GAAQrI,EAASyE,EAAKjR,IAG1B,OAAO6U,CACX,IAGJ1Z,EAAG4b,OAAOU,GAEb,CA/nGD,CA+nGG3c,OAAOD,MAAMohB,QACFphB,KAIjB","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.dropdownlist.js'), require('kendo.datepicker.js'), require('kendo.numerictextbox.js'), require('kendo.buttongroup.js'), require('kendo.icons.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.dropdownlist', 'kendo.datepicker', 'kendo.numerictextbox', 'kendo.buttongroup', 'kendo.icons'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendoscheduler = global.kendoscheduler || {}, global.kendoscheduler.recurrence = global.kendoscheduler.recurrence || {}, global.kendoscheduler.recurrence.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"scheduler.recurrence\",\n        name: \"Recurrence\",\n        category: \"web\",\n        depends: [ \"dropdownlist\", \"datepicker\", \"numerictextbox\", \"buttongroup\", \"icons\" ],\n        hidden: true\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            encode = kendo.htmlEncode,\n            timezone = kendo.timezone,\n            Class = kendo.Class,\n            ui = kendo.ui,\n            Widget = ui.Widget,\n            DropDownList = ui.DropDownList,\n            ButtonGroup = ui.ButtonGroup,\n            kendoDate = kendo.date,\n            setTime = kendoDate.setTime,\n            setDayOfWeek = kendoDate.setDayOfWeek,\n            adjustDST = kendoDate.adjustDST,\n            firstDayOfMonth = kendoDate.firstDayOfMonth,\n            getMilliseconds = kendoDate.getMilliseconds,\n            DAYS_IN_LEAPYEAR = [0,31,60,91,121,152,182,213,244,274,305,335,366],\n            DAYS_IN_YEAR = [0,31,59,90,120,151,181,212,243,273,304,334,365],\n            MONTHS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n            WEEK_DAYS = {\n                0: \"SU\",\n                1: \"MO\",\n                2: \"TU\",\n                3: \"WE\",\n                4: \"TH\",\n                5: \"FR\",\n                6: \"SA\"\n            },\n            WEEK_DAYS_IDX = {\n                \"SU\": 0,\n                \"MO\": 1,\n                \"TU\": 2,\n                \"WE\": 3,\n                \"TH\": 4,\n                \"FR\": 5,\n                \"SA\": 6\n            },\n            DATE_FORMATS = [\n                \"yyyy-MM-ddTHH:mm:ss.fffzzz\",\n                \"yyyy-MM-ddTHH:mm:sszzz\",\n                \"yyyy-MM-ddTHH:mm:ss\",\n                \"yyyy-MM-ddTHH:mm\",\n                \"yyyy-MM-ddTHH\",\n                \"yyyy-MM-dd\",\n                \"yyyyMMddTHHmmssfffzzz\",\n                \"yyyyMMddTHHmmsszzz\",\n                \"yyyyMMddTHHmmss\",\n                \"yyyyMMddTHHmm\",\n                \"yyyyMMddTHH\",\n                \"yyyyMMdd\"\n            ],\n            RULE_NAMES = [\"months\", \"weeks\", \"yearDays\", \"monthDays\", \"weekDays\", \"hours\", \"minutes\", \"seconds\"],\n            RULE_NAMES_LENGTH = RULE_NAMES.length,\n            RECURRENCE_DATE_FORMAT = \"yyyyMMddTHHmmssZ\",\n            limitation = {\n                months: function(date, end, rule) {\n                    var monthRules = rule.months,\n                        months = ruleValues(monthRules, date.getMonth() + 1),\n                        changed = false;\n\n                    if (months !== null) {\n                        if (months.length) {\n                            date.setMonth(months[0] - 1, 1);\n                        } else {\n                            date.setFullYear(date.getFullYear() + 1, monthRules[0] - 1, 1);\n                        }\n\n                        changed = true;\n                    }\n\n                    return changed;\n                },\n\n                monthDays: function(date, end, rule) {\n                    var monthLength, month, days,\n                        changed = false,\n                        hours = date.getHours(),\n                        normalize = function(monthDay) {\n                            if (monthDay < 0) {\n                                monthDay = monthLength + monthDay + 1;\n                            }\n                            return monthDay;\n                        };\n\n                    while (date <= end) {\n                        month = date.getMonth();\n                        monthLength = getMonthLength(date);\n                        days = ruleValues(rule.monthDays, date.getDate(), normalize);\n\n                        if (days === null) {\n                            return changed;\n                        }\n\n                        changed = true;\n\n                        if (days.length) {\n                            date.setMonth(month, days.sort(numberSortPredicate)[0]);\n                            adjustDST(date, hours);\n\n                            if (month === date.getMonth()) {\n                                break;\n                            }\n                        } else {\n                            date.setMonth(month + 1, 1);\n                        }\n                    }\n\n                    return changed;\n                },\n\n                yearDays: function(date, end, rule) {\n                    var year, yearDays,\n                        changed = false,\n                        hours = date.getHours(),\n                        normalize = function(yearDay) {\n                            if (yearDay < 0) {\n                                yearDay = year + yearDay;\n                            }\n                            return yearDay;\n                        };\n\n                    while (date < end) {\n                        year = leapYear(date) ? 366 : 365;\n                        yearDays = ruleValues(rule.yearDays, dayInYear(date), normalize);\n\n                        if (yearDays === null) {\n                            return changed;\n                        }\n\n                        changed = true;\n                        year = date.getFullYear();\n\n                        if (yearDays.length) {\n                            date.setFullYear(year, 0, yearDays.sort(numberSortPredicate)[0]);\n                            adjustDST(date, hours);\n                            break;\n                        } else {\n                            date.setFullYear(year + 1, 0, 1);\n                        }\n                    }\n\n                    return changed;\n                },\n\n                weeks: function(date, end, rule) {\n                    var weekStart = rule.weekStart,\n                        year, weeks, day,\n                        changed = false,\n                        hours = date.getHours(),\n                        normalize = function(week) {\n                            if (week < 0) {\n                                week = 53 + week;\n                            }\n                            return week;\n                        };\n\n                    while (date < end) {\n                        weeks = ruleValues(rule.weeks, weekInYear(date, weekStart), normalize);\n\n                        if (weeks === null) {\n                            return changed;\n                        }\n\n                        changed = true;\n                        year = date.getFullYear();\n\n                        if (weeks.length) {\n                            day = (weeks.sort(numberSortPredicate)[0] * 7) - 1;\n\n                            date.setFullYear(year, 0, day);\n                            setDayOfWeek(date, weekStart, -1);\n\n                            adjustDST(date, hours);\n                            break;\n                        } else {\n                            date.setFullYear(year + 1, 0, 1);\n                        }\n                    }\n\n                    return changed;\n                },\n\n                weekDays: function(date, end, rule) {\n                    var offsetDate = new Date(date.getTime() + rule.offsets.start);\n                    var normalizeDay = offsetDate.getDay() - date.getDay();\n                    var weekDays = rule.weekDays;\n                    var weekStart = rule.weekStart;\n                    var weekDayRules = ruleWeekValues(weekDays, offsetDate, weekStart);\n                    var hours = date.getHours();\n                    var traverseRuleForNextMont = function(rule) {\n                        var nextMonthFirstDay = new Date(date.getFullYear(), date.getMonth() + 1, 1);\n                        var ruleDay = normalizeDayIndex(rule.day, weekStart);\n\n                        if (nextMonthFirstDay.getDay() <= ruleDay) {\n                            if (!weekDayRule || normalizeDayIndex(weekDayRule.day, weekStart) > ruleDay) {\n                                weekDayRule = rule;\n                            }\n                        }\n                    };\n                    var weekDayRule, day;\n\n\n                    if (weekDayRules === null) {\n                        return false;\n                    }\n\n                    weekDayRule = weekDayRules[0];\n\n                    if (!weekDayRule) {\n                        if (rule.freq === \"monthly\" && !rule.positions || rule.position > 0) {\n                            weekDays.forEach(traverseRuleForNextMont);\n                        }\n                        if (!weekDayRule) {\n                            weekDayRule = weekDays[0];\n                        }\n                        setDayOfWeek(date, weekStart);\n                    }\n\n                    day = weekDayRule.day;\n                    day -= normalizeDay;\n\n                    if (weekDayRule.offset) {\n                        while (date <= end && !isInWeek(date, weekDayRule, weekStart)) {\n                            if (weekInMonth(date, weekStart) === numberOfWeeks(date, weekStart)) {\n                                date.setMonth(date.getMonth() + 1, 1);\n                                adjustDST(date, hours);\n                            } else {\n                                date.setDate(date.getDate() + 7);\n                                adjustDST(date, hours);\n\n                                setDayOfWeek(date, weekStart, -1);\n                            }\n                        }\n                    }\n\n                    if (date.getDay() !== day) {\n                        setDayOfWeek(date, day);\n                    }\n\n                    return true;\n                },\n\n                hours: function(date, end, rule) {\n                    var hourRules = rule.hours,\n                        startTime = rule._startTime,\n                        startHours = startTime.getHours(),\n                        hours = ruleValues(hourRules, startHours),\n                        changed = false;\n\n                    if (hours !== null) {\n                        changed = true;\n\n                        date.setHours(startHours);\n                        adjustDST(date, startHours);\n\n                        if (hours.length) {\n                            hours = hours[0];\n                            date.setHours(hours);\n                        } else {\n                            hours = date.getHours();\n                            date.setDate(date.getDate() + 1);\n                            adjustDST(date, hours);\n\n                            hours = hourRules[0];\n                            date.setHours(hours);\n                            adjustDST(date, hours);\n                        }\n\n                        if (rule.minutes) {\n                            date.setMinutes(0);\n                        }\n\n                        startTime.setHours(hours, date.getMinutes());\n                    }\n\n                    return changed;\n                },\n\n                minutes: function(date, end, rule) {\n                    var minuteRules = rule.minutes,\n                        currentMinutes = date.getMinutes(),\n                        minutes = ruleValues(minuteRules, currentMinutes),\n                        hours = rule._startTime.getHours(),\n                        changed = false;\n\n                    if (minutes !== null) {\n                        changed = true;\n\n                        if (minutes.length) {\n                            minutes = minutes[0];\n                        } else {\n                            hours += 1;\n                            minutes = minuteRules[0];\n                        }\n\n                        if (rule.seconds) {\n                            date.setSeconds(0);\n                        }\n\n                        date.setHours(hours, minutes);\n\n                        hours = hours % 24;\n                        adjustDST(date, hours);\n                        rule._startTime.setHours(hours, minutes, date.getSeconds());\n                    }\n\n                    return changed;\n                },\n\n                seconds: function(date, end, rule) {\n                    var secondRules = rule.seconds,\n                        hours = rule._startTime.getHours(),\n                        seconds = ruleValues(secondRules, date.getSeconds()),\n                        minutes = date.getMinutes(),\n                        changed = false;\n\n                    if (seconds !== null) {\n                        changed = true;\n\n                        if (seconds.length) {\n                            date.setSeconds(seconds[0]);\n                        } else {\n                            minutes += 1;\n                            date.setMinutes(minutes, secondRules[0]);\n\n                            if (minutes > 59) {\n                                minutes = minutes % 60;\n                                hours = (hours + 1) % 24;\n                            }\n                        }\n\n                        rule._startTime.setHours(hours, minutes, date.getSeconds());\n                    }\n\n                    return changed;\n                }\n            },\n            BaseFrequency = Class.extend({\n                next: function(date, rule) {\n                    var startTime = rule._startTime,\n                        day = startTime.getDate(),\n                        minutes, seconds;\n\n                    if (rule.seconds) {\n                        seconds = date.getSeconds() + 1;\n\n                        date.setSeconds(seconds);\n                        startTime.setSeconds(seconds);\n                        startTime.setDate(day);\n\n                    } else if (rule.minutes) {\n                        minutes = date.getMinutes() + 1;\n\n                        date.setMinutes(minutes);\n                        startTime.setMinutes(minutes);\n                        startTime.setDate(day);\n                    } else {\n                        return false;\n                    }\n\n                    return true;\n                },\n\n                normalize: function(options) {\n                    var rule = options.rule;\n\n                    if (options.idx === 4 && rule.hours) {\n                        rule._startTime.setHours(0);\n                        this._hour(options.date, rule);\n                    }\n                },\n\n                limit: function(date, end, rule) {\n                    var interval = rule.interval,\n                        ruleName, firstRule,\n                        modified,\n                        idx, day;\n\n                    while (date <= end) {\n                        modified = firstRule = undefined$1;\n                        day = date.getDate();\n\n                        for (idx = 0; idx < RULE_NAMES_LENGTH; idx++) {\n                            ruleName = RULE_NAMES[idx];\n\n                            if (rule[ruleName]) {\n                                modified = limitation[ruleName](date, end, rule);\n                                if (firstRule !== undefined$1 && modified) {\n                                    break;\n                                } else {\n                                    firstRule = modified;\n                                }\n                            }\n\n                            if (modified) {\n                                this.normalize({ date: date, rule: rule, day: day, idx: idx });\n                            }\n                        }\n\n                        if ((interval === 1 || !this.interval(rule, date)) && idx === RULE_NAMES_LENGTH) {\n                            break;\n                        }\n                    }\n                },\n\n                interval: function(rule, current) {\n                    var start = new Date(rule._startPeriod);\n                    var date = new Date(current);\n                    var hours = current.getHours();\n                    var weekStart = rule.weekStart;\n                    var interval = rule.interval;\n                    var frequency = rule.freq;\n                    var modified = false;\n                    var excess = 0;\n                    var month = 0;\n                    var day = 1;\n                    var diff;\n\n                    var startTimeHours;\n\n                    if (frequency === \"hourly\") {\n                        diff = date.getTimezoneOffset() - start.getTimezoneOffset();\n                        startTimeHours = rule._startTime.getHours();\n\n                        date = date.getTime();\n                        if (hours !== startTimeHours) {\n                            date += (startTimeHours - hours) * kendoDate.MS_PER_HOUR;\n                        }\n                        date -= start;\n\n                        if (diff) {\n                            date -= diff * kendoDate.MS_PER_MINUTE;\n                        }\n\n                        diff = Math.floor(date / kendoDate.MS_PER_HOUR);\n                        excess = intervalExcess(diff, interval);\n\n                        if (excess !== 0) {\n                            this._hour(current, rule, excess);\n                            modified = true;\n                        }\n                    } else if (frequency === \"daily\") {\n                        kendoDate.setTime(date, -start, true);\n\n                        diff = Math.round(date / kendoDate.MS_PER_DAY);\n                        excess = intervalExcess(diff, interval);\n\n                        if (excess !== 0) {\n                            this._date(current, rule, excess);\n                            modified = true;\n                        }\n\n                    } else if (frequency === \"weekly\") {\n                        excess = this._getNumberOfWeeksBetweenDates(start, current);\n\n                        var normalizedCurrentIndex = normalizeDayIndex(current.getDay(), weekStart);\n                        var normalizedStartIndex = normalizeDayIndex(start.getDay(), weekStart);\n\n                        if (normalizedCurrentIndex < normalizedStartIndex) {\n                            excess += 1;\n                        }\n\n                        excess = intervalExcess(excess, interval);\n                        if (excess !== 0) {\n                            kendoDate.setDayOfWeek(current, rule.weekStart, -1);\n\n                            current.setDate(current.getDate() + (excess * 7));\n                            adjustDST(current, hours);\n\n                            modified = true;\n                        }\n                    } else if (frequency === \"monthly\") {\n                        diff = current.getFullYear() - start.getFullYear();\n                        diff = current.getMonth() - start.getMonth() + (diff * 12);\n\n                        excess = intervalExcess(diff, interval);\n\n                        if (excess !== 0) {\n                            day = rule._hasRuleValue ? 1 : current.getDate();\n\n                            current.setFullYear(current.getFullYear(), current.getMonth() + excess, day);\n                            adjustDST(current, hours);\n\n                            modified = true;\n                        }\n                    } else if (frequency === \"yearly\") {\n                        diff = current.getFullYear() - start.getFullYear();\n                        excess = intervalExcess(diff, interval);\n\n                        if (!rule.months) {\n                            month = current.getMonth();\n                        }\n\n                        if (!rule.yearDays && !rule.monthDays && !rule.weekDays) {\n                            day = current.getDate();\n                        }\n\n                        if (excess !== 0) {\n                            current.setFullYear(current.getFullYear() + excess, month, day);\n                            adjustDST(current, hours);\n\n                            modified = true;\n                        }\n                    }\n\n                    return modified;\n                },\n\n                _getNumberOfWeeksBetweenDates: function(first, second) {\n                     var weeks = (second - first) / 604800000;\n                     var exactWeeks = Math.floor(weeks);\n\n                    //this is happening when weeks pass DST change\n                    if (weeks - exactWeeks > 0.99) {\n                        exactWeeks = Math.round(weeks);\n                    }\n                    return exactWeeks;\n                },\n\n                _hour: function(date, rule, interval) {\n                    var startTime = rule._startTime,\n                        hours = startTime.getHours();\n\n                    if (interval) {\n                        hours += interval;\n                    }\n\n                    date.setHours(hours);\n\n                    hours = hours % 24;\n                    startTime.setHours(hours);\n                    adjustDST(date, hours);\n                },\n\n                _date: function(date, rule, interval) {\n                    var hours = date.getHours();\n\n                    date.setDate(date.getDate() + interval);\n                    if (!adjustDST(date, hours)) {\n                        this._hour(date, rule);\n                    }\n                }\n            }),\n            HourlyFrequency = BaseFrequency.extend({\n                next: function(date, rule) {\n                    if (!BaseFrequency.fn.next(date, rule)) {\n                        this._hour(date, rule, 1);\n                    }\n                },\n\n                normalize: function(options) {\n                    var rule = options.rule;\n\n                    if (options.idx === 4) {\n                        rule._startTime.setHours(0);\n                        this._hour(options.date, rule);\n                    }\n                }\n            }),\n            DailyFrequency = BaseFrequency.extend({\n                next: function(date, rule) {\n                    if (!BaseFrequency.fn.next(date, rule)) {\n                        this[rule.hours ? \"_hour\" : \"_date\"](date, rule, 1);\n                    }\n                }\n            }),\n            WeeklyFrequency = DailyFrequency.extend({\n                setup: function(rule, eventStartDate) {\n                    if (!rule.weekDays) {\n                        rule.weekDays = [{\n                            day: eventStartDate.getDay(),\n                            offset: 0\n                        }];\n                    }\n                }\n            }),\n            MonthlyFrequency = BaseFrequency.extend({\n                next: function(date, rule) {\n                    var day, hours;\n                    if (!BaseFrequency.fn.next(date, rule)) {\n                        if (rule.hours) {\n                            this._hour(date, rule, 1);\n                        } else if (rule.monthDays || rule.weekDays || rule.yearDays || rule.weeks) {\n                            this._date(date, rule, 1);\n                        } else {\n                            day = date.getDate();\n                            hours = date.getHours();\n\n                            date.setMonth(date.getMonth() + 1);\n                            adjustDST(date, hours);\n\n                            while (date.getDate() !== day) {\n                                date.setDate(day);\n                                adjustDST(date, hours);\n                            }\n\n                            this._hour(date, rule);\n                        }\n                    }\n                },\n                normalize: function(options) {\n                    var rule = options.rule,\n                        date = options.date,\n                        hours = date.getHours();\n\n                    if (options.idx === 0 && !rule.monthDays && !rule.weekDays) {\n                        date.setDate(options.day);\n                        adjustDST(date, hours);\n                    } else {\n                        BaseFrequency.fn.normalize(options);\n                    }\n                },\n                setup: function(rule, eventStartDate, date) {\n                    if (!rule.monthDays && !rule.weekDays) {\n                        date.setDate(eventStartDate.getDate());\n                    }\n                }\n            }),\n            YearlyFrequency = MonthlyFrequency.extend({\n                next: function(date, rule) {\n                    var day,\n                        hours = date.getHours();\n\n                    if (!BaseFrequency.fn.next(date, rule)) {\n                        if (rule.hours) {\n                            this._hour(date, rule, 1);\n                        } else if (rule.monthDays || rule.weekDays || rule.yearDays || rule.weeks) {\n                            this._date(date, rule, 1);\n                        } else if (rule.months) {\n                            day = date.getDate();\n\n                            date.setMonth(date.getMonth() + 1);\n                            adjustDST(date, hours);\n\n                            while (date.getDate() !== day) {\n                                date.setDate(day);\n                                adjustDST(date, hours);\n                            }\n\n                            this._hour(date, rule);\n                        } else {\n                            date.setFullYear(date.getFullYear() + 1);\n                            adjustDST(date, hours);\n\n                            this._hour(date, rule);\n                        }\n                    }\n                },\n                setup: function() {}\n            }),\n            frequencies = {\n                \"hourly\": new HourlyFrequency(),\n                \"daily\": new DailyFrequency(),\n                \"weekly\": new WeeklyFrequency(),\n                \"monthly\": new MonthlyFrequency(),\n                \"yearly\": new YearlyFrequency()\n            },\n            CLICK = \"click\",\n            CHANGE = \"change\";\n\n        function intervalExcess(diff, interval) {\n            var excess;\n            if (diff !== 0 && diff < interval) {\n                excess = interval - diff;\n            } else {\n                excess = diff % interval;\n                if (excess) {\n                    excess = interval - excess;\n                }\n            }\n\n            return excess;\n        }\n\n        function dayInYear(date) {\n            var month = date.getMonth();\n            var days = leapYear(date) ? DAYS_IN_LEAPYEAR[month] : DAYS_IN_YEAR[month];\n\n            return days + date.getDate();\n        }\n\n        function weekInYear(date, weekStart) {\n            var year, days;\n\n            date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n            adjustDST(date, 0);\n\n            year = date.getFullYear();\n\n            if (weekStart !== undefined$1) {\n                setDayOfWeek(date, weekStart, -1);\n                date.setDate(date.getDate() + 4);\n            } else {\n                date.setDate(date.getDate() + (4 - (date.getDay() || 7)));\n            }\n\n            adjustDST(date, 0);\n            days = Math.floor((date.getTime() - new Date(year, 0, 1, -6)) / 86400000);\n\n            return 1 + Math.floor(days / 7);\n        }\n\n        function weekInMonth(date, weekStart) {\n            var firstWeekDay = firstDayOfMonth(date).getDay();\n            var firstWeekLength = 7 - (firstWeekDay + 7 - (weekStart || 7)) || 7;\n\n            if (firstWeekLength < 0) {\n                firstWeekLength += 7;\n            }\n\n            return Math.ceil((date.getDate() - firstWeekLength) / 7) + 1;\n        }\n\n        function normalizeDayIndex(weekDay, weekStart) {\n            return weekDay + (weekDay < weekStart ? 7 : 0);\n        }\n\n        function normalizeOffset(date, rule, weekStart) {\n            var offset = rule.offset;\n\n            if (!offset) {\n                return weekInMonth(date, weekStart);\n            }\n\n            var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n            var weeksInMonth = weekInMonth(lastDate, weekStart);\n\n            var day = normalizeDayIndex(rule.day, weekStart);\n\n            var skipFirst = day < normalizeDayIndex(new Date(date.getFullYear(), date.getMonth(), 1).getDay(), weekStart);\n            var skipLast = day > normalizeDayIndex(lastDate.getDay(), weekStart);\n\n            if (offset < 0) {\n                offset = weeksInMonth + (offset + 1 - (skipLast ? 1 : 0));\n            } else if (skipFirst) {\n                offset += 1;\n            }\n\n            weeksInMonth -= (skipLast ? 1 : 0);\n\n            if (offset < (skipFirst ? 1 : 0) || offset > weeksInMonth) {\n                return null;\n            }\n\n            return offset;\n        }\n\n        function numberOfWeeks(date, weekStart) {\n            return weekInMonth(new Date(date.getFullYear(), date.getMonth() + 1, 0), weekStart);\n        }\n\n        function isInWeek(date, rule, weekStart) {\n            return weekInMonth(date, weekStart) === normalizeOffset(date, rule, weekStart);\n        }\n\n        function ruleWeekValues(weekDays, date, weekStart) {\n            var currentDay = normalizeDayIndex(date.getDay(), weekStart);\n            var length = weekDays.length;\n            var ruleWeekOffset;\n            var weekDay, day;\n            var weekNumber;\n            var result = [];\n            var idx = 0;\n\n            for (;idx < length; idx++) {\n                weekDay = weekDays[idx];\n\n                weekNumber = weekInMonth(date, weekStart);\n                ruleWeekOffset = normalizeOffset(date, weekDay, weekStart);\n\n                if (ruleWeekOffset === null) {\n                    continue;\n                }\n\n                if (weekNumber < ruleWeekOffset) {\n                    result.push(weekDay);\n                } else if (weekNumber === ruleWeekOffset) {\n                    day = normalizeDayIndex(weekDay.day, weekStart);\n\n                    if (currentDay < day) {\n                        result.push(weekDay);\n                    } else if (currentDay === day) {\n                        return null;\n                    }\n                }\n            }\n\n            return result;\n        }\n\n        function ruleValues(rules, value, normalize) {\n            var idx = 0,\n                length = rules.length,\n                availableRules = [],\n                ruleValue;\n\n            for (; idx < length; idx++) {\n                ruleValue = rules[idx];\n\n                if (normalize) {\n                    ruleValue = normalize(ruleValue);\n                }\n\n                if (value === ruleValue) {\n                    return null;\n                } else if (value < ruleValue) {\n                    availableRules.push(ruleValue);\n                }\n            }\n\n            return availableRules;\n        }\n\n        function parseArray(list, range) {\n            var idx = 0,\n                length = list.length,\n                value;\n\n            for (; idx < length; idx++) {\n                value = parseInt(list[idx], 10);\n                if (isNaN(value) || value < range.start || value > range.end || (value === 0 && range.start < 0)) {\n                    return null;\n                }\n\n                list[idx] = value;\n            }\n\n            return list.sort(numberSortPredicate);\n        }\n\n        function parseWeekDayList(list) {\n            var idx = 0, length = list.length,\n                value, valueLength, day;\n\n            for (; idx < length; idx++) {\n                value = list[idx];\n                valueLength = value.length;\n                day = value.substring(valueLength - 2).toUpperCase();\n\n                day = WEEK_DAYS_IDX[day];\n                if (day === undefined$1) {\n                    return null;\n                }\n\n                list[idx] = {\n                    offset: parseInt(value.substring(0, valueLength - 2), 10) || 0,\n                    day: day\n                };\n            }\n            return list;\n        }\n\n        function serializeWeekDayList(list) {\n            var idx = 0, length = list.length,\n                value, valueString, result = [];\n\n            for (; idx < length; idx++) {\n                value = list[idx];\n                if (typeof value === \"string\") {\n                    valueString = value;\n                } else {\n                    valueString = \"\" + WEEK_DAYS[value.day];\n\n                    if (value.offset) {\n                        valueString = value.offset + valueString;\n                    }\n                }\n\n                result.push(valueString);\n            }\n            return result.toString();\n        }\n\n        function getMonthLength(date) {\n            var month = date.getMonth();\n\n            if (month === 1) {\n                if (new Date(date.getFullYear(), 1, 29).getMonth() === 1) {\n                    return 29;\n                }\n                return 28;\n            }\n            return MONTHS[month];\n        }\n\n        function leapYear(year) {\n            year = year.getFullYear();\n            return ((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0);\n        }\n\n        function numberSortPredicate(a, b) {\n            return a - b;\n        }\n\n        function parseExceptions(exceptions, zone) {\n            var idx = 0, length, date,\n                dates = [];\n\n            if (exceptions) {\n                exceptions = exceptions.split(exceptions.indexOf(\";\") !== -1 ? \";\" : \",\");\n                length = exceptions.length;\n\n                for (; idx < length; idx++) {\n                    date = parseUTCDate(exceptions[idx], zone);\n\n                    if (date) {\n                        dates.push(date);\n                    }\n                }\n            }\n\n            return dates;\n        }\n\n        function isException(exceptions, date, zone) {\n            var dates = Array.isArray(exceptions) ? exceptions : parseExceptions(exceptions, zone),\n                dateTime = date.getTime() - date.getMilliseconds(),\n                idx = 0, length = dates.length;\n\n            for (; idx < length; idx++) {\n                if (dates[idx].getTime() === dateTime) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        function toExceptionString(dates, zone) {\n            var idx = 0;\n            var length;\n            var date;\n            var result = [].concat(dates);\n\n            for (length = result.length; idx < length; idx++) {\n                date = result[idx];\n                date = kendo.timezone.convert(date, zone || date.getTimezoneOffset(), \"Etc/UTC\");\n                result[idx] = kendo.toString(date, RECURRENCE_DATE_FORMAT);\n            }\n\n            return result.join(\",\");\n        }\n\n        function startPeriodByFreq(start, rule) {\n            var date = new Date(start);\n\n            switch (rule.freq) {\n                case \"yearly\":\n                    date.setFullYear(date.getFullYear(), 0, 1);\n                    break;\n\n                case \"monthly\":\n                    date.setFullYear(date.getFullYear(), date.getMonth(), 1);\n                    break;\n\n                case \"weekly\":\n                    setDayOfWeek(date, rule.weekStart, -1);\n                    break;\n\n                default:\n                    break;\n            }\n\n            if (rule.hours) {\n                date.setHours(0);\n            }\n\n            if (rule.minutes) {\n                date.setMinutes(0);\n            }\n\n            if (rule.seconds) {\n                date.setSeconds(0);\n            }\n\n            return date;\n        }\n\n        function endPeriodByFreq(start, rule) {\n            var date = new Date(start);\n\n            switch (rule.freq) {\n                case \"yearly\":\n                    date.setFullYear(date.getFullYear(), 11, 31);\n                    break;\n\n                case \"monthly\":\n                    date.setFullYear(date.getFullYear(), date.getMonth() + 1, 0);\n                    break;\n\n                case \"weekly\":\n                    setDayOfWeek(date, rule.weekStart, -1);\n                    date.setDate(date.getDate() + 6);\n                    break;\n\n                default:\n                    break;\n            }\n\n            if (rule.hours) {\n                date.setHours(23);\n            }\n\n            if (rule.minutes) {\n                date.setMinutes(59);\n            }\n\n            if (rule.seconds) {\n                date.setSeconds(59);\n            }\n\n            return date;\n        }\n\n        function eventsByPosition(periodEvents, start, positions, until) {\n            var periodEventsLength = periodEvents.length;\n            var events = [];\n            var position;\n            var event;\n            var inPeriod;\n\n            for (var idx = 0, length = positions.length; idx < length; idx++) {\n                position = positions[idx];\n\n                if (position < 0) {\n                    position = periodEventsLength + position;\n                } else {\n                    position -= 1; //convert to zero based index\n                }\n\n                event = periodEvents[position];\n                inPeriod = until ? event.start < until : true;\n\n                if (event && event.start >= start && inPeriod) {\n                    events.push(event);\n                }\n            }\n\n            return events;\n        }\n\n        function removeExceptionDates(periodEvents, exceptionDates, zone) {\n            var events = [];\n            var event;\n\n            for (var idx = 0; idx < periodEvents.length; idx++) {\n                event = periodEvents[idx];\n                if (!isException(exceptionDates, event.start, zone)) {\n                    events.push(event);\n                }\n            }\n\n            return events;\n        }\n\n        function expand(event, start, end, zone) {\n            var rule,\n                startTime, endTime, endDate,\n                hours, minutes, seconds,\n                durationMS, startPeriod, inPeriod,\n                ruleStart, ruleEnd,\n                useEventStart, freqName,\n                exceptionDates,\n                eventStartTime,\n                eventStartMS,\n                eventStart,\n                count, freq,\n                positions,\n                currentIdx,\n                periodEvents,\n                events = [],\n                shiftedStart,\n                shiftedEnd,\n                shiftedStartTime,\n                shifterEndTime;\n\n            rule = parseRule(event.recurrenceRule, zone, { // offsets argument\n                start: (getZoneOffset(event.start, zone) - getZoneOffset(event.start, event.startTimezone || zone)) * kendo.date.MS_PER_MINUTE,\n                end: (getZoneOffset(event.end, zone) - getZoneOffset(event.end, event.endTimezone || zone)) * kendo.date.MS_PER_MINUTE\n            });\n\n            if (!rule) {\n                return [event];\n            }\n\n            positions = rule.positions;\n            currentIdx = positions ? 0 : 1;\n\n            ruleStart = rule.start;\n            ruleEnd = rule.end;\n\n            if (ruleStart || ruleEnd) {\n                event = event.clone({\n                    start: ruleStart ? new Date(ruleStart.value[0]) : undefined$1,\n                    end: ruleEnd ? new Date(ruleEnd.value[0]) : undefined$1\n                });\n            }\n\n            eventStart = event.start;\n            eventStartMS = eventStart.getTime();\n            eventStartTime = getMilliseconds(eventStart);\n\n            exceptionDates = parseExceptions(event.recurrenceException, zone);\n\n            if (!exceptionDates[0] && rule.exdates) {\n                exceptionDates = rule.exdates.value;\n                event.set(\"recurrenceException\", toExceptionString(exceptionDates, zone));\n            }\n\n            startPeriod = start = new Date(start);\n            end = new Date(end);\n\n            freqName = rule.freq;\n            freq = frequencies[freqName];\n            count = rule.count;\n\n            if (rule.until && rule.until < end) {\n                end = new Date(rule.until);\n            }\n\n            useEventStart = freqName === \"yearly\" || freqName === \"monthly\" || freqName === \"weekly\";\n\n            if (start < eventStartMS || count || rule.interval > 1 || useEventStart ||\n                 ((freqName === \"daily\" || freqName === \"hourly\") && !rule.seconds)) {\n                        start = new Date(eventStartMS);\n            } else {\n                hours = start.getHours();\n                minutes = start.getMinutes();\n                seconds = start.getSeconds();\n\n                if (!rule.hours) {\n                    hours = eventStart.getHours();\n                }\n\n                if (!rule.minutes) {\n                    minutes = eventStart.getMinutes();\n                }\n\n                if (!rule.seconds) {\n                    seconds = eventStart.getSeconds();\n                }\n\n                start.setHours(hours, minutes, seconds, eventStart.getMilliseconds());\n            }\n\n            rule._startPeriod = new Date(start);\n\n            if (positions) {\n                start = startPeriodByFreq(start, rule);\n                end = endPeriodByFreq(end, rule);\n\n                var diff = getMilliseconds(end) - getMilliseconds(start);\n                if (diff < 0) {\n                    hours = start.getHours();\n                    end.setHours(hours, start.getMinutes(), start.getSeconds(), start.getMilliseconds());\n                    kendoDate.adjustDST(end, hours);\n                }\n\n                rule._startPeriod = new Date(start);\n                rule._endPeriod = endPeriodByFreq(start, rule);\n            }\n\n            durationMS = event.duration();\n            var allDayCompensation = event.isAllDay ? 86400000 : 0;\n            rule._startTime = startTime = kendoDate.toInvariantTime(start);\n\n            if (freq.setup) {\n                freq.setup(rule, eventStart, start);\n            }\n\n            freq.limit(start, end, rule);\n\n            while (start <= end) {\n                endDate = new Date(start);\n                setTime(endDate, durationMS);\n                var inPeriodCheckEndDate = new Date(start);\n                setTime(inPeriodCheckEndDate, durationMS + allDayCompensation);\n\n                inPeriod = start >= startPeriod || inPeriodCheckEndDate > startPeriod;\n\n                if (inPeriod && !isException(exceptionDates, start, zone) || positions) {\n                    startTime = kendoDate.toUtcTime(kendoDate.getDate(start)) + getMilliseconds(rule._startTime);\n                    endTime = startTime + durationMS;\n\n                    if (eventStartMS !== start.getTime() || eventStartTime !== getMilliseconds(rule._startTime)) {\n                        var startZone = event.startTimezone || event.endTimezone;\n                        var endZone = event.endTimezone || event.startTimezone;\n\n                        if (!event.isAllDay) {\n                            if ((zone && startZone) || (!zone && !startZone)) {\n                                var startOffsetDiff = getZoneOffset(start, zone) - getZoneOffset(event.start, zone);\n                                var endOffsetDiff = getZoneOffset(endDate, zone) - getZoneOffset(event.end, zone);\n                                var startTZOffsetDiff = getZoneOffset(start, startZone) - getZoneOffset(event.start, startZone);\n                                var endTZOffsetDiff = getZoneOffset(endDate, endZone) - getZoneOffset(event.end, endZone);\n\n                                if (startOffsetDiff !== startTZOffsetDiff) {\n                                    var offsetTicksStart = (startOffsetDiff - startTZOffsetDiff) * 60000;\n                                    shiftedStart = new Date(start.getTime() - offsetTicksStart);\n                                    shiftedStartTime = startTime - offsetTicksStart;\n                                }\n\n                                if (endOffsetDiff !== endTZOffsetDiff) {\n                                    var offsetTicksEnd = (endOffsetDiff - endTZOffsetDiff) * 60000;\n                                    shiftedEnd = new Date(endDate.getTime() - offsetTicksEnd);\n                                    shifterEndTime = endTime - offsetTicksEnd;\n                                }\n                            }\n                        }\n\n\n                        events.push(event.toOccurrence({\n                            start: shiftedStart || new Date(start),\n                            end: shiftedEnd || endDate,\n                            _startTime: shiftedStartTime || startTime,\n                            _endTime: shifterEndTime || endTime\n                        }));\n\n                        shiftedStart = shiftedEnd = shiftedStartTime = shifterEndTime = null;\n                    } else {\n                        event._startTime = startTime;\n                        event._endTime = endTime;\n                        events.push(event);\n                    }\n                }\n\n                if (positions) {\n                    freq.next(start, rule);\n                    freq.limit(start, end, rule);\n\n                    if (start > rule._endPeriod) {\n                        periodEvents = eventsByPosition(events.slice(currentIdx), eventStart, positions, rule.until);\n                        periodEvents = removeExceptionDates(periodEvents, exceptionDates, zone);\n                        events = events.slice(0, currentIdx).concat(periodEvents);\n\n                        rule._endPeriod = endPeriodByFreq(start, rule);\n\n                        currentIdx = events.length;\n                    }\n\n                    if (count && count === currentIdx) {\n                        break;\n                    }\n\n                } else {\n                    if (count && count === currentIdx) {\n                        break;\n                    }\n\n                    currentIdx += 1;\n\n                    var isMissingDSTHour = isDSTMissingHour(start);\n                    freq.next(start, rule);\n\n                    if (isMissingDSTHour && rule.freq !== \"hourly\" && kendoDate.toInvariantTime(event.start).getTime() !== kendoDate.toInvariantTime(start).getTime()) {\n                        rule._startTime = startTime = new Date(start.getTime() - 3600000);\n                    }\n\n                    freq.limit(start, end, rule);\n                }\n            }\n\n            return events;\n        }\n\n        function isDSTMissingHour(date) {\n            var dateOffset = date.getTimezoneOffset();\n            var dateMinusHour = new Date(date.getTime() - 3600000);\n            var dateMinusHourOffset = dateMinusHour.getTimezoneOffset();\n\n            return dateOffset < dateMinusHourOffset;\n        }\n\n        function getZoneOffset(date, zone) {\n            return zone ? kendo.timezone.offset(date, zone) : date.getTimezoneOffset();\n        }\n\n        function parseUTCDate(value, zone) {\n            value = kendo.parseDate(value, DATE_FORMATS); //Parse UTC to local time\n\n            if (value && zone) {\n                value = timezone.apply(value, zone);\n            }\n\n            return value;\n        }\n\n        function parseDateRule(dateRule, zone) {\n            var pairs = dateRule.split(\";\");\n            var pair;\n            var property;\n            var value;\n            var tzid;\n            var valueIdx, valueLength;\n\n            for (var idx = 0, length = pairs.length; idx < length; idx++) {\n                pair = pairs[idx].split(\":\");\n                property = pair[0];\n                value = pair[1];\n\n                if (property.indexOf(\"TZID\") !== -1) {\n                    tzid = property.substring(property.indexOf(\"TZID\")).split(\"=\")[1];\n                }\n\n                if (value) {\n                    value = value.split(\",\");\n\n                    for (valueIdx = 0, valueLength = value.length; valueIdx < valueLength; valueIdx++) {\n                        value[valueIdx] = parseUTCDate(value[valueIdx], tzid || zone);\n                    }\n                }\n            }\n\n            if (value) {\n                return {\n                    value: value,\n                    tzid: tzid\n                };\n            }\n        }\n\n        function parseRule(recur, zone, offsets) {\n            var instance = {};\n            var splits, value;\n            var idx = 0, length;\n            var ruleValue = false;\n            var rule, part, parts;\n            var property, weekStart, weekDays;\n            var predicate = function(a, b) {\n                var day1 = a.day,\n                    day2 = b.day;\n\n                if (day1 < weekStart) {\n                   day1 += 7;\n                }\n\n                if (day2 < weekStart) {\n                    day2 += 7;\n                }\n\n                return day1 - day2;\n            };\n\n            if (!recur) {\n                return null;\n            }\n\n            parts = recur.split(\"\\n\");\n\n            if (!parts[1] && (recur.indexOf(\"DTSTART\") !== -1 || recur.indexOf(\"DTEND\") !== -1 || recur.indexOf(\"EXDATE\") !== -1)) {\n                parts = recur.split(\" \");\n            }\n\n            for (idx = 0, length = parts.length; idx < length; idx++) {\n                part = kendo.trim(parts[idx]);\n\n                if (part.indexOf(\"DTSTART\") !== -1) {\n                    instance.start = parseDateRule(part, zone);\n                } else if (part.indexOf(\"DTEND\") !== -1) {\n                    instance.end = parseDateRule(part, zone);\n                } else if (part.indexOf(\"EXDATE\") !== -1) {\n                    instance.exdates = parseDateRule(part, zone);\n                } else if (part.indexOf(\"RRULE\") !== -1) {\n                    rule = part.substring(6);\n                } else if (kendo.trim(part)) {\n                    rule = part;\n                }\n            }\n\n            rule = rule.split(\";\");\n\n            for (idx = 0, length = rule.length; idx < length; idx++) {\n                property = rule[idx];\n                splits = property.split(\"=\");\n                value = kendo.trim(splits[1]).split(\",\");\n\n                switch (kendo.trim(splits[0]).toUpperCase()) {\n                    case \"FREQ\":\n                        instance.freq = value[0].toLowerCase();\n                        break;\n                    case \"UNTIL\":\n                        instance.until = parseUTCDate(value[0], zone);\n                        break;\n                    case \"COUNT\":\n                        instance.count = parseInt(value[0], 10);\n                        break;\n                    case \"INTERVAL\":\n                        instance.interval = parseInt(value[0], 10);\n                        break;\n                    case \"BYSECOND\":\n                        instance.seconds = parseArray(value, { start: 0, end: 60 });\n                        ruleValue = true;\n                        break;\n                    case \"BYMINUTE\":\n                        instance.minutes = parseArray(value, { start: 0, end: 59 });\n                        ruleValue = true;\n                        break;\n                    case \"BYHOUR\":\n                        instance.hours = parseArray(value, { start: 0, end: 23 });\n                        ruleValue = true;\n                        break;\n                    case \"BYMONTHDAY\":\n                        instance.monthDays = parseArray(value, { start: -31, end: 31 });\n                        ruleValue = true;\n                        break;\n                    case \"BYYEARDAY\":\n                        instance.yearDays = parseArray(value, { start: -366, end: 366 });\n                        ruleValue = true;\n                        break;\n                    case \"BYMONTH\":\n                        instance.months = parseArray(value, { start: 1, end: 12 });\n                        ruleValue = true;\n                        break;\n                    case \"BYDAY\":\n                        instance.weekDays = weekDays = parseWeekDayList(value);\n                        ruleValue = true;\n                        break;\n                    case \"BYWEEKNO\":\n                        instance.weeks = parseArray(value, { start: -53, end: 53 });\n                        ruleValue = true;\n                        break;\n                    case \"BYSETPOS\":\n                        instance.positions = parseArray(value, { start: -366, end: 366 });\n                        break;\n                    case \"WKST\":\n                        instance.weekStart = weekStart = WEEK_DAYS_IDX[value[0]];\n                        break;\n                }\n            }\n\n            if (instance.freq === undefined$1 || (instance.count !== undefined$1 && instance.until)) {\n                return null;\n            }\n\n            if (!instance.interval) {\n                instance.interval = 1;\n            }\n\n            if (weekStart === undefined$1) {\n                instance.weekStart = weekStart = kendo.culture().calendar.firstDay;\n            }\n\n            if (weekDays) {\n                instance.weekDays = weekDays.sort(predicate);\n            }\n\n            if (instance.positions && !ruleValue) {\n                instance.positions = null;\n            }\n\n            instance._hasRuleValue = ruleValue;\n            instance.offsets = offsets;\n\n            return instance;\n        }\n\n        function serializeDateRule(dateRule, zone) {\n            var value = dateRule.value;\n            var tzid = dateRule.tzid || \"\";\n            var length = value.length;\n            var idx = 0;\n            var val;\n\n            for (; idx < length; idx++) {\n                val = value[idx];\n                val = timezone.convert(val, tzid || zone || val.getTimezoneOffset(), \"Etc/UTC\");\n                value[idx] = kendo.toString(val, \"yyyyMMddTHHmmssZ\");\n            }\n\n            if (tzid) {\n                tzid = \";TZID=\" + tzid;\n            }\n\n            return tzid + \":\" + value.join(\",\") + \" \";\n        }\n\n        function serialize(rule, zone) {\n            var weekStart = rule.weekStart;\n            var ruleString = \"FREQ=\" + rule.freq.toUpperCase();\n            var exdates = rule.exdates || \"\";\n            var start = rule.start || \"\";\n            var end = rule.end || \"\";\n            var until = rule.until;\n\n            if (weekStart === undefined$1) {\n                weekStart = kendo.culture().calendar.firstDay;\n            }\n\n            if (rule.interval > 1) {\n                ruleString += \";INTERVAL=\" + rule.interval;\n            }\n\n            if (rule.count) {\n                ruleString += \";COUNT=\" + rule.count;\n            }\n\n            if (until) {\n                until = timezone.convert(until, zone || until.getTimezoneOffset(), \"Etc/UTC\");\n\n                ruleString += \";UNTIL=\" + kendo.toString(until, \"yyyyMMddTHHmmssZ\");\n            }\n\n            if (rule.months) {\n                ruleString += \";BYMONTH=\" + rule.months;\n            }\n\n            if (rule.weeks) {\n                ruleString += \";BYWEEKNO=\" + rule.weeks;\n            }\n\n            if (rule.yearDays) {\n                ruleString += \";BYYEARDAY=\" + rule.yearDays;\n            }\n\n            if (rule.monthDays) {\n                ruleString += \";BYMONTHDAY=\" + rule.monthDays;\n            }\n\n            if (rule.weekDays) {\n                ruleString += \";BYDAY=\" + serializeWeekDayList(rule.weekDays);\n            }\n\n            if (rule.hours) {\n                ruleString += \";BYHOUR=\" + rule.hours;\n            }\n\n            if (rule.minutes) {\n                ruleString += \";BYMINUTE=\" + rule.minutes;\n            }\n\n            if (rule.seconds) {\n                ruleString += \";BYSECOND=\" + rule.seconds;\n            }\n\n            if (rule.positions) {\n                ruleString += \";BYSETPOS=\" + rule.positions;\n            }\n\n            if (weekStart !== undefined$1) {\n                ruleString += \";WKST=\" + WEEK_DAYS[weekStart];\n            }\n\n            if (start) {\n                start = \"DTSTART\" + serializeDateRule(start, zone);\n            }\n\n            if (end) {\n                end = \"DTEND\" + serializeDateRule(end, zone);\n            }\n\n            if (exdates) {\n                exdates = \"EXDATE\" + serializeDateRule(exdates, zone);\n            }\n\n            if (start || end || exdates) {\n                ruleString = start + end + exdates + \"RRULE:\" + ruleString;\n            }\n\n            return ruleString;\n        }\n\n        kendo.recurrence = {\n            rule: {\n                parse: parseRule,\n                serialize: serialize\n            },\n            expand: expand,\n            dayInYear: dayInYear,\n            weekInYear: weekInYear,\n            weekInMonth: weekInMonth,\n            numberOfWeeks: numberOfWeeks,\n            isException: isException,\n            toExceptionString: toExceptionString\n        };\n\n        var RECURRENCE_VIEW_TEMPLATE = kendo.template(function (ref) {\n               var frequency = ref.frequency;\n               var messages = ref.messages;\n               var end = ref.end;\n\n               return (frequency !== \"never\" ?\n                '<div class=\"k-form-field\">' +\n                    \"<label id=\\\"recur_interval_label\\\" class=\\\"k-label k-form-label\\\" for=\\\"recur_interval\\\">\" + (encode(messages.repeatEvery)) + \"</label>\" +\n                    '<div class=\"k-form-field-wrap\">' +\n                        \"<input id=\\\"recur_interval\\\" class=\\\"k-recur-interval\\\" title=\\\"\" + (encode(messages.repeatEvery)) + \" \" + (encode(messages.interval)) + \"\\\" aria-labelledby=\\\"recur_interval_label\\\">\" + (encode(messages.interval)) +\n                    '</div>' +\n                '</div>' : ''\n           ) +\n           (frequency === \"weekly\" ?\n                '<div class=\"k-form-field\">' +\n                    \"<label class=\\\"k-label k-form-label\\\">\" + (encode(messages.repeatOn)) + \"</label>\" +\n                    '<div class=\"k-form-field-wrap\">' +\n                        \"<div class=\\\"k-button-group-stretched k-recur-weekday-buttons\\\" title=\\\"\" + (encode(messages.repeatOn)) + \"\\\"></div></div>\" +\n                    '</div>' +\n                '</div>' : ''\n            ) +\n            (frequency === \"monthly\" ?\n                \"<div class=\\\"k-form-field\\\"><label class=\\\"k-label k-form-label\\\">\" + (encode(messages.repeatOn)) + \"</label></div>\" +\n                    '<div class=\"k-form-field-wrap\">' +\n                        '<ul class=\"k-radio-list\">' +\n                            '<li class=\"k-radio-item\">' +\n                                \"<label class=\\\"k-radio-label\\\"><input class=\\\"k-recur-month-radio k-radio k-radio-md\\\" type=\\\"radio\\\" name=\\\"month\\\" value=\\\"monthday\\\" title=\\\"\" + (encode(messages.repeatOn)) + \"\\\" />\" + (encode(messages.date)) + \":</label>\" +\n                                \"<input class=\\\"k-recur-monthday\\\" aria-label=\\\"\" + (encode(messages.date)) + \"\\\" title=\\\"\" + (encode(messages.date)) + \"\\\" />\" +\n                            '</li>' +\n                            '<li class=\"k-radio-item\">' +\n                                \"<input class=\\\"k-recur-month-radio k-radio k-radio-md\\\" type=\\\"radio\\\" name=\\\"month\\\" value=\\\"weekday\\\" aria-label=\\\"\" + (encode(messages.repeatOn)) + \" \" + (encode(messages.day)) + \"\\\" title=\\\"\" + (encode(messages.repeatOn)) + \" \" + (encode(messages.day)) + \"\\\" />\" +\n                                \"<input class=\\\"k-recur-weekday-offset\\\" title=\\\"\" + (encode(messages.repeatOn)) + \"\\\" \" + (kendo.attr(\"style-width\")) + \"=\\\"8em\\\" />\" +\n                                \"<input class=\\\"k-recur-weekday\\\" title=\\\"\" + (encode(messages.day)) + \"\\\" \" + (kendo.attr(\"style-width\")) + \"=\\\"8em\\\" />\" +\n                            '</li>' +\n                        '</ul>' +\n                    '</div>' +\n                '</div>' : ''\n            ) +\n           (frequency === \"yearly\" ?\n                \"<div class=\\\"k-form-field\\\"><label class=\\\"k-label k-form-label\\\">\" + (encode(messages.repeatOn)) + \"</label>\" +\n                    '<div class=\"k-form-field-wrap\">' +\n                        '<ul class=\"k-radio-list\">' +\n                            '<li class=\"k-radio-item\">' +\n                                \"<input class=\\\"k-recur-year-radio k-radio k-radio-md\\\" type=\\\"radio\\\" name=\\\"year\\\" value=\\\"monthday\\\" title=\\\"\" + (encode(messages.repeatOn)) + \" \" + (encode(messages.month)) + \"\\\" />\" +\n                                \"<input class=\\\"k-recur-month\\\" aria-label=\\\"\" + (encode(messages.month)) + \"\\\" title=\\\"\" + (encode(messages.month)) + \"\\\" \" + (kendo.attr(\"style-width\")) + \"=\\\"8em\\\" />\" +\n                                \"<input class=\\\"k-recur-monthday\\\" aria-label=\\\"\" + (encode(messages.date)) + \"\\\" title=\\\"\" + (encode(messages.date)) + \"\\\" />\" +\n                            '</li>' +\n                            '<li class=\"k-radio-item\">' +\n                                \"<input class=\\\"k-recur-year-radio k-radio k-radio-md\\\" type=\\\"radio\\\" name=\\\"year\\\" value=\\\"weekday\\\" title=\\\"\" + (encode(messages.repeatOn)) + \" \" + (encode(messages.day)) + \"\\\" />\" +\n                                \"<input class=\\\"k-recur-weekday-offset\\\" title=\\\"\" + (encode(messages.repeatOn)) + \"\\\" \" + (kendo.attr(\"style-width\")) + \"=\\\"8em\\\"/><input class=\\\"k-recur-weekday\\\" title=\\\"\" + (encode(messages.day)) + \"\\\" \" + (kendo.attr(\"style-width\")) + \"=\\\"8em\\\"/>\" + (encode(messages.of)) + \"<input class=\\\"k-recur-month\\\" title=\\\"\" + (encode(messages.of + messages.month)) + \"\\\" \" + (kendo.attr(\"style-width\")) + \"=\\\"8em\\\"/>\" +\n                            '</li>' +\n                        '</ul>' +\n                    '</div>' +\n                '</div>' : ''\n           ) +\n           (frequency !== \"never\" ?\n                \"<div class=\\\"k-form-field\\\"><label class=\\\"k-label k-form-label\\\">\" + (encode(end.label)) + \"</label>\" +\n                    '<div class=\"k-form-field-wrap\">' +\n                        '<ul class=\"k-radio-list\">' +\n                            '<li class=\"k-radio-item\">' +\n                                \"<label class=\\\"k-radio-label\\\"><input class=\\\"k-recur-end-never k-radio k-radio-md\\\" type=\\\"radio\\\" name=\\\"end\\\" value=\\\"never\\\" title=\\\"\" + (encode(end.label)) + \"\\\" />\" + (encode(end.never)) + \"</label>\" +\n                            '</li>' +\n                            '<li class=\"k-radio-item\">' +\n                                \"<label class=\\\"k-radio-label\\\"><input class=\\\"k-recur-end-count k-radio k-radio-md\\\" type=\\\"radio\\\" name=\\\"end\\\" value=\\\"count\\\" title=\\\"\" + (encode(end.label)) + \"\\\" />\" + (encode(end.after)) + \"</label>\" +\n                                \"<input class=\\\"k-recur-count\\\" aria-label=\\\"\" + (encode(end.occurrence)) + \"\\\" title=\\\"\" + (encode(end.occurrence)) + \"\\\" />\" + (encode(end.occurrence)) +\n                            '</li>' +\n                            '<li class=\"k-radio-item\">' +\n                                \"<label class=\\\"k-radio-label\\\"><input class=\\\"k-recur-end-until k-radio k-radio-md\\\" type=\\\"radio\\\" name=\\\"end\\\" value=\\\"until\\\" title=\\\"\" + (encode(end.label)) + \"\\\" />\" + (encode(end.on)) + \"</label>\" +\n                                \"<input class=\\\"k-recur-until\\\" title=\\\"\" + (encode(end.on)) + \"\\\" aria-label=\\\"\" + (encode(end.on)) + \"\\\" name=\\\"recur-until\\\" />\" +\n                            '</li>' +\n                        '</ul>' +\n                    '</div>' +\n                '</div>' : ''\n           );\n        }\n        );\n\n        var DAY_RULE = [\n            { day: 0, offset: 0 },\n            { day: 1, offset: 0 },\n            { day: 2, offset: 0 },\n            { day: 3, offset: 0 },\n            { day: 4, offset: 0 },\n            { day: 5, offset: 0 },\n            { day: 6, offset: 0 }\n        ];\n\n        var WEEKDAY_RULE = [\n            { day: 1, offset: 0 },\n            { day: 2, offset: 0 },\n            { day: 3, offset: 0 },\n            { day: 4, offset: 0 },\n            { day: 5, offset: 0 }\n        ];\n\n        var WEEKEND_RULE = [\n            { day: 0, offset: 0 },\n            { day: 6, offset: 0 }\n        ];\n\n        var BaseRecurrenceEditor = Widget.extend({\n            init: function(element, options) {\n                var start;\n                var that = this;\n                var frequencies = options && options.frequencies;\n\n                Widget.fn.init.call(that, element, options);\n\n                that.wrapper = that.element;\n\n                options = that.options;\n                options.start = start = options.start || kendoDate.today();\n\n                if (frequencies) {\n                    options.frequencies = frequencies;\n                }\n\n                if (typeof start === \"string\") {\n                    options.start = kendo.parseDate(start, \"yyyyMMddTHHmmss\");\n                }\n\n                if (options.firstWeekDay === null) {\n                    options.firstWeekDay = kendo.culture().calendar.firstDay;\n                }\n\n                that._namespace = \".\" + options.name;\n            },\n\n            options: {\n                value: \"\",\n                start: \"\",\n                timezone: \"\",\n                spinners: true,\n                firstWeekDay: null,\n                frequencies: [\n                    \"never\",\n                    \"daily\",\n                    \"weekly\",\n                    \"monthly\",\n                    \"yearly\"\n                ],\n                mobile: false,\n                messages: {\n                    repeat: \"Repeat\",\n                    recurrenceEditorTitle: \"Recurrence editor\",\n                    frequencies: {\n                        never: \"Never\",\n                        hourly: \"Hourly\",\n                        daily: \"Daily\",\n                        weekly: \"Weekly\",\n                        monthly: \"Monthly\",\n                        yearly: \"Yearly\"\n                    },\n                    hourly: {\n                        repeatEvery: \"Repeat every: \",\n                        interval: \" hour(s)\"\n                    },\n                    daily: {\n                        repeatEvery: \"Repeat every: \",\n                        interval: \" day(s)\"\n                    },\n                    weekly: {\n                        interval: \" week(s)\",\n                        repeatEvery: \"Repeat every: \",\n                        repeatOn: \"Repeat on: \"\n                    },\n                    monthly: {\n                        repeatEvery: \"Repeat every: \",\n                        repeatOn: \"Repeat on: \",\n                        interval: \" month(s)\",\n                        day: \"Day \",\n                        date: \"Date\"\n                    },\n                    yearly: {\n                        repeatEvery: \"Repeat every: \",\n                        repeatOn: \"Repeat on: \",\n                        interval: \" year(s)\",\n                        of: \" of \",\n                        month: \"month\",\n                        day: \"day\",\n                        date: \"Date\"\n                    },\n                    end: {\n                        label: \"End:\",\n                        mobileLabel: \"Ends\",\n                        never: \"Never\",\n                        after: \"After \",\n                        occurrence: \" occurrence(s)\",\n                        on: \"On \"\n                    },\n                    offsetPositions: {\n                        first: \"first\",\n                        second: \"second\",\n                        third: \"third\",\n                        fourth: \"fourth\",\n                        last: \"last\"\n                    },\n                    weekdays: {\n                        day: \"day\",\n                        weekday: \"weekday\",\n                        weekend: \"weekend day\"\n                    }\n                }\n            },\n\n            events: [\"change\"],\n\n            _initInterval: function() {\n                var that = this;\n                var rule = that._value;\n\n                that._container\n                    .find(\".k-recur-interval\")\n                    .kendoNumericTextBox({\n                        spinners: that.options.spinners,\n                        value: rule.interval || 1,\n                        decimals: 0,\n                        format: \"#\",\n                        min: 1,\n                        change: function() {\n                            rule.interval = this.value();\n                            that._trigger();\n                        }\n                    });\n            },\n\n            _weekDayButtons: function(firstDay) {\n                var that = this,\n                    names = kendo.culture().calendar.days.names,\n                    abbreviated = kendo.culture().calendar.days.namesAbbr,\n                    repeatOn = that.options.messages.weekly.repeatOn,\n                    length = names.length,\n                    idx = 0,\n                    values = [],\n                    items = [];\n\n                for (; idx < length; idx++) {\n                    values.push(idx);\n                }\n\n                names = names.slice(firstDay).concat(names.slice(0, firstDay));\n                abbreviated = abbreviated.slice(firstDay).concat(abbreviated.slice(0, firstDay));\n                values = values.slice(firstDay).concat(values.slice(0, firstDay));\n\n                for (idx = 0; idx < length; idx++) {\n                    items.push({\n                        text: abbreviated[idx],\n                        attributes: {\n                            \"data-value\": values[idx],\n                            \"aria-label\": repeatOn + \" \" + names[idx]\n                        }\n                    });\n                }\n\n                if (that._container.find(\".k-recur-weekday-buttons\").length > 0) {\n                    that._weekDayButtonGroup = new ButtonGroup(that._container.find(\".k-recur-weekday-buttons\"), {\n                        items: items,\n                        selection: \"multiple\",\n                        select: function() {\n                            var rule = that._value,\n                                selectedDays = that._weekDayButtonGroup.current();\n\n                            rule.weekDays = selectedDays.map(function(i, day) {\n                                return {\n                                    day: Number(day.getAttribute(\"data-value\")),\n                                    offset: 0\n                                };\n                            });\n\n                            if (!that.options.mobile) {\n                                that._trigger();\n                            }\n                        }\n                    });\n                }\n            },\n\n            _weekDayRule: function(clear) {\n                var that = this;\n                var weekday = (that._weekDay.element || that._weekDay).val();\n                var offset = Number((that._weekDayOffset.element || that._weekDayOffset).val());\n                var weekDays = null;\n                var positions = null;\n\n                if (!clear) {\n                    if (weekday === \"day\") {\n                        weekDays = DAY_RULE;\n                        positions = offset;\n                    } else if (weekday === \"weekday\") {\n                        weekDays = WEEKDAY_RULE;\n                        positions = offset;\n                    } else if (weekday === \"weekend\") {\n                        weekDays = WEEKEND_RULE;\n                        positions = offset;\n                    } else {\n                        weekDays = [{\n                            offset: offset,\n                            day: Number(weekday)\n                        }];\n                    }\n                }\n\n                that._value.weekDays = weekDays;\n                that._value.positions = positions;\n            },\n\n            _weekDayView: function() {\n                var that = this;\n                var weekDays = that._value.weekDays;\n                var positions = that._value.positions;\n                var weekDayOffsetWidget = that._weekDayOffset;\n                var weekDayOffset;\n                var weekDayValue;\n                var length;\n                var method;\n\n                if (weekDays) {\n                    length = weekDays.length;\n\n                    if (positions) {\n                        if (length === 7) {\n                            weekDayValue = \"day\";\n                            weekDayOffset = positions;\n                        } else if (length === 5) {\n                            weekDayValue = \"weekday\";\n                            weekDayOffset = positions;\n                        } else if (length === 2) {\n                            weekDayValue = \"weekend\";\n                            weekDayOffset = positions;\n                        }\n                    }\n\n                    if (!weekDayValue) {\n                        weekDays = weekDays[0];\n                        weekDayValue = weekDays.day;\n                        weekDayOffset = weekDays.offset || \"\";\n                    }\n\n                    method = weekDayOffsetWidget.value ? \"value\" : \"val\";\n\n                    weekDayOffsetWidget[method](weekDayOffset);\n                    that._weekDay[method](weekDayValue);\n                }\n            },\n\n            _initWeekDay: function() {\n                var that = this, data;\n\n                var weekdayMessage = that.options.messages.weekdays;\n                var offsetMessage = that.options.messages.offsetPositions;\n\n                var weekDayInput = that._container.find(\".k-recur-weekday\");\n\n                var change = function() {\n                    that._weekDayRule();\n                    that._trigger();\n                };\n\n                if (weekDayInput[0]) {\n                    that._weekDayOffset = new DropDownList(that._container.find(\".k-recur-weekday-offset\"), {\n                        autoWidth: true,\n                        change: change,\n                        dataTextField: \"text\",\n                        dataValueField: \"value\",\n                        dataSource: [\n                            { text: offsetMessage.first, value: \"1\" },\n                            { text: offsetMessage.second, value: \"2\" },\n                            { text: offsetMessage.third, value: \"3\" },\n                            { text: offsetMessage.fourth, value: \"4\" },\n                            { text: offsetMessage.last, value: \"-1\" }\n                        ]\n                    });\n\n                    data = [\n                        { text: weekdayMessage.day, value: \"day\" },\n                        { text: weekdayMessage.weekday, value: \"weekday\" },\n                        { text: weekdayMessage.weekend, value: \"weekend\" }\n                    ];\n\n                    that._weekDay = new DropDownList(weekDayInput, {\n                        autoWidth: true,\n                        value: that.options.start.getDay(),\n                        change: change,\n                        dataTextField: \"text\",\n                        dataValueField: \"value\",\n                        dataSource: data.concat($.map(kendo.culture().calendar.days.names, function(dayName, idx) {\n                            return {\n                                text: dayName,\n                                value: idx\n                            };\n                        }))\n                    });\n\n                    that._weekDayView();\n                }\n            },\n\n            _initWeekDays: function() {\n                var that = this;\n                var rule = that._value;\n                var weekDayButtonGroup = that._weekDayButtonGroup;\n\n                if (weekDayButtonGroup && rule.weekDays && rule.weekDays.length) {\n                    var ruleDays = rule.weekDays,\n                        ruleDaysLength = ruleDays.length,\n                        selectors = [],\n                        i = 0,\n                        selectedWeekDayButtons;\n\n                    for (; i < ruleDaysLength; i++) {\n                        selectors.push(\"[data-value='\" + ruleDays[i].day + \"']\");\n                    }\n\n                    selectedWeekDayButtons = weekDayButtonGroup.element.find(selectors.join(\",\"));\n                    weekDayButtonGroup.select(selectedWeekDayButtons);\n                }\n            },\n\n            _initMonthDay: function() {\n                var that = this;\n                var rule = that._value;\n                var monthDayInput = that._container.find(\".k-recur-monthday\");\n\n                if (monthDayInput[0]) {\n                    that._monthDay = new kendo.ui.NumericTextBox(monthDayInput, {\n                        spinners: that.options.spinners,\n                        min: 1,\n                        max: 31,\n                        decimals: 0,\n                        format: \"#\",\n                        value: rule.monthDays ? rule.monthDays[0] : that.options.start.getDate(),\n                        change: function() {\n                            var value = this.value();\n\n                            rule.monthDays = value ? [value] : value;\n                            that._trigger();\n                        }\n                    });\n                }\n            },\n\n            _initCount: function() {\n                var that = this,\n                    input = that._container.find(\".k-recur-count\"),\n                    rule = that._value;\n\n                that._count = input.kendoNumericTextBox({\n                    spinners: that.options.spinners,\n                    value: rule.count || 1,\n                    decimals: 0,\n                    format: \"#\",\n                    min: 1,\n                    change: function() {\n                        rule.count = this.value();\n                        that._trigger();\n                    }\n                }).data(\"kendoNumericTextBox\");\n            },\n\n            _initUntil: function() {\n                var that = this,\n                    input = that._container.find(\".k-recur-until\"),\n                    start = that.options.start,\n                    rule = that._value,\n                    until = rule.until,\n                    min = until && until < start ? until : start,\n                    startInput = that.wrapper.closest(\".k-scheduler-edit-form\").find(\"[name=start]:visible\"),\n                    validDateValidationMessage = kendo.format(kendo.ui.Validator.prototype.options.messages.date, that.options.messages.end.on),\n                    dateCompareValidationMessage = kendo.ui.Validator.prototype.options.messages.dateCompare,\n                    initialValue = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 23, 59, 59);\n\n                input.attr(\"data-validDate-msg\", validDateValidationMessage);\n                input.attr(\"data-untilDateCompare-msg\", dateCompareValidationMessage);\n\n                if (startInput.length === 0) {\n                    startInput = that.wrapper.closest(\".k-scheduler-edit-form\").find(\"[name=start]\");\n                }\n\n                if (startInput.length > 0 && startInput.val()) {\n                    min = kendo.parseDate(startInput.val());\n\n                    if (initialValue < min) {\n                        initialValue = min;\n                    }\n                }\n\n                that._until = input.kendoDatePicker({\n                    min: min,\n                    value: until || initialValue,\n                    change: function() {\n                        var date = this.value();\n                        if (date) {\n                            rule.until = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59);\n                        }\n                        that._trigger();\n                    }\n                }).data(\"kendoDatePicker\");\n\n                if (startInput) {\n                    startInput.on(\"change\", function() {\n                        var untilEl = that._until.element,\n                            readonly = Boolean(untilEl.attr(\"readonly\")),\n                            enable = !(Boolean(untilEl.is(\"[disabled]\") || untilEl.parents(\"fieldset\").is(':disabled')));\n\n                        that._until.setOptions({\n                            min: startInput.val(),\n                            readonly: readonly,\n                            enable: enable\n                        });\n                    });\n                }\n            },\n\n            _trigger: function() {\n                if (!this.options.mobile) {\n                    this.trigger(\"change\");\n                }\n            }\n        });\n\n        var RecurrenceEditor = BaseRecurrenceEditor.extend({\n            init: function(element, options) {\n                var that = this;\n\n                BaseRecurrenceEditor.fn.init.call(that, element, options);\n\n                that._initFrequency();\n\n                that._initContainer();\n\n                that.value(that.options.value);\n            },\n\n            options: {\n                name: \"RecurrenceEditor\"\n            },\n\n            events: [ \"change\" ],\n\n            destroy: function() {\n                var that = this;\n\n                that._frequency.destroy();\n\n                if (this._weekDayButtonGroup) {\n                    this._weekDayButtonGroup.destroy();\n                }\n\n                that._container.find(\"input[type=radio],input[type=checkbox]\").off(CLICK + that._namespace);\n\n                kendo.destroy(that._container);\n\n                BaseRecurrenceEditor.fn.destroy.call(that);\n            },\n\n            value: function(value) {\n                var that = this;\n                var timezone = that.options.timezone;\n                var freq, freqButton;\n\n                if (value === undefined$1) {\n                    if (!that._value.freq) {\n                        return \"\";\n                    }\n\n                    return serialize(that._value, timezone);\n                }\n\n                that._value = parseRule(value, timezone) || {};\n\n                freq = that._value.freq;\n\n                if (freq) {\n                    freqButton = that._frequency.element.find(\"[data-value='\" + freq + \"']\");\n                    that._frequency.select(freqButton);\n                } else {\n                    that._frequency.select(0);\n                }\n\n                that._initView(that._frequency.current().data(\"value\"));\n            },\n\n            _initContainer: function() {\n                var element = this.element,\n                    container = $('<div class=\"k-recur-view\" />'),\n                    editContainer = element.parent(\".k-edit-field\");\n\n                if (editContainer[0]) {\n                    container.insertAfter(editContainer);\n                } else {\n                    element.append(container);\n                }\n\n                this._container = container;\n            },\n\n            _initFrequency: function() {\n                var that = this,\n                    options = that.options,\n                    frequencies = options.frequencies,\n                    messages = options.messages.frequencies,\n                    buttonGroupElement = $('<div class=\"k-button-group-stretched k-flex-1\"/>').attr({ title: options.messages.recurrenceEditorTitle }),\n                    frequency;\n\n                frequencies = $.map(frequencies, function(frequency) {\n                    return {\n                        text: messages[frequency],\n                        attributes: { \"data-value\": frequency, \"aria-label\": options.messages.repeat + messages[frequency] }\n                    };\n                });\n\n                frequency = frequencies[0];\n                if (frequency && frequency.attributes && frequency.attributes[\"data-value\"] === \"never\") {\n                    frequency.attributes[\"data-value\"] = \"\";\n                }\n\n                that.element.append(buttonGroupElement);\n                that._frequency = new ButtonGroup(buttonGroupElement, {\n                    items: frequencies,\n                    select: function() {\n                        that._value = {};\n                        that._initView(that._frequency.current().data(\"value\"));\n                        that.trigger(\"change\");\n                    }\n                });\n            },\n\n            _initView: function(frequency) {\n                var that = this;\n                var rule = that._value;\n                var options = that.options;\n                var recurrenceViewHtml;\n\n                var data = {\n                     frequency: frequency || \"never\",\n                     firstWeekDay: options.firstWeekDay,\n                     messages: options.messages[frequency],\n                     end: options.messages.end\n                };\n\n                if (that._weekDayButtonGroup) {\n                    that._weekDayButtonGroup.destroy();\n                    that._container.find(\".k-recur-weekday-buttons\").empty();\n                    that._weekDayButtonGroup = null;\n                }\n\n                kendo.destroy(that._container);\n\n                recurrenceViewHtml = $(RECURRENCE_VIEW_TEMPLATE(data));\n                kendo.applyStylesFromKendoAttributes(recurrenceViewHtml, [\"width\"]);\n\n                that._container.html(recurrenceViewHtml);\n\n                if (!frequency) {\n                    that._value = {};\n                    return;\n                }\n\n                rule.freq = frequency;\n\n                if (frequency === \"weekly\" && !rule.weekDays) {\n                    rule.weekDays = [{\n                        day: options.start.getDay(),\n                        offset: 0\n                    }];\n                }\n\n                that._weekDayButtons(options.firstWeekDay);\n\n                that._initInterval();\n                that._initWeekDays();\n                that._initMonthDay();\n                that._initWeekDay();\n                that._initMonth();\n                that._initCount();\n                that._initUntil();\n\n                that._period();\n                that._end();\n            },\n\n            _initMonth: function() {\n                var that = this;\n                var rule = that._value;\n                var month = rule.months || [that.options.start.getMonth() + 1];\n                var monthInputs = that._container.find(\".k-recur-month\");\n                var options;\n\n                if (monthInputs[0]) {\n                    options = {\n                        autoWidth: true,\n                        change: function() {\n                            rule.months = [Number(this.value())];\n                            that.trigger(\"change\");\n                        },\n                        dataTextField: \"text\",\n                        dataValueField: \"value\",\n                        dataSource: $.map(kendo.culture().calendar.months.names, function(monthName, idx) {\n                            return {\n                                text: monthName,\n                                value: idx + 1\n                            };\n                        })\n                    };\n\n                    that._month1 = new DropDownList(monthInputs[0], options);\n                    that._month2 = new DropDownList(monthInputs[1], options);\n\n                    if (month) {\n                        month = month[0];\n                        that._month1.value(month);\n                        that._month2.value(month);\n                    }\n                }\n\n            },\n\n            _end: function() {\n                var that = this;\n                var rule = that._value;\n                var container = that._container;\n                var namespace = that._namespace;\n                var click = function(e) {\n                    that._toggleEnd(e.currentTarget.value);\n                    that.trigger(\"change\");\n                };\n                var endRule;\n\n                that._buttonNever = container.find(\".k-recur-end-never\").on(CLICK + namespace, click);\n                that._buttonCount = container.find(\".k-recur-end-count\").on(CLICK + namespace, click);\n                that._buttonUntil = container.find(\".k-recur-end-until\").on(CLICK + namespace, click);\n\n                if (rule.count) {\n                    endRule = \"count\";\n                } else if (rule.until) {\n                    endRule = \"until\";\n                }\n\n                that._toggleEnd(endRule);\n            },\n\n            _period: function() {\n                var that = this;\n                var rule = that._value;\n                var monthly = rule.freq === \"monthly\";\n\n                var toggleRule = monthly ? that._toggleMonthDay : that._toggleYear;\n\n                var selector = \".k-recur-\" + (monthly ? \"month\" : \"year\") + \"-radio\";\n                var radioButtons = that._container.find(selector);\n\n                if (!monthly && rule.freq !== \"yearly\") {\n                    return;\n                }\n\n                radioButtons.on(CLICK + that._namespace, function(e) {\n                    toggleRule.call(that, e.currentTarget.value);\n                    that.trigger(\"change\");\n                });\n\n                that._buttonMonthDay = radioButtons.eq(0);\n                that._buttonWeekDay = radioButtons.eq(1);\n\n                toggleRule.call(that, rule.weekDays ? \"weekday\" : \"monthday\");\n            },\n\n            _toggleEnd: function(endRule) {\n                var that = this;\n                var count, until;\n                var enableCount, enableUntil;\n\n                if (endRule === \"count\") {\n                    that._buttonCount.prop(\"checked\", true);\n\n                    enableCount = true;\n                    enableUntil = false;\n\n                    count = that._count.value();\n                    until = null;\n                } else if (endRule === \"until\") {\n                    that._buttonUntil.prop(\"checked\", true);\n\n                    enableCount = false;\n                    enableUntil = true;\n\n                    count = null;\n                    until = that._until.value();\n                } else {\n                    that._buttonNever.prop(\"checked\", true);\n\n                    enableCount = enableUntil = false;\n                    count = until = null;\n                }\n\n                if (that._count) {\n                    that._count.enable(enableCount);\n                }\n\n                if (that._until) {\n                    that._until.enable(enableUntil);\n                }\n\n                that._value.count = count;\n                that._value.until = until;\n            },\n\n            _toggleMonthDay: function(monthRule) {\n                var that = this;\n                var enableMonthDay = false;\n                var enableWeekDay = true;\n                var clear = false;\n                var monthDays;\n\n                if (monthRule === \"monthday\") {\n                    that._buttonMonthDay.prop(\"checked\", true);\n\n                    monthDays = [that._monthDay.value()];\n\n                    enableMonthDay = true;\n                    enableWeekDay = false;\n                    clear = true;\n                } else {\n                    that._buttonWeekDay.prop(\"checked\", true);\n                    monthDays = null;\n                }\n\n                that._weekDay.enable(enableWeekDay);\n                that._weekDayOffset.enable(enableWeekDay);\n                that._monthDay.enable(enableMonthDay);\n\n                that._value.monthDays = monthDays;\n\n                that._weekDayRule(clear);\n            },\n\n            _toggleYear: function(yearRule) {\n                var that = this;\n                var enableMonth1 = false;\n                var enableMonth2 = true;\n                var month;\n\n                if (yearRule === \"monthday\") {\n                    enableMonth1 = true;\n                    enableMonth2 = false;\n\n                    month = that._month1.value();\n                } else {\n                    month = that._month2.value();\n                }\n\n                that._month1.enable(enableMonth1);\n                that._month2.enable(enableMonth2);\n\n                that._value.months = [month];\n                that._toggleMonthDay(yearRule);\n            }\n        });\n\n        ui.plugin(RecurrenceEditor);\n\n\n        var RECURRENCE_HEADER_TEMPLATE = kendo.template(function (ref) {\n                var headerTitle = ref.headerTitle;\n\n                return '<div data-role=\"content\">' +\n                '<ul class=\"k-listgroup k-listgroup-flush\">' +\n                    '<li class=\"k-item k-listgroup-item\">' +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + headerTitle + \"</span>\" +\n                            '<div class=\"k-recur-pattern k-listgroup-form-field-wrapper\"></div>' +\n                        '</label>' +\n                    '</li>' +\n                    '<li class=\"k-item k-listgroup-item k-recur-view\"></li>' +\n                '</ul>' +\n            '</div>';\n        }\n        );\n\n        var RECURRENCE_REPEAT_PATTERN_TEMPLATE = kendo.template(function (ref) {\n                var frequency = ref.frequency;\n                var messages = ref.messages;\n\n                return (frequency !== \"never\" ?\n                '<label class=\"k-label k-listgroup-form-row\">' +\n                    \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.repeatEvery)) + \"</span>\" +\n                    '<div class=\"k-recur-editor-wrap k-listgroup-form-field-wrapper\">' +\n                        '<input class=\"k-recur-interval\" type=\"number\" pattern=\"\\\\d*\"/>' +\n                        (messages.interval.length ? (\"<span class=\\\"k-recur-editor-text\\\">\" + (encode(messages.interval)) + \"</span>\") : '') +\n                    '</div>' +\n                '</label>' : ''\n            ) +\n            (frequency === \"weekly\" ?\n                '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                    '<li class=\"k-item k-listgroup-item k-no-click\">' +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.repeatOn)) + \"</span>\" +\n                        '</label>' +\n                    '</li>' +\n                    \"<div class=\\\"k-button-group-stretched k-recur-weekday-buttons\\\" title=\\\"\" + (encode(messages.repeatOn)) + \"\\\">\" +\n                '</ul>' : '') +\n            (frequency === \"monthly\" ?\n                '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                    '<li class=\"k-item k-listgroup-item\">' +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.repeatBy)) + \"</span>\" +\n                            '<div class=\"k-repeat-rule k-listgroup-form-field-wrapper\"></div>' +\n                        '</label>' +\n                    '</li>' +\n                    \"<li class=\\\"k-monthday-view k-item k-listgroup-item\\\" \" + (kendo.attr(\"style-display\")) + \"=\\\"none\\\">\" +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.day)) + \"</span>\" +\n                            \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><input class=\\\"k-recur-monthday\\\" type=\\\"number\\\" aria-label=\\\"\" + (encode(messages.date)) + \"\\\" title=\\\"\" + (encode(messages.day)) + \"\\\" pattern=\\\"\\\\d*\\\"/></div>\" +\n                        '</label>' +\n                    '</li>' +\n                    \"<li class=\\\"k-weekday-view k-item k-listgroup-item\\\" \" + (kendo.attr(\"style-display\")) + \"=\\\"none\\\">\" +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.every)) + \"</span>\" +\n                            \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><select class=\\\"k-recur-weekday-offset\\\" title=\\\"\" + (encode(messages.every)) + \"\\\"></select></div>\" +\n                        '</label>' +\n                    '</li>' +\n                    \"<li class=\\\"k-weekday-view k-item k-listgroup-item\\\" \" + (kendo.attr(\"style-display\")) + \"=\\\"none\\\">\" +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.day)) + \"</span>\" +\n                            \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><select class=\\\"k-recur-weekday\\\" title=\\\"\" + (encode(messages.day)) + \"\\\"></select></div>\" +\n                        '</label>' +\n                    '</li>' +\n                '</ul>' : '') +\n            (frequency === \"yearly\" ?\n                '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                    '<li class=\"k-item k-listgroup-item\">' +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.repeatBy)) + \"</span>\" +\n                            '<div class=\"k-repeat-rule k-listgroup-form-field-wrapper\"></div>' +\n                        '</label>' +\n                    '</li>' +\n                    \"<li class=\\\"k-monthday-view k-item k-listgroup-item\\\" \" + (kendo.attr(\"style-display\")) + \"=\\\"none\\\">\" +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.day)) + \"</span>\" +\n                            \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><input class=\\\"k-recur-monthday\\\" type=\\\"number\\\" aria-label=\\\"\" + (encode(messages.date)) + \"\\\" title=\\\"\" + (encode(messages.day)) + \"\\\" pattern=\\\"\\\\d*\\\"/></div>\" +\n                        '</label>' +\n                    '</li>' +\n                    \"<li class=\\\"k-weekday-view k-item k-listgroup-item\\\" \" + (kendo.attr(\"style-display\")) + \"=\\\"none\\\">\" +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.every)) + \"</span>\" +\n                            \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><select class=\\\"k-recur-weekday-offset\\\" title=\\\"\" + (encode(messages.every)) + \"\\\"></select></div>\" +\n                        '</label>' +\n                    '</li>' +\n                    \"<li class=\\\"k-weekday-view k-item k-listgroup-item\\\" \" + (kendo.attr(\"style-display\")) + \"=\\\"none\\\">\" +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.day)) + \"</span>\" +\n                            \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><select class=\\\"k-recur-weekday\\\" title=\\\"\" + (encode(messages.day)) + \"\\\"></select></div>\" +\n                        '</label>' +\n                    '</li>' +\n                    '<li class=\"k-item k-item k-listgroup-item\">' +\n                        '<label class=\"k-label k-listgroup-form-row\">' +\n                            \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.month)) + \"</span>\" +\n                            \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><select class=\\\"k-recur-month\\\" title=\\\"\" + (encode(messages.month)) + \"\\\"></select></div>\" +\n                        '</label>' +\n                    '</li>' +\n               '</ul>' : '');\n        }\n        );\n\n        var RECURRENCE_END_PATTERN_TEMPLATE = kendo.template(function (ref) {\n            var endPattern = ref.endPattern;\n            var messages = ref.messages;\n\n            if (endPattern === \"count\") {\n                return '<label class=\"k-label k-listgroup-form-row\">' +\n                    \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.after)) + \"</span>\" +\n                    \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><input class=\\\"k-recur-count\\\" aria-label=\\\"\" + (encode(messages.occurrence)) + \"\\\" type=\\\"number\\\" pattern=\\\"\\\\d*\\\" /></div>\" +\n                '</label>';\n            } else if (endPattern === \"until\") {\n                return '<label class=\"k-label k-listgroup-form-row\">' +\n                    \"<span class=\\\"k-item-title k-listgroup-form-field-label\\\">\" + (encode(messages.on)) + \"</span>\" +\n                    \"<div class=\\\"k-listgroup-form-field-wrapper\\\"><input type=\\\"date\\\" class=\\\"k-recur-until\\\" aria-label=\\\"\" + (encode(messages.on)) + \"\\\" name=\\\"recur-until\\\"/></div>\" +\n                '</label>';\n            }\n        });\n\n        var RECURRENCE_GROUP_BUTTON_TEMPLATE = kendo.template(function (ref) {\n                var dataSource = ref.dataSource;\n                var value = ref.value;\n\n                return '<select class=\"k-scheduler-select\">' +\n                dataSource.map(function (item) { return (\"<option value=\\\"\" + (item.value) + \"\\\" \" + (value === item.value ? 'selected' : '') + \">\" + (encode(item.text)) + \"</option>\"); }).join('') +\n            '</select>';\n        }\n        );\n\n        var MobileRecurrenceEditor = BaseRecurrenceEditor.extend({\n            init: function(element, options) {\n                var that = this;\n\n                BaseRecurrenceEditor.fn.init.call(that, element, options);\n\n                options = that.options;\n\n                that._optionTemplate = kendo.template(function (ref) {\n                    var value = ref.value;\n                    var text = ref.text;\n\n                    return (\"<option value=\\\"\" + (encode(value)) + \"\\\">\" + (encode(text)) + \"</option>\");\n                });\n\n                that.value(options.value);\n\n                that._pane = options.pane || that.wrapper.closest(\"[data-role=pane]\").data(\"kendoPane\");\n\n                that._initRepeatButton();\n\n                that._initParentRepeatEnd();\n\n                that._defaultValue = that._value;\n            },\n\n            options: {\n                name: \"MobileRecurrenceEditor\",\n                animations: {\n                    left: \"slide\",\n                    right: \"slide:right\"\n                },\n                mobile: true,\n                messages: {\n                    cancel: \"Cancel\",\n                    update: \"Save\",\n                    endTitle: \"Repeat ends\",\n                    repeatTitle: \"Repeat pattern\",\n                    headerTitle: \"Repeat event\",\n                    end: {\n                        patterns: {\n                            never: \"Never\",\n                            after: \"After...\",\n                            on: \"On...\"\n                        },\n                        never: \"Never\",\n                        after: \"End repeat after\",\n                        on: \"End repeat on\"\n                    },\n                    daily: {\n                        interval: \"\"\n                    },\n                    hourly: {\n                        interval: \"\"\n                    },\n                    weekly: {\n                        interval: \"\"\n                    },\n                    monthly: {\n                        interval: \"\",\n                        repeatBy: \"Repeat by: \",\n                        dayOfMonth: \"Day of the month\",\n                        dayOfWeek: \"Day of the week\",\n                        repeatEvery: \"Repeat every\",\n                        every: \"Every\",\n                        day: \"Day \"\n                    },\n                    yearly: {\n                        interval: \"\",\n                        repeatBy: \"Repeat by: \",\n                        dayOfMonth: \"Day of the month\",\n                        dayOfWeek: \"Day of the week\",\n                        repeatEvery: \"Repeat every: \",\n                        every: \"Every\",\n                        month: \"Month\",\n                        day: \"Day\"\n                    }\n                }\n            },\n\n            events: [ \"change\" ],\n\n            value: function(value) {\n                var that = this;\n                var timezone = that.options.timezone;\n\n                if (value === undefined$1) {\n                    if (!that._value.freq) {\n                        return \"\";\n                    }\n\n                    return serialize(that._value, timezone);\n                }\n\n                that._value = parseRule(value, timezone) || {};\n            },\n\n            destroy: function() {\n                this._destroyView();\n\n                kendo.destroy(this._endFields);\n\n                this.element.off(CLICK + this._namespace);\n\n                BaseRecurrenceEditor.fn.destroy.call(this);\n            },\n\n            _initInterval: function() {\n                var that = this;\n                var rule = that._value;\n\n                that._container.find(\".k-recur-interval\")\n                    .val(that._value.interval || 1)\n                    .on(CHANGE + that._namespace, function(e) {\n                        rule.interval = e.target.value;\n                        that._trigger();\n                    });\n            },\n\n            _initRepeatButton: function() {\n                var that = this;\n                var freq = that.options.messages.frequencies[this._value.freq || \"never\"];\n\n                that._chevronButton = $(kendo.ui.icon(\"chevron-right\"));\n                that._repeatValue = $('<span class=\"\">' + freq + '</span>');\n\n                that.element.append(that._repeatValue).append(that._chevronButton);\n\n                that.element.parents(\"li.k-item\").on(CLICK + that._namespace, function(e) {\n                    e.preventDefault();\n                    that._createView(\"repeat\");\n                    that._pane.navigate(that._view, that.options.animations.left);\n                });\n            },\n\n            _endLiItem: function() {\n                var that = this;\n                return '<li class=\"k-item k-listgroup-item\"><label class=\"k-label k-listgroup-form-row\"><span class=\"k-item-title k-listgroup-form-field-label\">' + that.options.messages.end.mobileLabel + '</span></label></li>';\n            },\n\n            _initParentRepeatEnd: function() {\n                var that = this;\n\n                var endLabelField = $(that._endLiItem()).insertAfter(that.element.parents(\"li.k-item\"));\n\n                var endEditField = $('<div class=\"k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper\"><span class=\"k-scheduler-recur-end\"></span></div>')\n                    .appendTo(endLabelField.find(\".k-label\"));\n\n                endLabelField.on(CLICK + that._namespace, function(e) {\n                    e.preventDefault();\n                    that._navigateToView(\"repeat\");\n                });\n\n                that._endParentLabelField = endLabelField.toggle(!!that._value.freq);\n                that._endParentEndButton = endEditField.find(\".k-scheduler-recur-end\").text(that._endText());\n            },\n\n            _initRepeatEnd: function() {\n                var that = this;\n\n                var endLabelField = $(that._endLiItem()).insertAfter(that._container);\n\n                var endEditField = $((\"<div class=\\\"k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper\\\"><span class=\\\"k-scheduler-recur-end\\\"></span>\" + (kendo.ui.icon(\"chevron-right\")) + \"</div>\"))\n                    .appendTo(endLabelField.find(\".k-label\"));\n\n                endLabelField.on(CLICK + that._namespace, function(e) {\n                    e.preventDefault();\n                    that._navigateToView(\"end\");\n                });\n\n                that._endLabelField = endLabelField.toggleClass(\"k-disabled\", !that._value.freq);\n                that._endButton = endEditField.find(\".k-scheduler-recur-end\").text(that._endText());\n            },\n\n            _navigateToView: function(viewName) {\n                var that = this;\n                that._createView(viewName);\n                that._pane.navigate(that._view, that.options.animations.left);\n            },\n\n            _endText: function() {\n                var rule = this._value;\n                var messages = this.options.messages.end;\n\n                var text = messages.never;\n\n                if (rule.count) {\n                    text = kendo.format(\"{0} {1}\", messages.after, rule.count);\n                } else if (rule.until) {\n                    text = kendo.format(\"{0} {1:d}\", messages.on, rule.until);\n                }\n\n                return text;\n            },\n\n            _initFrequency: function() {\n                var that = this;\n                var frequencyMessages = that.options.messages.frequencies;\n\n                var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                    dataSource: $.map(this.options.frequencies, function(frequency) {\n                        return {\n                            text: frequencyMessages[frequency],\n                            value: frequency !== \"never\" ? frequency : \"\"\n                        };\n                    }),\n                    value: that._value.freq || \"\",\n                    ns: kendo.ns\n                });\n\n                that._view.element\n                    .find(\".k-recur-pattern\")\n                    .append(html);\n\n                that._view.element.find(\".k-scheduler-select\")\n                    .on(CHANGE + that._namespace, function(e) {\n                        var value = e.target.value;\n                        that._value = { freq: value };\n                        that._defaultValue = $.extend({}, that._value);\n                        that._initRepeatView();\n                        that._endButton.text(that._endText());\n                        that._endParentEndButton.text(that._endText());\n                    });\n            },\n\n            _initEndNavigation: function() {\n                var that = this;\n                var endMessages = that.options.messages.end.patterns;\n                var rule = that._value;\n                var value = \"\";\n\n                if (rule.count) {\n                    value = \"count\";\n                } else if (rule.until) {\n                    value = \"until\";\n                }\n\n                var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                    dataSource: [\n                        { text: endMessages.never, value: \"\" },\n                        { text: endMessages.after, value: \"count\" },\n                        { text: endMessages.on, value: \"until\" }\n                    ],\n                    value: value,\n                    ns: kendo.ns\n                });\n\n                that._view.element\n                    .find(\".k-recur-pattern\")\n                    .append(html);\n\n                that._view.element.find(\".k-scheduler-select\")\n                    .on(CHANGE + that._namespace, function(e) {\n                        var value = e.target.value;\n                        var count = null;\n                        var until = null;\n\n                        that._initEndView(value);\n\n                        if (that._count.length) {\n                            count = that._count.val();\n                            until = null;\n                        } else if (that._until.length) {\n                            count = null;\n                            until = that._until.val ? kendo.parseDate(that._until.val(), \"yyyy-MM-dd\") : that._until.value();\n                        }\n\n                        rule.count = count;\n                        rule.until = until;\n                    });\n            },\n\n            _createView: function(viewType) {\n                var that = this;\n                var options = that.options;\n                var messages = options.messages;\n                var headerTitle = messages[viewType === \"repeat\" ? \"repeatTitle\" : \"endTitle\"];\n\n                var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\" id=\"recurrence\">' +\n                           '<div data-role=\"header\" class=\"k-header\">' +\n                               '<a href=\"#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + messages.cancel + '\"' +\n                               \"aria-label=\\\"\" + (messages.cancel) + \"\\\">\" + (kendo.ui.icon(\"chevron-left\")) + \"</a>\" +\n                                   messages.headerTitle +\n                               '<a href=\"#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + messages.update + '\" ' +\n                               \"aria-label=\\\"\" + (messages.update) + \"\\\">\" + (kendo.ui.icon(\"check\")) + \"</a>\" +\n                           '</div>';\n\n                var returnViewId = that._pane.view().id;\n\n                that._view = that._pane.append(html + RECURRENCE_HEADER_TEMPLATE({ headerTitle: headerTitle }));\n\n                that._view.element.on(CLICK + that._namespace, \"a.k-scheduler-cancel, a.k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    if ($(this).hasClass(\"k-scheduler-update\")) {\n                        that.trigger(\"change\");\n                        that._defaultValue = $.extend({}, that._value);\n                    } else {\n                        that._value = that._defaultValue;\n                    }\n\n                    var frequency = that._value.freq;\n\n                    that._endParentEndButton.text(that._endText());\n                    that._endParentLabelField.toggle(!!frequency && frequency !== \"never\");\n                    that._endButton.text(that._endText());\n\n                    that._repeatValue.text(messages.frequencies[frequency || \"never\"]);\n\n                    that._pane.one(\"viewShow\", function() {\n                        that._destroyView();\n                    });\n\n                    that._pane.navigate(returnViewId, that.options.animations.right);\n                });\n\n                that._container = that._view.element.find(\".k-recur-view\");\n\n                if (viewType === \"repeat\") {\n                    that._initFrequency();\n                    that._initRepeatView();\n                    that._initRepeatEnd();\n                } else {\n                    that._initEndNavigation();\n                    that._initEndView();\n                }\n            },\n\n            _destroyView: function() {\n                if (this._view) {\n\n                    this._view.destroy();\n                    this._view.element.remove();\n                    this._container = null;\n                }\n\n\n                this._view = null;\n            },\n\n            _initRepeatView: function() {\n                var that = this;\n                var frequency = that._value.freq || \"never\";\n\n                var data = {\n                     frequency: frequency,\n                     firstWeekDay: that.options.firstWeekDay,\n                     messages: that.options.messages[frequency]\n                };\n\n                var html = RECURRENCE_REPEAT_PATTERN_TEMPLATE(data);\n                var $html = $(html);\n                kendo.applyStylesFromKendoAttributes($html, [\"display\"]);\n\n                var container = that._container = that._container || this._pane.view().content.find(\"li.k-recur-view\");\n                var rule = that._value;\n\n                if (that._endLabelField) {\n                    that._endLabelField.toggleClass(\"k-disabled\", frequency === \"never\");\n                }\n\n                kendo.destroy(container);\n                container.html($html);\n\n                if (!html) {\n                    that._value = {};\n                    container.hide();\n                    return;\n                } else {\n                    container.show();\n                }\n\n                if (frequency === \"weekly\" && !rule.weekDays) {\n                     rule.weekDays = [{\n                        day: that.options.start.getDay(),\n                        offset: 0\n                     }];\n                }\n\n                that._weekDayButtons(that.options.firstWeekDay);\n\n                that._initInterval();\n                that._initMonthDay();\n                that._initWeekDays();\n                that._initWeekDay();\n                that._initMonth();\n\n                that._period();\n            },\n\n            _initMonthDay: function() {\n                var that = this;\n                var rule = that._value;\n                var monthDayInput = that._monthDay = that._container.find(\".k-recur-monthday\");\n\n                monthDayInput.attr({\n                    min: 1,\n                    max: 31\n                })\n                .val(rule.monthDays ? rule.monthDays[0] : that.options.start.getDate())\n                .on(CHANGE + that._namespace, function(e) {\n                    rule.count = e.target.value;\n                    that._trigger();\n                });\n            },\n\n            _initCount: function() {\n                var that = this,\n                    input = that._count = that._container.find(\".k-recur-count\"),\n                    rule = that._value;\n\n                input.val(rule.count || 1)\n                    .on(CHANGE + that._namespace, function(ev) {\n                        rule.count = ev.target.value;\n                        that._trigger();\n                    });\n            },\n\n            _initEndView: function(endPattern) {\n                var that = this;\n                var rule = that._value;\n\n                if (endPattern === undefined$1) {\n                    if (rule.count) {\n                        endPattern = \"count\";\n                    } else if (rule.until) {\n                        endPattern = \"until\";\n                    }\n                }\n\n                var data = {\n                     endPattern: endPattern,\n                     messages: that.options.messages.end\n                };\n\n                kendo.destroy(that._container);\n                that._container.html(RECURRENCE_END_PATTERN_TEMPLATE(data));\n\n                that._initCount();\n                that._initUntil();\n            },\n\n            _initWeekDay: function() {\n                var that = this, data;\n\n                var weekdayMessage = that.options.messages.weekdays;\n                var offsetMessage = that.options.messages.offsetPositions;\n\n                var weekDaySelect = that._container.find(\".k-recur-weekday\");\n\n                var change = function() {\n                    that._weekDayRule();\n                    that.trigger(\"change\");\n                };\n\n                if (weekDaySelect[0]) {\n                    that._weekDayOffset = that._container.find(\".k-recur-weekday-offset\")\n                                              .html(that._options([\n                                                { text: offsetMessage.first, value: \"1\" },\n                                                { text: offsetMessage.second, value: \"2\" },\n                                                { text: offsetMessage.third, value: \"3\" },\n                                                { text: offsetMessage.fourth, value: \"4\" },\n                                                { text: offsetMessage.last, value: \"-1\" }\n                                              ]))\n                                              .on(\"change\", change);\n\n                    data = [\n                        { text: weekdayMessage.day, value: \"day\" },\n                        { text: weekdayMessage.weekday, value: \"weekday\" },\n                        { text: weekdayMessage.weekend, value: \"weekend\" }\n                    ];\n\n                    data = data.concat($.map(kendo.culture().calendar.days.names, function(dayName, idx) {\n                        return {\n                            text: dayName,\n                            value: idx\n                        };\n                    }));\n\n                    that._weekDay = weekDaySelect.html(that._options(data))\n                                                 .on(\"change\", change)\n                                                 .val(that.options.start.getDay());\n\n                    that._weekDayView();\n                }\n            },\n\n            _initMonth: function() {\n                var that = this;\n                var rule = that._value;\n                var start = that.options.start;\n                var month = rule.months || [start.getMonth() + 1];\n                var monthSelect = that._container.find(\".k-recur-month\");\n                var monthNames = kendo.culture().calendar.months.names;\n\n                if (monthSelect[0]) {\n                    var data = $.map(monthNames, function(monthName, idx) {\n                        return {\n                            text: monthName,\n                            value: idx + 1\n                        };\n                    });\n\n                    monthSelect.html(that._options(data))\n                               .on(\"change\", function() {\n                                   rule.months = [Number(this.value)];\n                               });\n\n                    that._monthSelect = monthSelect;\n\n                    if (month) {\n                        monthSelect.val(month[0]);\n                    }\n                }\n\n            },\n\n            _period: function() {\n                var that = this;\n                var rule = that._value;\n                var container = that._container;\n                var messages = that.options.messages[rule.freq];\n                var repeatRuleGroupButton = container.find(\".k-repeat-rule\");\n                var weekDayView = container.find(\".k-weekday-view\");\n                var monthDayView = container.find(\".k-monthday-view\");\n\n                if (repeatRuleGroupButton[0]) {\n                    var currentValue = rule.weekDays ? \"weekday\" : \"monthday\";\n\n                    var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                        value: currentValue,\n                        dataSource: [\n                            { text: messages.dayOfMonth, value: \"monthday\" },\n                            { text: messages.dayOfWeek, value: \"weekday\" }\n                        ],\n                        ns: kendo.ns\n                    });\n\n                    var init = function(val) {\n                        var weekDayName = that._weekDay.val();\n                        var weekDayOffset = that._weekDayOffset.val();\n                        var monthDay = that._monthDay.val();\n                        var month = that._monthSelect ? that._monthSelect.val() : null;\n\n                        if (val === \"monthday\") {\n                            rule.weekDays = null;\n                            rule.monthDays = monthDay ? [monthDay] : monthDay;\n                            rule.months = month ? [Number(month)] : month;\n\n                            weekDayView.hide();\n                            monthDayView.show();\n                        } else {\n                            rule.monthDays = null;\n                            rule.months = month ? [Number(month)] : month;\n\n                            rule.weekDays = [{\n                                offset: Number(weekDayOffset),\n                                day: Number(weekDayName)\n                            }];\n\n                            weekDayView.show();\n                            monthDayView.hide();\n                        }\n                    };\n\n                    repeatRuleGroupButton\n                        .append(html);\n\n                    repeatRuleGroupButton.find(\".k-scheduler-select\")\n                        .on(CHANGE + that._namespace, function(e) {\n                            init(e.target.value);\n                        });\n\n                    init(currentValue);\n                }\n            },\n\n            _initUntil: function() {\n                var that = this;\n                var input = that._container.find(\".k-recur-until\");\n                var start = that.options.start;\n                var rule = that._value;\n                var until = rule.until;\n                var min = until && until < start ? until : start;\n                var validDateValidationMessage = kendo.format(kendo.ui.Validator.prototype.options.messages.date, that.options.messages.end.on);\n                var dateCompareValidationMessage = kendo.ui.Validator.prototype.options.messages.dateCompare;\n\n                input.attr(\"data-validDate-msg\", validDateValidationMessage);\n                input.attr(\"data-untilDateCompare-msg\", dateCompareValidationMessage);\n\n                if (kendo.support.input.date) {\n                    that._until = input.attr(\"min\", kendo.toString(min, \"yyyy-MM-dd\"))\n                                       .val(kendo.toString(until || start, \"yyyy-MM-dd\"))\n                                       .on(\"change\", function() {\n                                            var date = kendo.parseDate(this.value, \"yyyy-MM-dd\");\n                                            if (date) {\n                                                rule.until = date;\n                                            }\n                                            that._trigger();\n                                       });\n                } else {\n                    that._until = input.kendoDatePicker({\n                        min: min,\n                        value: until || start,\n                        change: function() {\n                            var date = this.value();\n                            if (date) {\n                                rule.until = date;\n                            }\n                            that._trigger();\n                        }\n                    }).data(\"kendoDatePicker\");\n                }\n            },\n\n            _options: function(data, optionLabel) {\n                var idx = 0;\n                var html = \"\";\n                var length = data.length;\n                var template = this._optionTemplate;\n\n                if (optionLabel) {\n                    html += template({ value: \"\", text: optionLabel });\n                }\n\n                for (; idx < length; idx++) {\n                    html += template(data[idx]);\n                }\n\n                return html;\n            }\n        });\n\n        ui.plugin(MobileRecurrenceEditor);\n\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}