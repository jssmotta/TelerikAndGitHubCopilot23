{"version":3,"file":"kendo.columnmenu.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendocolumnmenu","js","this","$","undefined$1","kendo","window","encode","htmlEncode","ui","extend","grep","map","inArray","Comparer","data","ACTIVE","ASC","DESC","CHANGE","INIT","OPEN","SELECT","STICK","UNSTICK","POPUP","TABSTRIP","MENU","EXPANSIONPANEL","NS","Widget","trim","text","replace","columnsGroupFilterHandler","column","columns","indexOf","title","field","leafColumns","result","idx","length","concat","push","ColumnMenu","init","element","options","columnHeader","that","componentType","fn","call","owner","dataSource","attr","closest","appendTo","find","link","_createLink","wrapper","_applyCssClasses","_refreshHandler","refresh","bind","_init","pane","_isMobile","_createMobileMenu","_createMenu","_sort","_columns","_filter","_lockColumns","_reorderColumns","_stickyColumns","_sizeColumns","_groupColumn","trigger","container","events","name","messages","sortAscending","sortDescending","filter","columnVisibility","clear","cancel","done","settings","lock","unlock","stick","unstick","setColumnPosition","apply","reset","buttonTitle","movePrev","moveNext","groupColumn","ungroupColumn","autoSizeColumn","autoSizeAllColumns","sortable","filterable","autoSize","animations","left","encodeTitles","addClass","flattenMenuCols","menuTemplate","menuElement","_ownerColumns","_hasGroups","_groupColumns","_flattenMenuCols","_syncMenuCols","_isModernComponentType","template","modernTemplate","_isTabbedComponentType","tabbedTemplate","uid","guid","ns","showColumns","hasLockableColumns","hasStickableColumns","omitWrapAttribute","reorderable","groupable","applyStylesFromKendoAttributes","empty","append","popup","anchor","copyAnchorStyles","open","_open","activate","_activate","deactivate","_deactivate","close","e","menu","_closing","sender","closeCallback","_createExpanders","children","orientation","closeOnClick","_updateMenuItems","tabStrip","applyMinHeight","animation","effects","activateTab","tabGroup","appendTarget","format","icon","on","_click","expanderOptions","expanded","headerClass","useBareTemplate","menuCols","ownerCols","ownerCol","menuColsFields","col","i","cols","groupHeader","nest","currGroup","filterHandler","group","groupColumns","groups","html","mobileTemplate","hasGroups","view","state","MobileMenu","columnMenu","stopPropagation","viewElement","preventDefault","_applyChanges","_cancelChanges","_updateLockedColumns","_updateStickyColumns","_updateReorderColumns","_updateGroupColumns","initialSort","destroy","filterMenu","unbind","_updateColumnsMenuHandler","_updateColumnsLockedStateHandler","off","purge","is","navigate","toggle","_setMenuItemsVisibility","sort","_updateDataIndexes","_reorderMenuItems","_eachRenderedMenuItem","index","renderedListElement","matchesMedia","hide","show","renderedList","insertAfter","eq","prepend","insertElementAt","first","mappedColumns","x","each","callback","duplicateColumnIndex","fieldValue","currentColumn","columnElements","attrName","attrValue","_getRenderedList","renderedListElements","_getRenderedListElements","oldOccurances","checkBoxes","signature","columCheckbox","indexAttr","fieldAttr","columnDict","j","parseInt","oldColumnOccurrences","columnOccurrence","JSON","stringify","columnOccurrences","add","instance","menuitem","not","target","keyCode","keys","ENTER","click","ESC","widgetInstance","hasClass","visible","getKendoPopup","omitSort","menuColumns","originalField","hidden","locked","_originalObject","headerAttributes","id","create","dir","_sortHandler","item","_getSortItemsContainer","removeClass","_sortDataSource","parents","parent","compare","allowUnsort","mode","splice","_updateColumnsMenu","_updateColumnsLockedState","_applyColumnVisibility","input","colIdx","uidAttr","showColumn","hideColumn","checkbox","checkboxes","columnsInMenu","_autoSizeHandler","autoFitColumn","autoFitColumns","omitCheckState","current","checked","lockedAttr","columnIndexMap","columnsCount","visibleFields","prop","visibleDataFields","lockedCount","nonLockedCount","columnsNotInMenu","hiddenColumnsNotInMenu","switchWidget","enable","check","arr","key","len","toHash","widget","multi","checkSource","appendToElement","values","change","cycleForm","_lockableHandler","lockColumn","unlockColumn","_reorderHandler","_moveColumn","_groupHandler","_handleSpaceKey","_stickableHandler","stickColumn","unstickColumn","notLockable","lockable","lockItem","removeAttr","unlockItem","sticky","stickable","stickItem","unstickItem","elementIndex","numberOfSiblings","prevItem","nextItem","groupEl","ungroupEl","_canDrag","descriptor","_filterExist","filters","found","SORTABLE_PARTIAL_MODERN","ref","COLUMNS_PARTIAL_MODERN","join","renderButton","themeColor","GROUPABLE_PARTIAL_MODERN","LOCK_STICK_COLUMNS_PARTIAL_MODERN","LOCKABLE_COLUMNS_PARTIAL_MODERN","STICKABLE_COLUMNS_PARTIAL_MODERN","REORDERABLE_COLUMNS_PARTIAL_MODERN","tabbedTemplateGeneralSettings","SIZING_PARTIAL_MODERN","COLUMNS_PARTIAL_CLASSIC","LOCK_STICK_COLUMNS_PARTIAL_CLASSIC","LOCKABLE_COLUMNS_PARTIAL_CLASSIC","STICKABLE_COLUMNS_PARTIAL_CLASSIC","REORDERABLE_COLUMNS_PARTIAL_CLASSIC","SORTABLE_PARTIAL_CLASSIC","FILTERABLE_PARTIAL_CLASSIC","hasLockStickMove","GROUPABLE_PARTIAL_CLASSIC","COLUMNS_PARTIAL_MOBILE","SORTABLE_PARTIAL_MOBILE","LOCKABLE_COLUMNS_PARTIAL_MOBILE","STICKABLE_COLUMNS_PARTIAL_MOBILE","REORDERABLE_COLUMNS_PARTIAL_MOBILE","FILTERABLE_PARTIAL_MOBILE","GROPABLE_PARTIAL_MOBILE","_createCheckBoxes","currentTarget","_updateSelectedItems","el","otherItem","otherItemId","force","selectedItems","hasOwnProperty","kendoSwitch","unchecked","_destroyCheckBoxes","elements","plugin","jQuery"],"sources":["kendo.columnmenu.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.popup.js'), require('kendo.tabstrip.js'), require('kendo.filtermenu.js'), require('kendo.menu.js'), require('kendo.expansionpanel.js'), require('kendo.html.button.js'), require('kendo.icons.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.popup', 'kendo.tabstrip', 'kendo.filtermenu', 'kendo.menu', 'kendo.expansionpanel', 'kendo.html.button', 'kendo.icons'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendocolumnmenu = global.kendocolumnmenu || {}, global.kendocolumnmenu.js = factory()));\n})(this, (function () {\n    var __meta__ = {\n        id: \"columnmenu\",\n        name: \"Column Menu\",\n        category: \"framework\",\n        depends: [ \"popup\", \"tabstrip\", \"filtermenu\", \"menu\", 'expansionpanel', 'html.button', \"icons\" ],\n        advanced: true\n    };\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            encode = kendo.htmlEncode,\n            ui = kendo.ui,\n            extend = $.extend,\n            grep = $.grep,\n            encode = kendo.htmlEncode,\n            map = $.map,\n            inArray = $.inArray,\n            Comparer = kendo.data.Comparer,\n            ACTIVE = \"k-selected\",\n            ASC = \"asc\",\n            DESC = \"desc\",\n            CHANGE = \"change\",\n            INIT = \"init\",\n            OPEN = \"open\",\n            SELECT = \"select\",\n            STICK = \"stick\",\n            UNSTICK = \"unstick\",\n            POPUP = \"kendoPopup\",\n            FILTERMENU = \"kendoFilterMenu\",\n            TABSTRIP = \"kendoTabStrip\",\n            MENU = \"kendoMenu\",\n            EXPANSIONPANEL = \"kendoExpansionPanel\",\n            NS = \".kendoColumnMenu\",\n            COLUMN_HEADER_SELECTOR = \".k-table-th\",\n            Widget = ui.Widget;\n\n        function trim(text) {\n            return kendo.trim(text).replace(/&nbsp;/gi, \"\");\n        }\n\n        function toHash(arr, key) {\n            var result = {};\n            var idx, len, current;\n            for (idx = 0, len = arr.length; idx < len; idx ++) {\n                current = arr[idx];\n                result[current[key]] = current;\n            }\n            return result;\n        }\n\n        function columnsGroupFilterHandler(column) {\n            return this.columns.indexOf(column.title) >= 0 || this.columns.indexOf(column.field) >= 0;\n        }\n\n        function leafColumns(columns) {\n            var result = [];\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n\n            return result;\n        }\n\n        function attrEquals(attrName, attrValue) {\n            return \"[\" + kendo.attr(attrName) + \"='\" + (attrValue || \"\").replace(/'/g, \"\\\"\") + \"']\";\n        }\n\n        function insertElementAt(index, element, container) {\n            if (index > 0) {\n                element.insertAfter(container.children().eq(index - 1));\n            } else {\n                container.prepend(element);\n            }\n        }\n\n        function columnOccurrences(columns) {\n            var columnDict = {};\n            var signature;\n\n            for (var i = 0; i < columns.length; i++) {\n                signature = JSON.stringify(columns[i]);\n\n                if (columnDict[signature]) {\n                    columnDict[signature].push(i);\n                } else {\n                    columnDict[signature] = [i];\n                }\n            }\n\n            return columnDict;\n        }\n\n        function oldColumnOccurrences(renderedListElements, checkBoxes) {\n            var indexAttr = kendo.attr(\"index\");\n            var fieldAttr = kendo.attr(\"field\");\n            var columnDict = {};\n            var signature;\n            var columCheckbox;\n            var index;\n            var field;\n            var title;\n\n            for (var j = 0; j < renderedListElements.length; j++) {\n                columCheckbox = checkBoxes.eq(j);\n                index = parseInt(columCheckbox.attr(indexAttr), 10);\n                field = columCheckbox.attr(fieldAttr);\n                title = columCheckbox.attr(\"title\");\n                signature = field ? field : title;\n\n                if (columnDict[signature]) {\n                    columnDict[signature].push(index);\n                } else {\n                    columnDict[signature] = [index];\n                }\n            }\n\n            return columnDict;\n        }\n\n        var ColumnMenu = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    columnHeader;\n\n                options = options || {};\n                options.componentType = options.componentType || \"classic\";\n                Widget.fn.init.call(that, element, options);\n\n                element = that.element;\n                options = that.options;\n                that.owner = options.owner;\n                that.dataSource = options.dataSource;\n\n                that.field = element.attr(kendo.attr(\"field\"));\n                that.title = element.attr(kendo.attr(\"title\"));\n\n                columnHeader = $(element.closest(COLUMN_HEADER_SELECTOR));\n                if (columnHeader.length) {\n                    that.appendTo = columnHeader.find(options.appendTo);\n                } else {\n                    that.appendTo = $(options.appendTo);\n                }\n\n                that.link = that._createLink();\n\n                that.wrapper = $('<div />');\n\n                that._applyCssClasses();\n\n                that._refreshHandler = that.refresh.bind(that);\n\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n            },\n\n            _init: function() {\n                var that = this;\n\n                that.pane = that.options.pane;\n                if (that.pane) {\n                    that._isMobile = true;\n                }\n\n                if (that._isMobile) {\n                    that._createMobileMenu();\n                } else {\n                    that._createMenu();\n                }\n\n                that._sort();\n\n                that._columns();\n\n                that._filter();\n\n                that._lockColumns();\n\n                that._reorderColumns();\n\n                that._stickyColumns();\n\n                that._sizeColumns();\n\n                that._groupColumn();\n\n                that.trigger(INIT, { field: that.field, container: that.wrapper });\n            },\n\n            events: [ INIT, OPEN, \"sort\", \"filtering\", STICK, UNSTICK ],\n\n            options: {\n                name: \"ColumnMenu\",\n                messages: {\n                    sortAscending: \"Sort Ascending\",\n                    sortDescending: \"Sort Descending\",\n                    filter: \"Filter\",\n                    column: \"Column\",\n                    columns: \"Columns\",\n                    columnVisibility: \"Column Visibility\",\n                    clear: \"Clear\",\n                    cancel: \"Cancel\",\n                    done: \"Done\",\n                    settings: \"Edit Column Settings\",\n                    lock: \"Lock Column\",\n                    unlock: \"Unlock Column\",\n                    stick: \"Stick Column\",\n                    unstick: \"Unstick Column\",\n                    setColumnPosition: \"Set Column Position\",\n                    apply: \"Apply\",\n                    reset: \"Reset\",\n                    buttonTitle: \"{0} edit column settings\",\n                    movePrev: \"Move previous\",\n                    moveNext: \"Move next\",\n                    groupColumn: \"Group column\",\n                    ungroupColumn: \"Ungroup column\",\n                    autoSizeColumn: \"Autosize This Column\",\n                    autoSizeAllColumns: \"Autosize All Columns\"\n                },\n                filter: \"\",\n                columns: true,\n                sortable: true,\n                filterable: true,\n                autoSize: false,\n                animations: {\n                    left: \"slide\"\n                },\n                encodeTitles: false,\n                componentType: \"classic\",\n                appendTo: null\n            },\n\n            _applyCssClasses: function() {\n                var that = this,\n                    componentType = that.options.componentType,\n                    wrapper = that.wrapper;\n\n                if (componentType === \"tabbed\") {\n                    wrapper.addClass(\"k-column-menu-tabbed\");\n                }\n\n                wrapper.addClass(\"k-column-menu\");\n            },\n\n            _createMenu: function() {\n                var that = this,\n                    options = that.options,\n                    columns = that._ownerColumns(),\n                    flattenMenuCols,\n                    menuTemplate,\n                    menuElement;\n\n                if (that._hasGroups()) {\n                    columns = that._groupColumns(columns);\n                    flattenMenuCols = that._flattenMenuCols(columns);\n                    if (flattenMenuCols.length !== that.owner.columns.length) {\n                        that._syncMenuCols(flattenMenuCols, that.owner.columns);\n                    }\n                }\n\n                if (that._isModernComponentType()) {\n                    menuTemplate = kendo.template(modernTemplate);\n                } else if (that._isTabbedComponentType()) {\n                    menuTemplate = kendo.template(tabbedTemplate);\n                } else {\n                    menuTemplate = kendo.template(template);\n                }\n\n                menuElement = $(menuTemplate({\n                    uid: kendo.guid(),\n                    ns: kendo.ns,\n                    messages: options.messages,\n                    sortable: options.sortable,\n                    filterable: options.filterable,\n                    columns: columns,\n                    showColumns: options.columns,\n                    hasLockableColumns: options.hasLockableColumns,\n                    hasStickableColumns: options.hasStickableColumns,\n                    encodeTitles: options.encodeTitles,\n                    omitWrapAttribute: kendo.attr(\"omit-wrap\"),\n                    reorderable: options.reorderable,\n                    groupable: options.groupable,\n                    autoSize: options.autoSize\n                }));\n\n                kendo.applyStylesFromKendoAttributes(menuElement, [\"display\"]);\n                that.wrapper.empty().append(menuElement);\n\n                that.popup = that.wrapper[POPUP]({\n                    anchor: that.link,\n                    copyAnchorStyles: false,\n                    open: that._open.bind(that),\n                    activate: that._activate.bind(that),\n                    deactivate: that._deactivate.bind(that),\n                    close: function(e) {\n                        if (that.menu) {\n                            that.menu._closing = e.sender.element;\n                        }\n                        if (that.options.closeCallback) {\n                            that.options.closeCallback(that.element);\n                        }\n                    }\n                }).data(POPUP);\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    that.popup.element.addClass(\"k-grid-columnmenu-popup\");\n                    that._createExpanders();\n                } else {\n                    that.menu = that.wrapper.children()[MENU]({\n                        orientation: \"vertical\",\n                        closeOnClick: false,\n                        open: function() {\n                            that._updateMenuItems();\n                        }\n                    }).data(MENU);\n                }\n\n                if (that._isTabbedComponentType()) {\n                    that.tabStrip = menuElement[TABSTRIP]({\n                        applyMinHeight: false,\n                        animation: {\n                            open: {\n                                effects: \"fadeIn\"\n                            }\n                        }\n                    }).data(TABSTRIP);\n\n                    that.tabStrip.activateTab(that.tabStrip.tabGroup.find(\"li:first\"));\n                }\n            },\n\n            _createLink: function() {\n                var that = this,\n                    element = that.element,\n                    appendTarget = that.appendTo.length ? element.find(that.appendTo) : element,\n                    link = element.find(\".k-grid-column-menu\"),\n                    title = encode(kendo.format(that.options.messages.buttonTitle, that.title || that.field));\n\n                if (!link[0]) {\n                    element.addClass(\"k-filterable\");\n\n                    link = appendTarget\n                        .append('<a class=\"k-grid-column-menu k-grid-header-menu\" href=\"#\" aria-hidden=\"true\" title=\"' +\n                                    title + '\">' + kendo.ui.icon(\"more-vertical\") + '</a>')\n                        .find(\".k-grid-column-menu\");\n                }\n\n                link.attr(\"tabindex\", -1)\n                    .on(\"click\" + NS, that._click.bind(that));\n\n                return link;\n            },\n\n            _createExpanders: function() {\n                var that = this;\n                var options = that.options;\n                var expanderOptions = {\n                    expanded: false,\n                    headerClass: \"k-columnmenu-item\",\n                    useBareTemplate: true\n                };\n\n                if (that._isModernComponentType()) {\n                    that.wrapper.find(\".k-columns-item\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                        title: kendo.ui.icon(\"columns\") + '<span>' + encode(options.messages.columns) + '</span>'\n                    }));\n                    that.wrapper.find(\".k-column-menu-filter\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                        title: kendo.ui.icon(\"filter\") + '<span>' + encode(options.messages.filter) + '</span>'\n                    }));\n                }\n\n                that.wrapper.find(\".k-column-menu-position\")[EXPANSIONPANEL]($.extend(true, {}, expanderOptions,{\n                    title: kendo.ui.icon(\"set-column-position\") + '<span>' + encode(options.messages.setColumnPosition) + '</span>'\n                }));\n            },\n\n            _syncMenuCols: function(menuCols, ownerCols) {\n                var length = ownerCols.length;\n                var ownerCol;\n                var menuColsFields = menuCols.map(function(col) {\n                    return col.field;\n                });\n\n                for (var i = 0; i < length; i++) {\n                    ownerCol = ownerCols[i];\n                    if (menuColsFields.indexOf(ownerCol.field) < 0) {\n                        ownerCol.menu = false;\n                    }\n                }\n            },\n\n            _flattenMenuCols: function(cols) {\n                var result = [];\n                var length = cols.length;\n\n                for (var i = 0; i < length; i++) {\n                    if (cols[i].columns) {\n                        result = result.concat(this._flattenMenuCols(cols[i].columns));\n                    } else if (!cols[i].groupHeader) {\n                        result.push(cols[i]);\n                    }\n                }\n                return result;\n            },\n\n            _groupColumns: function(columns, nest) {\n                var result = [];\n                var groups = this.options.columns.groups;\n                var length = groups.length;\n                var i;\n                var currGroup;\n                var filterHandler;\n                var group;\n                var groupColumns;\n\n                for (i = 0; i < length; i++) {\n                    currGroup = groups[i];\n                    filterHandler = columnsGroupFilterHandler.bind(currGroup);\n                    group = { title: currGroup.title, groupHeader: true };\n                    groupColumns = columns.filter(filterHandler);\n                    result.push(group);\n\n                    if (nest) {\n                        group.columns = groupColumns;\n                    } else {\n                        result = result.concat(groupColumns);\n                    }\n                }\n\n                return result;\n            },\n\n            _hasGroups: function() {\n                return this.options.columns && this.options.columns.groups && this.options.columns.groups.length;\n            },\n\n            _isModernComponentType: function() {\n                return this.options.componentType === 'modern' && !this._isMobile;\n            },\n\n            _isTabbedComponentType: function() {\n                return this.options.componentType === 'tabbed' && !this._isMobile;\n            },\n\n            _deactivate: function() {\n                if (this.menu) {\n                    this.menu._closing = false;\n                }\n            },\n\n            _createMobileMenu: function() {\n                var that = this,\n                    options = that.options,\n                    columns = that._ownerColumns(),\n                    groups,\n                    flattenMenuCols;\n\n                if (that._hasGroups()) {\n                    groups = that._groupColumns(columns, true);\n                    flattenMenuCols = that._flattenMenuCols(groups);\n                    if (flattenMenuCols.length !== that.owner.columns.length) {\n                        that._syncMenuCols(flattenMenuCols, that.owner.columns);\n                    }\n                }\n\n                var html = kendo.template(mobileTemplate)({\n                    ns: kendo.ns,\n                    field: that.field,\n                    title: that.title || that.field,\n                    messages: options.messages,\n                    sortable: options.sortable,\n                    filterable: options.filterable,\n                    columns: columns,\n                    showColumns: options.columns,\n                    hasLockableColumns: options.hasLockableColumns,\n                    hasStickableColumns: options.hasStickableColumns,\n                    hasGroups: that._hasGroups(),\n                    groups: groups,\n                    reorderable: options.reorderable,\n                    groupable: options.groupable\n                });\n\n                that.view = that.pane.append(html);\n                that.view.state = { columns: {} };\n\n                that.wrapper = that.view.element.find(\".k-column-menu\");\n\n                that.menu = new MobileMenu(that.wrapper.children(), {\n                    pane: that.pane,\n                    columnMenu: that\n                });\n\n                // The toggle animation of the switches should not propagate to the view\n                that.menu.element.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                var viewElement = that.view.wrapper && that.view.wrapper[0] ? that.view.wrapper : that.view.element;\n\n                viewElement.on(\"click\", \".k-header-done\", function(e) {\n                    e.preventDefault();\n\n                    that.menu._applyChanges();\n                    that.menu._cancelChanges(false);\n                    that.close();\n                });\n\n                viewElement.on(\"click\", \".k-header-cancel\", function(e) {\n                    e.preventDefault();\n\n                    that.menu._cancelChanges(true);\n                    that.close();\n                });\n\n                that.view.bind(\"showStart\", function() {\n                    var view = that.view || { columns: {} };\n\n                    if (that.options.hasLockableColumns) {\n                        that._updateLockedColumns();\n                    }\n\n                    if (that.options.hasStickableColumns) {\n                        that._updateStickyColumns();\n                    }\n\n                    if (that.options.reorderable) {\n                        that._updateReorderColumns();\n                    }\n\n                    if (that.options.groupable) {\n                        that._updateGroupColumns();\n                    }\n\n                    if (view.element.find(\".k-sort-asc.k-selected\").length) {\n                        view.state.initialSort = \"asc\";\n                    } else if (view.element.find(\".k-sort-desc.k-selected\").length) {\n                        view.state.initialSort = \"desc\";\n                    }\n                });\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                if (that.filterMenu) {\n                    that.filterMenu.destroy();\n                }\n\n                if (that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n\n                if (that.options.columns && that.owner) {\n                    if (that._updateColumnsMenuHandler) {\n                        that.owner.unbind(\"columnShow\", that._updateColumnsMenuHandler);\n                        that.owner.unbind(\"columnHide\", that._updateColumnsMenuHandler);\n                    }\n\n                    if (that._updateColumnsLockedStateHandler) {\n                        that.owner.unbind(\"columnLock\", that._updateColumnsLockedStateHandler);\n                        that.owner.unbind(\"columnUnlock\", that._updateColumnsLockedStateHandler);\n                    }\n                }\n\n                if (that.menu) {\n                    that.menu.element.off(NS);\n                    that.menu.destroy();\n                }\n\n                that.wrapper.off(NS);\n\n                if (that.popup) {\n                    that.popup.destroy();\n                }\n\n                if (that.view) {\n                    that.view.purge();\n                }\n\n                that.link.off(NS);\n                that.owner = null;\n                that.wrapper = null;\n                that.element = null;\n            },\n\n            close: function() {\n                if (this.menu) {\n                    this.menu.close();\n                }\n                if (this.popup) {\n                    this.popup.close();\n                    this.popup.element.off(\"keydown\" + NS);\n                }\n            },\n\n            _click: function(e) {\n                var that = this;\n\n                e.preventDefault();\n                e.stopPropagation();\n\n                var options = this.options;\n\n                if (options.filter && this.element.is(!options.filter)) {\n                    return;\n                }\n\n                if (!this.popup && !this.pane) {\n                    this._init();\n                } else {\n                    that._updateMenuItems();\n                }\n\n                if (this._isMobile) {\n                    this.pane.navigate(this.view, this.options.animations.left);\n                } else {\n                    this.popup.toggle();\n                }\n            },\n\n            _updateMenuItems: function() {\n                var that = this;\n                if (that.options.columns) {\n                    that._setMenuItemsVisibility();\n                    if (!that.options.columns.sort && !that.options.columns.groups) {\n                        that._reorderMenuItems();\n                    } else {\n                        that._updateDataIndexes();\n                    }\n                }\n            },\n\n            _setMenuItemsVisibility: function() {\n                var that = this;\n\n                that._eachRenderedMenuItem(function(index, column, renderedListElement) {\n                    if (column.matchesMedia === false) {\n                        renderedListElement.hide();\n                    } else {\n                        renderedListElement.show();\n                    }\n                });\n            },\n\n            _reorderMenuItems: function() {\n                var that = this;\n\n                that._eachRenderedMenuItem(function(index, column, renderedListElement, renderedList) {\n                    if (renderedListElement[0] && renderedListElement.index() !== index) {\n                        insertElementAt(index, renderedListElement, renderedList);\n                    }\n                });\n                that._updateDataIndexes();\n            },\n\n            _updateDataIndexes: function() {\n                var that = this;\n                var renderedList = that._isMobile && that.view ?\n                    $(that.view.element).find(\".k-columns-item\").children(\"ul\") :\n                    $(that.wrapper).find(\".k-menu-group\").first(),\n                    mappedColumns = that._ownerColumns(true).map(function(x) {\n                        return x.title || x.field;\n                    });\n\n                renderedList.find(\"span.\" + (this._isMobile ? \"k-listgroup-form-field-wrapper\" : \"k-menu-link\") +\n                    \" input\").each(function(i) {\n                    var columns;\n                    var index;\n                    if (that.options.columns.sort) {\n                        columns = that._ownerColumns();\n                        index = mappedColumns.indexOf(columns[i].title);\n                        $(this).attr(kendo.attr(\"index\"), index);\n                    } else {\n                        $(this).attr(kendo.attr(\"index\"), i);\n                    }\n                });\n            },\n\n            _eachRenderedMenuItem: function(callback) {\n                var that = this;\n                var renderedListElement;\n                var duplicateColumnIndex;\n                var fieldValue;\n                var currentColumn;\n                var columns = grep(leafColumns(that.owner.columns), function(col) {\n                    var result = true,\n                        title = trim(col.title || \"\");\n\n                    if (col.menu === false || (!col.field && !title.length)) {\n                        result = false;\n                    }\n\n                    return result;\n                }).map(function(col) {\n                    return {\n                         field: col.field,\n                         title: col.title,\n                         matchesMedia: col.matchesMedia\n                       };\n                });\n                var renderedList = that._getRenderedList();\n                var renderedListElements = that._getRenderedListElements(renderedList);\n                var oldOccurances = oldColumnOccurrences(renderedListElements, renderedList.find(\"input[type=checkbox]\"));\n                var columnOccurrence = columnOccurrences(columns);\n                var columnElements;\n\n                for (var i = 0; i < columns.length; i++) {\n                    currentColumn = columns[i];\n                    fieldValue = currentColumn.field ? currentColumn.field : currentColumn.title;\n                    duplicateColumnIndex = $.inArray(i, columnOccurrence[JSON.stringify(currentColumn)]);\n                    columnElements = $();\n\n                    for (var idx = 0; idx < oldOccurances[fieldValue].length; idx++) {\n                        columnElements = columnElements.add(renderedListElements.eq(oldOccurances[fieldValue][idx]));\n                    }\n                    renderedListElement = columnElements.find(attrEquals(\"field\", fieldValue)).closest(that._isModernComponentType() ? \"label\" : \"li\").eq(duplicateColumnIndex);\n                    callback(i, currentColumn, renderedListElement, renderedList);\n                }\n            },\n\n            _getRenderedList: function() {\n                var that = this;\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    return $(that.wrapper).find('.k-columns-item');\n                } else {\n                    return that._isMobile && that.view ?\n                    $(that.view.element).find(\".k-columns-item\").children(\"ul\") :\n                    $(that.wrapper).find(\".k-menu-group\").first();\n                }\n            },\n\n            _getRenderedListElements: function(renderedList) {\n                var that = this;\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    return renderedList.find('label');\n                } else {\n                    return renderedList.find(\"span.\" + (this._isMobile ? \"k-listgroup-form-field-wrapper\" : \"k-menu-link\"));\n                }\n            },\n\n            _open: function() {\n                var that = this,\n                    instance, menuitem;\n\n                $(\".k-column-menu\").not(that.wrapper).each(function() {\n                    var popup = $(this).data(POPUP);\n                    if (popup) {\n                        popup.close();\n                    }\n                });\n                that.popup.element.off(\"keydown\" + NS).on(\"keydown\" + NS, function(e) {\n                    var target = $(e.target);\n\n                    if ((that._isModernComponentType() || that._isTabbedComponentType()) && e.keyCode === kendo.keys.ENTER) {\n                        target.click();\n                    }\n                    if (e.keyCode == kendo.keys.ESC) {\n                        instance = kendo.widgetInstance(target.find(\"select\"));\n\n                        if (target.hasClass(\"k-picker\") &&\n                            instance &&\n                            instance.popup.visible()) {\n                                e.stopPropagation();\n                                return;\n                        }\n\n                        menuitem = target.closest(\".k-popup\").closest(\".k-menu-item\");\n\n                        if (menuitem.length > 0) {\n                            menuitem.addClass(\"k-focus\");\n\n                            if (that.menu) {\n                                that.menu.element.trigger(\"focus\");\n                            } else {\n                                that.popup.element.find('[tabindex=0]').eq(0).trigger(\"focus\");\n                            }\n                        }\n\n                        target.closest(\".k-popup\").getKendoPopup().close();\n                    }\n                });\n\n                if (that.options.hasLockableColumns) {\n                    that._updateLockedColumns();\n                }\n\n                if (that.options.hasStickableColumns) {\n                    that._updateStickyColumns();\n                }\n\n                if (that.options.reorderable) {\n                    that._updateReorderColumns();\n                }\n\n                if (that.options.groupable) {\n                    that._updateGroupColumns();\n                }\n            },\n\n            _activate: function() {\n                if (this.menu) {\n                    this.menu.element.trigger(\"focus\");\n                } else {\n                    this.popup.element.find('[tabindex=0]').eq(0).trigger(\"focus\");\n                }\n\n                this.trigger(OPEN, { field: this.field, container: this.wrapper });\n            },\n\n            _ownerColumns: function(omitSort) {\n                var columns = leafColumns(this.owner.columns),\n                    menuColumns = grep(columns, function(col) {\n                        var result = true,\n                            title = trim(col.title || \"\");\n\n                        if (col.menu === false || (!col.field && !title.length)) {\n                            result = false;\n                        }\n\n                        return result;\n                    }),\n                    result,\n                    sort = this.options.columns.sort;\n\n                result = map(menuColumns, function(col) {\n                    return {\n                        originalField: col.field,\n                        field: col.field || col.title,\n                        title: col.title || col.field,\n                        hidden: col.hidden,\n                        matchesMedia: col.matchesMedia,\n                        index: inArray(col, columns),\n                        locked: !!col.locked,\n                        _originalObject: col,\n                        uid: col.headerAttributes.id\n                    };\n                });\n\n                if (sort && !omitSort) {\n                    result.sort(Comparer.create({ field: \"title\", dir: sort }));\n                }\n\n                return result;\n            },\n\n            _sort: function() {\n                var that = this;\n\n                if (that.options.sortable) {\n                    that.refresh();\n\n                    if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                        that.wrapper.on(\"click\" + NS, \".k-sort-asc, .k-sort-desc\", that._sortHandler.bind(that));\n                    } else {\n                        that.menu.bind(SELECT, that._sortHandler.bind(that));\n                    }\n                }\n            },\n\n            _sortHandler: function(e) {\n                var that = this,\n                    item = e.item ? $(e.item) : $(e.target),\n                    dir;\n\n                if (item.hasClass(\"k-sort-asc\")) {\n                    dir = ASC;\n                } else if (item.hasClass(\"k-sort-desc\")) {\n                    dir = DESC;\n                }\n\n                if (!dir) {\n                    return;\n                }\n\n                that._getSortItemsContainer(item).find(\".k-sort-\" + (dir == ASC ? DESC : ASC)).removeClass(ACTIVE);\n\n                that._sortDataSource(item, dir);\n\n                if (!that._isMobile) {\n                    that.close();\n                }\n            },\n\n            _getSortItemsContainer: function(item) {\n                return this._isModernComponentType() || this._isTabbedComponentType() ? item.parents('.k-columnmenu-item-wrapper').first() : item.parent();\n            },\n\n            _sortDataSource: function(item, dir) {\n                var that = this,\n                    sortable = that.options.sortable,\n                    compare = sortable.compare === null ? undefined$1 : sortable.compare,\n                    dataSource = that.dataSource,\n                    idx,\n                    length,\n                    sort = dataSource.sort() || [];\n\n                var removeClass = item.hasClass(ACTIVE) && sortable && sortable.allowUnsort !== false;\n\n                dir = !removeClass ? dir : undefined$1;\n\n                if (that.trigger(\"sort\", { sort: { field: that.field, dir: dir, compare: compare } })) {\n                    return;\n                }\n\n                if (removeClass) {\n                    item.removeClass(ACTIVE);\n                } else {\n                    item.addClass(ACTIVE);\n                }\n\n                if (sortable.mode === \"multiple\") {\n                    for (idx = 0, length = sort.length; idx < length; idx++) {\n                        if (sort[idx].field === that.field) {\n                            sort.splice(idx, 1);\n                            break;\n                        }\n                    }\n                    sort.push({ field: that.field, dir: dir, compare: compare });\n                } else {\n                    sort = [ { field: that.field, dir: dir, compare: compare } ];\n                }\n\n                dataSource.sort(sort);\n            },\n\n            _columns: function() {\n                var that = this;\n\n                if (that.options.columns) {\n\n                    that._updateColumnsMenu();\n\n                    that._updateColumnsMenuHandler = that._updateColumnsMenu.bind(that);\n\n                    that.owner.bind([\"columnHide\", \"columnShow\"], that._updateColumnsMenuHandler);\n\n                    that._updateColumnsLockedStateHandler = that._updateColumnsLockedState.bind(that);\n\n                    that.owner.bind([\"columnUnlock\", \"columnLock\" ], that._updateColumnsLockedStateHandler);\n\n                    if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                        that.wrapper.on(\"click\" + NS, '.k-columns-item .k-button:not(.k-button-solid-primary)', function() {\n                            that._updateColumnsMenu();\n                        });\n                        that.wrapper.on(\"click\" + NS, '.k-columns-item .k-button.k-button-solid-primary', that._applyColumnVisibility.bind(that));\n                        that.wrapper.on(\"click\" + NS, '.k-columns-item .k-checkbox', function() {\n                            that._updateColumnsMenu(true);\n                        });\n                    } else {\n                        that.menu.bind(SELECT, function(e) {\n                            var item = $(e.item),\n                                input,\n                                column,\n                                uidAttr = kendo.attr(\"uid\"),\n                                colIdx = 0,\n                                columns = grep(leafColumns(that.owner.columns), function(col) {\n                                    var result = true,\n                                        title = trim(col.title || \"\");\n\n                                    if (col.menu === false || (!col.field && !title.length)) {\n                                        result = false;\n                                    }\n\n                                    return result;\n                                });\n\n                            if (that._isMobile) {\n                                e.preventDefault();\n                            }\n\n                            if (!item.parent().closest(\"li.k-columns-item\")[0]) {\n                                return;\n                            }\n\n                            input = item.find(\":checkbox\");\n                            if (input.attr(\"disabled\")) {\n                                return;\n                            }\n\n                            colIdx = columns.map(function(col) {\n                                return col.headerAttributes.id;\n                            }).indexOf(input.attr(uidAttr));\n                            column = columns[colIdx];\n\n                            if (column.hidden === true) {\n                                that.owner.showColumn(column);\n                            } else {\n                                that.owner.hideColumn(column);\n                            }\n                        });\n                    }\n                }\n            },\n\n            _applyColumnVisibility: function() {\n                var that = this;\n                var fieldAttr = kendo.attr(\"field\");\n                var uidAttr = kendo.attr(\"uid\");\n                var checkboxes = that.wrapper.find(\".k-columns-item input[\" + fieldAttr + \"]\");\n                var columnsInMenu = grep(leafColumns(this.owner.columns), function(col) {\n                    var result = true,\n                        title = trim(col.title || \"\");\n\n                    if (col.menu === false || (!col.field && !title.length)) {\n                        result = false;\n                    }\n\n                    return result;\n                });\n                var length = checkboxes.length;\n                var idx;\n                var colIdx;\n                var checkbox;\n                var column;\n\n                that.owner.unbind(\"columnShow\", that._updateColumnsMenuHandler);\n                that.owner.unbind(\"columnHide\", that._updateColumnsMenuHandler);\n\n                for (idx = 0; idx < length; idx++) {\n                    checkbox = $(checkboxes[idx]);\n                    colIdx = columnsInMenu.map(function(col) {\n                        return col.headerAttributes.id;\n                    }).indexOf(checkbox.attr(uidAttr));\n                    column = columnsInMenu[colIdx];\n\n                   if (checkbox.is(\":checked\") && column.hidden) {\n                       that.owner.showColumn(column);\n                   } else if (checkbox.is(\":not(:checked)\") && !column.hidden) {\n                       that.owner.hideColumn(column);\n                   }\n                }\n                that.popup.close();\n                that.owner.bind([\"columnHide\", \"columnShow\"], that._updateColumnsMenuHandler);\n            },\n\n            _sizeColumns: function() {\n                var that = this;\n\n                if (that._isTabbedComponentType()) {\n                    that.wrapper.on(\"click\" + NS, \".k-auto-size-column, .k-auto-size-all\", that._autoSizeHandler.bind(that));\n                }\n            },\n\n            _autoSizeHandler: function(e) {\n                var that = this,\n                    item = e.item ? $(e.item) : $(e.target);\n\n                if (item.hasClass(\"k-auto-size-column\")) {\n                    that.owner.autoFitColumn(that.field);\n                } else if (item.hasClass(\"k-auto-size-all\")) {\n                    that.owner.autoFitColumns();\n                }\n            },\n\n            _updateColumnsMenu: function(omitCheckState) {\n                var idx, length, current, checked, locked, that = this;\n                var fieldAttr = kendo.attr(\"field\"),\n                    lockedAttr = kendo.attr(\"locked\"),\n                    uidAttr = kendo.attr(\"uid\"),\n                    columnIndexMap = {},\n                    columnsCount = 0,\n                    colIdx = 0;\n                    omitCheckState = omitCheckState === true;\n                    var columnsInMenu = grep(leafColumns(this.owner.columns), function(col, idx) {\n                        var result = true,\n                            title = trim(col.title || \"\");\n\n                        if (col.menu === false || (!col.field && !title.length)) {\n                            result = false;\n                        }\n\n                        if (result) {\n                            columnIndexMap[idx] = columnsCount;\n                            columnsCount++;\n                        }\n\n                        return result;\n                    }),\n                    visibleFields = grep(this._ownerColumns(), function(field) {\n                        if (omitCheckState) {\n                             return that.wrapper.find(\"[role='menuitemcheckbox'] [\" + uidAttr + \"='\" + field.uid + \"']\").prop('checked');\n                        }\n                        return !field.hidden && field.matchesMedia !== false;\n                    }),\n                    visibleDataFields = grep(visibleFields, function(field) {\n                        return field.originalField;\n                    }),\n                    lockedCount = grep(visibleDataFields, function(col) {\n                        return col.locked === true;\n                    }).length,\n                    nonLockedCount = grep(visibleDataFields, function(col) {\n                        return col.locked !== true;\n                    }).length,\n                    columnsNotInMenu = grep(this.owner.columns, function(col) {\n                        return col.menu === false;\n                    }),\n                    hiddenColumnsNotInMenu = grep(columnsNotInMenu, function(col) {\n                        return col.hidden;\n                    });\n\n                this.wrapper.find(\"[role='menuitemcheckbox']\").attr(\"aria-checked\", false);\n\n                var checkboxes = this.wrapper\n                    .find(\".k-columns-item input[\" + fieldAttr + \"]\")\n                    .prop(\"disabled\", false);\n\n                if (!omitCheckState) {\n                    checkboxes.prop(\"checked\", false);\n                }\n\n                var switchWidget;\n\n                for (idx = 0, length = checkboxes.length; idx < length; idx ++) {\n                    current = checkboxes.eq(idx);\n                    locked = current.attr(lockedAttr) === \"true\";\n                    checked = false;\n                    switchWidget = current.data(\"kendoSwitch\");\n                    colIdx = columnsInMenu.map(function(col) {\n                        return col.headerAttributes.id;\n                    }).indexOf(current.attr(uidAttr));\n\n                    checked = omitCheckState ? current.prop('checked') : !columnsInMenu[colIdx].hidden && columnsInMenu[colIdx].matchesMedia !== false;\n                    current.prop(\"checked\", checked);\n\n                    if (switchWidget) {\n                        switchWidget.enable(true);\n                        switchWidget.check(checked);\n                    }\n\n                    current.closest(\"[role='menuitemcheckbox']\").attr(\"aria-checked\", checked);\n\n                    if (checked) {\n                        if (lockedCount == 1 && locked) {\n                            current.prop(\"disabled\", true);\n\n                            if (switchWidget) {\n                                switchWidget.enable(false);\n                            }\n                        }\n\n                        if ((columnsNotInMenu.length === 0 || (columnsNotInMenu.length === hiddenColumnsNotInMenu.length)) && nonLockedCount == 1 && !locked) {\n                            current.prop(\"disabled\", true);\n\n                            if (switchWidget) {\n                                switchWidget.enable(false);\n                            }\n                        }\n                    }\n                }\n            },\n\n            _updateColumnsLockedState: function() {\n                var idx, length, current, column;\n                var fieldAttr = kendo.attr(\"field\");\n                var lockedAttr = kendo.attr(\"locked\");\n                var columns = toHash(this._ownerColumns(), \"field\");\n                var checkboxes = this.wrapper\n                    .find(\".k-columns-item input[type=checkbox]\");\n\n                for (idx = 0, length = checkboxes.length; idx < length; idx ++ ) {\n                    current = checkboxes.eq(idx);\n                    column = columns[current.attr(fieldAttr)];\n                    if (column) {\n                        current.attr(lockedAttr, column.locked);\n                    }\n                }\n\n                this._updateColumnsMenu();\n            },\n\n            _filter: function() {\n                var that = this,\n                    widget = FILTERMENU,\n                    options = that.options;\n\n                if (options.filterable !== false) {\n\n                    if (options.filterable.multi) {\n                        widget = \"kendoFilterMultiCheck\";\n                        if (options.filterable.dataSource) {\n                            options.filterable.checkSource = options.filterable.dataSource;\n                            delete options.filterable.dataSource;\n                        }\n                    }\n                    that.filterMenu = that.wrapper.find(\".k-filterable\")[widget](\n                        extend(true, {}, {\n                            appendToElement: true,\n                            dataSource: options.dataSource,\n                            values: options.values,\n                            field: that.field,\n                            title: that.title,\n                            change: function(e) {\n                                if (that.trigger(\"filtering\", { filter: e.filter, field: e.field })) {\n                                    e.preventDefault();\n                                }\n                            },\n                            componentType: that.options.componentType,\n                            cycleForm: !that._isModernComponentType() && !that._isTabbedComponentType()\n                        },\n                        options.filterable)\n                        ).data(widget);\n\n                    if (that._isMobile) {\n                        that.menu.bind(SELECT, function(e) {\n                            var item = $(e.item);\n\n                            if (item.hasClass(\"k-filter-item\")) {\n                                that.pane.navigate(that.filterMenu.view, that.options.animations.left);\n                            }\n                        });\n                    }\n                }\n            },\n\n            _lockColumns: function() {\n                var that = this;\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    that.wrapper.on(\"click\" + NS, \".k-lock, .k-unlock\", that._lockableHandler.bind(that));\n                } else {\n                    that.menu.bind(SELECT, that._lockableHandler.bind(that));\n                }\n            },\n\n            _lockableHandler: function(e) {\n                var that = this;\n                var item = e.item ? $(e.item) : $(e.target);\n\n                if (item.hasClass(\"k-lock\")) {\n                    that.owner.lockColumn(that.field);\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                } else if (item.hasClass(\"k-unlock\")) {\n                    that.owner.unlockColumn(that.field);\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                }\n            },\n\n            _reorderColumns: function() {\n                var that = this;\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    that.wrapper.on(\"click\" + NS, \".k-move-prev, .k-move-next\", that._reorderHandler.bind(that));\n                } else {\n                    that.menu.bind(SELECT, that._reorderHandler.bind(that));\n                }\n            },\n\n            _reorderHandler: function(e) {\n                var that = this;\n                var item = e.item ? $(e.item) : $(e.target);\n\n                if (item.hasClass(\"k-move-prev\")) {\n                    that.owner._moveColumn(that.element, true);\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                } else if (item.hasClass(\"k-move-next\")) {\n                    that.owner._moveColumn(that.element, false);\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                }\n            },\n\n            _groupColumn: function() {\n                var that = this;\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    that.wrapper.on(\"click\" + NS, \".k-group, .k-ungroup\", that._groupHandler.bind(that));\n                } else {\n                    that.menu.bind(SELECT, that._groupHandler.bind(that));\n                }\n            },\n\n            _groupHandler: function(e) {\n                var that = this,\n                    item = e.item ? $(e.item) : $(e.target);\n\n                if (item.hasClass(\"k-group\") || item.hasClass(\"k-ungroup\")) {\n                    that.owner._handleSpaceKey(that.element, true);\n\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                }\n            },\n\n            _stickyColumns: function() {\n                var that = this;\n\n                if (that._isModernComponentType() || that._isTabbedComponentType()) {\n                    that.wrapper.on(\"click\" + NS, \".k-stick, .k-unstick\", that._stickableHandler.bind(that));\n                } else {\n                    that.menu.bind(SELECT, that._stickableHandler.bind(that));\n                }\n            },\n\n            _stickableHandler: function(e) {\n                var that = this;\n                var item = e.item ? $(e.item) : $(e.target);\n                var field = that.field;\n                var columns = that.owner.columns;\n                var column = grep(columns, function(column) {\n                    return column.field == field || column.title == field;\n                })[0];\n\n                if (item.hasClass(\"k-stick\")) {\n                    that.owner.stickColumn(that.field);\n                    that.trigger(STICK, { column: column });\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                } else if (item.hasClass(\"k-unstick\")) {\n                    that.owner.unstickColumn(that.field);\n                    that.trigger(UNSTICK, { column: column });\n                    if (!that._isMobile) {\n                        that.close();\n                    }\n                }\n            },\n\n            _updateLockedColumns: function() {\n                var field = this.field;\n                var columns = this.owner.columns;\n                var column = grep(columns, function(column) {\n                    return column.field == field || column.title == field;\n                })[0];\n\n                if (!column) {\n                    return;\n                }\n\n                var locked = column.locked === true;\n                var length = grep(columns, function(column) {\n                    return !column.hidden && ((column.locked && locked) || (!column.locked && !locked));\n                }).length;\n                var notLockable = column.lockable === false;\n\n                var lockItem = this.wrapper.find(\".k-lock\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n                var unlockItem = this.wrapper.find(\".k-unlock\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n\n                if (locked || length == 1 || notLockable) {\n                    lockItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n                }\n\n                if (!locked || length == 1 || notLockable) {\n                    unlockItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n                }\n\n                this._updateColumnsLockedState();\n            },\n\n            _updateStickyColumns: function() {\n                var field = this.field;\n                var columns = this.owner.columns;\n                var column = grep(columns, function(column) {\n                    return column.field == field || column.title == field;\n                })[0];\n\n                if (!column) {\n                    return;\n                }\n\n                var sticky = column.sticky === true;\n                var stickable = column.stickable === true;\n                var locked = column.locked === true;\n                var length = grep(columns, function(column) {\n                    return !column.hidden && ((column.locked && locked) || (!column.locked && !locked));\n                }).length;\n\n                var stickItem = this.wrapper.find(\".k-stick\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n                var unstickItem = this.wrapper.find(\".k-unstick\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n\n                if (sticky || !stickable || (locked && length === 1)) {\n                    stickItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n                }\n\n                if (!sticky || !stickable) {\n                    unstickItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n                }\n            },\n\n            _updateReorderColumns: function() {\n                var element = this.element,\n                    elementIndex = element.index(),\n                    numberOfSiblings = element.parent().children().length;\n\n                var prevItem = this.wrapper.find(\".k-move-prev\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n                var nextItem = this.wrapper.find(\".k-move-next\").removeClass(\"k-disabled\").removeAttr(\"aria-disabled\");\n\n                if (this.element.index() === 0) {\n                    prevItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n                }\n\n                if (elementIndex + 1 === numberOfSiblings) {\n                    nextItem.addClass(\"k-disabled\").attr(\"aria-disabled\", \"true\");\n                }\n            },\n\n            _updateGroupColumns: function() {\n                var element = this.element,\n                    wrapper = this.wrapper,\n                    groupEl = wrapper.find(\".k-menu-item.k-group\"),\n                    ungroupEl = wrapper.find(\".k-menu-item.k-ungroup\");\n\n                if (this.owner.groupable._canDrag(element)) {\n                    groupEl.removeClass(\"k-hidden\");\n                    ungroupEl.addClass(\"k-hidden\");\n                } else {\n                    groupEl.addClass(\"k-hidden\");\n                    ungroupEl.removeClass(\"k-hidden\");\n                }\n            },\n\n            refresh: function() {\n                var that = this,\n                    sort = that.options.dataSource.sort() || [],\n                    descriptor,\n                    field = that.field,\n                    idx,\n                    length;\n\n                that.wrapper.find(\".k-sort-asc, .k-sort-desc\").removeClass(ACTIVE);\n\n                for (idx = 0, length = sort.length; idx < length; idx++) {\n                   descriptor = sort[idx];\n\n                   if (field == descriptor.field) {\n                        that.wrapper.find(\".k-sort-\" + descriptor.dir).addClass(ACTIVE);\n                   }\n                }\n\n                that.link[that._filterExist(that.dataSource.filter()) ? \"addClass\" : \"removeClass\"](\"k-active\");\n            },\n\n            _filterExist: function(filters) {\n                var found = false;\n                var filter;\n\n                if (!filters) {\n                    return;\n                }\n\n                filters = filters.filters;\n\n                for (var idx = 0, length = filters.length; idx < length; idx++) {\n                    filter = filters[idx];\n\n                    if (filter.field == this.field) {\n                        found = true;\n                    } else if (filter.filters) {\n                        found = found || this._filterExist(filter);\n                    }\n                }\n\n                return found;\n            }\n        });\n\n        /* ------------------------- MODERN TEMPLATE ------------------------- */\n\n        function modernColumnsTemplateIterator(columns, encodeTitles, ns) {\n            return columns.map(function (column) {\n                if (column.groupHeader) {\n                    return (\"<span class=\\\"k-column-menu-group-header\\\"><span class=\\\"k-column-menu-group-header-text\\\">\" + (column.title) + \"</span></span>\");\n                } else {\n                    return (\"<label class=\\\"k-column-list-item\\\" role=\\\"menuitemcheckbox\\\" aria-checked=\\\"false\\\" \" + (column.matchesMedia === false ? ((kendo.attr(\"style-display\")) + \"=\\\"none\\\"\") : \"\") + \"><input class=\\\"k-checkbox k-checkbox-md k-rounded-md\\\" type=\\\"checkbox\\\" title=\\\"\" + (encodeTitles ? encode(column.title) : column.title) + \"\\\" data-\" + ns + \"field=\\\"\" + (column.field.replace(/\\\"/g, \"&#34;\")) + \"\\\" data-\" + ns + \"index=\\\"\" + (column.index) + \" data-\" + ns + \"locked=\\\"\" + (column.locked) + \"\\\" data-\" + ns + \"uid=\\\"\" + (column.uid) + \"\\\" /><span class=\\\"k-checkbox-label\\\">\" + (encodeTitles ? encode(column.title) : column.title) + \"</span></label>\");\n                }\n            }).join(\"\");\n        }\n\n    var SIZING_PARTIAL_MODERN = function (ref) {\n        var messages = ref.messages;\n\n        return (\"<div class=\\\"k-columnmenu-item-wrapper\\\"><div><div class=\\\"k-columnmenu-item k-auto-size-column\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"max-width\")) + (encode(messages.autoSizeColumn)) + \"</div></div><div><div class=\\\"k-columnmenu-item k-auto-size-all\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"display-inline-flex\")) + (encode(messages.autoSizeAllColumns)) + \"</div></div></div>\");\n        };\n\n    var SORTABLE_PARTIAL_MODERN = function (ref) {\n        var messages = ref.messages;\n\n        return (\"<div class=\\\"k-columnmenu-item-wrapper\\\"><div><div class=\\\"k-columnmenu-item k-sort-asc\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"sort-asc-small\")) + (encode(messages.sortAscending)) + \"</div></div><div><div class=\\\"k-columnmenu-item k-sort-desc\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"sort-desc-small\")) + (encode(messages.sortDescending)) + \"</div></div></div>\");\n        };\n\n        var COLUMNS_PARTIAL_MODERN = function (ref) {\n            var columns = ref.columns;\n            var messages = ref.messages;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n\n            return \"<div class=\\\"k-columnmenu-item-wrapper\\\"><div><div class=\\\"k-columnmenu-item-content k-columns-item\\\"><div class=\\\"k-column-list-wrapper\\\"><div class=\\\"k-column-list\\\" role=\\\"menu\\\">\" + (modernColumnsTemplateIterator(columns, encodeTitles, ns)) + \"</div></div><div class=\\\"k-actions-stretched k-columnmenu-actions\\\">\" +\n    kendo.html.renderButton((\"<button>\" + (encode(messages.apply)) + \"</button>\"), { themeColor: \"primary\", icon: \"check\" }) +\n    kendo.html.renderButton((\"<button>\" + (encode(messages.reset)) + \"</button>\"), { icon: \"undo\" }) +\n    \"</div></div></div></div>\";\n        };\n\n        var GROUPABLE_PARTIAL_MODERN = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<div class=\\\"k-columnmenu-item-wrapper\\\"><div><div class=\\\"k-columnmenu-item k-group\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"group\")) + (encode(messages.groupColumn)) + \"</div></div></div>\\n<div class=\\\"k-columnmenu-item-wrapper\\\"><div><div class=\\\"k-columnmenu-item k-ungroup\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"ungroup\")) + (encode(messages.ungroupColumn)) + \"</div></div></div>\");\n        };\n\n        var LOCKABLE_COLUMNS_PARTIAL_MODERN = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<div class=\\\"k-columnmenu-item k-lock\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"lock\")) + (encode(messages.lock)) + \"</div><div class=\\\"k-columnmenu-item k-unlock\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"unlock\")) + (encode(messages.unlock)) + \"</div>\");\n        };\n\n        var STICKABLE_COLUMNS_PARTIAL_MODERN = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<div class=\\\"k-columnmenu-item k-stick\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"stick\")) + (encode(messages.stick)) + \"</div><div class=\\\"k-columnmenu-item k-unstick\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"unstick\")) + (encode(messages.unstick)) + \"</div>\");\n        };\n\n        var REORDERABLE_COLUMNS_PARTIAL_MODERN = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<div class=\\\"k-columnmenu-item k-move-prev\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"caret-alt-left\")) + (encode(messages.movePrev)) + \"</div><div class=\\\"k-columnmenu-item k-move-next\\\" tabindex=\\\"0\\\">\" + (kendo.ui.icon(\"caret-alt-right\")) + (encode(messages.moveNext)) + \"</div>\");\n        };\n\n        var LOCK_STICK_COLUMNS_PARTIAL_MODERN = function (ref) {\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var messages = ref.messages;\n            var reorderable = ref.reorderable;\n\n            return (\"<div class=\\\"k-columnmenu-item-wrapper\\\"><div class=\\\"k-column-menu-position\\\">\" + (hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_MODERN({ messages: messages }) : '') + \"\" + (hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_MODERN({ messages: messages }) : '') + \"\" + (reorderable ? REORDERABLE_COLUMNS_PARTIAL_MODERN({ messages: messages }) : '') + \"</div></div>\");\n        };\n\n        var modernTemplate = function (ref) {\n            var sortable = ref.sortable;\n            var filterable = ref.filterable;\n            var showColumns = ref.showColumns;\n            var messages = ref.messages;\n            var columns = ref.columns;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n            var reorderable = ref.reorderable;\n            var groupable = ref.groupable;\n\n            return (\"\" + (sortable ? SORTABLE_PARTIAL_MODERN({ messages: messages }) : '') + \"\" + (showColumns ? COLUMNS_PARTIAL_MODERN({ columns: columns, messages: messages, encodeTitles: encodeTitles, ns: ns }) : '') + \"\" + (filterable ? '<div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div>' : '') + \"\" + (groupable ? GROUPABLE_PARTIAL_MODERN({ messages: messages }) : '') + \"\" + (hasLockableColumns || hasStickableColumns || reorderable ? LOCK_STICK_COLUMNS_PARTIAL_MODERN({ hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns, messages: messages, reorderable: reorderable }) : ''));\n        };\n\n        /* ------------------------- TABBED TEMPLATE ------------------------- */\n\n        function tabbedTemplateGeneralSettings(sortable, hasLockableColumns, hasStickableColumns, reorderable, groupable, autoSize, messages) {\n            var result = \"<div>\";\n\n            if (sortable) {\n                result += SORTABLE_PARTIAL_MODERN({ messages: messages });\n            }\n\n            if (groupable) {\n                result += GROUPABLE_PARTIAL_MODERN({ messages: messages });\n            }\n\n            if (hasLockableColumns || hasStickableColumns || reorderable) {\n                result += LOCK_STICK_COLUMNS_PARTIAL_MODERN({ hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns, messages: messages, reorderable: reorderable });\n            }\n\n            if (autoSize) {\n                result += SIZING_PARTIAL_MODERN({ messages: messages });\n            }\n\n            result += \"</div>\";\n            return result;\n        }\n\n        var tabbedTemplate = function (ref) {\n            var sortable = ref.sortable;\n            var filterable = ref.filterable;\n            var showColumns = ref.showColumns;\n            var messages = ref.messages;\n            var columns = ref.columns;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n            var reorderable = ref.reorderable;\n            var groupable = ref.groupable;\n            var autoSize = ref.autoSize;\n\n            return (\"<div>\\n                            <ul>\\n                                \" + (filterable ? (\"<li>\" + (kendo.ui.icon(\"filter\")) + \"</li>\") : '') + \"\\n                                \" + (sortable || hasLockableColumns || hasStickableColumns || reorderable || groupable || autoSize ? (\"<li>\" + (kendo.ui.icon(\"sliders\")) + \"</li>\") : '') + \"\\n                                \" + (showColumns ? (\"<li>\" + (kendo.ui.icon(\"columns\")) + \"</li>\") : '') + \"\\n                            </ul>\\n                            \" + (filterable ? '<div><div class=\"k-columnmenu-item-wrapper\"><div class=\"k-columnmenu-item-content k-column-menu-filter\"><div class=\"k-filterable\"></div></div></div></div>' : '') + \"\\n                            \" + (sortable || hasLockableColumns || hasStickableColumns || reorderable || groupable || autoSize ? tabbedTemplateGeneralSettings(sortable, hasLockableColumns, hasStickableColumns, reorderable, groupable, autoSize, messages) : '') + \"\\n                            \" + (showColumns ? (\"<div>\" + (COLUMNS_PARTIAL_MODERN({ columns: columns, messages: messages, encodeTitles: encodeTitles, ns: ns })) + \"</div>\") : '') + \"\\n                        </div>\");\n        };\n\n        /* ------------------------- CLASSIC TEMPLATE ------------------------- */\n\n        function classicColumnsTemplateIterator(columns, encodeTitles, ns, omitWrapAttribute) {\n            return columns.map(function (column) {\n                if (column.groupHeader) {\n                    return (\"<li class=\\\"k-column-menu-group-header\\\" \" + omitWrapAttribute + \"=\\\"true\\\" ><span class=\\\"k-column-menu-group-header-text\\\">\" + (column.title) + \"</span></li>\");\n                } else {\n                    return (\"<li role=\\\"menuitemcheckbox\\\" aria-checked=\\\"false\\\" \" + (column.matchesMedia === false ? ((kendo.attr(\"style-display\")) + \"=\\\"none\\\"\") : \"\") + \"><input type=\\\"checkbox\\\" class=\\\"k-checkbox k-checkbox-md k-rounded-md\\\" title=\\\"\" + (encodeTitles ? encode(column.title) : column.title) + \"\\\" data-\" + ns + \"field=\\\"\" + (column.field.replace(/\\\"/g,\"&#34;\")) + \"\\\" data-\" + ns + \"index=\\\"\" + (column.index) + \"\\\" data-\" + ns + \"locked=\\\"\" + (column.locked) + \"\\\" data-\" + ns + \"uid=\\\"\" + (column.uid) + \"\\\"/>\" + (encodeTitles ? encode(column.title) : column.title) + \"</li>\");\n                }\n            }).join(\"\");\n        }\n\n        var SORTABLE_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n            var showColumns = ref.showColumns;\n            var filterable = ref.filterable;\n\n            return (\"<li class=\\\"k-item k-menu-item k-sort-asc\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"sort-asc-small\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.sortAscending)) + \"</span></span></li><li class=\\\"k-item k-menu-item k-sort-desc\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"sort-desc-small\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.sortDescending)) + \"</span></span></li>\" + (showColumns || filterable ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n        var COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var columns = ref.columns;\n            var messages = ref.messages;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n            var omitWrapAttribute = ref.omitWrapAttribute;\n            var filterable = ref.filterable;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n\n            return (\"<li class=\\\"k-item k-menu-item k-columns-item\\\" aria-haspopup=\\\"true\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"columns\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.columns)) + \"</span></span><ul>\" + (classicColumnsTemplateIterator(columns, encodeTitles, ns, omitWrapAttribute)) + \"</ul></li>\" + (filterable || hasLockableColumns || hasStickableColumns ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n    var FILTERABLE_PARTIAL_CLASSIC = function (ref) {\n        var messages = ref.messages;\n        var hasLockableColumns = ref.hasLockableColumns;\n        var hasStickableColumns = ref.hasStickableColumns;\n        var reorderable = ref.reorderable;\n\n        return (\"<li class=\\\"k-item k-menu-item k-filter-item\\\" aria-haspopup=\\\"true\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"filter\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.filter)) + \"</span></span><ul><li><div class=\\\"k-filterable\\\"></div></li></ul></li>\" + (hasLockableColumns || hasStickableColumns || reorderable ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n        var GROUPABLE_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n            var hasLockStickMove = ref.hasLockStickMove;\n\n            return (\"<li class=\\\"k-item k-menu-item k-group\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"group\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.groupColumn)) + \"</span></span></li><li class=\\\"k-item k-menu-item k-ungroup\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"ungroup\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.ungroupColumn)) + \"</span></span></li>\" + (hasLockStickMove ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n        var LOCKABLE_COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n            var hasStickableColumns = ref.hasStickableColumns;\n\n            return (\"<li class=\\\"k-item k-menu-item k-lock\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"lock\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.lock)) + \"</span></span></li><li class=\\\"k-item k-menu-item k-unlock\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"unlock\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.unlock)) + \"</span></span></li>\" + (hasStickableColumns ? '<li class=\"k-separator k-menu-separator\" role=\"presentation\"></li>' : ''));\n        };\n\n        var STICKABLE_COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li class=\\\"k-item k-menu-item k-stick\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"stick\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.stick)) + \"</span></span></li><li class=\\\"k-item k-menu-item k-unstick\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"unstick\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.unstick)) + \"</span></span></li>\");\n        };\n\n        var REORDERABLE_COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li class=\\\"k-item k-menu-item k-move-prev\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"caret-alt-left\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.movePrev)) + \"</span></span></li><li class=\\\"k-item k-menu-item k-move-next\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"caret-alt-right\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.moveNext)) + \"</span></span></li>\");\n        };\n\n        var LOCK_STICK_COLUMNS_PARTIAL_CLASSIC = function (ref) {\n            var messages = ref.messages;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var reorderable = ref.reorderable;\n\n            return (\"<li class=\\\"k-item k-menu-item k-position-item\\\" aria-haspopup=\\\"true\\\"><span class=\\\"k-link k-menu-link\\\">\" + (kendo.ui.icon(\"set-column-position\")) + \"<span class=\\\"k-menu-link-text\\\">\" + (encode(messages.setColumnPosition)) + \"</span></span><ul>\" + (hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_CLASSIC({ messages: messages, hasStickableColumns: hasStickableColumns }) : '') + \"\" + (hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_CLASSIC({ messages: messages }) : '') + \"\" + (reorderable ? REORDERABLE_COLUMNS_PARTIAL_CLASSIC({ messages: messages }) : '') + \"</ul></li>\");\n        };\n\n        var template = function (ref) {\n            var uid = ref.uid;\n            var sortable = ref.sortable;\n            var filterable = ref.filterable;\n            var showColumns = ref.showColumns;\n            var messages = ref.messages;\n            var columns = ref.columns;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var encodeTitles = ref.encodeTitles;\n            var ns = ref.ns;\n            var omitWrapAttribute = ref.omitWrapAttribute;\n            var reorderable = ref.reorderable;\n            var groupable = ref.groupable;\n\n            return (\"<ul id=\\\"\" + uid + \"\\\">\" + (sortable ? SORTABLE_PARTIAL_CLASSIC({ messages: messages, showColumns: showColumns, filterable: filterable }) : '') + \"\" + (showColumns ? COLUMNS_PARTIAL_CLASSIC({ columns: columns, messages: messages, encodeTitles: encodeTitles, ns: ns, omitWrapAttribute: omitWrapAttribute, filterable: filterable, hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns }) : '') + \"\" + (filterable ? FILTERABLE_PARTIAL_CLASSIC({ messages: messages, hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns, reorderable: reorderable }) : '') + \"\" + (groupable ? GROUPABLE_PARTIAL_CLASSIC({ messages: messages, hasLockStickMove: hasLockableColumns || hasStickableColumns || reorderable }) : '') + \"\" + (hasLockableColumns || hasStickableColumns || reorderable ? LOCK_STICK_COLUMNS_PARTIAL_CLASSIC({ messages: messages, hasLockableColumns: hasLockableColumns, hasStickableColumns: hasStickableColumns, reorderable: reorderable }) : '') + \"\\n</ul>\");\n        };\n\n        /* ------------------------- MOBILE TEMPLATE ------------------------- */\n\n        function mobileColumnsTemplateIterator(columns, groups, ns, hasGroups) {\n            var result = \"\";\n\n            if (hasGroups) {\n                for (var i = 0; i < groups.length; i++) {\n                    result += \"<span class=\\\"k-list-group-header k-pb-1\\\">\" + (encode(groups[i].title)) + \"</span><ul class=\\\"k-listgroup k-listgroup-flush k-mb-4\\\">\";\n\n                    for (var idx = 0; idx < groups[i].columns.length; idx++) {\n                        result += \"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item\\\"><span class=\\\"k-listgroup-form-row\\\"><span class=\\\"k-listgroup-form-field-label k-item-title\\\">\" + (groups[i].columns[idx].title) + \"</span><span class=\\\"k-listgroup-form-field-wrapper\\\"><input type=\\\"checkbox\\\" title=\\\"\" + (groups[i].columns[idx].title) + \"\\\" data-\" + ns + \"field=\\\"\" + (groups[i].columns[idx].field.replace(/\\\"/g,\"&#34;\")) + \"\\\" data-\" + ns + \"index=\\\"\" + (groups[i].columns[idx].index) + \"\\\" data-\" + ns + \"uid=\\\"\" + (groups[i].columns[idx].uid) + \"\\\" data-\" + ns + \"locked=\\\"\" + (groups[i].columns[idx].locked) + \"\\\"/></span></span></li>\\\"\";\n                    }\n\n                    result += \"</ul>\";\n                }\n            } else {\n                result += \"<ul class=\\\"k-listgroup k-listgroup-flush k-mb-4\\\">\";\n\n                for (var idx = 0; idx < columns.length; idx++) {\n                    result += \"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item\\\"><span class=\\\"k-listgroup-form-row\\\"><span class=\\\"k-listgroup-form-field-label k-item-title\\\">\" + (columns[idx].title) + \"</span><span class=\\\"k-listgroup-form-field-wrapper\\\"><input type=\\\"checkbox\\\" title=\\\"\" + (columns[idx].title) + \"\\\" data-\" + ns + \"field=\\\"\" + (columns[idx].field.replace(/\\\"/g,\"&#34;\")) + \"\\\" data-\" + ns + \"index=\\\"\" + (columns[idx].index) + \"\\\" data-\" + ns + \"uid=\\\"\" + (columns[idx].uid) + \"\\\" data-\" + ns + \"locked=\\\"\" + (columns[idx].locked) + \"\\\"/></span></span></li>\";\n                }\n\n                result += \"</ul>\";\n            }\n\n            return result;\n        }\n\n        var SORTABLE_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-sort-asc\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"sort-asc-small\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.sortAscending)) + \"</span></span></li><li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-sort-desc\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"sort-desc-small\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.sortDescending)) + \"</span></span></li>\");\n        };\n\n        var LOCKABLE_COLUMNS_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-lock\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"lock\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.lock)) + \"</span></span></li><li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-unlock\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"unlock\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.unlock)) + \"</span></span></li>\");\n        };\n\n        var STICKABLE_COLUMNS_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-stick\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"stick\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.stick)) + \"</span></span></li><li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-unstick\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"unstick\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.unstick)) + \"</span></span></li>\");\n        };\n\n        var REORDERABLE_COLUMNS_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-move-prev\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"caret-alt-left\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.movePrev)) + \"</span></span></li><li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-move-next\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"caret-alt-right\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.moveNext)) + \"</span></span></li>\");\n        };\n\n        var FILTERABLE_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-filter-item\\\"><span class=\\\"k-link k-filterable\\\">\" + (kendo.ui.icon(\"filter\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.filter)) + \"</span><span class=\\\"k-select\\\">\" + (kendo.ui.icon(\"chevron-right\")) + \"</span></span></li>\");\n        };\n\n        var GROPABLE_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n\n            return (\"<li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-group\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"group\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.groupColumn)) + \"</span></span></li><li id=\\\"\" + (kendo.guid()) + \"\\\" class=\\\"k-item k-listgroup-item k-ungroup\\\"><span class=\\\"k-link\\\">\" + (kendo.ui.icon(\"ungroup\")) + \"<span class=\\\"k-item-title\\\">\" + (encode(messages.ungroupColumn)) + \"</span></span></li>\");\n        };\n\n        var COLUMNS_PARTIAL_MOBILE = function (ref) {\n            var messages = ref.messages;\n            var hasGroups = ref.hasGroups;\n            var columns = ref.columns;\n            var groups = ref.groups;\n            var ns = ref.ns;\n\n            return (\"<li class=\\\"k-columns-item\\\"><span class=\\\"k-list-title\\\">\" + (messages.columnVisibility) + \"</span>\" + (mobileColumnsTemplateIterator(columns, groups, ns, hasGroups)) + \"</li>\");\n        };\n\n        var mobileTemplate = function (ref) {\n            var messages = ref.messages;\n            var title = ref.title;\n            var sortable = ref.sortable;\n            var filterable = ref.filterable;\n            var showColumns = ref.showColumns;\n            var hasLockableColumns = ref.hasLockableColumns;\n            var hasStickableColumns = ref.hasStickableColumns;\n            var hasGroups = ref.hasGroups;\n            var columns = ref.columns;\n            var groups = ref.groups;\n            var ns = ref.ns;\n            var reorderable = ref.reorderable;\n            var groupable = ref.groupable;\n\n            return (\"<div data-\" + ns + \"role=\\\"view\\\" class=\\\"k-grid-column-menu\\\"><div data-\" + ns + \"role=\\\"header\\\" class=\\\"k-header\\\"><a href=\\\"#\\\" class=\\\"k-header-cancel k-link\\\" title=\\\"\" + (messages.cancel) + \"\\\" aria-label=\\\"\" + (messages.cancel) + \"\\\">\" + (kendo.ui.icon(\"chevron-left\")) + \"</a>\" + (encode(messages.settings)) + \"<a href=\\\"#\\\" class=\\\"k-header-done k-link\\\" title=\\\"\" + (messages.done) + \"\\\" aria-label=\\\"\" + (messages.done) + \"\\\">\" + (kendo.ui.icon(\"check\")) + \"</a></div><div class=\\\"k-column-menu\\\"><ul class=\\\"k-reset\\\"><li><span class=\\\"k-list-title\\\">\" + (encode(messages.column)) + \": \" + title + \"</span><ul class=\\\"k-listgroup k-listgroup-flush k-mb-4\\\">\" + (sortable ? SORTABLE_PARTIAL_MOBILE({ messages: messages }) : '') + \"\" + (hasLockableColumns ? LOCKABLE_COLUMNS_PARTIAL_MOBILE({ messages: messages }) : '') + \"\" + (hasStickableColumns ? STICKABLE_COLUMNS_PARTIAL_MOBILE({ messages: messages }) : '') + \"\" + (reorderable ? REORDERABLE_COLUMNS_PARTIAL_MOBILE({ messages: messages }) : '') + \"\" + (filterable ? FILTERABLE_PARTIAL_MOBILE({ messages: messages }) : '') + \"\" + (groupable ? GROPABLE_PARTIAL_MOBILE({ messages: messages }) : '') + \"</ul></li>\" + (showColumns ? COLUMNS_PARTIAL_MOBILE({ messages: messages, hasGroups: hasGroups, columns: columns, groups: groups, ns: ns }) : '') + \"<li class=\\\"k-item k-clear-wrap\\\"><ul class=\\\"k-listgroup k-listgroup-flush\\\"><li class=\\\"k-listgroup-item\\\"><span class=\\\"k-link k-label k-clear\\\" title=\\\"\" + (messages.clear) + \"\\\" aria-label=\\\"\" + (messages.clear) + \"\\\">\" + (encode(messages.clear)) + \"</span></li></ul></li></ul></div></div>\");\n        };\n\n        var MobileMenu = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n\n                Widget.fn.init.call(that, element, options);\n\n                that._createCheckBoxes();\n\n                that.element.on(\"click\" + NS, \"li.k-item:not(.k-separator):not(.k-disabled):not(:has(.k-switch))\", \"_click\");\n            },\n\n            events: [ SELECT ],\n\n            _click: function(e) {\n                var that = this;\n\n                if (!$(e.target).is(\"[type=checkbox]\")) {\n                    e.preventDefault();\n                }\n\n                if ($(e.target).hasClass(\"k-clear\")) {\n                    that._cancelChanges(true);\n\n                    return;\n                }\n\n                if ($(e.target).hasClass(\"k-filterable\")) {\n                    that._cancelChanges(true);\n                    that.trigger(SELECT, { item: e.currentTarget });\n\n                    return;\n                }\n\n                that._updateSelectedItems(e.currentTarget);\n            },\n\n            _updateSelectedItems: function(el) {\n                var that = this;\n                var item = $(el);\n                var state = that.options.columnMenu.view.state || { columns: {} };\n                var id = item.prop(\"id\");\n\n                if (item.hasClass(\"k-filter-item\")) {\n                    return;\n                }\n\n                if (state[id]) {\n                    state[id] = false;\n                } else {\n                    state[id] = true;\n                }\n\n                if (item.hasClass(\"k-sort-asc\") || item.hasClass(\"k-sort-desc\")) {\n                    var dir;\n                    var otherItem;\n                    var otherItemId;\n\n                    if (item.hasClass(\"k-sort-asc\")) {\n                        dir = \"asc\";\n                        otherItem = that.element.find(\".k-sort-desc\");\n                    } else {\n                        dir = \"desc\";\n                        otherItem = that.element.find(\".k-sort-asc\");\n                    }\n\n                    otherItemId = otherItem.prop(\"id\");\n\n                    if (dir === state.initialSort && !item.hasClass(\"k-selected\")) {\n                        state[id] = false;\n                    }\n\n                    if (state[otherItemId]) {\n                        state[otherItemId] = false;\n                    }\n\n                    otherItem.removeClass(ACTIVE);\n                }\n\n                if (item.hasClass(ACTIVE)) {\n                    item.removeClass(ACTIVE);\n                } else {\n                    item.addClass(ACTIVE);\n                }\n            },\n\n            _cancelChanges: function(force) {\n                var that = this;\n                var menu = that.options.columnMenu;\n                var view = menu.view;\n                var state = view.state || { columns: {} };\n                var columns = state.columns;\n\n                that.element.find(\".\" + ACTIVE).removeClass(ACTIVE);\n                menu.refresh();\n\n                if (force) {\n                    var selectedItems = [];\n\n                    for (var key in columns) {\n                        if (columns.hasOwnProperty(key)) {\n                            if (columns[key] === true) {\n                                var item = view.element.find(\"#\" + key);\n\n                                selectedItems.push(item[0]);\n                            }\n                        }\n                    }\n                    // In order to use the columns hide/show validation,\n                    // triggering the Select event must be done backwards\n                    for (var i = selectedItems.length - 1; i >= 0; i--) {\n                        that.trigger(SELECT, { item: selectedItems[i] });\n                    }\n\n                    if (menu.options.hasLockableColumns) {\n                        menu._updateLockedColumns();\n                    }\n\n                    if (menu.options.hasStickableColumns) {\n                        menu._updateStickyColumns();\n                    }\n\n                    if (menu.options.reorderable) {\n                        menu._updateReorderColumns();\n                    }\n\n                    if (menu.options.groupable) {\n                        menu._updateGroupColumns();\n                    }\n                }\n\n                that.options.columnMenu.view.state = { columns: {} };\n            },\n\n            _applyChanges: function() {\n                var that = this;\n                var view = that.options.columnMenu.view;\n                var state = view.state || { columns: {} };\n\n                for (var key in state) {\n                    if (state.hasOwnProperty(key)) {\n                        if (key !== \"initialSort\" && key !== \"columns\" && state[key] === true) {\n                            var item = view.element.find(\"#\" + key);\n\n                            if (item.hasClass(ACTIVE)) {\n                                item.removeClass(ACTIVE);\n                            } else {\n                                item.addClass(ACTIVE);\n                            }\n\n                            that.trigger(SELECT, { item: item[0] });\n                        }\n                    }\n                }\n            },\n\n            _createCheckBoxes: function() {\n                var that = this;\n\n                that.element.find(\".k-columns-item\").find(\"[type='checkbox']\").kendoSwitch({\n                    messages: {\n                        checked: \"\",\n                        unchecked: \"\"\n                    },\n                    change: function(e) {\n                        var item = e.sender.element.closest(\".k-item\");\n                        var state = that.options.columnMenu.view.state || { columns: {} };\n                        var id = item.prop(\"id\");\n\n                        if (state.columns[id]) {\n                            state.columns[id] = false;\n                        } else {\n                            state.columns[id] = true;\n                        }\n\n                        that.trigger(SELECT, { item: item });\n                    }\n                });\n            },\n\n            _destroyCheckBoxes: function() {\n                var that = this;\n                var elements = that.element.find(\".k-columns-item\").find(\"[type='checkbox']\");\n                var switchWidget;\n\n                for (var i = 0; i < elements.length; i++) {\n                    switchWidget = elements.eq(i).data(\"kendoSwitch\");\n\n                    if (switchWidget) {\n                        switchWidget.destroy();\n                    }\n                }\n            },\n\n            close: function() {\n                this.options.pane.navigate(\"\");\n            },\n\n            destroy: function() {\n                var that = this;\n\n                Widget.fn.destroy.call(that);\n\n                that.element.off(NS);\n                that._destroyCheckBoxes();\n            }\n        });\n\n        ui.plugin(ColumnMenu);\n    })(window.kendo.jQuery);\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}