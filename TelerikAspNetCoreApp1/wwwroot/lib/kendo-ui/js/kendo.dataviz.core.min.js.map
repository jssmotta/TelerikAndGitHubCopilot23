{"version":3,"file":"kendo.dataviz.core.min.js","names":["global","factory","exports","module","require","define","amd","globalThis","self","kendodataviz","core","js","this","$","dataviz","services","draw","window","kendo","drawing","util","Path","Group","Class","support","geometry","Rect","Circle","geometryTransform","transform","Segment","deepExtend","isFunction","__common_getter_js","getter","ARC","AXIS_LABEL_CLICK","BLACK","BOTTOM","CENTER","CIRCLE","CROSS","DATE","DEFAULT_FONT","DEFAULT_PRECISION","FORMAT_REGEX","HEIGHT","INSIDE","LEFT","MAX_VALUE","Number","MIN_VALUE","NONE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","OBJECT","OUTSIDE","RIGHT","ROUNDED_RECT","STRING","TOP","TRIANGLE","WHITE","WIDTH","X","Y","constants","COORD_PRECISION","DEFAULT_HEIGHT","DEFAULT_WIDTH","END","HIGHLIGHT_ZINDEX","INHERIT","START","VALUE","DEFAULT_SERIES_OPACITY","isArray","value","Array","addClass","element","classes","classArray","idx","length","className","indexOf","SPACE_REGEX","removeClass","replace","alignPathToPixel","path","offset","options","stroke","defined","width","i","segments","anchor","round","translate","clockwise","angle1","angle2","x","y","isNumber","isNaN","isString","isObject","styleValue","SIZE_STYLES_REGEX","isSizeField","field","test","getSpacing","defaultSpacing","spacing","top","right","bottom","left","current","compile","template","TemplateService","extend","getTemplate","content","grep","array","callback","result","push","register","userImplementation","HashMap","_map","Map","inArray","prototype","get","key","set","TRIGGER","InstanceObserver","init","observer","handlers","handlerMap","trigger","name","args","isDefaultPrevented","callObserver","fnName","arguments$1","arguments","len","apply","requiresHandlers","names","isPlainObject","Object","toString","call","map","browser","ref","append","bindEvents","deg","elementOffset","elementSize","eventCoordinates","eventElement","hashKey","last","limitValue","objectKey","rad","unbindEvents","valueOrDefault","FontLoader","setDefaultOptions","type","proto","fetchFonts","fonts","state","depth","document","keys","forEach","loadFonts","promises","font","load","e","logToConsole","Promise","all","then","preloadFonts","KI_PREFFIX","KSVG_PREFFIX","HTMLBaseIcon","wrapper","addClasses","html","outerHTML","size","themeColor","flip","iconClass","stylingOptions","HTMLFontIcon","fn","currentIconClass","split","find","startsWith","icon","_className","HTMLSvgIcon","innerHTML","iconNameMatch","match","toUpperCase","svgIcons","setAttribute","svgElement","createElementNS","viewBox","appendChild","ICON_TYPES","svg","sparseArrayLimits","arr","min","max","isFinite","Math","undefined","Matrix","matrixRegexp","transformMatrix","getComputedStyle","unit","matrixString","members","parseFloat","Function","bind","concat","parseMatrix","DELETED","LegacySet","values","_index","_values","slice","filter","item","has","add","delete","index","clear","defineProperties","SetWrapper","_set","Set","from","autoMajorUnit","diff","abs","scale","pow","floor","log","relativeValue","Point","clone","equals","point","rotate","center","degrees","theta","cosT","cos","sinT","sin","cx","cy","multiply","a","distanceTo","dx","dy","sqrt","onCircle","angle","radius","radians","Box","x1","y1","x2","y2","box","height","move","wrap","targetBox","wrapPoint","arrayPoint","snapTo","axis","alignTo","targetCenter","shrink","dw","dh","expand","pad","padding","unpad","containsPoint","points","getHash","join","overlaps","rotation","r1","rotatePoint","r2","r3","r4","toRect","hasSize","align","alignment","c1","c2","sizeFunc","Ring","innerRadius","startAngle","middle","setRadius","newRadius","radianAngle","ax","ay","adjacentBox","distance","sector","midAndle","midPoint","hw","hh","sa","ca","p","endAngle","vector","startPoint","startVector","endPoint","endVector","dist","getBBox","angles","allAngles","sort","numericComparer","startAngleIndex","endAngleIndex","b","Sector","ShapeBuilder","createRing","arc","Arc","radiusX","radiusY","fromArc","close","innerEnd","pointAt","lineTo","ChartElement","children","initUserOptions","reflow","currentChild","destroy","animation","getRoot","parent","getSender","service","getService","sender","chartService","translateChildren","childrenCount","renderVisual","visible","createVisual","addVisual","renderChildren","createAnimation","renderComplete","visual","chartElement","appendVisual","zIndex","Animation","create","childVisual","noclip","clipRoot","stackRoot","stackVisual","isStackRoot","pos","visuals","sibling","insert","traverse","child","closest","matched","hasHighlight","highlight","createHighlight","toggleHighlight","show","opacity","this$1$1","customVisual","_highlight","highlightOptions","fill","color","highlightVisualArgs","series","dataItem","category","percentage","runningTotal","total","createGradientOverlay","gradientOptions","overlay","createGradient","closed","elements","supportsPointInactiveOpacity","BoxElement","margin","shrinkToFit","hasSetSize","borderWidth","border","reflowPaddingBox","vAlign","paddingBox","contentBox","hasBox","background","fromRect","visualStyle","dashType","cursor","ShapeElement","pointData","getElement","halfWidth","halfHeight","style","fromPoints","MultiPath","moveTo","rect","borderRadius","setCornerRadius","createElement","visualOptions","RADIAL","GRADIENTS","glass","stops","sharpBevel","roundedBevel","roundedGlass","supportVML","sharpGlass","bubbleShadow","boxDiff","r","s","c","d","f","g","h","boxes","RootElement","rootOptions","parseInt","gradients","currentBox","createBackground","drawingGradient","hashCode","gradient","LinearGradient","usedSpace","currentStops","currentStop","innerRadialStops","RadialGradient","cleanGradients","_observers","FloatElement","_initDirection","vertical","groupAxis","elementAxis","groupSizeField","elementSizeField","groupSpacing","elementSpacing","vSpacing","reflowChildren","ref$1","groupOptions","groups","groupsSize","maxGroupElementsSize","groupsCount","groupsStart","alignStart","groupStart","groupIdx","group","groupElements","elementStart","groupElementsCount","elementSize$$1","groupElementStart","groupSize","elementBox","maxSize","start","groupElementsSize","DrawingText","Text","measureText","baseline","topLeft","rectToBox","origin","bottomRight","ROWS_SPLIT_REGEX","TextBox","data","_initContainer","_autoReflow","rows","String","floatElement","textOptions","container","rowIdx","text","trim","visualFn","_boxReflow","visualBox","visualContext","clippedBBox","normalBox","rotatedBox","rotationTransform","context","getDefaultVisual","boxCenter","Title","_textBox","position","collapseVerticalMargins","items","prevBox","buildTitle","defaultOptions","title","titleOptions","orderTitles","titles","reverse","AxisLabel","format","culture","click","widget","alignRotation","bbox","matrix","rotationMatrix","rotationOrigin","alignAxis","distanceAxis","axisAnchor","transformCopy","topRight","bottomLeft","alignEnd","distanceLeft","distanceRight","alignCenter","Note","fields","render","hide","label","childAlias","noteTemplate","auto","aliasFor","marker","wrapperBox","lineStart","line","linePoints","createLine","defaultVisual","eventArgs","preventDefault","over","out","current$1","parseDate","Date","firstDay","IntlService","implementation","FORMAT_REPLACE_REGEX","FormatService","intlService","_intlService","formatString","intl","localeAuto","locale","placeholderFormat","substring","current$2","ChartService","chart","rtl","Boolean","notify","isPannable","pannable","lock","DomEventsBuilder","events","createAxisTick","tickOptions","tickX","tickY","tick","createAxisGridLine","gridLine","lineEnd","Axis","labels","majorTickSize","minorTickSize","minorTicks","minorTickType","majorTicks","majorTickType","initFields","_deferLabels","createLabels","createTitle","createNotes","labelsRange","skip","labelsCount","normalizeLabelRotation","labelOptions","step","clearLabels","autoRotateLabels","range","labelContext","count","createAxisLabel","clearTitle","lineBox","mirror","axisX","axisY","lineWidth","visualSize","notes","parseNoteValue","note","createPlotBands","gridLinesVisual","gridLines","_gridLines","createTicks","lineGroup","majorUnit","tickLineOptions","tickPositions","skipUnit","getMajorTickPositions","getMinorTickPositions","minorUnit","_alignLines","_lineGroup","getActualTickSize","tickSize","_backgroundPath","plotBands","plotArea","_plotbandGroup","altAxis","pane","axes","slotX","slotY","getSlot","to","createPlotBandLabel","bandRect","textbox","labelTemplate","createGridLines","minorGridLines","majorGridLines","axisLineVisible","linePos","lineOptions","sizeFn","titleSize","space","boxSize","maxLabelSize","labelSize","arrangeTitle","arrangeLabels","arrangeNotes","getLabelsTickPositions","labelTickIndex","labelsBetweenTicks","tickIx","firstTickPosition","nextTickPosition","positionStart","positionEnd","positionLabel","labelBox","labelOffset","labelX","labelY","autoRotateLabelAngle","slotWidth","limit","labelAngle","idx$1","slot","shouldRenderNote","noteSlot","secondAxis","axisLabelText","tmpl","defaultText","maxLabelOffset","end","lastLabel","offsetField","startPosition","endPosition","maxStartOffset","maxEndOffset","startTick","endTick","limitRange","rangeSize","minValue","maxValue","valueRange","seriesMin","seriesMax","lineDir","lineInfo","lineSize","axisDir","axisOrigin","pointOffset","scaleToDelta","rawScale","justified","prepareUserOptions","axisCrossingValue","MILLISECONDS","SECONDS","MINUTES","HOURS","DAYS","WEEKS","MONTHS","YEARS","TIME_PER_SECOND","TIME_PER_MINUTE","TIME_PER_HOUR","TIME_PER_DAY","TIME_PER_WEEK","TIME_PER_MONTH","TIME_PER_YEAR","TIME_PER_UNIT","years","months","weeks","days","hours","minutes","seconds","milliseconds","absoluteDateDiff","getTime","getTimezoneOffset","addTicks","date","ticks","toDate","startOfWeek","weekStartDay","daysToSubtract","day","getDay","adjustDST","getHours","setHours","addDuration","dateValue","getFullYear","getMonth","getDate","roundedDate","setMinutes","tzDiff","addHours","getSeconds","setSeconds","getMilliseconds","setMilliseconds","floorDate","ceilDate","dateComparer","dateDiff","toTime","dateEquals","timeIndex","baseUnit","dateIndex","baseUnitStep","startDate","duration","parseDates","dates","CategoryAxis","_ticks","categoriesHash","copy","categories","srcCategories","definedMin","definedMax","ceil","rangeIndices","totalRange","roundedRange","_seriesMax","scaleOptions","hideOutOfRangeLabels","valueAxis","firstLabel","getTicks","labelTicks","tickIndices","stepSize","indices","getTickPositions","positions","cache","hash","_hash","hasMinor","filterOutOfRangePositions","inRange","startIndex","endIndex","slotBox","singleSlot","p1","p2","limitSlot","limittedSlot","categoryIndex","pointCategoryIndex","startValue","getCategory","totalIndex","categoryAt","categoriesCount","translateRange","delta","scaleRange","limitedRangeIndices","minDelta","maxDelta","zoomRange","totalMin","totalMax","dataItems","hideOutOfRangeNotes","pan","pointsRange","diffStart","diffEnd","rangeMin","rangeMax","_categoriesMap","currentRangeIndices","totalCount","totalLimit","totalRangeIndices","mapCategories","map$$1","COORDINATE_LIMIT","DateLabelFormats","ZERO_THRESHOLD","BASE_UNITS","FIT","categoryRange","clearCache","_range","EmptyDateRange","displayIndices","displayRange","valueIndex","valuesCount","dateAt","DateRange","roundToBaseUnit","lowerEnd","roundToTotalStep","expandEnd","justifyEnd","valueStart","displayStart","next","valueEnd","displayEnd","_indices","minIdx","maxIdx","upper","roundedStep","autoBaseUnit","startUnit","startStep","unitSteps","nextStep","categoryLimits","span","autoBaseUnitSteps","maxDateGroups","autoUnit","autoUnitIx","units","totalUnits","shift","initUnit","toLowerCase","lastCategory","minDiff","categoryIx","defaultBaseUnit","DateCategoryAxis","dataRange","_parsed","panning","userSetBaseUnit","userSetBaseUnitStep","maxDivisions","safeOptions","forecast","_forecast","before","after","divisionOptions","dataRangeOptions","divisionRange","rangeLabels","last$$1","splice","isEmpty","totalLimits","panRange","datesRange","indicesRange","fit","autoBaseUnitStep","maxDiff","rangeDiff","baseUnitIndex","stepIndex","createRangeLabels","arrangeRangeLabels","position$1","autoRotateRangeLabels","hideOverlappingLabels","firstRangeLabel","clip","lastRangeLabel","i$1","rangeLabel","unitFormat","dateFormats","createLabel","rotateLabel","dateRange","limitCoordinate","MIN_VALUE_RANGE$1","NumericAxis","autoOptions","narrowRange","autoMin","narrow","axisMin","autoAxisMin","autoMax","axisMax","autoAxisMax","roundToMajorUnit","remainderClose","autoAxisOptions","totalOptions","totalAxisOptions","userOptions","userSetMin","userSetMax","clearNullValues","userSetLimits","axisOptions","totalMajorUnit","getDivisions","stepValue","divisions","skipStep","getValue","endValue","isValidRange","divisor","ratio","remainder","DateValueAxis","timeUnits","baseUnitTime","userMajorUnit","actualUnits","unitsToAdd","head","tail","applyDefaults","axisCrossingValues","dir","limittedRange","MIN_VALUE_RANGE$2","LogarithmicAxis","base","logMaxRemainder","autoAxisMax$1","autoAxisMin$1","throwNegativeValuesError","initRange","logMin","logMax","floorMax","traverseMajorTicksPositions","tickPosition","traverseMinorTicksPositions","power","minorOptions","_minorIntervalOptions","minorStep","info","Error","GridLinesMixin","majorAngles","minorAngles","skipMajor","majorGridLineAngles","renderMajorGridLines","minorGridLineAngles","renderMinorGridLines","renderGridLines","radiusCallback","circle","gridLineAngles","skipAngles","divs","intervals","altAxisVisible","alpha","intervalAngle","RadarCategoryAxis","reflowLabels","measureBox","skipOption","stepOption","divCount","divAngle","majorIntervals","minorIntervals","interval","minorAngle","minorRadius","band","plotBandSlot","ring","totalDivs","slotAngle","fromValue","slotStart","PolarAxis","instanceOptions","tmp","atan2","PI","RadarNumericAxisMixin","polarAxis","bandStyle","shape","plotBandPoints","innerPoints","outerPoints","innerCircle","outerCircle","radarMajorGridLinePositions","radarMinorGridLinePositions","tickRadius","angleIx","angularDistance","gamma","beta","axisType","RadarNumericAxis","minorSkipStep","RadarLogarithmicAxis","CurveProcessor","process","dataPoints","removeDuplicates","initialControlPoint","lastControlPoint","p0","pop","tangent","controlOut","firstControlPoint","secondControlPoint","controlPoints","tangent$1","cp0","controlPoints$1","cp1","controlPoints$2","tangent$2","invertAxis","lineFunction","calculateFunction","isLine","xField","yField","restrict","switchOrientation","monotonic","isMonotonicByField","numberSign","oldXField","restrictControlPoint","cp","p3","t1","t2","xValue","yValue","controlPoint","Gradients","convertableToNumber","elementStyles","styles","stylesArray","field$1","hasClasses","classNames","interpolateValue","progress","mousewheelDelta","wheelDelta","webkit","devicePixelRatio","detail","renderIcon","iconElement","iconOptions","HTMLElement","predicate","elementScale","parentElement","parentMatrix","multiplyCopy","autoTextColor","Color","isDark","createHashSet","supported","defaultErrorHandler","error","INSERT","DELETE","BACKSPACE","TAB","ENTER","ESC","UP","DOWN","HOME","SPACEBAR","PAGEUP","PAGEDOWN","F2","F10","F12","NUMPAD_PLUS","NUMPAD_MINUS","NUMPAD_DOT","lteDateIndex","sortedDates","low","high","currentDate","jQuery","SASS_THEMES","ExportMixin","skipLegacy","exportVisual","exportSVG","exportImage","exportPDF","imageDataURL","Surface","exportGroup","canvas","css","display","appendTo","body","surface","image","_rootElement","toDataURL","remove","calendars","standard","Point2D","Box2D","mwDelta","originalEvent"],"sources":["kendo.dataviz.core.js"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('kendo.core.js'), require('kendo.drawing.js')) :\n    typeof define === 'function' && define.amd ? define(['kendo.core', 'kendo.drawing'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, (global.kendodataviz = global.kendodataviz || {}, global.kendodataviz.core = global.kendodataviz.core || {}, global.kendodataviz.core.js = factory()));\n})(this, (function () {\n    /***********************************************************************\n     * WARNING: this file is auto-generated.  If you change it directly,\n     * your modifications will eventually be lost.  The source code is in\n     * `kendo-charts` repository, you should make your changes there and\n     * run `src-modules/sync.sh` in this repository.\n     */\n\n    (function($) {\n    /* eslint-disable space-before-blocks, space-before-function-paren, curly */\n\n    window.kendo.dataviz = window.kendo.dataviz || {};\n    var drawing = kendo.drawing;\n    var util = drawing.util;\n    var Path = drawing.Path;\n    var Group = drawing.Group;\n    var Class = kendo.Class;\n    var support = kendo.support;\n    var geometry = kendo.geometry;\n    var Rect = geometry.Rect;\n    var Circle = geometry.Circle;\n    var geometryTransform = geometry.transform;\n    var Segment = geometry.Segment;\n    var dataviz = kendo.dataviz;\n\n    var deepExtend = kendo.deepExtend;\n    var isFunction = kendo.isFunction;\n    var __common_getter_js = kendo.getter;\n\n    var ARC = \"arc\";\n    var AXIS_LABEL_CLICK = \"axisLabelClick\";\n    var BLACK = \"#000\";\n    var BOTTOM = \"bottom\";\n    var CENTER = \"center\";\n    var CIRCLE = \"circle\";\n    var COORD_PRECISION = 3;\n    var CROSS = \"cross\";\n    var DATE = \"date\";\n    var DEFAULT_FONT = \"12px sans-serif\";\n    var DEFAULT_HEIGHT = 400;\n    var DEFAULT_PRECISION = 10;\n    var DEFAULT_WIDTH = 600;\n    var END = \"end\";\n    var FORMAT_REGEX = /\\{\\d+:?/;\n    var HEIGHT = \"height\";\n    var HIGHLIGHT_ZINDEX = 100;\n    var INSIDE = \"inside\";\n    var INHERIT = \"inherit\";\n    var LEFT = \"left\";\n    var MAX_VALUE = Number.MAX_VALUE;\n    var MIN_VALUE = -Number.MAX_VALUE;\n    var NONE = \"none\";\n    var NOTE_CLICK = \"noteClick\";\n    var NOTE_HOVER = \"noteHover\";\n    var NOTE_LEAVE = \"noteLeave\";\n    var OBJECT = \"object\";\n    var OUTSIDE = \"outside\";\n    var RIGHT = \"right\";\n    var ROUNDED_RECT = \"roundedRect\";\n    var START = \"start\";\n    var STRING = \"string\";\n    var TOP = \"top\";\n    var TRIANGLE = \"triangle\";\n    var VALUE = \"value\";\n    var WHITE = \"#fff\";\n    var WIDTH = \"width\";\n    var X = \"x\";\n    var Y = \"y\";\n    var DEFAULT_SERIES_OPACITY = 1;\n\n    var constants = {\n    \tARC: ARC,\n    \tAXIS_LABEL_CLICK: AXIS_LABEL_CLICK,\n    \tBLACK: BLACK,\n    \tBOTTOM: BOTTOM,\n    \tCENTER: CENTER,\n    \tCIRCLE: CIRCLE,\n    \tCOORD_PRECISION: COORD_PRECISION,\n    \tCROSS: CROSS,\n    \tDATE: DATE,\n    \tDEFAULT_FONT: DEFAULT_FONT,\n    \tDEFAULT_HEIGHT: DEFAULT_HEIGHT,\n    \tDEFAULT_PRECISION: DEFAULT_PRECISION,\n    \tDEFAULT_WIDTH: DEFAULT_WIDTH,\n    \tEND: END,\n    \tFORMAT_REGEX: FORMAT_REGEX,\n    \tHEIGHT: HEIGHT,\n    \tHIGHLIGHT_ZINDEX: HIGHLIGHT_ZINDEX,\n    \tINSIDE: INSIDE,\n    \tINHERIT: INHERIT,\n    \tLEFT: LEFT,\n    \tMAX_VALUE: MAX_VALUE,\n    \tMIN_VALUE: MIN_VALUE,\n    \tNONE: NONE,\n    \tNOTE_CLICK: NOTE_CLICK,\n    \tNOTE_HOVER: NOTE_HOVER,\n    \tNOTE_LEAVE: NOTE_LEAVE,\n    \tOBJECT: OBJECT,\n    \tOUTSIDE: OUTSIDE,\n    \tRIGHT: RIGHT,\n    \tROUNDED_RECT: ROUNDED_RECT,\n    \tSTART: START,\n    \tSTRING: STRING,\n    \tTOP: TOP,\n    \tTRIANGLE: TRIANGLE,\n    \tVALUE: VALUE,\n    \tWHITE: WHITE,\n    \tWIDTH: WIDTH,\n    \tX: X,\n    \tY: Y,\n    \tDEFAULT_SERIES_OPACITY: DEFAULT_SERIES_OPACITY\n    };\n\n    function isArray(value) {\n        return Array.isArray(value);\n    }\n\n    function addClass(element, classes) {\n        var classArray = isArray(classes) ? classes : [ classes ];\n\n        for (var idx = 0; idx < classArray.length; idx++) {\n            var className = classArray[idx];\n            if (element.className.indexOf(className) === -1) {\n                element.className += \" \" + className;\n            }\n        }\n    }\n\n    var SPACE_REGEX = /\\s+/g;\n\n    function removeClass(element, className) {\n        if (element && element.className) {\n            element.className = element.className.replace(className, \"\").replace(SPACE_REGEX, \" \");\n        }\n    }\n\n    function alignPathToPixel(path) {\n        var offset = 0.5;\n        if (path.options.stroke && kendo.drawing.util.defined(path.options.stroke.width)) {\n            if (path.options.stroke.width % 2 === 0) {\n                offset = 0;\n            }\n        }\n\n        for (var i = 0; i < path.segments.length; i++) {\n            path.segments[i].anchor().round(0).translate(offset, offset);\n        }\n\n        return path;\n    }\n\n    function clockwise(angle1, angle2) {\n        // True if angle2 is clockwise of angle1\n        // assuming angles grow in clock-wise direction\n        // (as in the pie and radar charts)\n        return -angle1.x * angle2.y + angle1.y * angle2.x < 0;\n    }\n\n    function isNumber(value) {\n        return typeof value === \"number\" && !isNaN(value);\n    }\n\n    function isString(value) {\n        return typeof value === STRING;\n    }\n\n    function convertableToNumber(value) {\n        return isNumber(value) || (isString(value) && isFinite(value));\n    }\n\n    function isObject(value) {\n        return typeof value === \"object\";\n    }\n\n    function styleValue(value) {\n        if (isNumber(value)) {\n            return value + \"px\";\n        }\n        return value;\n    }\n\n    var SIZE_STYLES_REGEX = /width|height|top|left|bottom|right/i;\n\n    function isSizeField(field) {\n        return SIZE_STYLES_REGEX.test(field);\n    }\n\n    function elementStyles(element, styles) {\n        var stylesArray = isString(styles) ? [ styles ] : styles;\n\n        if (isArray(stylesArray)) {\n            var result = {};\n            var style = window.getComputedStyle(element);\n\n            for (var idx = 0; idx < stylesArray.length; idx++) {\n                var field = stylesArray[idx];\n                result[field] = isSizeField(field) ? parseFloat(style[field]) : style[field];\n            }\n\n            return result;\n        } else if (isObject(styles)) {\n            for (var field$1 in styles) {\n                element.style[field$1] = styleValue(styles[field$1]);\n            }\n        }\n    }\n\n    function getSpacing(value, defaultSpacing) {\n        if (defaultSpacing === void 0) { defaultSpacing = 0; }\n\n        var spacing = { top: 0, right: 0, bottom: 0, left: 0 };\n\n        if (typeof(value) === \"number\") {\n            spacing[TOP] = spacing[RIGHT] = spacing[BOTTOM] = spacing[LEFT] = value;\n        } else {\n            spacing[TOP] = value[TOP] || defaultSpacing;\n            spacing[RIGHT] = value[RIGHT] || defaultSpacing;\n            spacing[BOTTOM] = value[BOTTOM] || defaultSpacing;\n            spacing[LEFT] = value[LEFT] || defaultSpacing;\n        }\n\n        return spacing;\n    }\n\n    var current = {\n        compile: function(template) {\n            return template;\n        }\n    };\n\n    var TemplateService = Class.extend({\n\n    });\n\n    TemplateService.register = function(userImplementation) {\n        current = userImplementation;\n    };\n\n    TemplateService.compile = function(template, options) {\n        return current.compile(template, options);\n    };\n\n    function getTemplate(options) {\n        if (options === void 0) { options = {}; }\n\n        var template;\n        if (options.template) {\n            options.template = template = TemplateService.compile(options.template);\n        } else if (isFunction(options.content)) {\n            template = options.content;\n        }\n\n        return template;\n    }\n\n    function grep(array, callback) {\n        var length = array.length;\n        var result = [];\n        for (var idx = 0; idx < length; idx++) {\n            if (callback(array[idx])) {\n                result .push(array[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function hasClasses(element, classNames) {\n        if (element.className) {\n            var names = classNames.split(\" \");\n            for (var idx = 0; idx < names.length; idx++) {\n                if (element.className.indexOf && element.className.indexOf(names[idx]) !== -1) {\n                    return true;\n                }\n            }\n        }\n    }\n\n    // TODO: Remove and replace with Map/WeakMap.\n    var HashMap = function HashMap() {\n        this._map = new Map();\n    };\n\n    HashMap.prototype.get = function get (key) {\n        return this._map.get(key);\n    };\n\n    HashMap.prototype.set = function set (key, value) {\n        this._map.set(key, value);\n    };\n\n    function inArray(value, array) {\n        if (array) {\n            return array.indexOf(value) !== -1;\n        }\n    }\n\n    function interpolateValue(start, end, progress) {\n        return kendo.drawing.util.round(start + (end - start) * progress, COORD_PRECISION);\n    }\n\n    var TRIGGER = 'trigger';\n\n    var InstanceObserver = Class.extend({\n        init: function(observer, handlers) {\n            this.observer = observer;\n            this.handlerMap = deepExtend({}, this.handlerMap, handlers);\n        },\n\n        trigger: function(name, args) {\n            var ref = this;\n            var observer = ref.observer;\n            var handlerMap = ref.handlerMap;\n            var isDefaultPrevented;\n            if (handlerMap[name]) {\n                isDefaultPrevented = this.callObserver(handlerMap[name], args);\n            } else if (observer[TRIGGER]) {\n                isDefaultPrevented = this.callObserver(TRIGGER, name, args);\n            }\n\n            return isDefaultPrevented;\n        },\n\n        callObserver: function(fnName) {\n            var arguments$1 = arguments;\n\n            var args = [], len = arguments.length - 1;\n            while ( len-- > 0 ) { args[ len ] = arguments$1[ len + 1 ]; }\n\n            return this.observer[fnName].apply(this.observer, args);\n        },\n\n        requiresHandlers: function(names) {\n            var this$1$1 = this;\n\n            if (this.observer.requiresHandlers) {\n                return this.observer.requiresHandlers(names);\n            }\n\n            for (var idx = 0; idx < names.length; idx++) {\n                if (this$1$1.handlerMap[names[idx]]) {\n                    return true;\n                }\n            }\n        }\n    });\n\n    function isPlainObject(value) {\n        return Object.prototype.toString.call(value) === \"[object Object]\";\n    }\n\n    function map(array, callback) {\n        var length = array.length;\n        var result = [];\n        for (var idx = 0; idx < length; idx++) {\n            var value = callback(array[idx]);\n            if (kendo.drawing.util.defined(value)) {\n                result.push(value);\n            }\n        }\n        return result;\n    }\n\n    var browser = support.browser || {};\n\n    function mousewheelDelta(e) {\n        var delta = 0;\n\n        if (e.wheelDelta) {\n            delta = -e.wheelDelta / 120;\n\n            if (browser.webkit) {\n                // Webkit browsers scale the delta by twice the device resolution.\n                // Possibly related to https://bugs.webkit.org/show_bug.cgi?id=196339\n                //\n                // Low device resolutions (e.g. zoom-out to 30%) also behave strangely.\n                delta = delta / (2 * Math.max(window.devicePixelRatio, 0.625));\n            }\n        } else if (e.detail) {\n            delta = e.detail / 3;\n        }\n\n        delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n\n        return delta;\n    }\n\n    var ref = kendo.drawing.util;\n    var append = ref.append;\n    var bindEvents = ref.bindEvents;\n    var defined = ref.defined;\n    var deg = ref.deg;\n    var elementOffset = ref.elementOffset;\n    var elementSize = ref.elementSize;\n    var eventCoordinates = ref.eventCoordinates;\n    var eventElement = ref.eventElement;\n    var hashKey = ref.hashKey;\n    var last = ref.last;\n    var limitValue = ref.limitValue;\n    var objectKey = ref.objectKey;\n    var rad = ref.rad;\n    var round = ref.round;\n    var unbindEvents = ref.unbindEvents;\n    var valueOrDefault = ref.valueOrDefault;\n\n    var FontLoader = Class.extend({\n\n    });\n\n    FontLoader.fetchFonts = function(options, fonts, state) {\n        if (state === void 0) { state = { depth: 0 }; }\n\n        var MAX_DEPTH = 5;\n\n        if (!options || state.depth > MAX_DEPTH || !document.fonts) {\n            return;\n        }\n\n        Object.keys(options).forEach(function(key) {\n            var value = options[key];\n            if (key === \"dataSource\" || key[0] === \"$\" || !value) {\n                return;\n            }\n\n            if (key === \"font\") {\n                fonts.push(value);\n            } else if (typeof value === \"object\") {\n                state.depth++;\n                FontLoader.fetchFonts(value, fonts, state);\n                state.depth--;\n            }\n        });\n    };\n\n    FontLoader.loadFonts = function(fonts, callback) {\n        var promises = [];\n\n        if (fonts.length > 0 && document.fonts) {\n            try {\n                promises = fonts.map(function(font) {\n                    return document.fonts.load(font);\n                });\n            } catch (e) {\n                // Silence font-loading errors\n                kendo.logToConsole(e);\n            }\n\n            Promise.all(promises).then(callback, callback);\n        } else {\n            callback();\n        }\n    };\n\n    FontLoader.preloadFonts = function(options, callback) {\n        var fonts = [];\n        FontLoader.fetchFonts(options, fonts);\n\n        FontLoader.loadFonts(fonts, callback);\n    };\n\n    function setDefaultOptions(type, options) {\n        var proto = type.prototype;\n        if (proto.options) {\n            proto.options = deepExtend({}, proto.options, options);\n        } else {\n            proto.options = options;\n        }\n    }\n\n    var KICON = 'k-icon';\n    var KI_PREFFIX = 'k-i-';\n    var KSVGICON = 'k-svg-icon';\n    var KSVG_PREFFIX = 'k-svg-i-';\n\n    var HTMLBaseIcon = Class.extend({\n        init: function(element, options) {\n            this.element = element;\n            this.options = deepExtend({}, this.options, options);\n\n            this.wrapper();\n        },\n\n        wrapper: function() {\n            this.addClasses();\n        },\n\n        addClasses: function() {\n        },\n\n        html: function() {\n            return this.element.outerHTML;\n        }\n    });\n\n    setDefaultOptions(HTMLBaseIcon, {\n        name: '',\n        size: 'none',\n        themeColor: 'none',\n        flip: 'default',\n        iconClass: '',\n        stylingOptions: [ 'size', 'themeColor', 'fill' ]\n    });\n\n    var HTMLFontIcon = HTMLBaseIcon.extend({\n        init: function(element, options) {\n            HTMLBaseIcon.fn.init.call(this, element, options);\n        },\n\n        wrapper: function() {\n            // Find if there is an existing k-i- class appended to the element.\n            var currentIconClass = this.element.className.split(\" \").find(function (x) { return x.startsWith(KI_PREFFIX); });\n            var className = this.options.icon ? (\"\" + (this.options.icon.startsWith(KI_PREFFIX) ? \"\" : KI_PREFFIX) + (this.options.icon)) : \"\";\n\n            this._className = className;\n\n            addClass(this.element, KICON);\n            removeClass(this.element, currentIconClass); // Remove any existing icons.\n            addClass(this.element, className);\n            addClass(this.element, this.options.iconClass || '');\n\n            HTMLBaseIcon.fn.wrapper.call(this);\n        }\n    });\n\n    setDefaultOptions(HTMLFontIcon, {\n        name: 'HTMLFontIcon',\n        icon: null\n    });\n\n    var HTMLSvgIcon = HTMLBaseIcon.extend({\n        init: function(element, options) {\n            // Ensure that the inner contents of the wrapping span element are always removed for re-rendering purposes.\n            element.innerHTML = \"\";\n\n            HTMLBaseIcon.fn.init.call(this, element, options);\n        },\n\n        wrapper: function() {\n            var icon = this.options.icon;\n            var iconClass = this.options.iconClass;\n            var currentIconClass = this.element.className.split(\" \").find(function (x) { return x.startsWith(KSVG_PREFFIX); });\n\n            if (!icon && iconClass) {\n                // match k-i-(some-icon-name)\n                var regex = /k-i-(\\w+(?:-\\w+)*)/;\n                var iconNameMatch = iconClass.match(regex);\n                if (iconNameMatch) {\n                    icon = iconNameMatch[1];\n                    iconClass = iconClass.replace(iconNameMatch[0], \"\");\n                }\n            }\n\n            if (isString(icon)) {\n                icon = icon.replace(\"k-i-\", \"\").replace(/-./g, function (x) { return x[1].toUpperCase(); });\n                icon = this.options.svgIcons[icon] || this.options.svgIcons[(icon + \"Icon\")];\n            }\n\n            var className = icon && icon.name ? (\"\" + KSVG_PREFFIX + (icon.name)) : \"\";\n            this._className = className;\n\n            addClass(this.element, KSVGICON);\n            removeClass(this.element, currentIconClass);\n            addClass(this.element, className);\n            addClass(this.element, iconClass || \"\");\n            this.element.setAttribute(\"aria-hidden\", \"true\");\n\n            if (icon && isPlainObject(icon)) {\n                var svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n                svgElement.setAttribute(\"viewBox\", icon.viewBox || \"\");\n                svgElement.setAttribute(\"focusable\", \"false\");\n                svgElement.innerHTML = icon.content || \"\";\n\n                this.element.appendChild(svgElement);\n            }\n\n            HTMLBaseIcon.fn.wrapper.call(this);\n        }\n    });\n\n    setDefaultOptions(HTMLSvgIcon, {\n        name: 'HTMLSvgIcon',\n        icon: null,\n        svgIcons: {}\n    });\n\n    var ICON_TYPES = {\n        'svg': HTMLSvgIcon,\n        'font': HTMLFontIcon\n    };\n\n    function renderIcon(iconElement, iconOptions) {\n        var element = iconElement;\n        var options = iconOptions;\n\n        if (!element\n            || (isObject(element) && !(element instanceof HTMLElement))\n            || isString(element)) {\n            options = element;\n            element = document.createElement(\"span\");\n        }\n\n        if (isString(options)) {\n            options = {\n                icon: options\n            };\n        }\n\n        if (!options.type) {\n            options.type = 'svg';\n        }\n\n        if (!ICON_TYPES[options.type]) {\n            return null;\n        }\n\n        return (new ICON_TYPES[options.type](element, options).html());\n    }\n\n    function sparseArrayLimits(arr) {\n        var min = MAX_VALUE;\n        var max = MIN_VALUE;\n\n        for (var idx = 0, length = arr.length; idx < length; idx++) {\n            var value = arr[idx];\n            if (value !== null && isFinite(value)) {\n                min = Math.min(min, value);\n                max = Math.max(max, value);\n            }\n        }\n\n        return {\n            min: min === MAX_VALUE ? undefined : min,\n            max: max === MIN_VALUE ? undefined : max\n        };\n    }\n\n    function find(array, predicate) {\n        for (var i = 0; i < array.length; i++) {\n            var item = array[i];\n            if (predicate(item, i, array)) {\n                return item;\n            }\n        }\n    }\n\n    var Matrix = geometry.Matrix;\n    var matrixRegexp = /matrix\\((.*)\\)/;\n\n    function parseMatrix(matrixString) {\n        var match = matrixString.match(matrixRegexp);\n        if (match === null || match.length !== 2) {\n            return Matrix.unit();\n        }\n\n        var members = match[1].split(',').map(function (x) { return parseFloat(x); });\n        return new (Function.prototype.bind.apply( Matrix, [ null ].concat( members) ));\n    }\n\n    function transformMatrix(element) {\n        var transform = getComputedStyle(element).transform;\n\n        if (transform === 'none') {\n            return Matrix.unit();\n        }\n\n        return parseMatrix(transform);\n    }\n\n    function elementScale(element) {\n        if (!element) {\n            return Matrix.unit();\n        }\n\n        var matrix = transformMatrix(element);\n        var parent = element.parentElement;\n        while (parent) {\n            var parentMatrix = transformMatrix(parent);\n            matrix = matrix.multiplyCopy(parentMatrix);\n            parent = parent.parentElement;\n        }\n\n        matrix.b = matrix.c = matrix.e = matrix.f = 0;\n        return matrix;\n    }\n\n    function autoTextColor(color) {\n        var isDark = new kendo.Color(color).isDark();\n        if (isDark) {\n            return WHITE;\n        }\n\n        return BLACK;\n    }\n\n    var DELETED = {};\n\n    var LegacySet = Class.extend({\n        init: function(values) {\n            var this$1$1 = this;\n\n            this._index = {};\n            this._values = values ? values.slice(0) : [];\n\n            for (var i = 0; i < this._values.length; i++) {\n                this$1$1._index[this$1$1._values[i]] = i;\n            }\n        },\n\n        values: function() {\n            return this._values.filter(function (item) { return item !== DELETED; });\n        },\n\n        has: function(value) {\n            return this._index[value] !== undefined;\n        },\n\n        add: function(value) {\n            if (!this.has(value)) {\n                this._index[value] = this._values.length;\n                this._values.push(value);\n            }\n        },\n\n        delete: function(value) {\n            var index = this._index[value];\n            if (index !== undefined) {\n                this._values[index] = DELETED;\n                delete this._index[value];\n            }\n        },\n\n        clear: function() {\n            this._index = {};\n            this._values = [];\n        }\n    });\n\n    if (Object.defineProperties) {\n        Object.defineProperties(LegacySet.fn, {\n            size: {\n                get: function() {\n                    return this._values.length;\n                }\n            }\n        });\n    }\n\n    var SetWrapper = Class.extend({\n        init: function(values) {\n            this._set = new Set(values);\n        },\n\n        values: function() {\n            return Array.from(this._set);\n        },\n\n        has: function(value) {\n            return this._set.has(value);\n        },\n\n        add: function(value) {\n            this._set.add(value);\n        },\n\n        delete: function(value) {\n            this._set.delete(value);\n        },\n\n        clear: function() {\n            this._set.clear();\n        }\n    });\n\n    if (Object.defineProperties) {\n        Object.defineProperties(SetWrapper.fn, {\n            size: {\n                get: function() {\n                    return this._set.size;\n                }\n            }\n        });\n    }\n\n    // TODO: Drop LegacySet when removing support for IE10\n    var supportsSet = function () {\n        var supported = false;\n\n        if (typeof Set === 'function') {\n            var set = new Set([1]);\n            supported = set.has(1);\n        }\n\n        return supported;\n    };\n\n    function createHashSet(values) {\n        if (supportsSet()) {\n            return new SetWrapper(values);\n        }\n\n        return new LegacySet(values);\n    }\n\n    function defaultErrorHandler(error) {\n        throw error;\n    }\n\n    var keys = {\n        INSERT: 45,\n        DELETE: 46,\n        BACKSPACE: 8,\n        TAB: 9,\n        ENTER: 13,\n        ESC: 27,\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        DOWN: 40,\n        END: 35,\n        HOME: 36,\n        SPACEBAR: 32,\n        PAGEUP: 33,\n        PAGEDOWN: 34,\n        F2: 113,\n        F10: 121,\n        F12: 123,\n        NUMPAD_PLUS: 107,\n        NUMPAD_MINUS: 109,\n        NUMPAD_DOT: 110\n    };\n\n    function autoMajorUnit(min, max) {\n        var diff = round(max - min, DEFAULT_PRECISION - 1);\n\n        if (diff === 0) {\n            if (max === 0) {\n                return 0.1;\n            }\n\n            diff = Math.abs(max);\n        }\n\n        var scale = Math.pow(10, Math.floor(Math.log(diff) / Math.log(10)));\n        var relativeValue = round((diff / scale), DEFAULT_PRECISION);\n        var scaleMultiplier = 1;\n\n        if (relativeValue < 1.904762) {\n            scaleMultiplier = 0.2;\n        } else if (relativeValue < 4.761904) {\n            scaleMultiplier = 0.5;\n        } else if (relativeValue < 9.523809) {\n            scaleMultiplier = 1;\n        } else {\n            scaleMultiplier = 2;\n        }\n\n        return round(scale * scaleMultiplier, DEFAULT_PRECISION);\n    }\n\n    var Point = Class.extend({\n        init: function(x, y) {\n\n            this.x = x || 0;\n            this.y = y || 0;\n        },\n\n        clone: function() {\n            return new Point(this.x, this.y);\n        },\n\n        equals: function(point) {\n            return point && this.x === point.x && this.y === point.y;\n        },\n\n        rotate: function(center, degrees) {\n            var theta = rad(degrees);\n            var cosT = Math.cos(theta);\n            var sinT = Math.sin(theta);\n            var cx = center.x;\n            var cy = center.y;\n            var ref = this;\n            var x = ref.x;\n            var y = ref.y;\n\n            this.x = round(\n                cx + (x - cx) * cosT + (y - cy) * sinT,\n                COORD_PRECISION\n            );\n\n            this.y = round(\n                cy + (y - cy) * cosT - (x - cx) * sinT,\n                COORD_PRECISION\n            );\n\n            return this;\n        },\n\n        multiply: function(a) {\n\n            this.x *= a;\n            this.y *= a;\n\n            return this;\n        },\n\n        distanceTo: function(point) {\n            var dx = this.x - point.x;\n            var dy = this.y - point.y;\n\n            return Math.sqrt(dx * dx + dy * dy);\n        }\n    });\n\n    Point.onCircle = function(center, angle, radius) {\n        var radians = rad(angle);\n\n        return new Point(\n            center.x - radius * Math.cos(radians),\n            center.y - radius * Math.sin(radians)\n        );\n    };\n\n    var Box = Class.extend({\n        init: function(x1, y1, x2, y2) {\n\n            this.x1 = x1 || 0;\n            this.y1 = y1 || 0;\n            this.x2 = x2 || 0;\n            this.y2 = y2 || 0;\n        },\n\n        equals: function(box) {\n            return this.x1 === box.x1 && this.x2 === box.x2 &&\n                this.y1 === box.y1 && this.y2 === box.y2;\n        },\n\n        width: function() {\n            return this.x2 - this.x1;\n        },\n\n        height: function() {\n            return this.y2 - this.y1;\n        },\n\n        translate: function(dx, dy) {\n            this.x1 += dx;\n            this.x2 += dx;\n            this.y1 += dy;\n            this.y2 += dy;\n\n            return this;\n        },\n\n        move: function(x, y) {\n            var height = this.height();\n            var width = this.width();\n\n            if (defined(x)) {\n                this.x1 = x;\n                this.x2 = this.x1 + width;\n            }\n\n            if (defined(y)) {\n                this.y1 = y;\n                this.y2 = this.y1 + height;\n            }\n\n            return this;\n        },\n\n        wrap: function(targetBox) {\n            this.x1 = Math.min(this.x1, targetBox.x1);\n            this.y1 = Math.min(this.y1, targetBox.y1);\n            this.x2 = Math.max(this.x2, targetBox.x2);\n            this.y2 = Math.max(this.y2, targetBox.y2);\n\n            return this;\n        },\n\n        wrapPoint: function(point) {\n            var arrayPoint = isArray(point);\n            var x = arrayPoint ? point[0] : point.x;\n            var y = arrayPoint ? point[1] : point.y;\n            this.wrap(new Box(x, y, x, y));\n\n            return this;\n        },\n\n        snapTo: function(targetBox, axis) {\n\n            if (axis === X || !axis) {\n                this.x1 = targetBox.x1;\n                this.x2 = targetBox.x2;\n            }\n\n            if (axis === Y || !axis) {\n                this.y1 = targetBox.y1;\n                this.y2 = targetBox.y2;\n            }\n\n            return this;\n        },\n\n        alignTo: function(targetBox, anchor) {\n            var height = this.height();\n            var width = this.width();\n            var axis = anchor === TOP || anchor === BOTTOM ? Y : X;\n            var offset = axis === Y ? height : width;\n\n            if (anchor === CENTER) {\n                var targetCenter = targetBox.center();\n                var center = this.center();\n\n                this.x1 += targetCenter.x - center.x;\n                this.y1 += targetCenter.y - center.y;\n            } else if (anchor === TOP || anchor === LEFT) {\n                this[axis + 1] = targetBox[axis + 1] - offset;\n            } else {\n                this[axis + 1] = targetBox[axis + 2];\n            }\n\n            this.x2 = this.x1 + width;\n            this.y2 = this.y1 + height;\n\n            return this;\n        },\n\n        shrink: function(dw, dh) {\n\n            this.x2 -= dw;\n            this.y2 -= dh;\n\n            return this;\n        },\n\n        expand: function(dw, dh) {\n            this.shrink(-dw, -dh);\n            return this;\n        },\n\n        pad: function(padding) {\n            var spacing = getSpacing(padding);\n\n            this.x1 -= spacing.left;\n            this.x2 += spacing.right;\n            this.y1 -= spacing.top;\n            this.y2 += spacing.bottom;\n\n            return this;\n        },\n\n        unpad: function(padding) {\n            var spacing = getSpacing(padding);\n\n            spacing.left = -spacing.left;\n            spacing.top = -spacing.top;\n            spacing.right = -spacing.right;\n            spacing.bottom = -spacing.bottom;\n\n            return this.pad(spacing);\n        },\n\n        clone: function() {\n            return new Box(this.x1, this.y1, this.x2, this.y2);\n        },\n\n        center: function() {\n            return new Point(\n                this.x1 + this.width() / 2,\n                this.y1 + this.height() / 2\n            );\n        },\n\n        containsPoint: function(point) {\n\n            return point.x >= this.x1 && point.x <= this.x2 &&\n                   point.y >= this.y1 && point.y <= this.y2;\n        },\n\n        points: function() {\n            return [\n                new Point(this.x1, this.y1),\n                new Point(this.x2, this.y1),\n                new Point(this.x2, this.y2),\n                new Point(this.x1, this.y2)\n            ];\n        },\n\n        getHash: function() {\n            return [ this.x1, this.y1, this.x2, this.y2 ].join(\",\");\n        },\n\n        overlaps: function(box) {\n            return !(box.y2 < this.y1 || this.y2 < box.y1 || box.x2 < this.x1 || this.x2 < box.x1);\n        },\n\n        rotate: function(rotation) {\n            var width = this.width();\n            var height = this.height();\n            var ref = this.center();\n            var cx = ref.x;\n            var cy = ref.y;\n\n            var r1 = rotatePoint(0, 0, cx, cy, rotation);\n            var r2 = rotatePoint(width, 0, cx, cy, rotation);\n            var r3 = rotatePoint(width, height, cx, cy, rotation);\n            var r4 = rotatePoint(0, height, cx, cy, rotation);\n\n            width = Math.max(r1.x, r2.x, r3.x, r4.x) - Math.min(r1.x, r2.x, r3.x, r4.x);\n            height = Math.max(r1.y, r2.y, r3.y, r4.y) - Math.min(r1.y, r2.y, r3.y, r4.y);\n\n            this.x2 = this.x1 + width;\n            this.y2 = this.y1 + height;\n\n            return this;\n        },\n\n        toRect: function() {\n            return new Rect([ this.x1, this.y1 ], [ this.width(), this.height() ]);\n        },\n\n        hasSize: function() {\n            return this.width() !== 0 && this.height() !== 0;\n        },\n\n        align: function(targetBox, axis, alignment) {\n            var c1 = axis + 1;\n            var c2 = axis + 2;\n            var sizeFunc = axis === X ? WIDTH : HEIGHT;\n            var size = this[sizeFunc]();\n\n            if (inArray(alignment, [ LEFT, TOP ])) {\n                this[c1] = targetBox[c1];\n                this[c2] = this[c1] + size;\n            } else if (inArray(alignment, [ RIGHT, BOTTOM ])) {\n                this[c2] = targetBox[c2];\n                this[c1] = this[c2] - size;\n            } else if (alignment === CENTER) {\n                this[c1] = targetBox[c1] + (targetBox[sizeFunc]() - size) / 2;\n                this[c2] = this[c1] + size;\n            }\n        }\n    });\n\n    function rotatePoint(x, y, cx, cy, angle) {\n        var theta = rad(angle);\n\n        return new Point(\n            cx + (x - cx) * Math.cos(theta) + (y - cy) * Math.sin(theta),\n            cy - (x - cx) * Math.sin(theta) + (y - cy) * Math.cos(theta)\n        );\n    }\n\n    var Ring = Class.extend({\n        init: function(center, innerRadius, radius, startAngle, angle) {\n\n            this.center = center;\n            this.innerRadius = innerRadius;\n            this.radius = radius;\n            this.startAngle = startAngle;\n            this.angle = angle;\n        },\n\n        clone: function() {\n            return new Ring(this.center, this.innerRadius, this.radius, this.startAngle, this.angle);\n        },\n\n        middle: function() {\n            return this.startAngle + this.angle / 2;\n        },\n\n        setRadius: function(newRadius, innerRadius) {\n            if (innerRadius) {\n                this.innerRadius = newRadius;\n            } else {\n                this.radius = newRadius;\n            }\n\n            return this;\n        },\n\n        point: function(angle, innerRadius) {\n            var radianAngle = rad(angle);\n            var ax = Math.cos(radianAngle);\n            var ay = Math.sin(radianAngle);\n            var radius = innerRadius ? this.innerRadius : this.radius;\n            var x = round(this.center.x - (ax * radius), COORD_PRECISION);\n            var y = round(this.center.y - (ay * radius), COORD_PRECISION);\n\n            return new Point(x, y);\n        },\n\n        adjacentBox: function(distance, width, height) {\n            var sector = this.clone().expand(distance);\n            var midAndle = sector.middle();\n            var midPoint = sector.point(midAndle);\n            var hw = width / 2;\n            var hh = height / 2;\n            var sa = Math.sin(rad(midAndle));\n            var ca = Math.cos(rad(midAndle));\n            var x = midPoint.x - hw;\n            var y = midPoint.y - hh;\n\n            if (Math.abs(sa) < 0.9) {\n                x += hw * -ca / Math.abs(ca);\n            }\n\n            if (Math.abs(ca) < 0.9) {\n                y += hh * -sa / Math.abs(sa);\n            }\n\n            return new Box(x, y, x + width, y + height);\n        },\n\n        containsPoint: function(p) {\n            var center = this.center;\n            var innerRadius = this.innerRadius;\n            var radius = this.radius;\n            var startAngle = this.startAngle;\n            var endAngle = this.startAngle + this.angle;\n            var dx = p.x - center.x;\n            var dy = p.y - center.y;\n            var vector = new Point(dx, dy);\n            var startPoint = this.point(startAngle);\n            var startVector = new Point(startPoint.x - center.x, startPoint.y - center.y);\n            var endPoint = this.point(endAngle);\n            var endVector = new Point(endPoint.x - center.x, endPoint.y - center.y);\n            var dist = round(dx * dx + dy * dy, COORD_PRECISION);\n\n            return (startVector.equals(vector) || clockwise(startVector, vector)) &&\n                   !clockwise(endVector, vector) &&\n                   dist >= innerRadius * innerRadius && dist <= radius * radius;\n        },\n\n        getBBox: function() {\n            var this$1$1 = this;\n\n            var box = new Box(MAX_VALUE, MAX_VALUE, MIN_VALUE, MIN_VALUE);\n            var startAngle = round(this.startAngle % 360);\n            var endAngle = round((startAngle + this.angle) % 360);\n            var innerRadius = this.innerRadius;\n            var allAngles = [ 0, 90, 180, 270, startAngle, endAngle ].sort(numericComparer);\n            var startAngleIndex = allAngles.indexOf(startAngle);\n            var endAngleIndex = allAngles.indexOf(endAngle);\n            var angles;\n\n            if (startAngle === endAngle) {\n                angles = allAngles;\n            } else {\n                if (startAngleIndex < endAngleIndex) {\n                    angles = allAngles.slice(startAngleIndex, endAngleIndex + 1);\n                } else {\n                    angles = [].concat(\n                        allAngles.slice(0, endAngleIndex + 1),\n                        allAngles.slice(startAngleIndex, allAngles.length)\n                    );\n                }\n            }\n\n            for (var i = 0; i < angles.length; i++) {\n                var point = this$1$1.point(angles[i]);\n                box.wrapPoint(point);\n                box.wrapPoint(point, innerRadius);\n            }\n\n            if (!innerRadius) {\n                box.wrapPoint(this.center);\n            }\n\n            return box;\n        },\n\n        expand: function(value) {\n            this.radius += value;\n            return this;\n        }\n    });\n\n    function numericComparer(a, b) {\n        return a - b;\n    }\n\n    var Sector = Ring.extend({\n        init: function(center, radius, startAngle, angle) {\n            Ring.fn.init.call(this, center, 0, radius, startAngle, angle);\n        },\n\n        expand: function(value) {\n            return Ring.fn.expand.call(this, value);\n        },\n\n        clone: function() {\n            return new Sector(this.center, this.radius, this.startAngle, this.angle);\n        },\n\n        setRadius: function(newRadius) {\n            this.radius = newRadius;\n\n            return this;\n        }\n    });\n\n    var DIRECTION_ANGLE = 0.001; //any value that will make the endAngle bigger than the start angle will work here.\n\n    var ShapeBuilder = Class.extend({\n        createRing: function(sector, options) {\n            var startAngle = sector.startAngle + 180;\n            var endAngle = sector.angle + startAngle;\n\n            //required in order to avoid reversing the arc direction in cases like 0.000000000000001 + 100 === 100\n            if (sector.angle > 0 && startAngle === endAngle) {\n                endAngle += DIRECTION_ANGLE;\n            }\n\n            var center = new geometry.Point(sector.center.x, sector.center.y);\n            var radius = Math.max(sector.radius, 0);\n            var innerRadius = Math.max(sector.innerRadius, 0);\n            var arc = new geometry.Arc(center, {\n                startAngle: startAngle,\n                endAngle: endAngle,\n                radiusX: radius,\n                radiusY: radius\n            });\n            var path = Path.fromArc(arc, options).close();\n\n            if (innerRadius) {\n                arc.radiusX = arc.radiusY = innerRadius;\n                var innerEnd = arc.pointAt(endAngle);\n                path.lineTo(innerEnd.x, innerEnd.y);\n                path.arc(endAngle, startAngle, innerRadius, innerRadius, true);\n            } else {\n                path.lineTo(center.x, center.y);\n            }\n\n            return path;\n        }\n    });\n\n    ShapeBuilder.current = new ShapeBuilder();\n\n    var ChartElement = Class.extend({\n        init: function(options) {\n\n            this.children = [];\n\n            this.options = deepExtend({}, this.options, this.initUserOptions(options));\n        },\n\n        initUserOptions: function(options) {\n            return options;\n        },\n\n        reflow: function(targetBox) {\n            var children = this.children;\n            var box;\n\n            for (var i = 0; i < children.length; i++) {\n                var currentChild = children[i];\n                currentChild.reflow(targetBox);\n\n                box = box ? box.wrap(currentChild.box) : currentChild.box.clone();\n            }\n\n            this.box = box || targetBox;\n        },\n\n        destroy: function() {\n            var children = this.children;\n\n            if (this.animation) {\n                this.animation.destroy();\n            }\n\n            for (var i = 0; i < children.length; i++) {\n                children[i].destroy();\n            }\n        },\n\n        getRoot: function() {\n            var parent = this.parent;\n\n            return parent ? parent.getRoot() : null;\n        },\n\n        getSender: function() {\n            var service = this.getService();\n            if (service) {\n                return service.sender;\n            }\n        },\n\n        getService: function() {\n            var element = this;\n            while (element) {\n                if (element.chartService) {\n                    return element.chartService;\n                }\n                element = element.parent;\n            }\n        },\n\n        translateChildren: function(dx, dy) {\n            var children = this.children;\n            var childrenCount = children.length;\n\n            for (var i = 0; i < childrenCount; i++) {\n                children[i].box.translate(dx, dy);\n            }\n        },\n\n        append: function() {\n            var arguments$1 = arguments;\n            var this$1$1 = this;\n\n            for (var i = 0; i < arguments.length; i++) {\n                var item = arguments$1[i];\n                this$1$1.children.push(item);\n                item.parent = this$1$1;\n            }\n        },\n\n        renderVisual: function() {\n            if (this.options.visible === false) {\n                return;\n            }\n\n            this.createVisual();\n\n            this.addVisual();\n\n            this.renderChildren();\n\n            this.createAnimation();\n            this.renderComplete();\n        },\n\n        addVisual: function() {\n            if (this.visual) {\n                this.visual.chartElement = this;\n\n                if (this.parent) {\n                    this.parent.appendVisual(this.visual);\n                }\n            }\n        },\n\n        renderChildren: function() {\n            var children = this.children;\n            var length = children.length;\n            for (var i = 0; i < length; i++) {\n                children[i].renderVisual();\n            }\n        },\n\n        createVisual: function() {\n            this.visual = new Group({\n                zIndex: this.options.zIndex,\n                visible: valueOrDefault(this.options.visible, true)\n            });\n        },\n\n        createAnimation: function() {\n            if (this.visual && this.options.animation) {\n                this.animation = drawing.Animation.create(\n                    this.visual, this.options.animation\n                );\n            }\n        },\n\n        appendVisual: function(childVisual) {\n            if (!childVisual.chartElement) {\n                childVisual.chartElement = this;\n            }\n\n            if (childVisual.options.noclip) {\n                this.clipRoot().visual.append(childVisual);\n            } else if (defined(childVisual.options.zIndex)) {\n                this.stackRoot().stackVisual(childVisual);\n            } else if (this.isStackRoot) {\n                this.stackVisual(childVisual);\n            } else if (this.visual) {\n                this.visual.append(childVisual);\n            } else {\n                // Allow chart elements without visuals to\n                // pass through child visuals\n                this.parent.appendVisual(childVisual);\n            }\n        },\n\n        clipRoot: function() {\n            if (this.parent) {\n                return this.parent.clipRoot();\n            }\n\n            return this;\n        },\n\n        stackRoot: function() {\n            if (this.parent) {\n                return this.parent.stackRoot();\n            }\n\n            return this;\n        },\n\n        stackVisual: function(childVisual) {\n            var zIndex = childVisual.options.zIndex || 0;\n            var visuals = this.visual.children;\n            var length = visuals.length;\n            var pos;\n\n            for (pos = 0; pos < length; pos++) {\n                var sibling = visuals[pos];\n                var here = valueOrDefault(sibling.options.zIndex, 0);\n                if (here > zIndex) {\n                    break;\n                }\n            }\n\n            this.visual.insert(pos, childVisual);\n        },\n\n        traverse: function(callback) {\n            var children = this.children;\n            var length = children.length;\n\n            for (var i = 0; i < length; i++) {\n                var child = children[i];\n\n                callback(child);\n                if (child.traverse) {\n                    child.traverse(callback);\n                }\n            }\n        },\n\n        closest: function(match) {\n            var element = this;\n            var matched = false;\n\n            while (element && !matched) {\n                matched = match(element);\n\n                if (!matched) {\n                    element = element.parent;\n                }\n            }\n\n            if (matched) {\n                return element;\n            }\n        },\n\n        renderComplete: function() {},\n\n        hasHighlight: function() {\n            var options = (this.options || {}).highlight;\n            return !(!this.createHighlight || (options && options.visible === false) || this.visible === false);\n        },\n\n        toggleHighlight: function(show, opacity) {\n            var this$1$1 = this;\n\n            var options = (this.options || {}).highlight || {};\n            var customVisual = options.visual;\n            var highlight = this._highlight;\n\n            if (!highlight) {\n                var highlightOptions = {\n                    fill: {\n                        color: WHITE,\n                        opacity: opacity || 0.2\n                    },\n                    stroke: {\n                        color: WHITE,\n                        width: 1,\n                        opacity: opacity || 0.2\n                    }\n                };\n\n                if (customVisual) {\n                    highlight = this._highlight = customVisual(\n                        $.extend(this.highlightVisualArgs(), {\n                            createVisual: function () { return this$1$1.createHighlight(highlightOptions); },\n                            sender: this.getSender(),\n                            series: this.series,\n                            dataItem: this.dataItem,\n                            category: this.category,\n                            value: this.value,\n                            percentage: this.percentage,\n                            runningTotal: this.runningTotal,\n                            total: this.total\n                        }\n                    ));\n\n                    if (!highlight) {\n                        return;\n                    }\n                } else {\n                    highlight = this._highlight = this.createHighlight(highlightOptions);\n                }\n\n                if (!defined(highlight.options.zIndex)) {\n                    highlight.options.zIndex = valueOrDefault(options.zIndex, this.options.zIndex);\n                }\n\n                this.appendVisual(highlight);\n            }\n\n            highlight.visible(show);\n        },\n\n        createGradientOverlay: function(element, options, gradientOptions) {\n            var overlay = new Path($.extend({\n                stroke: {\n                    color: \"none\"\n                },\n                fill: this.createGradient(gradientOptions),\n                closed: element.options.closed\n            }, options));\n\n            overlay.segments.elements(element.segments.elements());\n\n            return overlay;\n        },\n\n        createGradient: function(options) {\n            if (this.parent) {\n                return this.parent.createGradient(options);\n            }\n        },\n\n        supportsPointInactiveOpacity: function() {\n            return true;\n        }\n    });\n\n    ChartElement.prototype.options = { };\n\n    var BoxElement = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.options.margin = getSpacing(this.options.margin);\n            this.options.padding = getSpacing(this.options.padding);\n        },\n\n        reflow: function(targetBox) {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var width = options.width;\n            var height = options.height;\n            var shrinkToFit = options.shrinkToFit;\n            var hasSetSize = width && height;\n            var margin = options.margin;\n            var padding = options.padding;\n            var borderWidth = options.border.width;\n            var box;\n\n            var reflowPaddingBox = function () {\n                this$1$1.align(targetBox, X, options.align);\n                this$1$1.align(targetBox, Y, options.vAlign);\n                this$1$1.paddingBox = box.clone().unpad(margin).unpad(borderWidth);\n            };\n\n            var contentBox = targetBox.clone();\n            if (hasSetSize) {\n                contentBox.x2 = contentBox.x1 + width;\n                contentBox.y2 = contentBox.y1 + height;\n            }\n\n            if (shrinkToFit) {\n                contentBox.unpad(margin).unpad(borderWidth).unpad(padding);\n            }\n\n            ChartElement.fn.reflow.call(this, contentBox);\n\n            if (hasSetSize) {\n                box = this.box = new Box(0, 0, width, height);\n            } else {\n                box = this.box;\n            }\n\n            if (shrinkToFit && hasSetSize) {\n                reflowPaddingBox();\n                contentBox = this.contentBox = this.paddingBox.clone().unpad(padding);\n            } else {\n                contentBox = this.contentBox = box.clone();\n                box.pad(padding).pad(borderWidth).pad(margin);\n                reflowPaddingBox();\n            }\n\n            this.translateChildren(\n                box.x1 - contentBox.x1 + margin.left + borderWidth + padding.left,\n                box.y1 - contentBox.y1 + margin.top + borderWidth + padding.top\n            );\n\n            var children = this.children;\n            for (var i = 0; i < children.length; i++) {\n                var item = children[i];\n                item.reflow(item.box);\n            }\n        },\n\n        align: function(targetBox, axis, alignment) {\n            this.box.align(targetBox, axis, alignment);\n        },\n\n        hasBox: function() {\n            var options = this.options;\n            return options.border.width || options.background;\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            var options = this.options;\n            if (options.visible && this.hasBox()) {\n                this.visual.append(Path.fromRect(\n                    this.paddingBox.toRect(),\n                    this.visualStyle()\n                ));\n            }\n        },\n\n        visualStyle: function() {\n            var options = this.options;\n            var border = options.border || {};\n\n            return {\n                stroke: {\n                    width: border.width,\n                    color: border.color,\n                    opacity: valueOrDefault(border.opacity, options.opacity),\n                    dashType: border.dashType\n                },\n                fill: {\n                    color: options.background,\n                    opacity: options.opacity\n                },\n                cursor: options.cursor\n            };\n        }\n    });\n\n    setDefaultOptions(BoxElement, {\n        align: LEFT,\n        vAlign: TOP,\n        margin: {},\n        padding: {},\n        border: {\n            color: BLACK,\n            width: 0\n        },\n        background: \"\",\n        shrinkToFit: false,\n        width: 0,\n        height: 0,\n        visible: true\n    });\n\n    var ShapeElement = BoxElement.extend({\n        init: function(options, pointData) {\n            BoxElement.fn.init.call(this, options);\n\n            this.pointData = pointData;\n        },\n\n        getElement: function() {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.paddingBox;\n            var type = options.type;\n            var rotation = options.rotation;\n            var center = box.center();\n            var halfWidth = box.width() / 2;\n            var halfHeight = box.height() / 2;\n\n            if (!options.visible || !this.hasBox()) {\n                return null;\n            }\n\n            var style = this.visualStyle();\n            var element;\n\n            if (type === CIRCLE) {\n                element = new drawing.Circle(\n                    new Circle([\n                        round(box.x1 + halfWidth, COORD_PRECISION),\n                        round(box.y1 + halfHeight, COORD_PRECISION)\n                    ], Math.min(halfWidth, halfHeight)),\n                    style\n                );\n            } else if (type === TRIANGLE) {\n                element = Path.fromPoints([\n                    [ box.x1 + halfWidth, box.y1 ],\n                    [ box.x1, box.y2 ],\n                    [ box.x2, box.y2 ]\n                ], style).close();\n            } else if (type === CROSS) {\n                element = new drawing.MultiPath(style);\n\n                element.moveTo(box.x1, box.y1).lineTo(box.x2, box.y2);\n                element.moveTo(box.x1, box.y2).lineTo(box.x2, box.y1);\n            } else {\n                var rect = box.toRect();\n                if (type === ROUNDED_RECT) {\n                    var borderRadius = valueOrDefault(options.borderRadius, rect.width() / 5);\n                    rect.setCornerRadius(borderRadius);\n                }\n\n                element = Path.fromRect(rect, style);\n            }\n\n            if (rotation) {\n                element.transform(geometryTransform()\n                    .rotate(-rotation, [ center.x, center.y ])\n                );\n            }\n\n            element.options.zIndex = options.zIndex;\n\n            return element;\n        },\n\n        createElement: function() {\n            var this$1$1 = this;\n\n            var customVisual = this.options.visual;\n            var pointData = this.pointData || {};\n            var visual;\n\n            if (customVisual) {\n                visual = customVisual({\n                    value: pointData.value,\n                    dataItem: pointData.dataItem,\n                    sender: this.getSender(),\n                    series: pointData.series,\n                    category: pointData.category,\n                    rect: this.paddingBox.toRect(),\n                    options: this.visualOptions(),\n                    createVisual: function () { return this$1$1.getElement(); }\n                });\n            } else {\n                visual = this.getElement();\n            }\n\n            return visual;\n        },\n\n        visualOptions: function() {\n            var options = this.options;\n            return {\n                background: options.background,\n                border: options.border,\n                margin: options.margin,\n                padding: options.padding,\n                type: options.type,\n                size: options.width,\n                visible: options.visible\n            };\n        },\n\n        createVisual: function() {\n            this.visual = this.createElement();\n        }\n    });\n\n    setDefaultOptions(ShapeElement, {\n        type: CIRCLE,\n        align: CENTER,\n        vAlign: CENTER\n    });\n\n    var LINEAR = \"linear\";\n    var RADIAL = \"radial\";\n\n    var GRADIENTS = {\n        glass: {\n            type: LINEAR,\n            rotation: 0,\n            stops: [ {\n                offset: 0,\n                color: WHITE,\n                opacity: 0\n            }, {\n                offset: 0.25,\n                color: WHITE,\n                opacity: 0.3\n            }, {\n                offset: 1,\n                color: WHITE,\n                opacity: 0\n            } ]\n        },\n        sharpBevel: {\n            type: RADIAL,\n            stops: [ {\n                offset: 0,\n                color: WHITE,\n                opacity: 0.55\n            }, {\n                offset: 0.65,\n                color: WHITE,\n                opacity: 0\n            }, {\n                offset: 0.95,\n                color: WHITE,\n                opacity: 0.25\n            } ]\n        },\n        roundedBevel: {\n            type: RADIAL,\n            stops: [ {\n                offset: 0.33,\n                color: WHITE,\n                opacity: 0.06\n            }, {\n                offset: 0.83,\n                color: WHITE,\n                opacity: 0.2\n            }, {\n                offset: 0.95,\n                color: WHITE,\n                opacity: 0\n            } ]\n        },\n        roundedGlass: {\n            type: RADIAL,\n            supportVML: false,\n            stops: [ {\n                offset: 0,\n                color: WHITE,\n                opacity: 0\n            }, {\n                offset: 0.5,\n                color: WHITE,\n                opacity: 0.3\n            }, {\n                offset: 0.99,\n                color: WHITE,\n                opacity: 0\n            } ]\n        },\n        sharpGlass: {\n            type: RADIAL,\n            supportVML: false,\n            stops: [ {\n                offset: 0,\n                color: WHITE,\n                opacity: 0.2\n            }, {\n                offset: 0.15,\n                color: WHITE,\n                opacity: 0.15\n            }, {\n                offset: 0.17,\n                color: WHITE,\n                opacity: 0.35\n            }, {\n                offset: 0.85,\n                color: WHITE,\n                opacity: 0.05\n            }, {\n                offset: 0.87,\n                color: WHITE,\n                opacity: 0.15\n            }, {\n                offset: 0.99,\n                color: WHITE,\n                opacity: 0\n            } ]\n        },\n        bubbleShadow: {\n            type: RADIAL,\n            center: [ 0.5, 0.5 ],\n            radius: 0.5\n        }\n    };\n\n    function boxDiff(r, s) {\n        if (r.x1 === s.x1 && r.y1 === s.y1 && r.x2 === s.x2 && r.y2 === s.y2) {\n            return s;\n        }\n\n        var a = Math.min(r.x1, s.x1);\n        var b = Math.max(r.x1, s.x1);\n        var c = Math.min(r.x2, s.x2);\n        var d = Math.max(r.x2, s.x2);\n        var e = Math.min(r.y1, s.y1);\n        var f = Math.max(r.y1, s.y1);\n        var g = Math.min(r.y2, s.y2);\n        var h = Math.max(r.y2, s.y2);\n        var boxes = [];\n\n        // X = intersection, 0-7 = possible difference areas\n        // h +-+-+-+\n        // . |5|6|7|\n        // g +-+-+-+\n        // . |3|X|4|\n        // f +-+-+-+\n        // . |0|1|2|\n        // e +-+-+-+\n        // . a b c d\n\n        // we'll always have rectangles 1, 3, 4 and 6\n        boxes[0] = new Box(b, e, c, f);\n        boxes[1] = new Box(a, f, b, g);\n        boxes[2] = new Box(c, f, d, g);\n        boxes[3] = new Box(b, g, c, h);\n\n        // decide which corners\n        if (r.x1 === a && r.y1 === e || s.x1 === a && s.y1 === e) { // corners 0 and 7\n            boxes[4] = new Box(a, e, b, f);\n            boxes[5] = new Box(c, g, d, h);\n        } else { // corners 2 and 5\n            boxes[4] = new Box(c, e, d, f);\n            boxes[5] = new Box(a, g, b, h);\n        }\n\n        return grep(boxes, function(box) {\n            return box.height() > 0 && box.width() > 0;\n        })[0];\n    }\n\n    var RootElement = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            var rootOptions = this.options;\n            rootOptions.width = parseInt(rootOptions.width, 10);\n            rootOptions.height = parseInt(rootOptions.height, 10);\n\n            this.gradients = {};\n        },\n\n        reflow: function() {\n            var ref = this;\n            var options = ref.options;\n            var children = ref.children;\n            var currentBox = new Box(0, 0, options.width, options.height);\n\n            this.box = currentBox.unpad(options.margin);\n\n            for (var i = 0; i < children.length; i++) {\n                children[i].reflow(currentBox);\n                currentBox = boxDiff(currentBox, children[i].box) || new Box();\n            }\n        },\n\n        createVisual: function() {\n            this.visual = new Group();\n            this.createBackground();\n        },\n\n        createBackground: function() {\n            var options = this.options;\n            var border = options.border || {};\n            var box = this.box.clone().pad(options.margin).unpad(border.width);\n\n            var background = Path.fromRect(box.toRect(), {\n                stroke: {\n                    color: border.width ? border.color : \"\",\n                    width: border.width,\n                    dashType: border.dashType\n                },\n                fill: {\n                    color: options.background,\n                    opacity: options.opacity\n                },\n                zIndex: -10\n            });\n\n            this.visual.append(background);\n        },\n\n        getRoot: function() {\n            return this;\n        },\n\n        createGradient: function(options) {\n            var gradients = this.gradients;\n            var hashCode = objectKey(options);\n            var gradient = GRADIENTS[options.gradient];\n            var drawingGradient;\n\n            if (gradients[hashCode]) {\n                drawingGradient = gradients[hashCode];\n            } else {\n                var gradientOptions = $.extend({}, gradient, options);\n                if (gradient.type === \"linear\") {\n                    drawingGradient = new drawing.LinearGradient(gradientOptions);\n                } else {\n                    if (options.innerRadius) {\n                        gradientOptions.stops = innerRadialStops(gradientOptions);\n                    }\n                    drawingGradient = new drawing.RadialGradient(gradientOptions);\n                    drawingGradient.supportVML = gradient.supportVML !== false;\n                }\n                gradients[hashCode] = drawingGradient;\n            }\n\n            return drawingGradient;\n        },\n\n        cleanGradients: function() {\n            var gradients = this.gradients;\n            for (var hashCode in gradients) {\n                gradients[hashCode]._observers = [];//add clear observers method in drawing ObserversMixin\n            }\n        },\n\n        size: function() {\n            var options = this.options;\n            return new Box(0, 0, options.width, options.height);\n        }\n    });\n\n    setDefaultOptions(RootElement, {\n        width: DEFAULT_WIDTH,\n        height: DEFAULT_HEIGHT,\n        background: WHITE,\n        border: {\n            color: BLACK,\n            width: 0\n        },\n        margin: getSpacing(5),\n        zIndex: -2\n    });\n\n    function innerRadialStops(options) {\n        var stops = options.stops;\n        var usedSpace = ((options.innerRadius / options.radius) * 100);\n        var length = stops.length;\n        var currentStops = [];\n\n        for (var i = 0; i < length; i++) {\n            var currentStop = $.extend({}, stops[i]);\n            currentStop.offset = (currentStop.offset * (100 - usedSpace) + usedSpace) / 100;\n            currentStops.push(currentStop);\n        }\n\n        return currentStops;\n    }\n\n    var FloatElement = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n            this._initDirection();\n        },\n\n        _initDirection: function() {\n            var options = this.options;\n            if (options.vertical) {\n                this.groupAxis = X;\n                this.elementAxis = Y;\n                this.groupSizeField = WIDTH;\n                this.elementSizeField = HEIGHT;\n                this.groupSpacing = options.spacing;\n                this.elementSpacing = options.vSpacing;\n            } else {\n                this.groupAxis = Y;\n                this.elementAxis = X;\n                this.groupSizeField = HEIGHT;\n                this.elementSizeField = WIDTH;\n                this.groupSpacing = options.vSpacing;\n                this.elementSpacing = options.spacing;\n            }\n        },\n\n        reflow: function(targetBox) {\n            this.box = targetBox.clone();\n            this.reflowChildren();\n        },\n\n        reflowChildren: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var box = ref.box;\n            var elementAxis = ref.elementAxis;\n            var groupAxis = ref.groupAxis;\n            var elementSizeField = ref.elementSizeField;\n            var groupSizeField = ref.groupSizeField;\n            var ref$1 = this.groupOptions();\n            var groups = ref$1.groups;\n            var groupsSize = ref$1.groupsSize;\n            var maxGroupElementsSize = ref$1.maxGroupElementsSize;\n            var groupsCount = groups.length;\n            var groupsStart = box[groupAxis + 1] + this.alignStart(groupsSize, box[groupSizeField]());\n\n            if (groupsCount) {\n                var groupStart = groupsStart;\n\n                for (var groupIdx = 0; groupIdx < groupsCount; groupIdx++) {\n                    var group = groups[groupIdx];\n                    var groupElements = group.groupElements;\n                    var elementStart = box[elementAxis + 1];\n                    var groupElementsCount = groupElements.length;\n\n                    for (var idx = 0; idx < groupElementsCount; idx++) {\n                        var element = groupElements[idx];\n                        var elementSize$$1 = this$1$1.elementSize(element);\n                        var groupElementStart = groupStart + this$1$1.alignStart(elementSize$$1[groupSizeField], group.groupSize);\n\n                        var elementBox = new Box();\n                        elementBox[groupAxis + 1] = groupElementStart;\n                        elementBox[groupAxis + 2] = groupElementStart + elementSize$$1[groupSizeField];\n                        elementBox[elementAxis + 1] = elementStart;\n                        elementBox[elementAxis + 2] = elementStart + elementSize$$1[elementSizeField];\n\n                        element.reflow(elementBox);\n\n                        elementStart += elementSize$$1[elementSizeField] + this$1$1.elementSpacing;\n                    }\n                    groupStart += group.groupSize + this$1$1.groupSpacing;\n                }\n                box[groupAxis + 1] = groupsStart;\n                box[groupAxis + 2] = groupsStart + groupsSize;\n                box[elementAxis + 2] = box[elementAxis + 1] + maxGroupElementsSize;\n            }\n        },\n\n        alignStart: function(size, maxSize) {\n            var start = 0;\n            var align = this.options.align;\n            if (align === RIGHT || align === BOTTOM) {\n                start = maxSize - size;\n            } else if (align === CENTER) {\n                start = (maxSize - size) / 2;\n            }\n            return start;\n        },\n\n        groupOptions: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var box = ref.box;\n            var children = ref.children;\n            var elementSizeField = ref.elementSizeField;\n            var groupSizeField = ref.groupSizeField;\n            var elementSpacing = ref.elementSpacing;\n            var groupSpacing = ref.groupSpacing;\n            var maxSize = round(box[elementSizeField]());\n            var childrenCount = children.length;\n            var groups = [];\n\n            var groupSize = 0;\n            var groupElementsSize = 0;\n            var groupsSize = 0;\n            var maxGroupElementsSize = 0;\n            var groupElements = [];\n\n            for (var idx = 0; idx < childrenCount; idx++) {\n                var element = children[idx];\n                if (!element.box) {\n                    element.reflow(box);\n                }\n\n                var elementSize$$1 = this$1$1.elementSize(element);\n                if (this$1$1.options.wrap && round(groupElementsSize + elementSpacing + elementSize$$1[elementSizeField]) > maxSize) {\n                    groups.push({\n                        groupElements: groupElements,\n                        groupSize: groupSize,\n                        groupElementsSize: groupElementsSize\n                    });\n                    maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n                    groupsSize += groupSpacing + groupSize;\n                    groupSize = 0;\n                    groupElementsSize = 0;\n                    groupElements = [];\n                }\n                groupSize = Math.max(groupSize, elementSize$$1[groupSizeField]);\n                if (groupElementsSize > 0) {\n                    groupElementsSize += elementSpacing;\n                }\n                groupElementsSize += elementSize$$1[elementSizeField];\n                groupElements.push(element);\n            }\n\n            groups.push({\n                groupElements: groupElements,\n                groupSize: groupSize,\n                groupElementsSize: groupElementsSize\n            });\n            maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n            groupsSize += groupSize;\n\n            return {\n                groups: groups,\n                groupsSize: groupsSize,\n                maxGroupElementsSize: maxGroupElementsSize\n            };\n        },\n\n        elementSize: function(element) {\n            return {\n                width: element.box.width(),\n                height: element.box.height()\n            };\n        },\n\n        createVisual: function() {}\n    });\n\n    setDefaultOptions(FloatElement, {\n        vertical: true,\n        wrap: true,\n        vSpacing: 0,\n        spacing: 0\n    });\n\n    var DrawingText = drawing.Text;\n\n    var Text = ChartElement.extend({\n        init: function(content, options) {\n            ChartElement.fn.init.call(this, options);\n\n            this.content = content;\n\n            // Calculate size\n            this.reflow(new Box());\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options;\n            var size = options.size = util.measureText(this.content, { font: options.font });\n\n            this.baseline = size.baseline;\n\n            this.box = new Box(targetBox.x1, targetBox.y1,\n                    targetBox.x1 + size.width, targetBox.y1 + size.height);\n        },\n\n        createVisual: function() {\n            var ref = this.options;\n            var font = ref.font;\n            var color = ref.color;\n            var opacity = ref.opacity;\n            var cursor = ref.cursor;\n\n            this.visual = new DrawingText(this.content, this.box.toRect().topLeft(), {\n                font: font,\n                fill: { color: color, opacity: opacity },\n                cursor: cursor\n            });\n        }\n    });\n\n    setDefaultOptions(Text, {\n        font: DEFAULT_FONT,\n        color: BLACK\n    });\n\n    function rectToBox(rect) {\n        var origin = rect.origin;\n        var bottomRight = rect.bottomRight();\n\n        return new Box(origin.x, origin.y, bottomRight.x, bottomRight.y);\n    }\n\n    var ROWS_SPLIT_REGEX = /\\n/m;\n\n    var TextBox = BoxElement.extend({\n        init: function(content, options, data) {\n            BoxElement.fn.init.call(this, options);\n            this.content = content;\n            this.data = data;\n\n            this._initContainer();\n            if (this.options._autoReflow !== false) {\n                this.reflow(new Box());\n            }\n        },\n\n        _initContainer: function() {\n            var options = this.options;\n            var rows = String(this.content).split(ROWS_SPLIT_REGEX);\n            var floatElement = new FloatElement({ vertical: true, align: options.align, wrap: false });\n            var textOptions = deepExtend({ }, options, { opacity: 1, animation: null });\n\n            this.container = floatElement;\n            this.append(floatElement);\n\n            for (var rowIdx = 0; rowIdx < rows.length; rowIdx++) {\n                var text = new Text(rows[rowIdx].trim(), textOptions);\n                floatElement.append(text);\n            }\n        },\n\n        reflow: function(targetBox) {\n            var options = this.options;\n            var visualFn = options.visual;\n            this.container.options.align = options.align;\n\n            if (visualFn && !this._boxReflow) {\n                var visualBox = targetBox;\n                if (!visualBox.hasSize()) {\n                    this._boxReflow = true;\n                    this.reflow(visualBox);\n                    this._boxReflow = false;\n                    visualBox = this.box;\n                }\n                var visual = this.visual = visualFn(this.visualContext(visualBox));\n\n                if (visual) {\n                    visualBox = rectToBox(visual.clippedBBox() || new Rect());\n\n                    visual.options.zIndex = options.zIndex;\n                }\n\n                this.box = this.contentBox = this.paddingBox = visualBox;\n            } else {\n                BoxElement.fn.reflow.call(this, targetBox);\n\n                if (options.rotation) {\n                    var margin = getSpacing(options.margin);\n                    var box = this.box.unpad(margin);\n\n                    this.targetBox = targetBox;\n                    this.normalBox = box.clone();\n\n                    box = this.rotate();\n                    box.translate(margin.left - margin.right, margin.top - margin.bottom);\n\n                    this.rotatedBox = box.clone();\n\n                    box.pad(margin);\n                }\n            }\n        },\n\n        createVisual: function() {\n            var options = this.options;\n\n            this.visual = new Group({\n                transform: this.rotationTransform(),\n                zIndex: options.zIndex,\n                noclip: options.noclip\n            });\n\n            if (this.hasBox()) {\n                var box = Path.fromRect(this.paddingBox.toRect(), this.visualStyle());\n                this.visual.append(box);\n            }\n        },\n\n        renderVisual: function() {\n            if (!this.options.visible) {\n                return;\n            }\n\n            if (this.options.visual) {\n                var visual = this.visual;\n                if (visual && !defined(visual.options.noclip)) {\n                    visual.options.noclip = this.options.noclip;\n                }\n                this.addVisual();\n                this.createAnimation();\n            } else {\n                BoxElement.fn.renderVisual.call(this);\n            }\n        },\n\n        visualContext: function(targetBox) {\n            var this$1$1 = this;\n\n            var context = {\n                text: this.content,\n                rect: targetBox.toRect(),\n                sender: this.getSender(),\n                options: this.options,\n                createVisual: function () {\n                    this$1$1._boxReflow = true;\n                    this$1$1.reflow(targetBox);\n                    this$1$1._boxReflow = false;\n                    return this$1$1.getDefaultVisual();\n                }\n            };\n            if (this.data) {\n                $.extend(context, this.data);\n            }\n\n            return context;\n        },\n\n        getDefaultVisual: function() {\n            this.createVisual();\n            this.renderChildren();\n            var visual = this.visual;\n            delete this.visual;\n            return visual;\n        },\n\n        rotate: function() {\n            var options = this.options;\n            this.box.rotate(options.rotation);\n            this.align(this.targetBox, X, options.align);\n            this.align(this.targetBox, Y, options.vAlign);\n            return this.box;\n        },\n\n        rotationTransform: function() {\n            var rotation = this.options.rotation;\n            if (!rotation) {\n                return null;\n            }\n\n            var ref = this.normalBox.center();\n            var cx = ref.x;\n            var cy = ref.y;\n            var boxCenter = this.rotatedBox.center();\n\n            return geometryTransform()\n                       .translate(boxCenter.x - cx, boxCenter.y - cy)\n                       .rotate(rotation, [ cx, cy ]);\n        }\n    });\n\n    var Title = ChartElement.extend({\n        init: function(options) {\n            ChartElement.fn.init.call(this, options);\n\n            this._textBox = new TextBox(this.options.text, $.extend({}, this.options, {\n                vAlign: this.options.position\n            }));\n\n            this.append(this._textBox);\n        },\n\n        reflow: function(targetBox) {\n            ChartElement.fn.reflow.call(this, targetBox);\n            this.box.snapTo(targetBox, X);\n        }\n    });\n\n    Title.buildTitle = function(options, defaultOptions) {\n        var titleOptions = options;\n\n        if (typeof options === \"string\") {\n            titleOptions = { text: options };\n        }\n\n        titleOptions = $.extend({ visible: true }, defaultOptions, titleOptions);\n\n        var title;\n        if (titleOptions && titleOptions.visible && titleOptions.text) {\n            title = new Title(titleOptions);\n        }\n\n        return title;\n    };\n\n    Title.orderTitles = function(titles) {\n        var items = [].concat(titles);\n        var top = items.filter(function (item) { return item && item.options.position !== BOTTOM; });\n        var bottom = items.filter(function (item) { return item && item.options.position === BOTTOM; });\n\n        collapseVerticalMargins(top);\n        collapseVerticalMargins(bottom);\n\n        bottom.reverse();\n        return top.concat(bottom);\n    };\n\n    function collapseVerticalMargins(items) {\n        for (var i = 1; i < items.length; i++) {\n            var box = items[i]._textBox;\n            var prevBox = items[i - 1]._textBox;\n            prevBox.options.margin = $.extend(getSpacing(prevBox.options.margin), { bottom: 0 });\n            box.options.margin = $.extend(getSpacing(box.options.margin), { top: 0 });\n        }\n    }\n\n    setDefaultOptions(Title, {\n        color: BLACK,\n        position: TOP,\n        align: CENTER,\n        margin: getSpacing(5),\n        padding: getSpacing(5)\n    });\n\n    var AxisLabel = TextBox.extend({\n        init: function(value, text, index, dataItem, options) {\n            TextBox.fn.init.call(this, text, options);\n\n            this.text = text;\n            this.value = value;\n            this.index = index;\n            this.dataItem = dataItem;\n            this.reflow(new Box());\n        },\n\n        visualContext: function(targetBox) {\n            var context = TextBox.fn.visualContext.call(this, targetBox);\n\n            context.value = this.value;\n            context.dataItem = this.dataItem;\n            context.format = this.options.format;\n            context.culture = this.options.culture;\n\n            return context;\n        },\n\n        click: function(widget, e) {\n\n            widget.trigger(AXIS_LABEL_CLICK, {\n                element: eventElement(e),\n                value: this.value,\n                text: this.text,\n                index: this.index,\n                dataItem: this.dataItem,\n                axis: this.parent.options\n            });\n        },\n\n        rotate: function() {\n            if (this.options.alignRotation !== CENTER) {\n                var box = this.normalBox.toRect();\n                var transform = this.rotationTransform();\n\n                this.box = rectToBox(box.bbox(transform.matrix()));\n            } else {\n                TextBox.fn.rotate.call(this);\n            }\n\n            return this.box;\n        },\n\n        rotationTransform: function() {\n            var options = this.options;\n            var rotation = options.rotation;\n            if (!rotation) {\n                return null;\n            }\n\n            if (options.alignRotation === CENTER) {\n                return TextBox.fn.rotationTransform.call(this);\n            }\n\n            var rotationMatrix = geometryTransform().rotate(rotation).matrix();\n            var box = this.normalBox.toRect();\n            var rect = this.targetBox.toRect();\n\n            var rotationOrigin = options.rotationOrigin || TOP;\n            var alignAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? X : Y;\n            var distanceAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? Y : X;\n            var axisAnchor = rotationOrigin === TOP || rotationOrigin === LEFT ? rect.origin : rect.bottomRight();\n\n            var topLeft = box.topLeft().transformCopy(rotationMatrix);\n            var topRight = box.topRight().transformCopy(rotationMatrix);\n            var bottomRight = box.bottomRight().transformCopy(rotationMatrix);\n            var bottomLeft = box.bottomLeft().transformCopy(rotationMatrix);\n            var rotatedBox = Rect.fromPoints(topLeft, topRight, bottomRight, bottomLeft);\n\n            var translate = {};\n            translate[distanceAxis] = rect.origin[distanceAxis] - rotatedBox.origin[distanceAxis];\n\n            var distanceLeft = Math.abs(topLeft[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n            var distanceRight = Math.abs(topRight[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n\n            var alignStart, alignEnd;\n\n            if (round(distanceLeft, DEFAULT_PRECISION) === round(distanceRight, DEFAULT_PRECISION)) {\n                alignStart = topLeft;\n                alignEnd = topRight;\n            } else if (distanceRight < distanceLeft) {\n                alignStart = topRight;\n                alignEnd = bottomRight;\n            } else {\n                alignStart = topLeft;\n                alignEnd = bottomLeft;\n            }\n\n            var alignCenter = alignStart[alignAxis] + (alignEnd[alignAxis] - alignStart[alignAxis]) / 2;\n            translate[alignAxis] = rect.center()[alignAxis] - alignCenter;\n\n            return geometryTransform()\n                .translate(translate.x, translate.y)\n                .rotate(rotation);\n        }\n    });\n\n    setDefaultOptions(AxisLabel, {\n        _autoReflow: false\n    });\n\n    var DEFAULT_ICON_SIZE = 7;\n    var DEFAULT_LABEL_COLOR = \"#fff\";\n\n    var Note = BoxElement.extend({\n        init: function(fields, options, chartService) {\n            BoxElement.fn.init.call(this, options);\n\n            this.fields = fields;\n            this.chartService = chartService;\n\n            this.render();\n        },\n\n        hide: function() {\n            this.options.visible = false;\n        },\n\n        show: function() {\n            this.options.visible = true;\n        },\n\n        render: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n\n            if (options.visible) {\n                var label = options.label;\n                var icon = options.icon;\n                var box = new Box();\n                var childAlias = function () { return this$1$1; };\n                var size = icon.size;\n                var text = this.fields.text;\n                var width, height;\n\n                if (defined(label) && label.visible) {\n                    var noteTemplate = getTemplate(label);\n                    if (noteTemplate) {\n                        text = noteTemplate(this.fields);\n                    } else if (label.format) {\n                        text = this.chartService.format.auto(label.format, text);\n                    }\n\n                    if (!label.color) {\n                        label.color = label.position === INSIDE ? DEFAULT_LABEL_COLOR : icon.background;\n                    }\n\n                    this.label = new TextBox(text, deepExtend({}, label));\n                    this.label.aliasFor = childAlias;\n\n                    if (label.position === INSIDE && !defined(size)) {\n                        if (icon.type === CIRCLE) {\n                            size = Math.max(this.label.box.width(), this.label.box.height());\n                        } else {\n                            width = this.label.box.width();\n                            height = this.label.box.height();\n                        }\n                        box.wrap(this.label.box);\n                    }\n                }\n\n                icon.width = width || size || DEFAULT_ICON_SIZE;\n                icon.height = height || size || DEFAULT_ICON_SIZE;\n\n                var marker = new ShapeElement(deepExtend({}, icon));\n                marker.aliasFor = childAlias;\n\n                this.marker = marker;\n                this.append(marker);\n\n                if (this.label) {\n                    this.append(this.label);\n                }\n\n                marker.reflow(new Box());\n                this.wrapperBox = box.wrap(marker.box);\n            }\n        },\n\n        reflow: function(targetBox) {\n            var ref = this;\n            var options = ref.options;\n            var label = ref.label;\n            var marker = ref.marker;\n            var wrapperBox = ref.wrapperBox;\n            var center = targetBox.center();\n            var length = options.line.length;\n            var position = options.position;\n\n            // TODO: Review\n            if (options.visible) {\n                var lineStart, box, contentBox;\n\n                if (inArray(position, [ LEFT, RIGHT ])) {\n                    if (position === LEFT) {\n                        contentBox = wrapperBox.alignTo(targetBox, position).translate(-length, targetBox.center().y - wrapperBox.center().y);\n\n                        if (options.line.visible) {\n                            lineStart = [ targetBox.x1, center.y ];\n                            this.linePoints = [\n                                lineStart,\n                                [ contentBox.x2, center.y ]\n                            ];\n                            box = contentBox.clone().wrapPoint(lineStart);\n                        }\n                    } else {\n                        contentBox = wrapperBox.alignTo(targetBox, position).translate(length, targetBox.center().y - wrapperBox.center().y);\n\n                        if (options.line.visible) {\n                            lineStart = [ targetBox.x2, center.y ];\n                            this.linePoints = [\n                                lineStart,\n                                [ contentBox.x1, center.y ]\n                            ];\n                            box = contentBox.clone().wrapPoint(lineStart);\n                        }\n                    }\n                } else {\n                    if (position === BOTTOM) {\n                        contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, length);\n\n                        if (options.line.visible) {\n                            lineStart = [ center.x, targetBox.y2 ];\n                            this.linePoints = [\n                                lineStart,\n                                [ center.x, contentBox.y1 ]\n                            ];\n                            box = contentBox.clone().wrapPoint(lineStart);\n                        }\n                    } else {\n                        contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, -length);\n\n                        if (options.line.visible) {\n                            lineStart = [ center.x, targetBox.y1 ];\n                            this.linePoints = [\n                                lineStart,\n                                [ center.x, contentBox.y2 ]\n                            ];\n                            box = contentBox.clone().wrapPoint(lineStart);\n                        }\n                    }\n                }\n\n                if (marker) {\n                    marker.reflow(contentBox);\n                }\n\n                if (label) {\n                    label.reflow(contentBox);\n                    if (marker) {\n                        if (options.label.position === OUTSIDE) {\n                            label.box.alignTo(marker.box, position);\n                        }\n                        label.reflow(label.box);\n                    }\n                }\n\n                this.contentBox = contentBox;\n                this.targetBox = targetBox;\n                this.box = box || contentBox;\n            }\n        },\n\n        createVisual: function() {\n            BoxElement.fn.createVisual.call(this);\n            this.visual.options.noclip = this.options.noclip;\n\n            if (this.options.visible) {\n                this.createLine();\n            }\n        },\n\n        renderVisual: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var customVisual = options.visual;\n            if (options.visible && customVisual) {\n                this.visual = customVisual($.extend(this.fields, {\n                    sender: this.getSender(),\n                    rect: this.targetBox.toRect(),\n                    options: {\n                        background: options.background,\n                        border: options.background,\n                        icon: options.icon,\n                        label: options.label,\n                        line: options.line,\n                        position: options.position,\n                        visible: options.visible\n                    },\n                    createVisual: function () {\n                        this$1$1.createVisual();\n                        this$1$1.renderChildren();\n                        var defaultVisual = this$1$1.visual;\n                        delete this$1$1.visual;\n                        return defaultVisual;\n                    }\n                }));\n                this.addVisual();\n            } else {\n                BoxElement.fn.renderVisual.call(this);\n            }\n        },\n\n        createLine: function() {\n            var options = this.options.line;\n\n            if (this.linePoints) {\n                var path = Path.fromPoints(this.linePoints, {\n                    stroke: {\n                        color: options.color,\n                        width: options.width,\n                        dashType: options.dashType\n                    }\n                });\n\n                alignPathToPixel(path);\n                this.visual.append(path);\n            }\n        },\n\n        click: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            if (!widget.trigger(NOTE_CLICK, args)) {\n                e.preventDefault();\n            }\n        },\n\n        over: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            if (!widget.trigger(NOTE_HOVER, args)) {\n                e.preventDefault();\n            }\n        },\n\n        out: function(widget, e) {\n            var args = this.eventArgs(e);\n\n            widget.trigger(NOTE_LEAVE, args);\n        },\n\n        eventArgs: function(e) {\n            var options = this.options;\n\n            return $.extend(this.fields, {\n                element: eventElement(e),\n                text: defined(options.label) ? options.label.text : \"\",\n                visual: this.visual\n            });\n        }\n    });\n\n    setDefaultOptions(Note, {\n        icon: {\n            visible: true,\n            type: CIRCLE\n        },\n        label: {\n            position: INSIDE,\n            visible: true,\n            align: CENTER,\n            vAlign: CENTER\n        },\n        line: {\n            visible: true\n        },\n        visible: true,\n        position: TOP,\n        zIndex: 2\n    });\n\n    var defaultImplementation = {\n        format: function (format, value) { return value; },\n\n        toString: function (value) { return value; },\n\n        parseDate: function (value) { return new Date(value); },\n\n        firstDay: function () { return 0; }\n    };\n\n    var current$1 = defaultImplementation;\n\n    var IntlService = Class.extend({\n\n    });\n\n    IntlService.register = function(userImplementation) {\n        current$1 = userImplementation;\n    };\n\n    if (Object.defineProperties) {\n        Object.defineProperties(IntlService, {\n            implementation: {\n                get: function() {\n                    return current$1;\n                }\n            }\n        });\n    }\n\n    var FORMAT_REPLACE_REGEX = /\\{(\\d+)(:[^\\}]+)?\\}/g;\n\n    var FormatService = Class.extend({\n        init: function(intlService) {\n            this._intlService = intlService;\n        },\n\n        auto: function(formatString) {\n            var arguments$1 = arguments;\n\n            var values = [], len = arguments.length - 1;\n            while ( len-- > 0 ) { values[ len ] = arguments$1[ len + 1 ]; }\n\n            var intl = this.intl;\n\n            if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n                return intl.format.apply(intl, [ formatString ].concat( values ));\n            }\n\n            return intl.toString(values[0], formatString);\n        },\n\n        localeAuto: function(formatString, values, locale) {\n            var intl = this.intl;\n            var result;\n\n            if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n                result = formatString.replace(FORMAT_REPLACE_REGEX, function(match, index, placeholderFormat) {\n                    var value = values[parseInt(index, 10)];\n\n                    return intl.toString(value, placeholderFormat ? placeholderFormat.substring(1) : \"\", locale);\n                });\n            } else {\n                result = intl.toString(values[0], formatString, locale);\n            }\n\n            return result;\n        }\n    });\n\n    if (Object.defineProperties) {\n        Object.defineProperties(FormatService.fn, {\n            intl: {\n                get: function() {\n                    return this._intlService || IntlService.implementation;\n                },\n                set: function(value) {\n                    this._intlService = value;\n                }\n            }\n        });\n    }\n\n    var ChartService = Class.extend({\n        init: function(chart, context) {\n            if (context === void 0) { context = {}; }\n\n            this._intlService = context.intlService;\n            this.sender = context.sender || chart;\n            this.format = new FormatService(context.intlService);\n            this.chart = chart;\n            this.rtl = Boolean(context.rtl);\n        },\n\n        notify: function(name, args) {\n            if (this.chart) {\n                this.chart.trigger(name, args);\n            }\n        },\n\n        isPannable: function(axis) {\n            var pannable = ((this.chart || {}).options || {}).pannable;\n            return pannable && pannable.lock !== axis;\n        }\n    });\n\n    if (Object.defineProperties) {\n        Object.defineProperties(ChartService.fn, {\n            intl: {\n                get: function() {\n                    return this._intlService || IntlService.implementation;\n                },\n                set: function(value) {\n                    this._intlService = value;\n                    this.format.intl = value;\n                }\n            }\n        });\n    }\n\n    var current$2;\n\n    var DomEventsBuilder = Class.extend({\n\n    });\n\n    DomEventsBuilder.register = function(userImplementation) {\n        current$2 = userImplementation;\n    };\n\n    DomEventsBuilder.create = function(element, events) {\n        if (current$2) {\n            return current$2.create(element, events);\n        }\n    };\n\n    var services = {\n    \tChartService: ChartService,\n    \tDomEventsBuilder: DomEventsBuilder,\n    \tFormatService: FormatService,\n    \tIntlService: IntlService,\n    \tTemplateService: TemplateService\n    };\n\n    function createAxisTick(options, tickOptions) {\n        var tickX = options.tickX;\n        var tickY = options.tickY;\n        var position = options.position;\n\n        var tick = new Path({\n            stroke: {\n                width: tickOptions.width,\n                color: tickOptions.color\n            }\n        });\n\n        if (options.vertical) {\n            tick.moveTo(tickX, position)\n                .lineTo(tickX + tickOptions.size, position);\n        } else {\n            tick.moveTo(position, tickY)\n                .lineTo(position, tickY + tickOptions.size);\n        }\n\n        alignPathToPixel(tick);\n\n        return tick;\n    }\n\n    function createAxisGridLine(options, gridLine) {\n        var lineStart = options.lineStart;\n        var lineEnd = options.lineEnd;\n        var position = options.position;\n\n        var line = new Path({\n            stroke: {\n                width: gridLine.width,\n                color: gridLine.color,\n                dashType: gridLine.dashType\n            }\n        });\n\n        if (options.vertical) {\n            line.moveTo(lineStart, position)\n                .lineTo(lineEnd, position);\n        } else {\n            line.moveTo(position, lineStart)\n                .lineTo(position, lineEnd);\n        }\n\n        alignPathToPixel(line);\n\n        return line;\n    }\n\n    var Axis = ChartElement.extend({\n        init: function(options, chartService) {\n            if (chartService === void 0) { chartService = new ChartService(); }\n\n            ChartElement.fn.init.call(this, options);\n\n            this.chartService = chartService;\n\n            if (!this.options.visible) {\n                this.options = deepExtend({}, this.options, {\n                    labels: {\n                        visible: false\n                    },\n                    line: {\n                        visible: false\n                    },\n                    margin: 0,\n                    majorTickSize: 0,\n                    minorTickSize: 0\n                });\n            }\n\n            this.options.minorTicks = deepExtend({}, {\n                color: this.options.line.color,\n                width: this.options.line.width,\n                visible: this.options.minorTickType !== NONE\n            }, this.options.minorTicks, {\n                size: this.options.minorTickSize,\n                align: this.options.minorTickType\n            });\n\n            this.options.majorTicks = deepExtend({}, {\n                color: this.options.line.color,\n                width: this.options.line.width,\n                visible: this.options.majorTickType !== NONE\n            }, this.options.majorTicks, {\n                size: this.options.majorTickSize,\n                align: this.options.majorTickType\n            });\n\n            this.initFields();\n\n            if (!this.options._deferLabels) {\n                this.createLabels();\n            }\n\n            this.createTitle();\n            this.createNotes();\n        },\n\n        initFields: function() {\n        },\n\n        labelsRange: function() {\n            return {\n                min: this.options.labels.skip,\n                max: this.labelsCount()\n            };\n        },\n\n        normalizeLabelRotation: function(labelOptions) {\n            var rotation = labelOptions.rotation;\n\n            if (isObject(rotation)) {\n                labelOptions.alignRotation = rotation.align;\n                labelOptions.rotation = rotation.angle;\n            }\n        },\n\n        createLabels: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var align = options.vertical ? RIGHT : CENTER;\n            var labelOptions = deepExtend({ }, options.labels, {\n                align: align,\n                zIndex: options.zIndex\n            });\n            var step = Math.max(1, labelOptions.step);\n\n            this.clearLabels();\n\n            if (labelOptions.visible) {\n                this.normalizeLabelRotation(labelOptions);\n                if (labelOptions.rotation === \"auto\") {\n                    labelOptions.rotation = 0;\n                    options.autoRotateLabels = true;\n                }\n\n                var range = this.labelsRange();\n                for (var idx = range.min; idx < range.max; idx += step) {\n                    var labelContext = { index: idx, count: range.max };\n                    var label = this$1$1.createAxisLabel(idx, labelOptions, labelContext);\n                    if (label) {\n                        this$1$1.append(label);\n                        this$1$1.labels.push(label);\n                    }\n                }\n            }\n        },\n\n        clearLabels: function() {\n            this.children = grep(this.children, function (child) { return !(child instanceof AxisLabel); });\n            this.labels = [];\n        },\n\n        clearTitle: function() {\n            var this$1$1 = this;\n\n            if (this.title) {\n                this.children = grep(this.children, function (child) { return child !== this$1$1.title; });\n                this.title = undefined;\n            }\n        },\n\n        clear: function() {\n            this.clearLabels();\n            this.clearTitle();\n        },\n\n        lineBox: function() {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.box;\n            var vertical = options.vertical;\n            var mirror = options.labels.mirror;\n            var axisX = mirror ? box.x1 : box.x2;\n            var axisY = mirror ? box.y2 : box.y1;\n            var lineWidth = options.line.width || 0;\n\n            return vertical ?\n                new Box(axisX, box.y1, axisX, box.y2 - lineWidth) :\n                new Box(box.x1, axisY, box.x2 - lineWidth, axisY);\n        },\n\n        createTitle: function() {\n            var options = this.options;\n            var titleOptions = deepExtend({\n                rotation: options.vertical ? -90 : 0,\n                text: \"\",\n                zIndex: 1,\n                visualSize: true\n            }, options.title);\n\n            if (titleOptions.visible && titleOptions.text) {\n                var title = new TextBox(titleOptions.text, titleOptions);\n                this.append(title);\n                this.title = title;\n            }\n        },\n\n        createNotes: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var notes = options.notes;\n            var items = notes.data || [];\n\n            this.notes = [];\n\n            for (var i = 0; i < items.length; i++) {\n                var item = deepExtend({}, notes, items[i]);\n                item.value = this$1$1.parseNoteValue(item.value);\n\n                var note = new Note({\n                    value: item.value,\n                    text: item.label.text,\n                    dataItem: item\n                }, item, this$1$1.chartService);\n\n                if (note.options.visible) {\n                    if (defined(note.options.position)) {\n                        if (options.vertical && !inArray(note.options.position, [ LEFT, RIGHT ])) {\n                            note.options.position = options.reverse ? LEFT : RIGHT;\n                        } else if (!options.vertical && !inArray(note.options.position, [ TOP, BOTTOM ])) {\n                            note.options.position = options.reverse ? BOTTOM : TOP;\n                        }\n                    } else {\n                        if (options.vertical) {\n                            note.options.position = options.reverse ? LEFT : RIGHT;\n                        } else {\n                            note.options.position = options.reverse ? BOTTOM : TOP;\n                        }\n                    }\n                    this$1$1.append(note);\n                    this$1$1.notes.push(note);\n                }\n            }\n        },\n\n        parseNoteValue: function(value) {\n            return value;\n        },\n\n        renderVisual: function() {\n            ChartElement.fn.renderVisual.call(this);\n\n            this.createPlotBands();\n        },\n\n        createVisual: function() {\n            ChartElement.fn.createVisual.call(this);\n\n            this.createBackground();\n            this.createLine();\n        },\n\n        gridLinesVisual: function() {\n            var gridLines = this._gridLines;\n            if (!gridLines) {\n                gridLines = this._gridLines = new Group({\n                    zIndex: -2\n                });\n                this.appendVisual(this._gridLines);\n            }\n\n            return gridLines;\n        },\n\n        createTicks: function(lineGroup) {\n            var options = this.options;\n            var lineBox = this.lineBox();\n            var mirror = options.labels.mirror;\n            var majorUnit = options.majorTicks.visible ? options.majorUnit : 0;\n            var tickLineOptions = {\n                // TODO\n                // _alignLines: options._alignLines,\n                vertical: options.vertical\n            };\n\n            function render(tickPositions, tickOptions, skipUnit) {\n                var count = tickPositions.length;\n                var step = Math.max(1, tickOptions.step);\n\n                if (tickOptions.visible) {\n                    for (var i = tickOptions.skip; i < count; i += step) {\n                        if (defined(skipUnit) && (i % skipUnit === 0)) {\n                            continue;\n                        }\n\n                        tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n                        tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n                        tickLineOptions.position = tickPositions[i];\n\n                        lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n                    }\n                }\n            }\n\n            render(this.getMajorTickPositions(), options.majorTicks);\n            render(this.getMinorTickPositions(), options.minorTicks, majorUnit / options.minorUnit);\n        },\n\n        createLine: function() {\n            var options = this.options;\n            var line = options.line;\n            var lineBox = this.lineBox();\n\n            if (line.width > 0 && line.visible) {\n                var path = new Path({\n                    stroke: {\n                        width: line.width,\n                        color: line.color,\n                        dashType: line.dashType\n                    }\n\n                    /* TODO\n                    zIndex: line.zIndex,\n                    */\n                });\n\n                path.moveTo(lineBox.x1, lineBox.y1)\n                    .lineTo(lineBox.x2, lineBox.y2);\n\n                if (options._alignLines) {\n                    alignPathToPixel(path);\n                }\n\n                var group = this._lineGroup = new Group();\n                group.append(path);\n\n                this.visual.append(group);\n                this.createTicks(group);\n            }\n        },\n\n        getActualTickSize: function() {\n            var options = this.options;\n            var tickSize = 0;\n\n            if (options.majorTicks.visible && options.minorTicks.visible) {\n                tickSize = Math.max(options.majorTicks.size, options.minorTicks.size);\n            } else if (options.majorTicks.visible) {\n                tickSize = options.majorTicks.size;\n            } else if (options.minorTicks.visible) {\n                tickSize = options.minorTicks.size;\n            }\n\n            return tickSize;\n        },\n\n        createBackground: function() {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.box;\n            var background = options.background;\n\n            if (background) {\n                this._backgroundPath = Path.fromRect(box.toRect(), {\n                    fill: {\n                        color: background\n                    },\n                    stroke: null\n                });\n\n                this.visual.append(this._backgroundPath);\n            }\n        },\n\n        createPlotBands: function() {\n            var this$1$1 = this;\n\n            var options = this.options;\n            var plotBands = options.plotBands || [];\n            var vertical = options.vertical;\n            var plotArea = this.plotArea;\n\n            if (plotBands.length === 0) {\n                return;\n            }\n\n            var group = this._plotbandGroup = new Group({\n                zIndex: -1\n            });\n\n            var altAxis = grep(this.pane.axes, function (axis) { return axis.options.vertical !== this$1$1.options.vertical; })[0];\n\n            for (var idx = 0; idx < plotBands.length; idx++) {\n                var item = plotBands[idx];\n                var slotX = (void 0), slotY = (void 0);\n                var labelOptions = item.label;\n                var label = (void 0);\n\n                if (vertical) {\n                    slotX = (altAxis || plotArea.axisX).lineBox();\n                    slotY = this$1$1.getSlot(item.from, item.to, true);\n                } else {\n                    slotX = this$1$1.getSlot(item.from, item.to, true);\n                    slotY = (altAxis || plotArea.axisY).lineBox();\n                }\n\n                if (labelOptions) {\n                    labelOptions.vAlign = labelOptions.position || LEFT;\n                    label = this$1$1.createPlotBandLabel(\n                        labelOptions,\n                        item,\n                        new Box(\n                            slotX.x1,\n                            slotY.y1,\n                            slotX.x2,\n                            slotY.y2\n                        )\n\n                    );\n                }\n\n                if (slotX.width() !== 0 && slotY.height() !== 0) {\n                    var bandRect = new Rect(\n                        [ slotX.x1, slotY.y1 ],\n                        [ slotX.width(), slotY.height() ]\n                    );\n\n                    var path = Path.fromRect(bandRect, {\n                        fill: {\n                            color: item.color,\n                            opacity: item.opacity\n                        },\n                        stroke: null\n                    });\n\n                    group.append(path);\n                    if (label) {\n                        group.append(label);\n                    }\n                }\n            }\n\n            this.appendVisual(group);\n        },\n\n        createPlotBandLabel: function(label, item, box) {\n\n            if (label.visible === false) {\n                return null;\n            }\n\n            var text = label.text;\n            var textbox;\n\n            if (defined(label) && label.visible) {\n                var labelTemplate = getTemplate(label);\n                if (labelTemplate) {\n                    text = labelTemplate({ text: text, item: item });\n                } else if (label.format) {\n                    text = this.chartService.format.auto(label.format, text);\n                }\n\n                if (!label.color) {\n                    label.color = this.options.labels.color;\n                }\n            }\n\n            textbox = new TextBox(text, label);\n            textbox.reflow(box);\n            textbox.renderVisual();\n\n            return textbox.visual;\n        },\n\n        createGridLines: function(altAxis) {\n            var options = this.options;\n            var minorGridLines = options.minorGridLines;\n            var majorGridLines = options.majorGridLines;\n            var minorUnit = options.minorUnit;\n            var vertical = options.vertical;\n            var axisLineVisible = altAxis.options.line.visible;\n            var majorUnit = majorGridLines.visible ? options.majorUnit : 0;\n            var lineBox = altAxis.lineBox();\n            var linePos = lineBox[vertical ? \"y1\" : \"x1\"];\n            var lineOptions = {\n                lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n                lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n                vertical: vertical\n            };\n            var majorTicks = [];\n\n            var container = this.gridLinesVisual();\n\n            function render(tickPositions, gridLine, skipUnit) {\n                var count = tickPositions.length;\n                var step = Math.max(1, gridLine.step);\n\n                if (gridLine.visible) {\n                    for (var i = gridLine.skip; i < count; i += step) {\n                        var pos = round(tickPositions[i]);\n                        if (!inArray(pos, majorTicks)) {\n                            if (i % skipUnit !== 0 && (!axisLineVisible || linePos !== pos)) {\n                                lineOptions.position = pos;\n                                container.append(createAxisGridLine(lineOptions, gridLine));\n\n                                majorTicks.push(pos);\n                            }\n                        }\n                    }\n                }\n            }\n\n            render(this.getMajorTickPositions(), majorGridLines);\n            render(this.getMinorTickPositions(), minorGridLines, majorUnit / minorUnit);\n\n            return container.children;\n        },\n\n        reflow: function(box) {\n            var ref = this;\n            var options = ref.options;\n            var labels = ref.labels;\n            var title = ref.title;\n            var vertical = options.vertical;\n            var count = labels.length;\n            var sizeFn = vertical ? WIDTH : HEIGHT;\n            var titleSize = title ? title.box[sizeFn]() : 0;\n            var space = this.getActualTickSize() + options.margin + titleSize;\n            var rootBox = (this.getRoot() || {}).box || box;\n            var boxSize = rootBox[sizeFn]();\n            var maxLabelSize = 0;\n\n            for (var i = 0; i < count; i++) {\n                var labelSize = labels[i].box[sizeFn]();\n                if (labelSize + space <= boxSize) {\n                    maxLabelSize = Math.max(maxLabelSize, labelSize);\n                }\n            }\n\n            if (vertical) {\n                this.box = new Box(\n                    box.x1, box.y1,\n                    box.x1 + maxLabelSize + space, box.y2\n                );\n            } else {\n                this.box = new Box(\n                    box.x1, box.y1,\n                    box.x2, box.y1 + maxLabelSize + space\n                );\n            }\n\n            this.arrangeTitle();\n            this.arrangeLabels();\n            this.arrangeNotes();\n        },\n\n        getLabelsTickPositions: function() {\n            return this.getMajorTickPositions();\n        },\n\n        labelTickIndex: function(label) {\n            return label.index;\n        },\n\n        arrangeLabels: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var labels = ref.labels;\n            var labelsBetweenTicks = this.labelsBetweenTicks();\n            var vertical = options.vertical;\n            var mirror = options.labels.mirror;\n            var tickPositions = this.getLabelsTickPositions();\n\n            for (var idx = 0; idx < labels.length; idx++) {\n                var label = labels[idx];\n                var tickIx = this$1$1.labelTickIndex(label);\n                var labelSize = vertical ? label.box.height() : label.box.width();\n                var firstTickPosition = tickPositions[tickIx];\n                var nextTickPosition = tickPositions[tickIx + 1];\n                var positionStart = (void 0), positionEnd = (void 0);\n\n                if (vertical) {\n                    if (labelsBetweenTicks) {\n                        var middle = firstTickPosition + (nextTickPosition - firstTickPosition) / 2;\n                        positionStart = middle - (labelSize / 2);\n                    } else {\n                        positionStart = firstTickPosition - (labelSize / 2);\n                    }\n\n                    positionEnd = positionStart;\n                } else {\n                    if (labelsBetweenTicks) {\n                        positionStart = firstTickPosition;\n                        positionEnd = nextTickPosition;\n                    } else {\n                        positionStart = firstTickPosition - (labelSize / 2);\n                        positionEnd = positionStart + labelSize;\n                    }\n                }\n\n                this$1$1.positionLabel(label, mirror, positionStart, positionEnd);\n            }\n        },\n\n        positionLabel: function(label, mirror, positionStart, positionEnd) {\n            if (positionEnd === void 0) { positionEnd = positionStart; }\n\n            var options = this.options;\n            var vertical = options.vertical;\n            var lineBox = this.lineBox();\n            var labelOffset = this.getActualTickSize() + options.margin;\n            var labelBox;\n\n            if (vertical) {\n                var labelX = lineBox.x2;\n\n                if (mirror) {\n                    labelX += labelOffset;\n                    label.options.rotationOrigin = LEFT;\n                } else {\n                    labelX -= labelOffset + label.box.width();\n                    label.options.rotationOrigin = RIGHT;\n                }\n\n                labelBox = label.box.move(labelX, positionStart);\n            } else {\n                var labelY = lineBox.y1;\n\n                if (mirror) {\n                    labelY -= labelOffset + label.box.height();\n                    label.options.rotationOrigin = BOTTOM;\n                } else {\n                    labelY += labelOffset;\n                    label.options.rotationOrigin = TOP;\n                }\n\n                labelBox = new Box(\n                    positionStart, labelY,\n                    positionEnd, labelY + label.box.height()\n                );\n            }\n\n            label.reflow(labelBox);\n        },\n\n        autoRotateLabelAngle: function(labelBox, slotWidth) {\n            if (labelBox.width() < slotWidth) {\n                return 0;\n            }\n\n            if (labelBox.height() > slotWidth) {\n                return -90;\n            }\n\n            return -45;\n        },\n\n        autoRotateLabels: function() {\n            var this$1$1 = this;\n\n            if (!this.options.autoRotateLabels || this.options.vertical) {\n                return false;\n            }\n\n            var tickPositions = this.getMajorTickPositions();\n            var labels = this.labels;\n            var limit = Math.min(labels.length, tickPositions.length - 1);\n            var angle = 0;\n\n            for (var idx = 0; idx < limit; idx++) {\n                var width = Math.abs(tickPositions[idx + 1] - tickPositions[idx]);\n                var labelBox = labels[idx].box;\n                var labelAngle = this$1$1.autoRotateLabelAngle(labelBox, width);\n\n                if (labelAngle !== 0) {\n                    angle = labelAngle;\n                }\n\n                if (angle === -90) {\n                    break;\n                }\n            }\n\n            if (angle !== 0) {\n                for (var idx$1 = 0; idx$1 < labels.length; idx$1++) {\n                    labels[idx$1].options.rotation = angle;\n                    labels[idx$1].reflow(new Box());\n                }\n\n                return true;\n            }\n        },\n\n        arrangeTitle: function() {\n            var ref = this;\n            var options = ref.options;\n            var title = ref.title;\n            var mirror = options.labels.mirror;\n            var vertical = options.vertical;\n\n            if (title) {\n                if (vertical) {\n                    title.options.align = mirror ? RIGHT : LEFT;\n                    title.options.vAlign = title.options.position;\n                } else {\n                    title.options.align = title.options.position;\n                    title.options.vAlign = mirror ? TOP : BOTTOM;\n                }\n\n                title.reflow(this.box);\n            }\n        },\n\n        arrangeNotes: function() {\n            var this$1$1 = this;\n\n            for (var idx = 0; idx < this.notes.length; idx++) {\n                var item = this$1$1.notes[idx];\n                var value = item.options.value;\n                var slot = (void 0);\n\n                if (defined(value)) {\n                    if (this$1$1.shouldRenderNote(value)) {\n                        item.show();\n                    } else {\n                        item.hide();\n                    }\n\n                    slot = this$1$1.noteSlot(value);\n                } else {\n                    item.hide();\n                }\n\n                item.reflow(slot || this$1$1.lineBox());\n            }\n        },\n\n        noteSlot: function(value) {\n            return this.getSlot(value);\n        },\n\n        alignTo: function(secondAxis) {\n            var lineBox = secondAxis.lineBox();\n            var vertical = this.options.vertical;\n            var pos = vertical ? Y : X;\n\n            this.box.snapTo(lineBox, pos);\n            if (vertical) {\n                this.box.shrink(0, this.lineBox().height() - lineBox.height());\n            } else {\n                this.box.shrink(this.lineBox().width() - lineBox.width(), 0);\n            }\n            this.box[pos + 1] -= this.lineBox()[pos + 1] - lineBox[pos + 1];\n            this.box[pos + 2] -= this.lineBox()[pos + 2] - lineBox[pos + 2];\n        },\n\n        axisLabelText: function(value, options, context) {\n            var this$1$1 = this;\n\n            var text;\n            var tmpl = getTemplate(options);\n            var defaultText = function () {\n                if (!options.format) {\n                    return value;\n                }\n\n                return this$1$1.chartService.format.localeAuto(\n                    options.format, [ value ], options.culture\n                );\n            };\n\n            if (tmpl) {\n                var templateContext = $.extend({}, context, {\n                    get text() { return defaultText(); },\n                    value: value,\n                    format: options.format,\n                    culture: options.culture\n                });\n\n                text = tmpl(templateContext);\n            } else {\n                text = defaultText();\n            }\n\n            return text;\n        },\n\n        slot: function(from , to, limit) {\n            var slot = this.getSlot(from, to, limit);\n            if (slot) {\n                return slot.toRect();\n            }\n        },\n\n        contentBox: function() {\n            var box = this.box.clone();\n            var labels = this.labels;\n            if (labels.length) {\n                var axis = this.options.vertical ? Y : X;\n                if (this.chartService.isPannable(axis)) {\n                    var offset = this.maxLabelOffset();\n                    box[axis + 1] -= offset.start;\n                    box[axis + 2] += offset.end;\n                } else {\n                    if (labels[0].options.visible) {\n                        box.wrap(labels[0].box);\n                    }\n                    var lastLabel = labels[labels.length - 1];\n                    if (lastLabel.options.visible) {\n                        box.wrap(lastLabel.box);\n                    }\n                }\n            }\n\n            return box;\n        },\n\n        maxLabelOffset: function() {\n            var this$1$1 = this;\n\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n            var labelsBetweenTicks = this.labelsBetweenTicks();\n            var tickPositions = this.getLabelsTickPositions();\n            var offsetField = vertical ? Y : X;\n            var labels = this.labels;\n            var startPosition = reverse ? 1 : 0;\n            var endPosition = reverse ? 0 : 1;\n            var maxStartOffset = 0;\n            var maxEndOffset = 0;\n\n            for (var idx = 0; idx < labels.length; idx++) {\n                var label = labels[idx];\n                var tickIx = this$1$1.labelTickIndex(label);\n                var startTick = (void 0), endTick = (void 0);\n\n                if (labelsBetweenTicks) {\n                    startTick = tickPositions[tickIx + startPosition];\n                    endTick = tickPositions[tickIx + endPosition];\n                } else {\n                    startTick = endTick = tickPositions[tickIx];\n                }\n\n                maxStartOffset = Math.max(maxStartOffset, startTick - label.box[offsetField + 1]);\n                maxEndOffset = Math.max(maxEndOffset, label.box[offsetField + 2] - endTick);\n            }\n\n            return {\n                start: maxStartOffset,\n                end: maxEndOffset\n            };\n        },\n\n        limitRange: function(from, to, min, max, offset) {\n            var options = this.options;\n\n            if ((from < min && offset < 0 && (!defined(options.min) || options.min <= min)) || (max < to && offset > 0 && (!defined(options.max) || max <= options.max))) {\n                return null;\n            }\n\n            if ((to < min && offset > 0) || (max < from && offset < 0)) {\n                return {\n                    min: from,\n                    max: to\n                };\n            }\n\n            var rangeSize = to - from;\n            var minValue = from;\n            var maxValue = to;\n\n            if (from < min && offset < 0) {\n                minValue = limitValue(from, min, max);\n                maxValue = limitValue(from + rangeSize, min + rangeSize, max);\n            } else if (to > max && offset > 0) {\n                maxValue = limitValue(to, min, max);\n                minValue = limitValue(to - rangeSize, min, max - rangeSize);\n            }\n\n            return {\n                min: minValue,\n                max: maxValue\n            };\n        },\n\n        valueRange: function() {\n            return {\n                min: this.seriesMin,\n                max: this.seriesMax\n            };\n        },\n\n        lineDir: function() {\n            /*\n             * Axis line direction:\n             *   * Vertical: up.\n             *   * Horizontal: right.\n             */\n\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n            return (vertical ? -1 : 1) * (reverse ? -1 : 1);\n        },\n\n        lineInfo: function() {\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var lineBox = this.lineBox();\n            var lineSize = vertical ? lineBox.height() : lineBox.width();\n            var axis = vertical ? Y : X;\n            var axisDir = this.lineDir();\n            var startEdge = axisDir === 1 ? 1 : 2;\n            var axisOrigin = axis + startEdge.toString();\n            var lineStart = lineBox[axisOrigin];\n\n            return {\n                axis: axis,\n                axisOrigin: axisOrigin,\n                axisDir: axisDir,\n                lineBox: lineBox,\n                lineSize: lineSize,\n                lineStart: lineStart\n            };\n        },\n\n        pointOffset: function(point) {\n            var ref = this.lineInfo();\n            var axis = ref.axis;\n            var axisDir = ref.axisDir;\n            var axisOrigin = ref.axisOrigin;\n            var lineBox = ref.lineBox;\n            var lineSize = ref.lineSize;\n            var relative = axisDir > 0 ? point[axis] - lineBox[axisOrigin] : lineBox[axisOrigin] - point[axis];\n            var offset = relative / lineSize;\n\n            return offset;\n        },\n\n        scaleToDelta: function(rawScale, range) {\n            // Scale >= 1 would result in axis range of 0.\n            // Scale <= -1 would reverse the scale direction.\n            var MAX_SCALE = 0.999;\n            var scale = limitValue(rawScale, -MAX_SCALE, MAX_SCALE);\n\n            var delta;\n            if (scale > 0) {\n                delta = range * Math.min(1, scale);\n            } else {\n                delta = range - (range / (1 + scale));\n            }\n\n            return delta;\n        },\n\n        labelsBetweenTicks: function() {\n            return !this.options.justified;\n        },\n\n        prepareUserOptions: function() {\n        }\n    });\n\n    setDefaultOptions(Axis, {\n        labels: {\n            visible: true,\n            rotation: 0,\n            mirror: false,\n            step: 1,\n            skip: 0\n        },\n        line: {\n            width: 1,\n            color: BLACK,\n            visible: true\n        },\n        title: {\n            visible: true,\n            position: CENTER\n        },\n        majorTicks: {\n            align: OUTSIDE,\n            size: 4,\n            skip: 0,\n            step: 1\n        },\n        minorTicks: {\n            align: OUTSIDE,\n            size: 3,\n            skip: 0,\n            step: 1\n        },\n        axisCrossingValue: 0,\n        majorTickType: OUTSIDE,\n        minorTickType: NONE,\n        majorGridLines: {\n            skip: 0,\n            step: 1\n        },\n        minorGridLines: {\n            visible: false,\n            width: 1,\n            color: BLACK,\n            skip: 0,\n            step: 1\n        },\n        // TODO: Move to line or labels options\n        margin: 5,\n        visible: true,\n        reverse: false,\n        justified: true,\n        notes: {\n            label: {\n                text: \"\"\n            }\n        },\n\n        _alignLines: true,\n        _deferLabels: false\n    });\n\n    var MILLISECONDS = \"milliseconds\";\n    var SECONDS = \"seconds\";\n    var MINUTES = \"minutes\";\n    var HOURS = \"hours\";\n    var DAYS = \"days\";\n    var WEEKS = \"weeks\";\n    var MONTHS = \"months\";\n    var YEARS = \"years\";\n\n    var TIME_PER_MILLISECOND = 1;\n    var TIME_PER_SECOND = 1000;\n    var TIME_PER_MINUTE = 60 * TIME_PER_SECOND;\n    var TIME_PER_HOUR = 60 * TIME_PER_MINUTE;\n    var TIME_PER_DAY = 24 * TIME_PER_HOUR;\n    var TIME_PER_WEEK = 7 * TIME_PER_DAY;\n    var TIME_PER_MONTH = 31 * TIME_PER_DAY;\n    var TIME_PER_YEAR = 365 * TIME_PER_DAY;\n    var TIME_PER_UNIT = {\n        \"years\": TIME_PER_YEAR,\n        \"months\": TIME_PER_MONTH,\n        \"weeks\": TIME_PER_WEEK,\n        \"days\": TIME_PER_DAY,\n        \"hours\": TIME_PER_HOUR,\n        \"minutes\": TIME_PER_MINUTE,\n        \"seconds\": TIME_PER_SECOND,\n        \"milliseconds\": TIME_PER_MILLISECOND\n    };\n\n    function absoluteDateDiff(a, b) {\n        var diff = a.getTime() - b;\n        var offsetDiff = a.getTimezoneOffset() - b.getTimezoneOffset();\n\n        return diff - (offsetDiff * TIME_PER_MINUTE);\n    }\n\n    function addTicks(date, ticks) {\n        return new Date(date.getTime() + ticks);\n    }\n\n    function toDate(value) {\n        var result;\n\n        if (value instanceof Date) {\n            result = value;\n        } else if (value) {\n            result = new Date(value);\n        }\n\n        return result;\n    }\n\n    function startOfWeek(date, weekStartDay) {\n        if (weekStartDay === void 0) { weekStartDay = 0; }\n\n        var daysToSubtract = 0;\n        var day = date.getDay();\n\n        if (!isNaN(day)) {\n            while (day !== weekStartDay) {\n                if (day === 0) {\n                    day = 6;\n                } else {\n                    day--;\n                }\n\n                daysToSubtract++;\n            }\n        }\n\n        return addTicks(date, -daysToSubtract * TIME_PER_DAY);\n    }\n\n    function adjustDST(date, hours) {\n        if (hours === 0 && date.getHours() === 23) {\n            date.setHours(date.getHours() + 2);\n            return true;\n        }\n\n        return false;\n    }\n\n    function addHours(date, hours) {\n        var roundedDate = new Date(date);\n\n        roundedDate.setMinutes(0, 0, 0);\n\n        var tzDiff = (date.getTimezoneOffset() - roundedDate.getTimezoneOffset()) * TIME_PER_MINUTE;\n\n        return addTicks(roundedDate, tzDiff + hours * TIME_PER_HOUR);\n    }\n\n    function addDuration(dateValue, value, unit, weekStartDay) {\n        var result = dateValue;\n\n        if (dateValue) {\n            var date = toDate(dateValue);\n            var hours = date.getHours();\n\n            if (unit === YEARS) {\n                result = new Date(date.getFullYear() + value, 0, 1);\n                adjustDST(result, 0);\n            } else if (unit === MONTHS) {\n                result = new Date(date.getFullYear(), date.getMonth() + value, 1);\n                adjustDST(result, hours);\n            } else if (unit === WEEKS) {\n                result = addDuration(startOfWeek(date, weekStartDay), value * 7, DAYS);\n                adjustDST(result, hours);\n            } else if (unit === DAYS) {\n                result = new Date(date.getFullYear(), date.getMonth(), date.getDate() + value);\n                adjustDST(result, hours);\n            } else if (unit === HOURS) {\n                result = addHours(date, value);\n            } else if (unit === MINUTES) {\n                result = addTicks(date, value * TIME_PER_MINUTE);\n\n                if (result.getSeconds() > 0) {\n                    result.setSeconds(0);\n                }\n            } else if (unit === SECONDS) {\n                result = addTicks(date, value * TIME_PER_SECOND);\n            } else if (unit === MILLISECONDS) {\n                result = addTicks(date, value);\n            }\n\n            if (unit !== MILLISECONDS && result.getMilliseconds() > 0) {\n                result.setMilliseconds(0);\n            }\n        }\n\n        return result;\n    }\n\n    function floorDate(date, unit, weekStartDay) {\n        return addDuration(toDate(date), 0, unit, weekStartDay);\n    }\n\n    function ceilDate(dateValue, unit, weekStartDay) {\n        var date = toDate(dateValue);\n\n        if (date && floorDate(date, unit, weekStartDay).getTime() === date.getTime()) {\n            return date;\n        }\n\n        return addDuration(date, 1, unit, weekStartDay);\n    }\n\n    function dateComparer(a, b) {\n        if (a && b) {\n            return a.getTime() - b.getTime();\n        }\n\n        return -1;\n    }\n\n    function dateDiff(a, b) {\n        return a.getTime() - b;\n    }\n\n    function toTime(value) {\n        if (isArray(value)) {\n            var result = [];\n            for (var idx = 0; idx < value.length; idx++) {\n                result.push(toTime(value[idx]));\n            }\n\n            return result;\n        } else if (value) {\n            return toDate(value).getTime();\n        }\n    }\n\n    function dateEquals(a, b) {\n        if (a && b) {\n            return toTime(a) === toTime(b);\n        }\n\n        return a === b;\n    }\n\n    function timeIndex(date, start, baseUnit) {\n        return absoluteDateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n    }\n\n    function dateIndex(value, start, baseUnit, baseUnitStep) {\n        var date = toDate(value);\n        var startDate = toDate(start);\n        var index;\n\n        if (baseUnit === MONTHS) {\n            index = (date.getMonth() - startDate.getMonth() + (date.getFullYear() - startDate.getFullYear()) * 12) +\n                timeIndex(date, new Date(date.getFullYear(), date.getMonth()), DAYS) / new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n        } else if (baseUnit === YEARS) {\n            index = date.getFullYear() - startDate.getFullYear() + dateIndex(date, new Date(date.getFullYear(), 0), MONTHS, 1) / 12;\n        } else if (baseUnit === DAYS || baseUnit === WEEKS) {\n            index = timeIndex(date, startDate, baseUnit);\n        } else {\n            index = dateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n        }\n\n        return index / baseUnitStep;\n    }\n\n    function duration(a, b, unit) {\n        var diff;\n\n        if (unit === YEARS) {\n            diff = b.getFullYear() - a.getFullYear();\n        } else if (unit === MONTHS) {\n            diff = duration(a, b, YEARS) * 12 + b.getMonth() - a.getMonth();\n        } else if (unit === DAYS) {\n            diff = Math.floor(dateDiff(b, a) / TIME_PER_DAY);\n        } else {\n            diff = Math.floor(dateDiff(b, a) / TIME_PER_UNIT[unit]);\n        }\n\n        return diff;\n    }\n\n    function lteDateIndex(date, sortedDates) {\n        var low = 0;\n        var high = sortedDates.length - 1;\n        var index;\n\n        while (low <= high) {\n            index = Math.floor((low + high) / 2);\n            var currentDate = sortedDates[index];\n\n            if (currentDate < date) {\n                low = index + 1;\n                continue;\n            }\n\n            if (currentDate > date) {\n                high = index - 1;\n                continue;\n            }\n\n            while (dateEquals(sortedDates[index - 1], date)) {\n                index--;\n            }\n\n            return index;\n        }\n\n        if (sortedDates[index] <= date) {\n            return index;\n        }\n\n        return index - 1;\n    }\n\n    function parseDate(intlService, date) {\n        var result;\n        if (isString(date)) {\n            result = intlService.parseDate(date) || toDate(date);\n        } else {\n            result = toDate(date);\n        }\n        return result;\n    }\n\n    function parseDates(intlService, dates) {\n        if (isArray(dates)) {\n            var result = [];\n            for (var idx = 0; idx < dates.length; idx++) {\n                result.push(parseDate(intlService, dates[idx]));\n            }\n\n            return result;\n        }\n\n        return parseDate(intlService, dates);\n    }\n\n    function firstDay(options, intlService) {\n        if (isNumber(options.weekStartDay)) {\n            return options.weekStartDay;\n        }\n\n        if (intlService && intlService.firstDay) {\n            return intlService.firstDay();\n        }\n\n        return 0;\n    }\n\n    var MIN_CATEGORY_POINTS_RANGE = 0.01;\n    var MIN_CATEGORY_RANGE = 0.1;\n\n    function indexOf(value, arr) {\n        if (value instanceof Date) {\n            var length = arr.length;\n            for (var idx = 0; idx < length; idx++) {\n                if (dateEquals(arr[idx], value)) {\n                    return idx;\n                }\n            }\n\n            return -1;\n        }\n\n        return arr.indexOf(value);\n    }\n\n    var CategoryAxis = Axis.extend({\n        initFields: function() {\n            this._ticks = {};\n        },\n\n        categoriesHash: function() {\n            return \"\";\n        },\n\n        clone: function() {\n            var copy = new CategoryAxis($.extend({}, this.options, {\n                categories: this.options.srcCategories\n            }), this.chartService);\n            copy.createLabels();\n\n            return copy;\n        },\n\n        initUserOptions: function(options) {\n            var categories = options.categories || [];\n            var definedMin = defined(options.min);\n            var definedMax = defined(options.max);\n            options.srcCategories = options.categories = categories;\n\n            if ((definedMin || definedMax) && categories.length) {\n                var min = definedMin ? Math.floor(options.min) : 0;\n                var max;\n\n                if (definedMax) {\n                    max = options.justified ? Math.floor(options.max) + 1 : Math.ceil(options.max);\n                } else {\n                    max = categories.length;\n                }\n\n                options.categories = options.categories.slice(min, max);\n            }\n\n            return options;\n        },\n\n        rangeIndices: function() {\n            var options = this.options;\n            var length = options.categories.length || 1;\n            var min = isNumber(options.min) ? options.min % 1 : 0;\n            var max;\n\n            if (isNumber(options.max) && options.max % 1 !== 0 && options.max < this.totalRange().max) {\n                max = length - (1 - options.max % 1);\n            } else {\n                max = length - (options.justified ? 1 : 0);\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        range: function() {\n            var options = this.options;\n            var min = isNumber(options.min) ? options.min : 0;\n            var max = isNumber(options.max) ? options.max : this.totalRange().max;\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        roundedRange: function() {\n            return this.range();\n        },\n\n        totalRange: function() {\n            var options = this.options;\n            return { min: 0, max: Math.max(this._seriesMax || 0, options.srcCategories.length) - (options.justified ? 1 : 0) };\n        },\n\n        scaleOptions: function() {\n            var ref = this.rangeIndices();\n            var min = ref.min;\n            var max = ref.max;\n            var lineBox = this.lineBox();\n            var size = this.options.vertical ? lineBox.height() : lineBox.width();\n            var scale = size / ((max - min) || 1);\n\n            return {\n                scale: scale * (this.options.reverse ? -1 : 1),\n                box: lineBox,\n                min: min,\n                max: max\n            };\n        },\n\n        arrangeLabels: function() {\n            Axis.fn.arrangeLabels.call(this);\n            this.hideOutOfRangeLabels();\n        },\n\n        hideOutOfRangeLabels: function() {\n            var ref = this;\n            var box = ref.box;\n            var labels = ref.labels;\n\n            if (labels.length > 0) {\n                var valueAxis = this.options.vertical ? Y : X;\n                var start = box[valueAxis + 1];\n                var end = box[valueAxis + 2];\n                var firstLabel = labels[0];\n                var lastLabel = last(labels);\n\n                if (firstLabel.box[valueAxis + 1] > end || firstLabel.box[valueAxis + 2] < start) {\n                    firstLabel.options.visible = false;\n                }\n                if (lastLabel.box[valueAxis + 1] > end || lastLabel.box[valueAxis + 2] < start) {\n                    lastLabel.options.visible = false;\n                }\n            }\n        },\n\n        getMajorTickPositions: function() {\n            return this.getTicks().majorTicks;\n        },\n\n        getMinorTickPositions: function() {\n            return this.getTicks().minorTicks;\n        },\n\n        getLabelsTickPositions: function() {\n            return this.getTicks().labelTicks;\n        },\n\n        tickIndices: function(stepSize) {\n            var ref = this.rangeIndices();\n            var min = ref.min;\n            var max = ref.max;\n            var limit = Math.ceil(max);\n            var current = Math.floor(min);\n            var indices = [];\n\n            while (current <= limit) {\n                indices.push(current);\n                current += stepSize;\n            }\n\n            return indices;\n        },\n\n        getTickPositions: function(stepSize) {\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n            var ref$1 = this.scaleOptions();\n            var scale = ref$1.scale;\n            var box = ref$1.box;\n            var min = ref$1.min;\n            var pos = box[(vertical ? Y : X) + (reverse ? 2 : 1)];\n            var indices = this.tickIndices(stepSize);\n            var positions = [];\n\n            for (var idx = 0; idx < indices.length; idx++) {\n                positions.push(pos + round(scale * (indices[idx] - min), COORD_PRECISION));\n            }\n\n            return positions;\n        },\n\n        getTicks: function() {\n            var options = this.options;\n            var cache = this._ticks;\n            var range = this.rangeIndices();\n            var lineBox = this.lineBox();\n            var hash = lineBox.getHash() + range.min + \",\" + range.max + options.reverse + options.justified;\n\n            if (cache._hash !== hash) {\n                var hasMinor = options.minorTicks.visible || options.minorGridLines.visible;\n                cache._hash = hash;\n                cache.labelTicks = this.getTickPositions(1);\n                cache.majorTicks = this.filterOutOfRangePositions(cache.labelTicks, lineBox);\n                cache.minorTicks = hasMinor ? this.filterOutOfRangePositions(this.getTickPositions(0.5), lineBox) : [];\n            }\n\n            return cache;\n        },\n\n        filterOutOfRangePositions: function(positions, lineBox) {\n            if (!positions.length) {\n                return positions;\n            }\n\n            var axis = this.options.vertical ? Y : X;\n            var inRange = function (position) { return lineBox[axis + 1] <= position && position <= lineBox[axis + 2]; };\n\n            var end = positions.length - 1;\n            var startIndex = 0;\n            while (!inRange(positions[startIndex]) && startIndex <= end) {\n                startIndex++;\n            }\n\n            var endIndex = end;\n\n            while (!inRange(positions[endIndex]) && endIndex >= 0) {\n                endIndex--;\n            }\n\n            return positions.slice(startIndex, endIndex + 1);\n        },\n\n        lineInfo: function() {\n            var ref = this.options;\n            var vertical = ref.vertical;\n            var reverse = ref.reverse;\n            var lineBox = this.lineBox();\n            var lineSize = vertical ? lineBox.height() : lineBox.width();\n            var axis = vertical ? Y : X;\n            var axisDir = reverse ? -1 : 1;\n            var startEdge = axisDir === 1 ? 1 : 2;\n            var axisOrigin = axis + startEdge.toString();\n            var lineStart = lineBox[axisOrigin];\n\n            return {\n                axis: axis,\n                axisOrigin: axisOrigin,\n                axisDir: axisDir,\n                lineBox: lineBox,\n                lineSize: lineSize,\n                lineStart: lineStart\n            };\n        },\n\n        lineDir: function() {\n            /*\n             *  Category axis line direction:\n             *    * Vertical: down.\n             *    * Horizontal: right.\n             */\n\n            var ref = this.options;\n            var reverse = ref.reverse;\n            return reverse ? -1 : 1;\n        },\n\n        getSlot: function(from, to, limit) {\n            var options = this.options;\n            var reverse = options.reverse;\n            var justified = options.justified;\n            var ref = this.scaleOptions();\n            var scale = ref.scale;\n            var box = ref.box;\n            var min = ref.min;\n            var ref$1 = this.lineInfo();\n            var valueAxis = ref$1.axis;\n            var lineStart = ref$1.lineStart;\n\n            var slotBox = box.clone();\n            var singleSlot = !defined(to);\n\n            var start = valueOrDefault(from, 0);\n            var end = valueOrDefault(to, start);\n            end = Math.max(end - 1, start);\n\n            // Fixes transient bug caused by iOS 6.0 JIT\n            // (one can never be too sure)\n            end = Math.max(start, end);\n\n            var p1 = lineStart + (start - min) * scale;\n            var p2 = lineStart + (end + 1 - min) * scale;\n\n            if (singleSlot && justified) {\n                p2 = p1;\n            }\n\n            if (limit) {\n                p1 = limitValue(p1, box[valueAxis + 1], box[valueAxis + 2]);\n                p2 = limitValue(p2, box[valueAxis + 1], box[valueAxis + 2]);\n            }\n\n            slotBox[valueAxis + 1] = reverse ? p2 : p1;\n            slotBox[valueAxis + 2] = reverse ? p1 : p2;\n\n            return slotBox;\n        },\n\n        limitSlot: function(slot) {\n            var vertical = this.options.vertical;\n            var valueAxis = vertical ? Y : X;\n            var lineBox = this.lineBox();\n            var limittedSlot = slot.clone();\n\n            limittedSlot[valueAxis + 1] = limitValue(slot[valueAxis + 1], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n            limittedSlot[valueAxis + 2] = limitValue(slot[valueAxis + 2], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n\n            return limittedSlot;\n        },\n\n        slot: function(from, to, limit) {\n            var min = Math.floor(this.options.min || 0);\n            var start = from;\n            var end = to;\n\n            if (typeof start === \"string\") {\n                start = this.categoryIndex(start);\n            } else if (isNumber(start)) {\n                start -= min;\n            }\n\n            if (typeof end === \"string\") {\n                end = this.categoryIndex(end);\n            } else if (isNumber(end)) {\n                end -= min;\n            }\n\n            return Axis.fn.slot.call(this, start, end, limit);\n        },\n\n        pointCategoryIndex: function(point) {\n            var ref = this.options;\n            var reverse = ref.reverse;\n            var justified = ref.justified;\n            var vertical = ref.vertical;\n            var valueAxis = vertical ? Y : X;\n            var ref$1 = this.scaleOptions();\n            var scale = ref$1.scale;\n            var box = ref$1.box;\n            var min = ref$1.min;\n            var max = ref$1.max;\n            var startValue = reverse ? max : min;\n            var lineStart = box[valueAxis + 1];\n            var lineEnd = box[valueAxis + 2];\n            var pos = point[valueAxis];\n\n            if (pos < lineStart || pos > lineEnd) {\n                return null;\n            }\n\n            var value = startValue + (pos - lineStart) / scale;\n            var diff = value % 1;\n\n            if (justified) {\n                value = Math.round(value);\n            } else if (diff === 0 && value > 0) {\n                value--;\n            }\n\n            return Math.floor(value);\n        },\n\n        getCategory: function(point) {\n            var index = this.pointCategoryIndex(point);\n\n            if (index === null) {\n                return null;\n            }\n\n            return this.options.categories[index];\n        },\n\n        categoryIndex: function(value) {\n            return this.totalIndex(value) - Math.floor(this.options.min || 0);\n        },\n\n        categoryAt: function(index, total) {\n            var options = this.options;\n\n            return (total ? options.srcCategories : options.categories)[index];\n        },\n\n        categoriesCount: function() {\n            return (this.options.categories || []).length;\n        },\n\n        translateRange: function(delta) {\n            var options = this.options;\n            var lineBox = this.lineBox();\n            var size = options.vertical ? lineBox.height() : lineBox.width();\n            var range = options.categories.length;\n            var scale = size / range;\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n\n            return {\n                min: offset,\n                max: range + offset\n            };\n        },\n\n        scaleRange: function(scale, cursor) {\n            var position = Math.abs(this.pointOffset(cursor));\n            var rangeIndices = this.limitedRangeIndices();\n            var range = rangeIndices.max - rangeIndices.min;\n            var delta = this.scaleToDelta(scale, range);\n            var minDelta = position * delta;\n            var maxDelta = (1 - position) * delta;\n            var min = rangeIndices.min + minDelta;\n            var max = rangeIndices.max - maxDelta;\n\n            if (max - min < MIN_CATEGORY_RANGE) {\n                max = min + MIN_CATEGORY_RANGE;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        zoomRange: function(scale, cursor) {\n            var ref = this.totalRange();\n            var totalMin = ref.min;\n            var totalMax = ref.max;\n            var range = this.scaleRange(scale, cursor);\n\n            return {\n                min: limitValue(range.min, totalMin, totalMax),\n                max: limitValue(range.max, totalMin, totalMax)\n            };\n        },\n\n        labelsCount: function() {\n            var labelsRange = this.labelsRange();\n\n            return labelsRange.max - labelsRange.min;\n        },\n\n        labelsRange: function() {\n            var options = this.options;\n            var justified = options.justified;\n            var labelOptions = options.labels;\n            var ref = this.limitedRangeIndices(true);\n            var min = ref.min;\n            var max = ref.max;\n            var start = Math.floor(min);\n\n            if (!justified) {\n                min = Math.floor(min);\n                max = Math.ceil(max);\n            } else {\n                min = Math.ceil(min);\n                max = Math.floor(max);\n            }\n\n            var skip;\n\n            if (min > labelOptions.skip) {\n                skip = labelOptions.skip + labelOptions.step * Math.ceil((min - labelOptions.skip) / labelOptions.step);\n            } else {\n                skip = labelOptions.skip;\n            }\n\n            return {\n                min: skip - start,\n                max: (options.categories.length ? max + (justified ? 1 : 0) : 0) - start\n            };\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            var options = this.options;\n            var dataItem = options.dataItems ? options.dataItems[index] : null;\n            var category = valueOrDefault(options.categories[index], \"\");\n\n            labelContext.dataItem = dataItem;\n            var text = this.axisLabelText(category, labelOptions, labelContext);\n\n            return new AxisLabel(category, text, index, dataItem, labelOptions);\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.limitedRangeIndices();\n\n            return Math.floor(range.min) <= value && value <= Math.ceil(range.max);\n        },\n\n        noteSlot: function(value) {\n            var options = this.options;\n            var index = value - Math.floor(options.min || 0);\n            return this.getSlot(index);\n        },\n\n        arrangeNotes: function() {\n            Axis.fn.arrangeNotes.call(this);\n            this.hideOutOfRangeNotes();\n        },\n\n        hideOutOfRangeNotes: function() {\n            var ref = this;\n            var notes = ref.notes;\n            var box = ref.box;\n            if (notes && notes.length) {\n                var valueAxis = this.options.vertical ? Y : X;\n                var start = box[valueAxis + 1];\n                var end = box[valueAxis + 2];\n\n                for (var idx = 0; idx < notes.length; idx++) {\n                    var note = notes[idx];\n                    if (note.box && (end < note.box[valueAxis + 1] || note.box[valueAxis + 2] < start)) {\n                        note.hide();\n                    }\n                }\n            }\n        },\n\n        pan: function(delta) {\n            var range = this.limitedRangeIndices(true);\n            var ref = this.scaleOptions();\n            var scale = ref.scale;\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n            var totalRange = this.totalRange();\n            var min = range.min + offset;\n            var max = range.max + offset;\n\n            return this.limitRange(min, max, 0, totalRange.max, offset);\n        },\n\n        pointsRange: function(start, end) {\n            var ref = this.options;\n            var reverse = ref.reverse;\n            var vertical = ref.vertical;\n            var valueAxis = vertical ? Y : X;\n            var range = this.limitedRangeIndices(true);\n            var ref$1 = this.scaleOptions();\n            var scale = ref$1.scale;\n            var box = ref$1.box;\n            var lineStart = box[valueAxis + (reverse ? 2 : 1)];\n\n            var diffStart = start[valueAxis] - lineStart;\n            var diffEnd = end[valueAxis] - lineStart;\n\n            var min = range.min + diffStart / scale;\n            var max = range.min + diffEnd / scale;\n            var rangeMin = Math.min(min, max);\n            var rangeMax = Math.max(min, max);\n\n            if (rangeMax - rangeMin >= MIN_CATEGORY_POINTS_RANGE) {\n                return {\n                    min: rangeMin,\n                    max: rangeMax\n                };\n            }\n        },\n\n        valueRange: function() {\n            return this.range();\n        },\n\n        totalIndex: function(value) {\n            var options = this.options;\n            var index = this._categoriesMap ?\n                this._categoriesMap.get(value) : indexOf(value, options.srcCategories);\n\n            return index;\n        },\n\n        currentRangeIndices: function() {\n            var options = this.options;\n            var min = 0;\n\n            if (isNumber(options.min)) {\n                min = Math.floor(options.min);\n            }\n\n            var max;\n            if (isNumber(options.max)) {\n                max = options.justified ? Math.floor(options.max) : Math.ceil(options.max) - 1;\n            } else {\n                max = this.totalCount() - 1;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        limitedRangeIndices: function(totalLimit) {\n            var options = this.options;\n            var min = isNumber(options.min) ? options.min : 0;\n            var max;\n\n            if (isNumber(options.max)) {\n                max = options.max;\n            } else if (isNumber(options.min)) {\n                max = min + options.categories.length;\n            } else {\n                max = this.totalRange().max || 1;\n            }\n\n            if (totalLimit) {\n                var totalRange = this.totalRange();\n                min = limitValue(min, 0, totalRange.max);\n                max = limitValue(max, 0, totalRange.max);\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        totalRangeIndices: function() {\n            return {\n                min: 0,\n                max: this.totalRange().max || 1\n            };\n        },\n\n        mapCategories: function() {\n            if (!this._categoriesMap) {\n                var map$$1 = this._categoriesMap = new HashMap();\n                var srcCategories = this.options.srcCategories;\n                for (var idx = 0; idx < srcCategories.length; idx++) {\n                    map$$1.set(srcCategories[idx], idx);\n                }\n            }\n        },\n\n        totalCount: function() {\n            return Math.max(this.options.srcCategories.length, this._seriesMax || 0);\n        }\n    });\n\n    setDefaultOptions(CategoryAxis, {\n        type: \"category\",\n        vertical: false,\n        majorGridLines: {\n            visible: false,\n            width: 1,\n            color: BLACK\n        },\n        labels: {\n            zIndex: 1\n        },\n        justified: false,\n        _deferLabels: true\n    });\n\n    var COORDINATE_LIMIT = 300000;\n\n    var DateLabelFormats = {\n        milliseconds: \"HH:mm:ss.fff\",\n        seconds: \"HH:mm:ss\",\n        minutes: \"HH:mm\",\n        hours: \"HH:mm\",\n        days: \"M/d\",\n        weeks: \"M/d\",\n        months: \"MMM 'yy\",\n        years: \"yyyy\"\n    };\n\n    var ZERO_THRESHOLD = 0.2;\n\n    var AUTO = \"auto\";\n    var BASE_UNITS = [\n        MILLISECONDS, SECONDS, MINUTES, HOURS, DAYS, WEEKS, MONTHS, YEARS\n    ];\n    var FIT = \"fit\";\n\n    function categoryRange(categories, clearCache) {\n        if (clearCache) {\n            categories._range = undefined;\n        }\n\n        var range = categories._range;\n        if (!range) {\n            range = categories._range = sparseArrayLimits(categories);\n            range.min = toDate(range.min);\n            range.max = toDate(range.max);\n        }\n\n        return range;\n    }\n\n    var EmptyDateRange = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        displayIndices: function() {\n            return {\n                min: 0,\n                max: 1\n            };\n        },\n\n        displayRange: function() {\n            return {};\n        },\n\n        total: function() {\n            return {};\n        },\n\n        valueRange: function() {\n            return {};\n        },\n\n        valueIndex: function() {\n            return -1;\n        },\n\n        values: function() {\n            return [];\n        },\n\n        totalIndex: function() {\n            return -1;\n        },\n\n        valuesCount: function() {\n            return 0;\n        },\n\n        totalCount: function() {\n            return 0;\n        },\n\n        dateAt: function() {\n            return null;\n        }\n    });\n\n    var DateRange = Class.extend({\n        init: function(start, end, options) {\n            this.options = options;\n            options.baseUnitStep = options.baseUnitStep || 1;\n\n            var roundToBaseUnit = options.roundToBaseUnit;\n            var justified = options.justified;\n\n            this.start = addDuration(start, 0, options.baseUnit, options.weekStartDay);\n            var lowerEnd = this.roundToTotalStep(end);\n            var expandEnd = !justified && dateEquals(end, lowerEnd) && !options.justifyEnd;\n\n            this.end = this.roundToTotalStep(end, !justified, expandEnd ? 1 : 0);\n\n            var min = options.min || start;\n            this.valueStart = this.roundToTotalStep(min);\n            this.displayStart = roundToBaseUnit ? this.valueStart : min;\n\n            var max = options.max;\n            if (!max) {\n                this.valueEnd = lowerEnd;\n                this.displayEnd = roundToBaseUnit || expandEnd ? this.end : end;\n            } else {\n                var next = !justified && dateEquals(max, this.roundToTotalStep(max)) ? -1 : 0;\n                this.valueEnd = this.roundToTotalStep(max, false, next);\n                this.displayEnd = roundToBaseUnit ? this.roundToTotalStep(max, !justified) : options.max;\n            }\n\n            if (this.valueEnd < this.valueStart) {\n                this.valueEnd = this.valueStart;\n            }\n            if (this.displayEnd <= this.displayStart) {\n                this.displayEnd = this.roundToTotalStep(this.displayStart, false, 1);\n            }\n        },\n\n        displayRange: function() {\n            return {\n                min: this.displayStart,\n                max: this.displayEnd\n            };\n        },\n\n        displayIndices: function() {\n            if (!this._indices) {\n                var options = this.options;\n\n                var baseUnit = options.baseUnit;\n                var baseUnitStep = options.baseUnitStep;\n\n                var minIdx = dateIndex(this.displayStart, this.valueStart, baseUnit, baseUnitStep);\n                var maxIdx = dateIndex(this.displayEnd, this.valueStart, baseUnit, baseUnitStep);\n\n                this._indices = { min: minIdx, max: maxIdx };\n            }\n\n            return this._indices;\n        },\n\n        total: function() {\n            return {\n                min: this.start,\n                max: this.end\n            };\n        },\n\n        totalCount: function() {\n            var last$$1 = this.totalIndex(this.end);\n\n            return last$$1 + (this.options.justified ? 1 : 0);\n        },\n\n        valueRange: function() {\n            return {\n                min: this.valueStart,\n                max: this.valueEnd\n            };\n        },\n\n        valueIndex: function(value) {\n            var options = this.options;\n            return Math.floor(dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep));\n        },\n\n        totalIndex: function(value) {\n            var options = this.options;\n            return Math.floor(dateIndex(value, this.start, options.baseUnit, options.baseUnitStep));\n        },\n\n        dateIndex: function(value) {\n            var options = this.options;\n            return dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep);\n        },\n\n        valuesCount: function() {\n            var maxIdx = this.valueIndex(this.valueEnd);\n\n            return maxIdx + 1;\n        },\n\n        values: function() {\n            var values = this._values;\n            if (!values) {\n                var options = this.options;\n                var range = this.valueRange();\n                this._values = values = [];\n\n                for (var date = range.min; date <= range.max;) {\n                    values.push(date);\n                    date = addDuration(date, options.baseUnitStep, options.baseUnit, options.weekStartDay);\n                }\n            }\n\n            return values;\n        },\n\n        dateAt: function(index, total) {\n            var options = this.options;\n\n            return addDuration(total ? this.start : this.valueStart, options.baseUnitStep * index, options.baseUnit, options.weekStartDay);\n        },\n\n        roundToTotalStep: function(value, upper, next) {\n            var ref = this.options;\n            var baseUnit = ref.baseUnit;\n            var baseUnitStep = ref.baseUnitStep;\n            var weekStartDay = ref.weekStartDay;\n            var start = this.start;\n\n            var step = dateIndex(value, start, baseUnit, baseUnitStep);\n            var roundedStep = upper ? Math.ceil(step) : Math.floor(step);\n\n            if (next) {\n                roundedStep += next;\n            }\n\n            return addDuration(start, roundedStep * baseUnitStep, baseUnit, weekStartDay);\n        }\n    });\n\n    function autoBaseUnit(options, startUnit, startStep) {\n        var categoryLimits = categoryRange(options.categories);\n        var span = (options.max || categoryLimits.max) - (options.min || categoryLimits.min);\n        var autoBaseUnitSteps = options.autoBaseUnitSteps;\n        var maxDateGroups = options.maxDateGroups;\n        var autoUnit = options.baseUnit === FIT;\n        var autoUnitIx = startUnit ? BASE_UNITS.indexOf(startUnit) : 0;\n        var baseUnit = autoUnit ? BASE_UNITS[autoUnitIx++] : options.baseUnit;\n        var units = span / TIME_PER_UNIT[baseUnit];\n        var totalUnits = units;\n        var unitSteps, step, nextStep;\n\n        while (!step || units >= maxDateGroups) {\n            unitSteps = unitSteps || autoBaseUnitSteps[baseUnit].slice(0);\n\n            do {\n                nextStep = unitSteps.shift();\n            } while (nextStep && startUnit === baseUnit && nextStep < startStep);\n\n            if (nextStep) {\n                step = nextStep;\n                units = totalUnits / step;\n            } else if (baseUnit === last(BASE_UNITS)) {\n                step = Math.ceil(totalUnits / maxDateGroups);\n                break;\n            } else if (autoUnit) {\n                baseUnit = BASE_UNITS[autoUnitIx++] || last(BASE_UNITS);\n                totalUnits = span / TIME_PER_UNIT[baseUnit];\n                unitSteps = null;\n            } else {\n                if (units > maxDateGroups) {\n                    step = Math.ceil(totalUnits / maxDateGroups);\n                }\n                break;\n            }\n        }\n\n        options.baseUnitStep = step;\n        options.baseUnit = baseUnit;\n    }\n\n    function defaultBaseUnit(options) {\n        var categories = options.categories;\n        var count = defined(categories) ? categories.length : 0;\n        var minDiff = MAX_VALUE;\n        var lastCategory, unit;\n\n        for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n            var category = categories[categoryIx];\n\n            if (category && lastCategory) {\n                var diff = absoluteDateDiff(category, lastCategory);\n                if (diff > 0) {\n                    minDiff = Math.min(minDiff, diff);\n\n                    if (minDiff >= TIME_PER_YEAR) {\n                        unit = YEARS;\n                    } else if (minDiff >= TIME_PER_MONTH - TIME_PER_DAY * 3) {\n                        unit = MONTHS;\n                    } else if (minDiff >= TIME_PER_WEEK) {\n                        unit = WEEKS;\n                    } else if (minDiff >= TIME_PER_DAY) {\n                        unit = DAYS;\n                    } else if (minDiff >= TIME_PER_HOUR) {\n                        unit = HOURS;\n                    } else if (minDiff >= TIME_PER_MINUTE) {\n                        unit = MINUTES;\n                    } else {\n                        unit = SECONDS;\n                    }\n                }\n            }\n\n            lastCategory = category;\n        }\n\n        options.baseUnit = unit || DAYS;\n    }\n\n    function initUnit(options) {\n        var baseUnit = (options.baseUnit || \"\").toLowerCase();\n        var useDefault = baseUnit !== FIT && !inArray(baseUnit, BASE_UNITS);\n\n        if (useDefault) {\n            defaultBaseUnit(options);\n        }\n\n        if (baseUnit === FIT || options.baseUnitStep === AUTO) {\n            autoBaseUnit(options);\n        }\n\n        return options;\n    }\n\n    var DateCategoryAxis = CategoryAxis.extend({\n        clone: function() {\n            var copy = new DateCategoryAxis($.extend({}, this.options), this.chartService);\n            copy.createLabels();\n\n            return copy;\n        },\n\n        categoriesHash: function() {\n            var start = this.dataRange.total().min;\n            return this.options.baseUnit + this.options.baseUnitStep + start;\n        },\n\n        initUserOptions: function(options) {\n            return options;\n        },\n\n        initFields: function() {\n            CategoryAxis.fn.initFields.call(this);\n\n            var chartService = this.chartService;\n            var intlService = chartService.intl;\n            var options = this.options;\n\n            var categories = options.categories || [];\n            if (!categories._parsed) {\n                categories = parseDates(intlService, categories);\n                categories._parsed = true;\n            }\n\n            options = deepExtend({\n                roundToBaseUnit: true\n            }, options, {\n                categories: categories,\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                weekStartDay: firstDay(options, intlService)\n            });\n\n            if (chartService.panning && chartService.isPannable(options.vertical ? Y : X)) {\n                options.roundToBaseUnit = false;\n            }\n\n            options.userSetBaseUnit = options.userSetBaseUnit || options.baseUnit;\n            options.userSetBaseUnitStep = options.userSetBaseUnitStep || options.baseUnitStep;\n\n            this.options = options;\n            options.srcCategories = categories;\n\n            if (categories.length > 0) {\n                var range = categoryRange(categories, true);\n                var maxDivisions = options.maxDivisions;\n                var safeOptions = initUnit(options);\n\n                var forecast = options._forecast;\n                if (forecast) {\n                    if (forecast.before > 0) {\n                        range.min = addDuration(range.min, -forecast.before, safeOptions.baseUnit, safeOptions.weekStartDay);\n                    }\n\n                    if (forecast.after > 0) {\n                        range.max = addDuration(range.max, forecast.after, safeOptions.baseUnit, safeOptions.weekStartDay);\n                    }\n                }\n\n                this.dataRange = new DateRange(range.min, range.max, safeOptions);\n\n                if (maxDivisions) {\n                    var dataRange = this.dataRange.displayRange();\n\n                    var divisionOptions = $.extend({}, options, {\n                        justified: true,\n                        roundToBaseUnit: false,\n                        baseUnit: 'fit',\n                        min: dataRange.min,\n                        max: dataRange.max,\n                        maxDateGroups: maxDivisions\n                    });\n\n                    var dataRangeOptions = this.dataRange.options;\n\n                    autoBaseUnit(divisionOptions, dataRangeOptions.baseUnit, dataRangeOptions.baseUnitStep);\n\n                    this.divisionRange = new DateRange(range.min, range.max, divisionOptions);\n                } else {\n                    this.divisionRange = this.dataRange;\n                }\n\n            } else {\n                options.baseUnit = options.baseUnit || DAYS;\n                this.dataRange = this.divisionRange = new EmptyDateRange(options);\n            }\n\n            this.rangeLabels = [];\n        },\n\n        tickIndices: function(stepSize) {\n            var ref = this;\n            var dataRange = ref.dataRange;\n            var divisionRange = ref.divisionRange;\n            var valuesCount = divisionRange.valuesCount();\n\n            if (!this.options.maxDivisions || !valuesCount) {\n                return CategoryAxis.fn.tickIndices.call(this, stepSize);\n            }\n\n            var indices = [];\n            var values = divisionRange.values();\n            var offset = 0;\n\n            if (!this.options.justified) {\n                values = values.concat(divisionRange.dateAt(valuesCount));\n                offset = 0.5;//align ticks to the center of not justified categories\n            }\n\n            for (var idx = 0; idx < values.length; idx++) {\n                indices.push(dataRange.dateIndex(values[idx]) + offset);\n                if (stepSize !== 1 && idx >= 1) {\n                    var last$$1 = indices.length - 1;\n                    indices.splice(idx, 0, indices[last$$1 - 1] + (indices[last$$1] - indices[last$$1 - 1]) * stepSize);\n                }\n            }\n\n            return indices;\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.range();\n            var categories = this.options.categories || [];\n\n            return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0 && categories.length;\n        },\n\n        parseNoteValue: function(value) {\n            return parseDate(this.chartService.intl, value);\n        },\n\n        noteSlot: function(value) {\n            return this.getSlot(value);\n        },\n\n        translateRange: function(delta) {\n            var options = this.options;\n            var baseUnit = options.baseUnit;\n            var weekStartDay = options.weekStartDay;\n            var vertical = options.vertical;\n            var lineBox = this.lineBox();\n            var size = vertical ? lineBox.height() : lineBox.width();\n            var range = this.range();\n            var scale = size / (range.max - range.min);\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n\n            if (range.min && range.max) {\n                var from = addTicks(options.min || range.min, offset);\n                var to = addTicks(options.max || range.max, offset);\n\n                range = {\n                    min: addDuration(from, 0, baseUnit, weekStartDay),\n                    max: addDuration(to, 0, baseUnit, weekStartDay)\n                };\n            }\n\n            return range;\n        },\n\n        labelsRange: function() {\n            return {\n                min: this.options.labels.skip,\n                max: this.divisionRange.valuesCount()\n            };\n        },\n\n        pan: function(delta) {\n            if (this.isEmpty()) {\n                return null;\n            }\n\n            var options = this.options;\n            var lineBox = this.lineBox();\n            var size = options.vertical ? lineBox.height() : lineBox.width();\n            var ref = this.dataRange.displayRange();\n            var min = ref.min;\n            var max = ref.max;\n            var totalLimits = this.dataRange.total();\n            var scale = size / (max - min);\n            var offset = round(delta / scale, DEFAULT_PRECISION) * (options.reverse ? -1 : 1);\n            var from = addTicks(min, offset);\n            var to = addTicks(max, offset);\n\n            var panRange = this.limitRange(toTime(from), toTime(to), toTime(totalLimits.min), toTime(totalLimits.max), offset);\n\n            if (panRange) {\n                panRange.min = toDate(panRange.min);\n                panRange.max = toDate(panRange.max);\n                panRange.baseUnit = options.baseUnit;\n                panRange.baseUnitStep = options.baseUnitStep || 1;\n                panRange.userSetBaseUnit = options.userSetBaseUnit;\n                panRange.userSetBaseUnitStep = options.userSetBaseUnitStep;\n\n                return panRange;\n            }\n        },\n\n        pointsRange: function(start, end) {\n            if (this.isEmpty()) {\n                return null;\n            }\n\n            var pointsRange = CategoryAxis.fn.pointsRange.call(this, start, end);\n            var datesRange = this.dataRange.displayRange();\n            var indicesRange = this.dataRange.displayIndices();\n            var scale = dateDiff(datesRange.max, datesRange.min) / (indicesRange.max - indicesRange.min);\n            var options = this.options;\n\n            var min = addTicks(datesRange.min, pointsRange.min * scale);\n            var max = addTicks(datesRange.min, pointsRange.max * scale);\n\n            return {\n                min: min,\n                max: max,\n                baseUnit: options.userSetBaseUnit || options.baseUnit,\n                baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n            };\n        },\n\n        scaleRange: function(scale, cursor) {\n            if (this.isEmpty()) {\n                return {};\n            }\n\n            var options = this.options;\n            var fit = options.userSetBaseUnit === FIT;\n            var totalLimits = this.dataRange.total();\n            var ref = this.dataRange.displayRange();\n            var rangeMin = ref.min;\n            var rangeMax = ref.max;\n\n            var position = Math.abs(this.pointOffset(cursor));\n            var range = rangeMax - rangeMin;\n            var delta = this.scaleToDelta(scale, range);\n            var minDelta = Math.round(position * delta);\n            var maxDelta = Math.round((1 - position) * delta);\n\n            var ref$1 = this.dataRange.options;\n            var baseUnit = ref$1.baseUnit;\n            var min = new Date(rangeMin.getTime() + minDelta);\n            var max = new Date(rangeMax.getTime() - maxDelta);\n\n            if (fit) {\n                var autoBaseUnitSteps = options.autoBaseUnitSteps;\n                var maxDateGroups = options.maxDateGroups;\n\n                var maxDiff = last(autoBaseUnitSteps[baseUnit]) * maxDateGroups * TIME_PER_UNIT[baseUnit];\n                var rangeDiff = dateDiff(rangeMax, rangeMin);\n                var diff = dateDiff(max, min);\n                var baseUnitIndex = BASE_UNITS.indexOf(baseUnit);\n                var autoBaseUnitStep, ticks;\n\n                if (diff < TIME_PER_UNIT[baseUnit] && baseUnit !== MILLISECONDS) {\n                    baseUnit = BASE_UNITS[baseUnitIndex - 1];\n                    autoBaseUnitStep = last(autoBaseUnitSteps[baseUnit]);\n                    ticks = (rangeDiff - (maxDateGroups - 1) * autoBaseUnitStep * TIME_PER_UNIT[baseUnit]) / 2;\n                    min = addTicks(rangeMin, ticks);\n                    max = addTicks(rangeMax, -ticks);\n\n                } else if (diff > maxDiff && baseUnit !== YEARS) {\n                    var stepIndex = 0;\n\n                    do {\n                        baseUnitIndex++;\n                        baseUnit = BASE_UNITS[baseUnitIndex];\n                        stepIndex = 0;\n                        ticks = 2 * TIME_PER_UNIT[baseUnit];\n                        do {\n                            autoBaseUnitStep = autoBaseUnitSteps[baseUnit][stepIndex];\n                            stepIndex++;\n                        } while (stepIndex < autoBaseUnitSteps[baseUnit].length && ticks * autoBaseUnitStep < rangeDiff);\n                    } while (baseUnit !== YEARS && ticks * autoBaseUnitStep < rangeDiff);\n\n                    ticks = (ticks * autoBaseUnitStep - rangeDiff) / 2;\n                    if (ticks > 0) {\n                        min = addTicks(rangeMin, -ticks);\n                        max = addTicks(rangeMax, ticks);\n                        min = addTicks(min, limitValue(max, totalLimits.min, totalLimits.max) - max);\n                        max = addTicks(max, limitValue(min, totalLimits.min, totalLimits.max) - min);\n                    }\n                }\n            }\n\n            if (min && max && dateDiff(max, min) > 0) {\n                return {\n                    min: min,\n                    max: max,\n                    baseUnit: options.userSetBaseUnit || options.baseUnit,\n                    baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n                };\n            }\n        },\n\n        zoomRange: function(scale, cursor) {\n            var totalLimits = this.dataRange.total();\n            var range = this.scaleRange(scale, cursor);\n\n            if (range) {\n                if (range.min < totalLimits.min) {\n                    range.min = totalLimits.min;\n                }\n                if (range.max > totalLimits.max) {\n                    range.max = totalLimits.max;\n                }\n            }\n\n            return range;\n        },\n\n        range: function() {\n            return this.dataRange.displayRange();\n        },\n\n        createLabels: function() {\n            CategoryAxis.fn.createLabels.call(this);\n            this.createRangeLabels();\n        },\n\n        clearLabels: function() {\n            CategoryAxis.fn.clearLabels.call(this);\n            this.rangeLabels = [];\n        },\n\n        arrangeLabels: function() {\n            this.arrangeRangeLabels();\n            CategoryAxis.fn.arrangeLabels.call(this);\n        },\n\n        arrangeRangeLabels: function() {\n            var ref = this;\n            var options = ref.options;\n            var rangeLabels = ref.rangeLabels;\n            if (rangeLabels.length === 0) {\n                return;\n            }\n\n            var lineBox = this.lineBox();\n            var vertical = options.vertical;\n            var mirror = options.rangeLabels.mirror || options.labels.mirror;\n\n            var firstLabel = rangeLabels[0];\n            if (firstLabel) {\n                var position = vertical ? lineBox.y1 - (firstLabel.box.height() / 2) : lineBox.x1;\n                this.positionLabel(firstLabel, mirror, position);\n            }\n\n            var lastLabel = rangeLabels[1];\n            if (lastLabel) {\n                var position$1 = vertical ? lineBox.y2 - (lastLabel.box.height() / 2) : lineBox.x2;\n                this.positionLabel(lastLabel, mirror, position$1);\n            }\n        },\n\n        autoRotateLabels: function() {\n            CategoryAxis.fn.autoRotateLabels.call(this);\n            this.autoRotateRangeLabels();\n        },\n\n        hideOutOfRangeLabels: function() {\n            CategoryAxis.fn.hideOutOfRangeLabels.call(this);\n            this.hideOverlappingLabels();\n        },\n\n        hideOverlappingLabels: function() {\n            var ref = this;\n            var rangeLabels = ref.rangeLabels;\n            var labels = ref.labels;\n            if (rangeLabels.length === 0) {\n                return;\n            }\n\n            function clip(rangeLabel, label) {\n                if (!label.options.visible || label.box.overlaps(rangeLabel.box)) {\n                    label.options.visible = false;\n                    return true;\n                }\n\n                return false;\n            }\n\n            var firstRangeLabel = rangeLabels[0];\n            if (firstRangeLabel && firstRangeLabel.options.visible) {\n                for (var i = 0; i < labels.length; i++) {\n                    var overlaps = clip(firstRangeLabel, labels[i]);\n                    if (!overlaps) {\n                        break;\n                    }\n                }\n            }\n\n            var lastRangeLabel = rangeLabels[1];\n            if (lastRangeLabel && lastRangeLabel.options.visible) {\n                for (var i$1 = labels.length - 1; i$1 > 0; --i$1) {\n                    var overlaps$1 = clip(lastRangeLabel, labels[i$1]);\n                    if (!overlaps$1) {\n                        break;\n                    }\n                }\n            }\n        },\n\n        contentBox: function() {\n            var box = CategoryAxis.fn.contentBox.call(this);\n            var rangeLabels = this.rangeLabels;\n\n            for (var i = 0; i < rangeLabels.length; i++) {\n                var label = rangeLabels[i];\n                if (label.options.visible) {\n                    box.wrap(label.box);\n                }\n            }\n\n            return box;\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            if (labelContext === void 0) { labelContext = {}; }\n\n            var options = this.options;\n            var dataItem = options.dataItems && !options.maxDivisions ? options.dataItems[index] : null;\n            var date = this.divisionRange.dateAt(index);\n            var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n\n            labelOptions.format = labelOptions.format || unitFormat;\n            labelContext.dataItem = dataItem;\n\n            var text = this.axisLabelText(date, labelOptions, labelContext);\n            if (text) {\n                return new AxisLabel(date, text, index, dataItem, labelOptions);\n            }\n        },\n\n        createRangeLabels: function() {\n            var this$1$1 = this;\n\n            var ref = this.divisionRange;\n            var displayStart = ref.displayStart;\n            var displayEnd = ref.displayEnd;\n            var options = this.options;\n            var labelOptions = $.extend({}, options.labels, options.rangeLabels, {\n                align: CENTER,\n                zIndex: options.zIndex\n            });\n\n            if (labelOptions.visible !== true) {\n                return;\n            }\n\n            this.normalizeLabelRotation(labelOptions);\n            labelOptions.alignRotation = CENTER;\n\n            if (labelOptions.rotation === \"auto\") {\n                labelOptions.rotation = 0;\n                options.autoRotateRangeLabels = true;\n            }\n\n            var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n            labelOptions.format = labelOptions.format || unitFormat;\n\n            var createLabel = function (index, date, text) {\n                if (text) {\n                    var label = new AxisLabel(date, text, index, null, labelOptions);\n                    this$1$1.append(label);\n                    this$1$1.rangeLabels.push(label);\n                }\n            };\n\n            var startText = this.axisLabelText(displayStart, labelOptions, { index: 0, count: 2 });\n            createLabel(0, displayStart, startText);\n\n            var endText = this.axisLabelText(displayEnd, labelOptions, { index: 1, count: 2 });\n            createLabel(1, displayEnd, endText);\n        },\n\n        autoRotateRangeLabels: function() {\n            var this$1$1 = this;\n\n            var labels = this.rangeLabels;\n            if (!this.options.autoRotateRangeLabels || this.options.vertical || labels.length !== 2) {\n                return;\n            }\n\n            var rotateLabel = function (label, tickPositions, index) {\n                var width = Math.abs(tickPositions[index + 1] - tickPositions[index]) * 2;\n                var angle = this$1$1.autoRotateLabelAngle(label.box, width);\n                if (angle !== 0) {\n                    label.options.rotation = angle;\n                    label.reflow(new Box());\n                }\n            };\n\n            var tickPositions = this.getMajorTickPositions();\n            rotateLabel(labels[0], tickPositions, 0);\n            rotateLabel(labels[1], tickPositions, tickPositions.length - 2);\n        },\n\n        categoryIndex: function(value) {\n            return this.dataRange.valueIndex(value);\n        },\n\n        slot: function(from, to, limit) {\n            var dateRange = this.dataRange;\n            var start = from;\n            var end = to;\n\n            if (start instanceof Date) {\n                start = dateRange.dateIndex(start);\n            }\n\n            if (end instanceof Date) {\n                end = dateRange.dateIndex(end);\n            }\n\n            var slot = this.getSlot(start, end, limit);\n            if (slot) {\n                return slot.toRect();\n            }\n        },\n\n        getSlot: function(a, b, limit) {\n            var start = a;\n            var end = b;\n\n            if (typeof start === OBJECT) {\n                start = this.categoryIndex(start);\n            }\n\n            if (typeof end === OBJECT) {\n                end = this.categoryIndex(end);\n            }\n\n            return CategoryAxis.fn.getSlot.call(this, start, end, limit);\n        },\n\n        valueRange: function() {\n            var options = this.options;\n            var range = categoryRange(options.srcCategories);\n\n            return {\n                min: toDate(range.min),\n                max: toDate(range.max)\n            };\n        },\n\n        categoryAt: function(index, total) {\n            return this.dataRange.dateAt(index, total);\n        },\n\n        categoriesCount: function() {\n            return this.dataRange.valuesCount();\n        },\n\n        rangeIndices: function() {\n            return this.dataRange.displayIndices();\n        },\n\n        labelsBetweenTicks: function() {\n            return !this.divisionRange.options.justified;\n        },\n\n        prepareUserOptions: function() {\n            if (this.isEmpty()) {\n                return;\n            }\n\n            this.options.categories = this.dataRange.values();\n        },\n\n        getCategory: function(point) {\n            var index = this.pointCategoryIndex(point);\n\n            if (index === null) {\n                return null;\n            }\n\n            return this.dataRange.dateAt(index);\n        },\n\n        totalIndex: function(value) {\n            return this.dataRange.totalIndex(value);\n        },\n\n        currentRangeIndices: function() {\n            var range = this.dataRange.valueRange();\n            return {\n                min: this.dataRange.totalIndex(range.min),\n                max: this.dataRange.totalIndex(range.max)\n            };\n        },\n\n        totalRange: function() {\n            return this.dataRange.total();\n        },\n\n        totalRangeIndices: function() {\n            var range = this.dataRange.total();\n            return {\n                min: this.dataRange.totalIndex(range.min),\n                max: this.dataRange.totalIndex(range.max)\n            };\n        },\n\n        totalCount: function() {\n            return this.dataRange.totalCount();\n        },\n\n        isEmpty: function() {\n            return !this.options.srcCategories.length;\n        },\n\n        roundedRange: function() {\n            if (this.options.roundToBaseUnit !== false || this.isEmpty()) {\n                return this.range();\n            }\n\n            var options = this.options;\n            var datesRange = categoryRange(options.srcCategories);\n\n            var dateRange = new DateRange(datesRange.min, datesRange.max, $.extend({}, options, {\n                justified: false,\n                roundToBaseUnit: true,\n                justifyEnd: false\n            }));\n\n            return dateRange.displayRange();\n        }\n    });\n\n    setDefaultOptions(DateCategoryAxis, {\n        type: DATE,\n        labels: {\n            dateFormats: DateLabelFormats\n        },\n        rangeLabels: {\n            visible: false\n        },\n        autoBaseUnitSteps: {\n            milliseconds: [ 1, 10, 100 ],\n            seconds: [ 1, 2, 5, 15, 30 ],\n            minutes: [ 1, 2, 5, 15, 30 ],\n            hours: [ 1, 2, 3 ],\n            days: [ 1, 2, 3 ],\n            weeks: [ 1, 2 ],\n            months: [ 1, 2, 3, 6 ],\n            years: [ 1, 2, 3, 5, 10, 25, 50 ]\n        },\n        maxDateGroups: 10\n    });\n\n    function autoAxisMin(min, max, narrow) {\n        if (!min && !max) {\n            return 0;\n        }\n\n        var axisMin;\n\n        if (min >= 0 && max >= 0) {\n            var minValue = min === max ? 0 : min;\n\n            var diff = (max - minValue) / max;\n            if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n                return 0;\n            }\n\n            axisMin = Math.max(0, minValue - ((max - minValue) / 2));\n        } else {\n            axisMin = min;\n        }\n\n        return axisMin;\n    }\n\n    function autoAxisMax(min, max, narrow) {\n        if (!min && !max) {\n            return 1;\n        }\n\n        var axisMax;\n\n        if (min <= 0 && max <= 0) {\n            var maxValue = min === max ? 0 : max;\n\n            var diff = Math.abs((maxValue - min) / maxValue);\n            if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n                return 0;\n            }\n\n            axisMax = Math.min(0, maxValue - ((min - maxValue) / 2));\n        } else {\n            axisMax = max;\n        }\n\n        return axisMax;\n    }\n\n    function floor(value, step) {\n        return round(Math.floor(value / step) * step, DEFAULT_PRECISION);\n    }\n\n    function ceil(value, step) {\n        return round(Math.ceil(value / step) * step, DEFAULT_PRECISION);\n    }\n\n    function limitCoordinate(value) {\n        return Math.max(Math.min(value, COORDINATE_LIMIT), -COORDINATE_LIMIT);\n    }\n\n    var MIN_VALUE_RANGE$1 = Math.pow(10, -DEFAULT_PRECISION + 1);\n\n    var NumericAxis = Axis.extend({\n        init: function(seriesMin, seriesMax, options, chartService) {\n            Axis.fn.init.call(this, $.extend({}, options, {\n                seriesMin: seriesMin,\n                seriesMax: seriesMax\n            }), chartService);\n        },\n\n        initUserOptions: function(options) {\n            var autoOptions = autoAxisOptions(options.seriesMin, options.seriesMax, options);\n            this.totalOptions = totalAxisOptions(autoOptions, options);\n\n            return axisOptions(autoOptions, options);\n        },\n\n        initFields: function() {\n            this.totalMin = this.totalOptions.min;\n            this.totalMax = this.totalOptions.max;\n            this.totalMajorUnit = this.totalOptions.majorUnit;\n            this.seriesMin = this.options.seriesMin;\n            this.seriesMax = this.options.seriesMax;\n        },\n\n        clone: function() {\n            return new NumericAxis(\n                this.seriesMin,\n                this.seriesMax,\n                $.extend({}, this.options),\n                this.chartService\n            );\n        },\n\n        startValue: function() {\n            return 0;\n        },\n\n        range: function() {\n            var options = this.options;\n            return { min: options.min, max: options.max };\n        },\n\n        getDivisions: function(stepValue) {\n            if (stepValue === 0) {\n                return 1;\n            }\n\n            var options = this.options;\n            var range = options.max - options.min;\n\n            return Math.floor(round(range / stepValue, COORD_PRECISION)) + 1;\n        },\n\n        getTickPositions: function(unit, skipUnit) {\n            var options = this.options;\n            var ref = this.lineInfo();\n            var axisDir = ref.axisDir;\n            var axisOrigin = ref.axisOrigin;\n            var lineBox = ref.lineBox;\n            var lineSize = ref.lineSize;\n            var range = options.max - options.min;\n            var scale = lineSize / range;\n            var step = unit * scale;\n            var divisions = this.getDivisions(unit);\n            var positions = [];\n            var pos = lineBox[axisOrigin];\n            var skipStep = 0;\n\n            if (skipUnit) {\n                skipStep = skipUnit / unit;\n            }\n\n            for (var idx = 0; idx < divisions; idx++) {\n                if (idx % skipStep !== 0) {\n                    positions.push(round(pos, COORD_PRECISION));\n                }\n\n                pos = pos + step * axisDir;\n            }\n\n            return positions;\n        },\n\n        getMajorTickPositions: function() {\n            return this.getTickPositions(this.options.majorUnit);\n        },\n\n        getMinorTickPositions: function() {\n            return this.getTickPositions(this.options.minorUnit);\n        },\n\n        getSlot: function(a, b, limit) {\n            if (limit === void 0) { limit = false; }\n\n            var options = this.options;\n            var ref = this.lineInfo();\n            var axis = ref.axis;\n            var axisDir = ref.axisDir;\n            var lineBox = ref.lineBox;\n            var lineSize = ref.lineSize;\n            var lineStart = ref.lineStart;\n            var step = axisDir * (lineSize / (options.max - options.min));\n\n            var start = valueOrDefault(a, b || 0);\n            var end = valueOrDefault(b, a || 0);\n\n            if (limit) {\n                start = limitValue(start, options.min, options.max);\n                end = limitValue(end, options.min, options.max);\n            }\n\n            var p1 = Math.min(start, end) - options.min;\n            var p2 = Math.max(start, end) - options.min;\n\n            var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n            slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n            slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n            return slotBox;\n        },\n\n        getValue: function(point) {\n            var options = this.options;\n            var max = Number(options.max);\n            var min = Number(options.min);\n            var offset = this.pointOffset(point);\n            var valueOffset = offset * (max - min);\n\n            if (offset < 0 || offset > 1) {\n                return null;\n            }\n\n            var value = min + valueOffset;\n            return round(value, DEFAULT_PRECISION);\n        },\n\n        translateRange: function(delta) {\n            var options = this.options;\n            var vertical = options.vertical;\n            var reverse = options.reverse;\n            var max = options.max;\n            var min = options.min;\n            var ref = this.lineInfo();\n            var lineSize = ref.lineSize;\n            var range = max - min;\n            var scale = lineSize / range;\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n\n            if ((vertical || reverse) && !(vertical && reverse )) {\n                offset = -offset;\n            }\n\n            return {\n                min: min + offset,\n                max: max + offset,\n                offset: offset\n            };\n        },\n\n        labelsCount: function() {\n            return this.getDivisions(this.options.majorUnit);\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            var options = this.options;\n            var value = round(options.min + (index * options.majorUnit), DEFAULT_PRECISION);\n            var text = this.axisLabelText(value, labelOptions, labelContext);\n\n            return new AxisLabel(value, text, index, null, labelOptions);\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.range();\n            return range.min <= value && value <= range.max;\n        },\n\n        pan: function(delta) {\n            var range = this.translateRange(delta);\n            return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n        },\n\n        pointsRange: function(start, end) {\n            var startValue = this.getValue(start);\n            var endValue = this.getValue(end);\n            var min = Math.min(startValue, endValue);\n            var max = Math.max(startValue, endValue);\n\n            if (this.isValidRange(min, max)) {\n                return {\n                    min: min,\n                    max: max\n                };\n            }\n        },\n\n        scaleRange: function(scale, cursor) {\n            var position = Math.abs(this.pointOffset(cursor));\n            var range = this.options.max - this.options.min;\n            var delta = this.scaleToDelta(scale, range);\n            var minDelta = position * delta;\n            var maxDelta = (1 - position) * delta;\n            var min = round(this.options.min + minDelta, DEFAULT_PRECISION);\n            var max = round(this.options.max - maxDelta, DEFAULT_PRECISION);\n\n            if (max - min < MIN_VALUE_RANGE$1) {\n                max = min + MIN_VALUE_RANGE$1;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        zoomRange: function(scale, cursor) {\n            var ref = this;\n            var totalMin = ref.totalMin;\n            var totalMax = ref.totalMax;\n            var range = this.scaleRange(scale, cursor);\n\n            return {\n                min: limitValue(range.min, totalMin, totalMax),\n                max: limitValue(range.max, totalMin, totalMax),\n                narrowRange: false\n            };\n        },\n\n        isValidRange: function(min, max) {\n            return max - min > MIN_VALUE_RANGE$1;\n        }\n    });\n\n    function autoAxisOptions(seriesMin, seriesMax, options) {\n        var narrowRange = options.narrowRange;\n\n        var autoMin = autoAxisMin(seriesMin, seriesMax, narrowRange);\n        var autoMax = autoAxisMax(seriesMin, seriesMax, narrowRange);\n\n        var majorUnit = autoMajorUnit(autoMin, autoMax);\n        var autoOptions = {\n            majorUnit: majorUnit\n        };\n\n        if (options.roundToMajorUnit !== false) {\n            if (autoMin < 0 && remainderClose(autoMin, majorUnit, 1 / 3)) {\n                autoMin -= majorUnit;\n            }\n\n            if (autoMax > 0 && remainderClose(autoMax, majorUnit, 1 / 3)) {\n                autoMax += majorUnit;\n            }\n        }\n\n        autoOptions.min = floor(autoMin, majorUnit);\n        autoOptions.max = ceil(autoMax, majorUnit);\n\n        return autoOptions;\n    }\n\n    function totalAxisOptions(autoOptions, options) {\n        return {\n            min: defined(options.min) ? Math.min(autoOptions.min, options.min) : autoOptions.min,\n            max: defined(options.max) ? Math.max(autoOptions.max, options.max) : autoOptions.max,\n            majorUnit: autoOptions.majorUnit\n        };\n    }\n\n    function clearNullValues(options, fields) {\n        for (var idx = 0; idx < fields.length; idx++) {\n            var field = fields[idx];\n            if (options[field] === null) {\n                options[field] = undefined;\n            }\n        }\n    }\n\n    function axisOptions(autoOptions, userOptions) {\n        var options = userOptions;\n        var userSetMin, userSetMax;\n\n        if (userOptions) {\n            clearNullValues(userOptions, [ 'min', 'max' ]);\n\n            userSetMin = defined(userOptions.min);\n            userSetMax = defined(userOptions.max);\n\n            var userSetLimits = userSetMin || userSetMax;\n\n            if (userSetLimits) {\n                if (userOptions.min === userOptions.max) {\n                    if (userOptions.min > 0) {\n                        userOptions.min = 0;\n                    } else {\n                        userOptions.max = 1;\n                    }\n                }\n            }\n\n            if (userOptions.majorUnit) {\n                autoOptions.min = floor(autoOptions.min, userOptions.majorUnit);\n                autoOptions.max = ceil(autoOptions.max, userOptions.majorUnit);\n            } else if (userSetLimits) {\n                options = deepExtend(autoOptions, userOptions);\n\n                // Determine an auto major unit after min/max have been set\n                autoOptions.majorUnit = autoMajorUnit(options.min, options.max);\n            }\n        }\n\n        autoOptions.minorUnit = (options.majorUnit || autoOptions.majorUnit) / 5;\n\n        var result = deepExtend(autoOptions, options);\n        if (result.min >= result.max) {\n            if (userSetMin && !userSetMax) {\n                result.max = result.min + result.majorUnit;\n            } else if (!userSetMin && userSetMax) {\n                result.min = result.max - result.majorUnit;\n            }\n        }\n\n        return result;\n    }\n\n    function remainderClose(value, divisor, ratio) {\n        var remainder = round(Math.abs(value % divisor), DEFAULT_PRECISION);\n        var threshold = divisor * (1 - ratio);\n\n        return remainder === 0 || remainder > threshold;\n    }\n\n    setDefaultOptions(NumericAxis, {\n        type: \"numeric\",\n        min: 0,\n        max: 1,\n        vertical: true,\n        majorGridLines: {\n            visible: true,\n            width: 1,\n            color: BLACK\n        },\n        labels: {\n            format: \"#.####################\"\n        },\n        zIndex: 1\n    });\n\n    var MIN_VALUE_RANGE = 1000;\n\n    var DateValueAxis = Axis.extend({\n        init: function(seriesMin, seriesMax, axisOptions, chartService) {\n            var min = toDate(seriesMin);\n            var max = toDate(seriesMax);\n\n            var intlService = chartService.intl;\n            var options = axisOptions || {};\n            options = deepExtend(options || {}, {\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                axisCrossingValue: parseDates(intlService, options.axisCrossingValues || options.axisCrossingValue),\n                weekStartDay: firstDay(options, intlService)\n            });\n            options = applyDefaults(min, max, options);\n\n            Axis.fn.init.call(this, options, chartService);\n\n            this.intlService = intlService;\n            this.seriesMin = min;\n            this.seriesMax = max;\n\n            var weekStartDay = options.weekStartDay || 0;\n            this.totalMin = toTime(floorDate(toTime(min) - 1, options.baseUnit, weekStartDay));\n            this.totalMax = toTime(ceilDate(toTime(max) + 1, options.baseUnit, weekStartDay));\n        },\n\n        clone: function() {\n            return new DateValueAxis(this.seriesMin, this.seriesMax, $.extend({}, this.options), this.chartService);\n        },\n\n        range: function() {\n            var options = this.options;\n            return { min: options.min, max: options.max };\n        },\n\n        getDivisions: function(stepValue) {\n            var options = this.options;\n\n            return Math.floor(\n                duration(options.min, options.max, options.baseUnit) / stepValue + 1\n            );\n        },\n\n        getTickPositions: function(step) {\n            var options = this.options;\n            var ref = this.lineInfo();\n            var dir = ref.axisDir;\n            var lineSize = ref.lineSize;\n            var start = ref.lineStart;\n            var divisions = this.getDivisions(step);\n            var timeRange = dateDiff(options.max, options.min);\n            var scale = lineSize / timeRange;\n            var weekStartDay = options.weekStartDay || 0;\n\n            var positions = [ start ];\n            for (var i = 1; i < divisions; i++) {\n                var date = addDuration(options.min, i * step, options.baseUnit, weekStartDay);\n                var pos = start + dateDiff(date, options.min) * scale * dir;\n\n                positions.push(round(pos, COORD_PRECISION));\n            }\n\n            return positions;\n        },\n\n        getMajorTickPositions: function() {\n            return this.getTickPositions(this.options.majorUnit);\n        },\n\n        getMinorTickPositions: function() {\n            return this.getTickPositions(this.options.minorUnit);\n        },\n\n        getSlot: function(a, b, limit) {\n            return NumericAxis.prototype.getSlot.call(\n                this, parseDate(this.intlService, a), parseDate(this.intlService, b), limit\n            );\n        },\n\n        getValue: function(point) {\n            var value = NumericAxis.prototype.getValue.call(this, point);\n\n            return value !== null ? toDate(value) : null;\n        },\n\n        labelsCount: function() {\n            return this.getDivisions(this.options.majorUnit);\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            var options = this.options;\n            var offset = index * options.majorUnit;\n            var weekStartDay = options.weekStartDay || 0;\n            var date = options.min;\n\n            if (offset > 0) {\n                date = addDuration(date, offset, options.baseUnit, weekStartDay);\n            }\n\n            var unitFormat = labelOptions.dateFormats[options.baseUnit];\n            labelOptions.format = labelOptions.format || unitFormat;\n\n            var text = this.axisLabelText(date, labelOptions, labelContext);\n            return new AxisLabel(date, text, index, null, labelOptions);\n        },\n\n        translateRange: function(delta) {\n            var options = this.options;\n            var lineBox = this.lineBox();\n            var vertical = options.vertical;\n            var reverse = options.reverse;\n            var size = vertical ? lineBox.height() : lineBox.width();\n            var range = this.range();\n            var scale = size / dateDiff(range.max, range.min);\n\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n            if ((vertical || reverse) && !(vertical && reverse )) {\n                offset = -offset;\n            }\n\n            var from = addTicks(options.min, offset);\n            var to = addTicks(options.max, offset);\n\n            return {\n                min: from,\n                max: to,\n                offset: offset\n            };\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.range();\n\n            return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0;\n        },\n\n        pan: function(delta) {\n            var range = this.translateRange(delta, true);\n            var limittedRange = this.limitRange(toTime(range.min), toTime(range.max), this.totalMin, this.totalMax, range.offset);\n\n            if (limittedRange) {\n                return {\n                    min: toDate(limittedRange.min),\n                    max: toDate(limittedRange.max)\n                };\n            }\n        },\n\n        pointsRange: function(start, end) {\n            var startValue = this.getValue(start);\n            var endValue = this.getValue(end);\n            var min = Math.min(startValue, endValue);\n            var max = Math.max(startValue, endValue);\n\n            return {\n                min: toDate(min),\n                max: toDate(max)\n            };\n        },\n\n        scaleRange: function(scale, cursor) {\n            var position = Math.abs(this.pointOffset(cursor));\n            var range = this.options.max - this.options.min;\n            var delta = this.scaleToDelta(scale, range);\n            var minDelta = position * delta;\n            var maxDelta = (1 - position) * delta;\n            var min = toDate(toTime(this.options.min) + minDelta);\n            var max = toDate(toTime(this.options.max) - maxDelta);\n\n            if (max - min < MIN_VALUE_RANGE) {\n                max = toDate(toTime(min) + MIN_VALUE_RANGE);\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        zoomRange: function(scale, cursor) {\n            var range = this.scaleRange(scale, cursor);\n            var min = toDate(limitValue(toTime(range.min), this.totalMin, this.totalMax));\n            var max = toDate(limitValue(toTime(range.max), this.totalMin, this.totalMax));\n\n            return {\n                min: min,\n                max: max\n            };\n        }\n    });\n\n    function timeUnits(delta) {\n        var unit = HOURS;\n\n        if (delta >= TIME_PER_YEAR) {\n            unit = YEARS;\n        } else if (delta >= TIME_PER_MONTH) {\n            unit = MONTHS;\n        } else if (delta >= TIME_PER_WEEK) {\n            unit = WEEKS;\n        } else if (delta >= TIME_PER_DAY) {\n            unit = DAYS;\n        }\n\n        return unit;\n    }\n\n    function applyDefaults(seriesMin, seriesMax, options) {\n        var min = options.min || seriesMin;\n        var max = options.max || seriesMax;\n        var baseUnit = options.baseUnit || (max && min ? timeUnits(absoluteDateDiff(max, min)) : HOURS);\n        var baseUnitTime = TIME_PER_UNIT[baseUnit];\n        var weekStartDay = options.weekStartDay || 0;\n        var autoMin = floorDate(toTime(min) - 1, baseUnit, weekStartDay) || toDate(max);\n        var autoMax = ceilDate(toTime(max) + 1, baseUnit, weekStartDay);\n        var userMajorUnit = options.majorUnit ? options.majorUnit : undefined;\n        var majorUnit = userMajorUnit || ceil(\n                            autoMajorUnit(autoMin.getTime(), autoMax.getTime()),\n                            baseUnitTime\n                        ) / baseUnitTime;\n        var actualUnits = duration(autoMin, autoMax, baseUnit);\n        var totalUnits = ceil(actualUnits, majorUnit);\n        var unitsToAdd = totalUnits - actualUnits;\n        var head = Math.floor(unitsToAdd / 2);\n        var tail = unitsToAdd - head;\n\n        if (!options.baseUnit) {\n            delete options.baseUnit;\n        }\n\n        options.baseUnit = options.baseUnit || baseUnit;\n        options.min = options.min || addDuration(autoMin, -head, baseUnit, weekStartDay);\n        options.max = options.max || addDuration(autoMax, tail, baseUnit, weekStartDay);\n        options.minorUnit = options.minorUnit || majorUnit / 5;\n        options.majorUnit = majorUnit;\n\n        return options;\n    }\n\n    setDefaultOptions(DateValueAxis, {\n        type: DATE,\n        majorGridLines: {\n            visible: true,\n            width: 1,\n            color: BLACK\n        },\n        labels: {\n            dateFormats: DateLabelFormats\n        }\n    });\n\n    var DEFAULT_MAJOR_UNIT = 10;\n    var MIN_VALUE_RANGE$2 = 1e-6;\n\n    var LogarithmicAxis = Axis.extend({\n        init: function(seriesMin, seriesMax, options, chartService) {\n\n            var axisOptions = deepExtend({ majorUnit: DEFAULT_MAJOR_UNIT, min: seriesMin, max: seriesMax }, options);\n            var base = axisOptions.majorUnit;\n            var autoMax = autoAxisMax$1(seriesMax, base);\n            var autoMin = autoAxisMin$1(seriesMin, seriesMax, axisOptions);\n            var range = initRange(autoMin, autoMax, axisOptions, options);\n\n            axisOptions.max = range.max;\n            axisOptions.min = range.min;\n            axisOptions.minorUnit = options.minorUnit || round(base - 1, DEFAULT_PRECISION);\n\n            Axis.fn.init.call(this, axisOptions, chartService);\n\n            this.totalMin = defined(options.min) ? Math.min(autoMin, options.min) : autoMin;\n            this.totalMax = defined(options.max) ? Math.max(autoMax, options.max) : autoMax;\n            this.logMin = round(log(range.min, base), DEFAULT_PRECISION);\n            this.logMax = round(log(range.max, base), DEFAULT_PRECISION);\n            this.seriesMin = seriesMin;\n            this.seriesMax = seriesMax;\n\n            this.createLabels();\n        },\n\n        clone: function() {\n            return new LogarithmicAxis(\n                this.seriesMin,\n                this.seriesMax,\n                $.extend({}, this.options),\n                this.chartService\n            );\n        },\n\n        startValue: function() {\n            return this.options.min;\n        },\n\n        getSlot: function(a, b, limit) {\n            var ref = this;\n            var options = ref.options;\n            var logMin = ref.logMin;\n            var logMax = ref.logMax;\n            var base = options.majorUnit;\n            var min = options.min;\n            var max = options.max;\n            var ref$1 = this.lineInfo();\n            var axis = ref$1.axis;\n            var axisDir = ref$1.axisDir;\n            var lineBox = ref$1.lineBox;\n            var lineSize = ref$1.lineSize;\n            var lineStart = ref$1.lineStart;\n            var step = axisDir * (lineSize / (logMax - logMin));\n            var start = valueOrDefault(a, b || 1);\n            var end = valueOrDefault(b, a || 1);\n\n            if (start <= 0 || end <= 0) {\n                return null;\n            }\n\n            if (limit) {\n                start = limitValue(start, min, max);\n                end = limitValue(end, min, max);\n            }\n\n            start = log(start, base);\n            end = log(end, base);\n\n            var p1 = Math.min(start, end) - logMin;\n            var p2 = Math.max(start, end) - logMin;\n\n            var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n            slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n            slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n            return slotBox;\n        },\n\n        getValue: function(point) {\n            var ref = this;\n            var options = ref.options;\n            var logMin = ref.logMin;\n            var logMax = ref.logMax;\n            var base = options.majorUnit;\n            var ref$1 = this.lineInfo();\n            var axis = ref$1.axis;\n            var axisDir = ref$1.axisDir;\n            var lineStart = ref$1.lineStart;\n            var lineSize = ref$1.lineSize;\n            var step = ((logMax - logMin) / lineSize);\n            var offset = axisDir * (point[axis] - lineStart);\n            var valueOffset = offset * step;\n\n            if (offset < 0 || offset > lineSize) {\n                return null;\n            }\n\n            var value = logMin + valueOffset;\n\n            return round(Math.pow(base, value), DEFAULT_PRECISION);\n        },\n\n        range: function() {\n            var options = this.options;\n            return { min: options.min, max: options.max };\n        },\n\n        translateRange: function(delta) {\n            var ref = this;\n            var options = ref.options;\n            var logMin = ref.logMin;\n            var logMax = ref.logMax;\n            var reverse = options.reverse;\n            var vertical = options.vertical;\n            var base = options.majorUnit;\n            var lineBox = this.lineBox();\n            var size = vertical ? lineBox.height() : lineBox.width();\n            var scale = size / (logMax - logMin);\n            var offset = round(delta / scale, DEFAULT_PRECISION);\n\n            if ((vertical || reverse) && !(vertical && reverse )) {\n                offset = -offset;\n            }\n\n            return {\n                min: Math.pow(base, logMin + offset),\n                max: Math.pow(base, logMax + offset),\n                offset: offset\n            };\n        },\n\n        labelsCount: function() {\n            var floorMax = Math.floor(this.logMax);\n            var count = Math.floor(floorMax - this.logMin) + 1;\n\n            return count;\n        },\n\n        getMajorTickPositions: function() {\n            var ticks = [];\n\n            this.traverseMajorTicksPositions(function (position) {\n                ticks.push(position);\n            }, { step: 1, skip: 0 });\n\n            return ticks;\n        },\n\n        createTicks: function(lineGroup) {\n            var options = this.options;\n            var majorTicks = options.majorTicks;\n            var minorTicks = options.minorTicks;\n            var vertical = options.vertical;\n            var mirror = options.labels.mirror;\n            var lineBox = this.lineBox();\n            var ticks = [];\n            var tickLineOptions = {\n                // TODO\n                // _alignLines: options._alignLines,\n                vertical: vertical\n            };\n\n            function render(tickPosition, tickOptions) {\n                tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n                tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n                tickLineOptions.position = tickPosition;\n\n                lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n            }\n\n            if (majorTicks.visible) {\n                this.traverseMajorTicksPositions(render, majorTicks);\n            }\n\n            if (minorTicks.visible) {\n                this.traverseMinorTicksPositions(render, minorTicks);\n            }\n\n            return ticks;\n        },\n\n        createGridLines: function(altAxis) {\n            var options = this.options;\n            var minorGridLines = options.minorGridLines;\n            var majorGridLines = options.majorGridLines;\n            var vertical = options.vertical;\n            var lineBox = altAxis.lineBox();\n            var lineOptions = {\n                lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n                lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n                vertical: vertical\n            };\n            var majorTicks = [];\n\n            var container = this.gridLinesVisual();\n            function render(tickPosition, gridLine) {\n                if (!inArray(tickPosition, majorTicks)) {\n                    lineOptions.position = tickPosition;\n                    container.append(createAxisGridLine(lineOptions, gridLine));\n\n                    majorTicks.push(tickPosition);\n                }\n            }\n\n            if (majorGridLines.visible) {\n                this.traverseMajorTicksPositions(render, majorGridLines);\n            }\n\n            if (minorGridLines.visible) {\n                this.traverseMinorTicksPositions(render, minorGridLines);\n            }\n\n            return container.children;\n        },\n\n        traverseMajorTicksPositions: function(callback, tickOptions) {\n            var ref = this.lineInfo();\n            var lineStart = ref.lineStart;\n            var step = ref.step;\n            var ref$1 = this;\n            var logMin = ref$1.logMin;\n            var logMax = ref$1.logMax;\n\n            for (var power = Math.ceil(logMin) + tickOptions.skip; power <= logMax; power += tickOptions.step) {\n                var position = round(lineStart + step * (power - logMin), DEFAULT_PRECISION);\n                callback(position, tickOptions);\n            }\n        },\n\n        traverseMinorTicksPositions: function(callback, tickOptions) {\n            var this$1$1 = this;\n\n            var ref = this.options;\n            var min = ref.min;\n            var max = ref.max;\n            var minorUnit = ref.minorUnit;\n            var base = ref.majorUnit;\n            var ref$1 = this.lineInfo();\n            var lineStart = ref$1.lineStart;\n            var step = ref$1.step;\n            var ref$2 = this;\n            var logMin = ref$2.logMin;\n            var logMax = ref$2.logMax;\n            var start = Math.floor(logMin);\n\n            for (var power = start; power < logMax; power++) {\n                var minorOptions = this$1$1._minorIntervalOptions(power);\n                for (var idx = tickOptions.skip; idx < minorUnit; idx += tickOptions.step) {\n                    var value = minorOptions.value + idx * minorOptions.minorStep;\n                    if (value > max) {\n                        break;\n                    }\n                    if (value >= min) {\n                        var position = round(lineStart + step * (log(value, base) - logMin), DEFAULT_PRECISION);\n                        callback(position, tickOptions);\n                    }\n                }\n            }\n        },\n\n        createAxisLabel: function(index, labelOptions, labelContext) {\n            var power = Math.ceil(this.logMin + index);\n            var value = Math.pow(this.options.majorUnit, power);\n            var text = this.axisLabelText(value, labelOptions, labelContext);\n\n            return new AxisLabel(value, text, index, null, labelOptions);\n        },\n\n        shouldRenderNote: function(value) {\n            var range = this.range();\n            return range.min <= value && value <= range.max;\n        },\n\n        pan: function(delta) {\n            var range = this.translateRange(delta);\n            return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n        },\n\n        pointsRange: function(start, end) {\n            var startValue = this.getValue(start);\n            var endValue = this.getValue(end);\n            var min = Math.min(startValue, endValue);\n            var max = Math.max(startValue, endValue);\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        scaleRange: function(scale, cursor) {\n            var ref = this.options;\n            var base = ref.majorUnit;\n            var logMin = log(this.options.min, base);\n            var logMax = log(this.options.max, base);\n            var position = Math.abs(this.pointOffset(cursor));\n            var range = logMax - logMin;\n            var delta = this.scaleToDelta(scale, range);\n            var min = Math.pow(base, logMin + position * delta);\n            var max = Math.pow(base, logMax - (1 - position) * delta);\n\n            if (max - min < MIN_VALUE_RANGE$2) {\n                max = min + MIN_VALUE_RANGE$2;\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        },\n\n        zoomRange: function(scale, cursor) {\n            var range = this.scaleRange(scale, cursor);\n            var ref = this;\n            var totalMin = ref.totalMin;\n            var totalMax = ref.totalMax;\n\n            return {\n                min: limitValue(range.min, totalMin, totalMax),\n                max: limitValue(range.max, totalMin, totalMax)\n            };\n        },\n\n        _minorIntervalOptions: function(power) {\n            var ref = this.options;\n            var minorUnit = ref.minorUnit;\n            var base = ref.majorUnit;\n            var value = Math.pow(base, power);\n            var nextValue = Math.pow(base, power + 1);\n            var difference = nextValue - value;\n            var minorStep = difference / minorUnit;\n\n            return {\n                value: value,\n                minorStep: minorStep\n            };\n        },\n\n        lineInfo: function() {\n            var info = Axis.fn.lineInfo.call(this);\n            info.step = info.axisDir * (info.lineSize / (this.logMax - this.logMin));\n\n            return info;\n        }\n    });\n\n    function initRange(autoMin, autoMax, axisOptions, options) {\n        var min = axisOptions.min;\n        var max = axisOptions.max;\n\n        if (defined(axisOptions.axisCrossingValue) && axisOptions.axisCrossingValue <= 0) {\n            throwNegativeValuesError();\n        }\n\n        if (!defined(options.max)) {\n            max = autoMax;\n        } else if (options.max <= 0) {\n            throwNegativeValuesError();\n        }\n\n        if (!defined(options.min)) {\n            min = autoMin;\n        } else if (options.min <= 0) {\n            throwNegativeValuesError();\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    }\n\n    function autoAxisMin$1(min, max, options) {\n        var base = options.majorUnit;\n        var autoMin = min;\n        if (min <= 0) {\n            autoMin = max <= 1 ? Math.pow(base, -2) : 1;\n        } else if (!options.narrowRange) {\n            autoMin = Math.pow(base, Math.floor(log(min, base)));\n        }\n        return autoMin;\n    }\n\n    function autoAxisMax$1(max, base) {\n        var logMaxRemainder = round(log(max, base), DEFAULT_PRECISION) % 1;\n        var autoMax;\n        if (max <= 0) {\n            autoMax = base;\n        } else if (logMaxRemainder !== 0 && (logMaxRemainder < 0.3 || logMaxRemainder > 0.9)) {\n            autoMax = Math.pow(base, log(max, base) + 0.2);\n        } else {\n            autoMax = Math.pow(base, Math.ceil(log(max, base)));\n        }\n\n        return autoMax;\n    }\n\n    function throwNegativeValuesError() {\n        throw new Error(\"Non positive values cannot be used for a logarithmic axis\");\n    }\n\n    function log(x, base) {\n        return Math.log(x) / Math.log(base);\n    }\n\n    setDefaultOptions(LogarithmicAxis, {\n        type: \"log\",\n        majorUnit: DEFAULT_MAJOR_UNIT,\n        minorUnit: 1,\n        axisCrossingValue: 1,\n        vertical: true,\n        majorGridLines: {\n            visible: true,\n            width: 1,\n            color: BLACK\n        },\n        zIndex: 1,\n        _deferLabels: true\n    });\n\n    var GridLinesMixin = {\n        createGridLines: function(altAxis) {\n            var options = this.options;\n            var radius = Math.abs(this.box.center().y - altAxis.lineBox().y1);\n            var gridLines = [];\n            var skipMajor = false;\n            var majorAngles, minorAngles;\n\n            if (options.majorGridLines.visible) {\n                majorAngles = this.majorGridLineAngles(altAxis);\n                skipMajor = true;\n\n                gridLines = this.renderMajorGridLines(\n                    majorAngles, radius, options.majorGridLines\n                );\n            }\n\n            if (options.minorGridLines.visible) {\n                minorAngles = this.minorGridLineAngles(altAxis, skipMajor);\n\n                append(gridLines, this.renderMinorGridLines(\n                    minorAngles, radius, options.minorGridLines, altAxis, skipMajor\n                ));\n            }\n\n            return gridLines;\n        },\n\n        renderMajorGridLines: function(angles, radius, options) {\n            return this.renderGridLines(angles, radius, options);\n        },\n\n        renderMinorGridLines: function(angles, radius, options, altAxis, skipMajor) {\n            var radiusCallback = this.radiusCallback && this.radiusCallback(radius, altAxis, skipMajor);\n            return this.renderGridLines(angles, radius, options, radiusCallback);\n        },\n\n        renderGridLines: function(angles, radius, options, radiusCallback) {\n            var style = {\n                stroke: {\n                    width: options.width,\n                    color: options.color,\n                    dashType: options.dashType\n                }\n            };\n\n            var center = this.box.center();\n            var circle = new Circle([ center.x, center.y ], radius);\n            var container = this.gridLinesVisual();\n\n            for (var i = 0; i < angles.length; i++) {\n                var line = new Path(style);\n                if (radiusCallback) {\n                    circle.radius = radiusCallback(angles[i]);\n                }\n\n                line.moveTo(circle.center)\n                    .lineTo(circle.pointAt(angles[i] + 180));\n\n                container.append(line);\n            }\n\n            return container.children;\n        },\n\n        gridLineAngles: function(altAxis, size, skip, step, skipAngles) {\n            var this$1$1 = this;\n\n            var divs = this.intervals(size, skip, step, skipAngles);\n            var options = altAxis.options;\n            var altAxisVisible = options.visible && (options.line || {}).visible !== false;\n\n            return map(divs, function (d) {\n                var alpha = this$1$1.intervalAngle(d);\n\n                if (!altAxisVisible || alpha !== 90) {\n                    return alpha;\n                }\n            });\n        }\n    };\n\n    var RadarCategoryAxis = CategoryAxis.extend({\n        range: function() {\n            return { min: 0, max: this.options.categories.length };\n        },\n\n        reflow: function(box) {\n            this.box = box;\n            this.reflowLabels();\n        },\n\n        lineBox: function() {\n            return this.box;\n        },\n\n        reflowLabels: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var labels = ref.labels;\n            var labelOptions = ref.options.labels;\n            var skip = labelOptions.skip || 0;\n            var step = labelOptions.step || 1;\n            var measureBox = new Box();\n\n            for (var i = 0; i < labels.length; i++) {\n                labels[i].reflow(measureBox);\n                var labelBox = labels[i].box;\n\n                labels[i].reflow(this$1$1.getSlot(skip + i * step).adjacentBox(\n                    0, labelBox.width(), labelBox.height()\n                ));\n            }\n        },\n\n        intervals: function(size, skipOption, stepOption, skipAngles) {\n            if (skipAngles === void 0) { skipAngles = false; }\n\n            var options = this.options;\n            var categories = options.categories.length;\n            var divCount = categories / size || 1;\n            var divAngle = 360 / divCount;\n            var skip = skipOption || 0;\n            var step = stepOption || 1;\n            var divs = [];\n            var angle = 0;\n\n            for (var i = skip; i < divCount; i += step) {\n                if (options.reverse) {\n                    angle = 360 - i * divAngle;\n                } else {\n                    angle = i * divAngle;\n                }\n\n                angle = round(angle, COORD_PRECISION) % 360;\n\n                if (!(skipAngles && inArray(angle, skipAngles))) {\n                    divs.push(angle);\n                }\n            }\n\n            return divs;\n        },\n\n        majorIntervals: function() {\n            return this.intervals(1);\n        },\n\n        minorIntervals: function() {\n            return this.intervals(0.5);\n        },\n\n        intervalAngle: function(interval) {\n            return (360 + interval + this.options.startAngle) % 360;\n        },\n\n        majorAngles: function() {\n            var this$1$1 = this;\n\n            return map(this.majorIntervals(), function (interval) { return this$1$1.intervalAngle(interval); });\n        },\n\n        createLine: function() {\n            return [];\n        },\n\n        majorGridLineAngles: function(altAxis) {\n            var majorGridLines = this.options.majorGridLines;\n            return this.gridLineAngles(altAxis, 1, majorGridLines.skip, majorGridLines.step);\n        },\n\n        minorGridLineAngles: function(altAxis, skipMajor) {\n            var ref = this.options;\n            var minorGridLines = ref.minorGridLines;\n            var majorGridLines = ref.majorGridLines;\n            var majorGridLineAngles = skipMajor ? this.intervals(1, majorGridLines.skip, majorGridLines.step) : null;\n\n            return this.gridLineAngles(altAxis, 0.5, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n        },\n\n        radiusCallback: function(radius, altAxis, skipMajor) {\n            if (altAxis.options.type !== ARC) {\n                var minorAngle = rad(360 / (this.options.categories.length * 2));\n                var minorRadius = Math.cos(minorAngle) * radius;\n                var majorAngles = this.majorAngles();\n\n                var radiusCallback = function(angle) {\n                    if (!skipMajor && inArray(angle, majorAngles)) {\n                        return radius;\n                    }\n\n                    return minorRadius;\n                };\n                return radiusCallback;\n            }\n        },\n\n        createPlotBands: function() {\n            var this$1$1 = this;\n\n            var plotBands = this.options.plotBands || [];\n\n            var group = this._plotbandGroup = new Group({\n                zIndex: -1\n            });\n\n            for (var i = 0; i < plotBands.length; i++) {\n                var band = plotBands[i];\n                var slot = this$1$1.plotBandSlot(band);\n                var singleSlot = this$1$1.getSlot(band.from);\n\n                var head = band.from - Math.floor(band.from);\n                slot.startAngle += head * singleSlot.angle;\n\n                var tail = Math.ceil(band.to) - band.to;\n                slot.angle -= (tail + head) * singleSlot.angle;\n\n                var ring = ShapeBuilder.current.createRing(slot, {\n                    fill: {\n                        color: band.color,\n                        opacity: band.opacity\n                    },\n                    stroke: {\n                        opacity: band.opacity\n                    }\n                });\n                group.append(ring);\n            }\n\n            this.appendVisual(group);\n        },\n\n        plotBandSlot: function(band) {\n            return this.getSlot(band.from, band.to - 1);\n        },\n\n        getSlot: function(from, to) {\n            var options = this.options;\n            var justified = options.justified;\n            var box = this.box;\n            var divs = this.majorAngles();\n            var totalDivs = divs.length;\n            var slotAngle = 360 / totalDivs;\n            var fromValue = from;\n\n            if (options.reverse && !justified) {\n                fromValue = (fromValue + 1) % totalDivs;\n            }\n\n            fromValue = limitValue(Math.floor(fromValue), 0, totalDivs - 1);\n            var slotStart = divs[fromValue];\n\n            if (justified) {\n                slotStart = slotStart - slotAngle / 2;\n\n                if (slotStart < 0) {\n                    slotStart += 360;\n                }\n            }\n\n            var toValue = limitValue(Math.ceil(to || fromValue), fromValue, totalDivs - 1);\n            var slots = toValue - fromValue + 1;\n            var angle = slotAngle * slots;\n\n            return new Ring(box.center(), 0, box.height() / 2, slotStart, angle);\n        },\n\n        slot: function(from, to) {\n            var slot = this.getSlot(from, to);\n            var startAngle = slot.startAngle + 180;\n            var endAngle = startAngle + slot.angle;\n\n            return new geometry.Arc([ slot.center.x, slot.center.y ], {\n                startAngle: startAngle,\n                endAngle: endAngle,\n                radiusX: slot.radius,\n                radiusY: slot.radius\n            });\n        },\n\n        pointCategoryIndex: function(point) {\n            var this$1$1 = this;\n\n            var length = this.options.categories.length;\n            var index = null;\n\n            for (var i = 0; i < length; i++) {\n                var slot = this$1$1.getSlot(i);\n                if (slot.containsPoint(point)) {\n                    index = i;\n                    break;\n                }\n            }\n\n            return index;\n        }\n    });\n\n    setDefaultOptions(RadarCategoryAxis, {\n        startAngle: 90,\n        labels: {\n            margin: getSpacing(10)\n        },\n        majorGridLines: {\n            visible: true\n        },\n        justified: true\n    });\n    deepExtend(RadarCategoryAxis.prototype, GridLinesMixin);\n\n    var PolarAxis = Axis.extend({\n        init: function(options, chartService) {\n            Axis.fn.init.call(this, options, chartService);\n\n            var instanceOptions = this.options;\n\n            instanceOptions.minorUnit = instanceOptions.minorUnit || instanceOptions.majorUnit / 2;\n        },\n\n        getDivisions: function(stepValue) {\n            return NumericAxis.prototype.getDivisions.call(this, stepValue) - 1;\n        },\n\n        reflow: function(box) {\n            this.box = box;\n            this.reflowLabels();\n        },\n\n        reflowLabels: function() {\n            var this$1$1 = this;\n\n            var ref = this;\n            var options = ref.options;\n            var labels = ref.labels;\n            var labelOptions = ref.options.labels;\n            var skip = labelOptions.skip || 0;\n            var step = labelOptions.step || 1;\n\n            var measureBox = new Box();\n            var divs = this.intervals(options.majorUnit, skip, step);\n\n            for (var i = 0; i < labels.length; i++) {\n                labels[i].reflow(measureBox);\n                var labelBox = labels[i].box;\n\n                labels[i].reflow(this$1$1.getSlot(divs[i]).adjacentBox(0, labelBox.width(), labelBox.height()));\n            }\n        },\n\n        lineBox: function() {\n            return this.box;\n        },\n\n        intervals: function(size, skipOption, stepOption, skipAngles) {\n            if (skipAngles === void 0) { skipAngles = false; }\n\n            var min = this.options.min;\n            var divisions = this.getDivisions(size);\n            var divs = [];\n            var skip = skipOption || 0;\n            var step = stepOption || 1;\n\n            for (var i = skip; i < divisions; i += step) {\n                var current = (360 + min + i * size) % 360;\n                if (!(skipAngles && inArray(current, skipAngles))) {\n                    divs.push(current);\n                }\n            }\n\n            return divs;\n        },\n\n        majorIntervals: function() {\n            return this.intervals(this.options.majorUnit);\n        },\n\n        minorIntervals: function() {\n            return this.intervals(this.options.minorUnit);\n        },\n\n        intervalAngle: function(i) {\n            return (540 - i - this.options.startAngle) % 360;\n        },\n\n        createLine: function() {\n            return [];\n        },\n\n        majorGridLineAngles: function(altAxis) {\n            var majorGridLines = this.options.majorGridLines;\n            return this.gridLineAngles(altAxis, this.options.majorUnit, majorGridLines.skip, majorGridLines.step);\n        },\n\n        minorGridLineAngles: function(altAxis, skipMajor) {\n            var options = this.options;\n            var minorGridLines = options.minorGridLines;\n            var majorGridLines = options.majorGridLines;\n            var majorGridLineAngles = skipMajor ? this.intervals(options.majorUnit, majorGridLines.skip, majorGridLines.step) : null;\n\n            return this.gridLineAngles(altAxis, options.minorUnit, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n        },\n\n        plotBandSlot: function(band) {\n            return this.getSlot(band.from, band.to);\n        },\n\n        getSlot: function(a, b) {\n            var ref = this;\n            var options = ref.options;\n            var box = ref.box;\n            var startAngle = options.startAngle;\n            var start = limitValue(a, options.min, options.max);\n            var end = limitValue(b || start, start, options.max);\n\n            if (options.reverse) {\n                start *= -1;\n                end *= -1;\n            }\n\n            start = (540 - start - startAngle) % 360;\n            end = (540 - end - startAngle) % 360;\n\n            if (end < start) {\n                var tmp = start;\n                start = end;\n                end = tmp;\n            }\n\n            return new Ring(box.center(), 0, box.height() / 2, start, end - start);\n        },\n\n        slot: function(from, to) {\n            if (to === void 0) { to = from; }\n\n            var options = this.options;\n            var start = 360 - options.startAngle;\n            var slot = this.getSlot(from, to);\n            var min = Math.min(from, to);\n            var max = Math.max(from, to);\n            var startAngle, endAngle;\n\n            if (options.reverse) {\n                startAngle = min;\n                endAngle = max;\n            } else {\n                startAngle = 360 - max;\n                endAngle = 360 - min;\n            }\n\n            startAngle = (startAngle + start) % 360;\n            endAngle = (endAngle + start) % 360;\n\n            return new geometry.Arc([ slot.center.x, slot.center.y ], {\n                startAngle: startAngle,\n                endAngle: endAngle,\n                radiusX: slot.radius,\n                radiusY: slot.radius\n            });\n        },\n\n        getValue: function(point) {\n            var options = this.options;\n            var center = this.box.center();\n            var dx = point.x - center.x;\n            var dy = point.y - center.y;\n            var theta = Math.round(deg(Math.atan2(dy, dx)));\n            var start = options.startAngle;\n\n            if (!options.reverse) {\n                theta *= -1;\n                start *= -1;\n            }\n\n            return (theta + start + 360) % 360;\n        },\n\n        valueRange: function() {\n            return {\n                min: 0,\n                max: Math.PI * 2\n            };\n        }\n    });\n\n    setDefaultOptions(PolarAxis, {\n        type: \"polar\",\n        startAngle: 0,\n        reverse: false,\n        majorUnit: 60,\n        min: 0,\n        max: 360,\n        labels: {\n            margin: getSpacing(10)\n        },\n        majorGridLines: {\n            color: BLACK,\n            visible: true,\n            width: 1\n        },\n        minorGridLines: {\n            color: \"#aaa\"\n        }\n    });\n\n    deepExtend(PolarAxis.prototype, GridLinesMixin, {\n        createPlotBands: RadarCategoryAxis.prototype.createPlotBands,\n        majorAngles: RadarCategoryAxis.prototype.majorAngles,\n        range: NumericAxis.prototype.range,\n        labelsCount: NumericAxis.prototype.labelsCount,\n        createAxisLabel: NumericAxis.prototype.createAxisLabel\n    });\n\n    var RadarNumericAxisMixin = {\n        options: {\n            majorGridLines: {\n                visible: true\n            }\n        },\n\n        createPlotBands: function() {\n            var this$1$1 = this;\n\n            var ref = this.options;\n            var type = ref.majorGridLines.type;\n            var plotBands = ref.plotBands; if (plotBands === void 0) { plotBands = []; }\n            var altAxis = this.plotArea.polarAxis;\n            var majorAngles = altAxis.majorAngles();\n            var center = altAxis.box.center();\n            var group = this._plotbandGroup = new Group({\n                zIndex: -1\n            });\n\n            for (var i = 0; i < plotBands.length; i++) {\n                var band = plotBands[i];\n                var bandStyle = {\n                    fill: {\n                        color: band.color,\n                        opacity: band.opacity\n                    },\n                    stroke: {\n                        opacity: band.opacity\n                    }\n                };\n\n                var slot = this$1$1.getSlot(band.from, band.to, true);\n                var ring = new Ring(center, center.y - slot.y2, center.y - slot.y1, 0, 360);\n\n                var shape = (void 0);\n                if (type === ARC) {\n                    shape = ShapeBuilder.current.createRing(ring, bandStyle);\n                } else {\n                    shape = Path.fromPoints(this$1$1.plotBandPoints(ring, majorAngles), bandStyle).close();\n                }\n\n                group.append(shape);\n            }\n\n            this.appendVisual(group);\n        },\n\n        plotBandPoints: function(ring, angles) {\n            var innerPoints = [];\n            var outerPoints = [];\n            var center = [ ring.center.x, ring.center.y ];\n            var innerCircle = new Circle(center, ring.innerRadius);\n            var outerCircle = new Circle(center, ring.radius);\n\n            for (var i = 0; i < angles.length; i++) {\n                innerPoints.push(innerCircle.pointAt(angles[i] + 180));\n                outerPoints.push(outerCircle.pointAt(angles[i] + 180));\n            }\n\n            innerPoints.reverse();\n            innerPoints.push(innerPoints[0]);\n            outerPoints.push(outerPoints[0]);\n\n            return outerPoints.concat(innerPoints);\n        },\n\n        createGridLines: function(altAxis) {\n            var options = this.options;\n            var majorTicks = this.radarMajorGridLinePositions();\n            var majorAngles = altAxis.majorAngles();\n            var center = altAxis.box.center();\n            var gridLines = [];\n\n            if (options.majorGridLines.visible) {\n                gridLines = this.renderGridLines(\n                    center, majorTicks, majorAngles, options.majorGridLines\n                );\n            }\n\n            if (options.minorGridLines.visible) {\n                var minorTicks = this.radarMinorGridLinePositions();\n                append(gridLines, this.renderGridLines(\n                    center, minorTicks, majorAngles, options.minorGridLines\n                ));\n            }\n\n            return gridLines;\n        },\n\n        renderGridLines: function(center, ticks, angles, options) {\n            var style = {\n                stroke: {\n                    width: options.width,\n                    color: options.color,\n                    dashType: options.dashType\n                }\n            };\n            var skip = options.skip; if (skip === void 0) { skip = 0; }\n            var step = options.step; if (step === void 0) { step = 0; }\n            var container = this.gridLinesVisual();\n\n            for (var tickIx = skip; tickIx < ticks.length; tickIx += step) {\n                var tickRadius = center.y - ticks[tickIx];\n                if (tickRadius > 0) {\n                    var circle = new Circle([ center.x, center.y ], tickRadius);\n                    if (options.type === ARC) {\n                        container.append(new drawing.Circle(circle, style));\n                    } else {\n                        var line = new Path(style);\n                        for (var angleIx = 0; angleIx < angles.length; angleIx++) {\n                            line.lineTo(circle.pointAt(angles[angleIx] + 180));\n                        }\n\n                        line.close();\n                        container.append(line);\n                    }\n                }\n            }\n\n            return container.children;\n        },\n\n        getValue: function(point) {\n            var lineBox = this.lineBox();\n            var altAxis = this.plotArea.polarAxis;\n            var majorAngles = altAxis.majorAngles();\n            var center = altAxis.box.center();\n            var radius = point.distanceTo(center);\n            var distance = radius;\n\n            if (this.options.majorGridLines.type !== ARC && majorAngles.length > 1) {\n                var dx = point.x - center.x;\n                var dy = point.y - center.y;\n                var theta = (deg(Math.atan2(dy, dx)) + 540) % 360;\n\n                majorAngles.sort(function(a, b) {\n                    return angularDistance(a, theta) - angularDistance(b, theta);\n                });\n\n                // Solve triangle (center, point, axis X) using one side (radius) and two angles.\n                // Angles are derived from triangle (center, point, gridline X)\n                var midAngle = angularDistance(majorAngles[0], majorAngles[1]) / 2;\n                var alpha = angularDistance(theta, majorAngles[0]);\n                var gamma = 90 - midAngle;\n                var beta = 180 - alpha - gamma;\n\n                distance = radius * (Math.sin(rad(beta)) / Math.sin(rad(gamma)));\n            }\n\n            return this.axisType().prototype.getValue.call(\n                this, new Point(lineBox.x1, lineBox.y2 - distance)\n            );\n        }\n    };\n\n    function angularDistance(a, b) {\n        return 180 - Math.abs(Math.abs(a - b) - 180);\n    }\n\n    var RadarNumericAxis = NumericAxis.extend({\n        radarMajorGridLinePositions: function() {\n            return this.getTickPositions(this.options.majorUnit);\n        },\n\n        radarMinorGridLinePositions: function() {\n            var options = this.options;\n            var minorSkipStep = 0;\n\n            if (options.majorGridLines.visible) {\n                minorSkipStep = options.majorUnit;\n            }\n            return this.getTickPositions(options.minorUnit, minorSkipStep);\n        },\n\n        axisType: function() {\n            return NumericAxis;\n        }\n    });\n\n    deepExtend(RadarNumericAxis.prototype, RadarNumericAxisMixin);\n\n    var RadarLogarithmicAxis = LogarithmicAxis.extend({\n        radarMajorGridLinePositions: function() {\n            var positions = [];\n\n            this.traverseMajorTicksPositions(function(position) {\n                positions.push(position);\n            }, this.options.majorGridLines);\n\n            return positions;\n        },\n\n        radarMinorGridLinePositions: function() {\n            var positions = [];\n\n            this.traverseMinorTicksPositions(function(position) {\n                positions.push(position);\n            }, this.options.minorGridLines);\n\n            return positions;\n        },\n\n        axisType: function() {\n            return LogarithmicAxis;\n        }\n    });\n\n    deepExtend(RadarLogarithmicAxis.prototype, RadarNumericAxisMixin);\n\n    var WEIGHT = 0.333;\n    var EXTREMUM_ALLOWED_DEVIATION = 0.01;\n\n    var CurveProcessor = Class.extend({\n        init: function(closed) {\n\n            this.closed = closed;\n        },\n\n        process: function(dataPoints) {\n            var this$1$1 = this;\n\n            var points = dataPoints.slice(0);\n            var segments = [];\n            var closed = this.closed;\n            var length = points.length;\n\n            if (length > 2) {\n                this.removeDuplicates(0, points);\n                length = points.length;\n            }\n\n            if (length < 2 || (length === 2 && points[0].equals(points[1]))) {\n                return segments;\n            }\n\n            var p0 = points[0];\n            var p1 = points[1];\n            var p2 = points[2];\n\n            segments.push(new Segment(p0));\n\n            while (p0.equals(points[length - 1])) {\n                closed = true;\n                points.pop();\n                length--;\n            }\n\n            if (length === 2) {\n                var tangent = this.tangent(p0,p1, X, Y);\n\n                last(segments).controlOut(\n                    this.firstControlPoint(tangent, p0, p1, X, Y)\n                );\n\n                segments.push(new Segment(\n                    p1,\n                    this.secondControlPoint(tangent, p0, p1, X, Y)\n                ));\n\n                return segments;\n            }\n\n            var initialControlPoint, lastControlPoint;\n\n            if (closed) {\n                p0 = points[length - 1]; p1 = points[0]; p2 = points[1];\n                var controlPoints = this.controlPoints(p0, p1, p2);\n                initialControlPoint = controlPoints[1];\n                lastControlPoint = controlPoints[0];\n            } else {\n                var tangent$1 = this.tangent(p0, p1, X,Y);\n                initialControlPoint = this.firstControlPoint(tangent$1, p0, p1, X, Y);\n            }\n\n            var cp0 = initialControlPoint;\n            for (var idx = 0; idx <= length - 3; idx++) {\n                this$1$1.removeDuplicates(idx, points);\n                length = points.length;\n                if (idx + 3 <= length) {\n                    p0 = points[idx]; p1 = points[idx + 1]; p2 = points[idx + 2];\n                    var controlPoints$1 = this$1$1.controlPoints(p0,p1,p2);\n\n                    last(segments).controlOut(cp0);\n                    cp0 = controlPoints$1[1];\n\n                    var cp1 = controlPoints$1[0];\n                    segments.push(new Segment(p1, cp1));\n                }\n            }\n\n            if (closed) {\n                p0 = points[length - 2]; p1 = points[length - 1]; p2 = points[0];\n                var controlPoints$2 = this.controlPoints(p0, p1, p2);\n\n                last(segments).controlOut(cp0);\n                segments.push(new Segment(\n                    p1,\n                    controlPoints$2[0]\n                ));\n\n                last(segments).controlOut(controlPoints$2[1]);\n                segments.push(new Segment(\n                    p2,\n                    lastControlPoint\n                ));\n            } else {\n                var tangent$2 = this.tangent(p1, p2, X, Y);\n\n                last(segments).controlOut(cp0);\n                segments.push(new Segment(\n                    p2,\n                    this.secondControlPoint(tangent$2, p1, p2, X, Y)\n                ));\n            }\n\n            return segments;\n        },\n\n        removeDuplicates: function(idx, points) {\n            while (points[idx + 1] && (points[idx].equals(points[idx + 1]) || points[idx + 1].equals(points[idx + 2]))) {\n                points.splice(idx + 1, 1);\n            }\n        },\n\n        invertAxis: function(p0, p1, p2) {\n            var invertAxis = false;\n\n            if (p0.x === p1.x) {\n                invertAxis = true;\n            } else if (p1.x === p2.x) {\n                if ((p1.y < p2.y && p0.y <= p1.y) || (p2.y < p1.y && p1.y <= p0.y)) {\n                    invertAxis = true;\n                }\n            } else {\n                var fn = this.lineFunction(p0,p1);\n                var y2 = this.calculateFunction(fn, p2.x);\n                if (!(p0.y <= p1.y && p2.y <= y2) &&\n                    !(p1.y <= p0.y && p2.y >= y2)) {\n                    invertAxis = true;\n                }\n            }\n\n            return invertAxis;\n        },\n\n        isLine: function(p0, p1, p2) {\n            var fn = this.lineFunction(p0, p1);\n            var y2 = this.calculateFunction(fn, p2.x);\n\n            return (p0.x === p1.x && p1.x === p2.x) || round(y2, 1) === round(p2.y, 1);\n        },\n\n        lineFunction: function(p1, p2) {\n            var a = (p2.y - p1.y) / (p2.x - p1.x);\n            var b = p1.y - a * p1.x;\n\n            return [ b, a ];\n        },\n\n        controlPoints: function(p0, p1, p2) {\n            var xField = X;\n            var yField = Y;\n            var restrict = false;\n            var switchOrientation = false;\n            var tangent;\n\n            if (this.isLine(p0, p1, p2)) {\n                tangent = this.tangent(p0, p1, X, Y);\n            } else {\n                var monotonic = {\n                    x: this.isMonotonicByField(p0, p1, p2, X),\n                    y: this.isMonotonicByField(p0, p1, p2, Y)\n                };\n\n                if (monotonic.x && monotonic.y) {\n                    tangent = this.tangent(p0, p2, X, Y);\n                    restrict = true;\n                } else {\n                    if (this.invertAxis(p0, p1, p2)) {\n                        xField = Y;\n                        yField = X;\n                    }\n\n                    if (monotonic[xField]) {\n                        tangent = 0;\n                    } else {\n                        var sign;\n                        if ((p2[yField] < p0[yField] && p0[yField] <= p1[yField]) ||\n                            (p0[yField] < p2[yField] && p1[yField] <= p0[yField])) {\n                            sign = numberSign((p2[yField] - p0[yField]) * (p1[xField] - p0[xField]));\n                        } else {\n                            sign = -numberSign((p2[xField] - p0[xField]) * (p1[yField] - p0[yField]));\n                        }\n\n                        tangent = EXTREMUM_ALLOWED_DEVIATION * sign;\n                        switchOrientation = true;\n                    }\n                }\n            }\n\n            var secondControlPoint = this.secondControlPoint(tangent, p0, p1, xField, yField);\n\n            if (switchOrientation) {\n                var oldXField = xField;\n                xField = yField;\n                yField = oldXField;\n            }\n\n            var firstControlPoint = this.firstControlPoint(tangent, p1, p2, xField, yField);\n\n            if (restrict) {\n                this.restrictControlPoint(p0, p1, secondControlPoint, tangent);\n                this.restrictControlPoint(p1, p2, firstControlPoint, tangent);\n            }\n\n            return [ secondControlPoint, firstControlPoint ];\n        },\n\n        restrictControlPoint: function(p1, p2, cp, tangent) {\n            if (p1.y < p2.y) {\n                if (p2.y < cp.y) {\n                    cp.x = p1.x + (p2.y - p1.y) / tangent;\n                    cp.y = p2.y;\n                } else if (cp.y < p1.y) {\n                    cp.x = p2.x - (p2.y - p1.y) / tangent;\n                    cp.y = p1.y;\n                }\n            } else {\n                if (cp.y < p2.y) {\n                    cp.x = p1.x - (p1.y - p2.y) / tangent;\n                    cp.y = p2.y;\n                } else if (p1.y < cp.y) {\n                    cp.x = p2.x + (p1.y - p2.y) / tangent;\n                    cp.y = p1.y;\n                }\n            }\n        },\n\n        tangent: function(p0, p1, xField, yField) {\n            var x = p1[xField] - p0[xField];\n            var y = p1[yField] - p0[yField];\n            var tangent;\n\n            if (x === 0) {\n                tangent = 0;\n            } else {\n                tangent = y / x;\n            }\n\n            return tangent;\n        },\n\n        isMonotonicByField: function(p0, p1, p2, field) {\n            return (p2[field] > p1[field] && p1[field] > p0[field]) ||\n                        (p2[field] < p1[field] && p1[field] < p0[field]);\n        },\n\n        firstControlPoint: function(tangent, p0, p3, xField, yField) {\n            var t1 = p0[xField];\n            var t2 = p3[xField];\n            var distance = (t2 - t1) * WEIGHT;\n\n            return this.point(t1 + distance, p0[yField] + distance * tangent, xField, yField);\n        },\n\n        secondControlPoint: function(tangent, p0, p3, xField, yField) {\n            var t1 = p0[xField];\n            var t2 = p3[xField];\n            var distance = (t2 - t1) * WEIGHT;\n\n            return this.point(t2 - distance, p3[yField] - distance * tangent, xField, yField);\n        },\n\n        point: function(xValue, yValue, xField, yField) {\n            var controlPoint = new geometry.Point();\n            controlPoint[xField] = xValue;\n            controlPoint[yField] = yValue;\n\n            return controlPoint;\n        },\n\n        calculateFunction: function(fn, x) {\n            var length = fn.length;\n            var result = 0;\n\n            for (var i = 0; i < length; i++) {\n                result += Math.pow(x,i) * fn[i];\n            }\n            return result;\n        }\n    });\n\n    function numberSign(value) {\n        return value <= 0 ? -1 : 1;\n    }\n\n    dataviz.Gradients = GRADIENTS;\n\n    kendo.deepExtend(kendo.dataviz, {\n        constants: constants,\n        services: services,\n        autoMajorUnit: autoMajorUnit,\n        Point: Point,\n        Box: Box,\n        Ring: Ring,\n        Sector: Sector,\n        ShapeBuilder: ShapeBuilder,\n        ShapeElement: ShapeElement,\n        ChartElement: ChartElement,\n        BoxElement: BoxElement,\n        RootElement: RootElement,\n        FloatElement: FloatElement,\n        Text: Text,\n        TextBox: TextBox,\n        Title: Title,\n        AxisLabel: AxisLabel,\n        Axis: Axis,\n        Note: Note,\n        CategoryAxis: CategoryAxis,\n        DateCategoryAxis: DateCategoryAxis,\n        DateValueAxis: DateValueAxis,\n        NumericAxis: NumericAxis,\n        LogarithmicAxis: LogarithmicAxis,\n        PolarAxis: PolarAxis,\n        RadarCategoryAxis: RadarCategoryAxis,\n        RadarNumericAxis: RadarNumericAxis,\n        RadarLogarithmicAxis: RadarLogarithmicAxis,\n        CurveProcessor: CurveProcessor,\n        rectToBox: rectToBox,\n        addClass: addClass,\n        removeClass: removeClass,\n        alignPathToPixel: alignPathToPixel,\n        clockwise: clockwise,\n        convertableToNumber: convertableToNumber,\n        deepExtend: deepExtend,\n        elementStyles: elementStyles,\n        getSpacing: getSpacing,\n        getTemplate: getTemplate,\n        getter: __common_getter_js,\n        grep: grep,\n        hasClasses: hasClasses,\n        HashMap: HashMap,\n        inArray: inArray,\n        interpolateValue: interpolateValue,\n        InstanceObserver: InstanceObserver,\n        isArray: isArray,\n        isFunction: isFunction,\n        isNumber: isNumber,\n        isObject: isObject,\n        isPlainObject: isPlainObject,\n        isString: isString,\n        map: map,\n        mousewheelDelta: mousewheelDelta,\n        FontLoader: FontLoader,\n        renderIcon: renderIcon,\n        setDefaultOptions: setDefaultOptions,\n        sparseArrayLimits: sparseArrayLimits,\n        styleValue: styleValue,\n        find: find,\n        elementScale: elementScale,\n        autoTextColor: autoTextColor,\n        createHashSet: createHashSet,\n        defaultErrorHandler: defaultErrorHandler,\n        keys: keys,\n        append: append,\n        bindEvents: bindEvents,\n        Class: Class,\n        defined: defined,\n        deg: deg,\n        elementOffset: elementOffset,\n        elementSize: elementSize,\n        eventCoordinates: eventCoordinates,\n        eventElement: eventElement,\n        hashKey: hashKey,\n        last: last,\n        limitValue: limitValue,\n        logToConsole: kendo.logToConsole,\n        objectKey: objectKey,\n        rad: rad,\n        round: round,\n        unbindEvents: unbindEvents,\n        valueOrDefault: valueOrDefault,\n        absoluteDateDiff: absoluteDateDiff,\n        addDuration: addDuration,\n        addTicks: addTicks,\n        ceilDate: ceilDate,\n        dateComparer: dateComparer,\n        dateDiff: dateDiff,\n        dateEquals: dateEquals,\n        dateIndex: dateIndex,\n        duration: duration,\n        floorDate: floorDate,\n        lteDateIndex: lteDateIndex,\n        startOfWeek: startOfWeek,\n        toDate: toDate,\n        parseDate: parseDate,\n        parseDates: parseDates,\n        toTime: toTime,\n        firstDay: firstDay\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        var dataviz = kendo.dataviz;\n        var services = dataviz.services;\n        var draw = kendo.drawing;\n\n        dataviz.SASS_THEMES = [\"sass\", \"default-v2\", \"bootstrap-v4\", \"material-v2\"];\n\n        dataviz.ExportMixin = {\n            extend: function(proto, skipLegacy) {\n                if (!proto.exportVisual) {\n                    throw new Error(\"Mixin target has no exportVisual method defined.\");\n                }\n\n                proto.exportSVG = this.exportSVG;\n                proto.exportImage = this.exportImage;\n                proto.exportPDF = this.exportPDF;\n\n                if (!skipLegacy) {\n                    proto.svg = this.svg;\n                    proto.imageDataURL = this.imageDataURL;\n                }\n            },\n\n            exportSVG: function(options) {\n                return draw.exportSVG(this.exportVisual(), options);\n            },\n\n            exportImage: function(options) {\n                return draw.exportImage(this.exportVisual(options), options);\n            },\n\n            exportPDF: function(options) {\n                return draw.exportPDF(this.exportVisual(), options);\n            },\n\n            svg: function() {\n                if (draw.svg.Surface) {\n                    return draw.svg.exportGroup(this.exportVisual());\n                } else {\n                    throw new Error(\"SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface\");\n                }\n            },\n\n            imageDataURL: function() {\n                if (!kendo.support.canvas) {\n                    return null;\n                }\n\n                if (draw.canvas.Surface) {\n                    var container = $(\"<div />\").css({\n                        display: \"none\",\n                        width: this.element.width(),\n                        height: this.element.height()\n                    }).appendTo(document.body);\n\n                    var surface = new draw.canvas.Surface(container[0]);\n                    surface.draw(this.exportVisual());\n                    var image = surface._rootElement.toDataURL();\n\n                    surface.destroy();\n                    container.remove();\n\n                    return image;\n                } else {\n                    throw new Error(\"Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface\");\n                }\n            }\n        };\n\n        services.IntlService.register({\n           format: function(format) {\n               return kendo.format.apply(null, [format].concat(Array.prototype.slice.call(arguments, 1)));\n           },\n           toString: kendo.toString,\n           parseDate: kendo.parseDate,\n           firstDay: function() {\n               return kendo.culture().calendars.standard.firstDay;\n           }\n        });\n\n        services.TemplateService.register({\n           compile: kendo.template\n        });\n\n        dataviz.Point2D = dataviz.Point;\n        dataviz.Box2D = dataviz.Box;\n        dataviz.mwDelta = function(e) {\n            return dataviz.mousewheelDelta(e.originalEvent);\n        };\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n        id: \"dataviz.core\",\n        name: \"Core\",\n        description: \"The DataViz core functions\",\n        category: \"dataviz\",\n        depends: [ \"core\", \"drawing\" ],\n        hidden: true\n    };\n\n    var kendo$1 = kendo;\n\n    return kendo$1;\n\n}));\n"]}